/*! For license information please see card.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./card/entry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _extra__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./extra */ "./card/extra.js");\n/* harmony import */ var _extra__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_extra__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _guozhan__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./guozhan */ "./card/guozhan.js");\n/* harmony import */ var _guozhan__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_guozhan__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _huajing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./huajing */ "./card/huajing.js");\n/* harmony import */ var _huajing__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_huajing__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _longlaoguan__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./longlaoguan */ "./card/longlaoguan.js");\n/* harmony import */ var _longlaoguan__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_longlaoguan__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _remark__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./remark */ "./card/remark.js");\n/* harmony import */ var _remark__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_remark__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _sp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./sp */ "./card/sp.js");\n/* harmony import */ var _sp__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_sp__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _standard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./standard */ "./card/standard.js");\n/* harmony import */ var _standard__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_standard__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _xingtian__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./xingtian */ "./card/xingtian.js");\n/* harmony import */ var _xingtian__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_xingtian__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _yingbian__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./yingbian */ "./card/yingbian.js");\n/* harmony import */ var _yingbian__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_yingbian__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _yunchou__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./yunchou */ "./card/yunchou.js");\n/* harmony import */ var _yunchou__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_yunchou__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _zhulu__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./zhulu */ "./card/zhulu.js");\n/* harmony import */ var _zhulu__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_zhulu__WEBPACK_IMPORTED_MODULE_10__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./card/entry.js?')},"./card/extra.js":()=>{eval("\r\ngame.import('card',function(lib,game,ui,get,ai,_status){\r\n\treturn {\r\n\t\tname:'extra',\r\n\t\tconnect:true,\r\n\t\tcard:{\r\n\t\t\tmuniu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip5',\r\n\t\t\t\tnomod:true,\r\n\t\t\t\tonEquip:function(){\r\n\t\t\t\t\tif(card&&card.cards&&card.cards.length){\r\n\t\t\t\t\t\tplayer.directgains(card.cards,null,'muniu');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.markSkill('muniu_skill');\r\n\t\t\t\t},\r\n\t\t\t\tforceDie:true,\r\n\t\t\t\tonLose:function(){\r\n\t\t\t\t\tdelete player.getStat('skill').muniu_skill;\r\n\t\t\t\t\tplayer.unmarkSkill('muniu_skill');\r\n\t\t\t\t\tif(!card||!card.cards||!card.cards.length) return;\r\n\t\t\t\t\tif((!event.getParent(2)||event.getParent(2).name!='swapEquip')&&(event.getParent().type!='equip'||event.getParent().swapEquip)){\r\n\t\t\t\t\t\tplayer.lose(card.cards,ui.discardPile);\r\n\t\t\t\t\t\tplayer.$throw(card.cards,1000);\r\n\t\t\t\t\t\tplayer.popup('muniu');\r\n\t\t\t\t\t\tgame.log(card,'掉落了',card.cards);\r\n\t\t\t\t\t\tcard.cards.length=0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tplayer.lose(card.cards,ui.special);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tclearLose:true,\r\n\t\t\t\tequipDelay:false,\r\n\t\t\t\tloseDelay:false,\r\n\t\t\t\tskills:['muniu_skill','muniu_skill7'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card){\r\n\t\t\t\t\t\tif(card.card) return 7+card.card.length;\r\n\t\t\t\t\t\treturn 7;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tjiu:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tnature:['ocean'],\r\n\t\t\t\ttype:\"basic\",\r\n\t\t\t\ttoself:true,\r\n\t\t\t\tenable:function(event,player){\r\n\t\t\t\t\t//return !player.hasSkill('jiu');\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tlianheng:true,\r\n\t\t\t\tlogv:false,\r\n\t\t\t\tsavable:function(card,player,dying){\r\n\t\t\t\t\treturn dying==player;\r\n\t\t\t\t},\r\n\t\t\t\tusable:1,\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tmodTarget:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target==player;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(typeof event.baseDamage!='number') event.baseDamage=1;\r\n\t\t\t\t\tif(target.isDying()||event.getParent(2).type=='dying'){\r\n\t\t\t\t\t\ttarget.recover(event.baseDamage);\r\n\t\t\t\t\t\tif(_status.currentPhase==target){\r\n\t\t\t\t\t\t\ttarget.getStat().card.jiu--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tgame.addVideo('jiuNode',target,true);\r\n\t\t\t\t\t\tif(cards&&cards.length){\r\n\t\t\t\t\t\t\tcard=cards[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!target.storage.jiu) target.storage.jiu=0;\r\n\t\t\t\t\t\ttarget.storage.jiu+=event.baseDamage;\r\n\t\t\t\t\t\tgame.broadcastAll(function(target,card,gain2){\r\n\t\t\t\t\t\t\ttarget.addSkill('jiu');\r\n\t\t\t\t\t\t\tif(!target.node.jiu&&lib.config.jiu_effect){\r\n\t\t\t\t\t\t\t\ttarget.node.jiu=ui.create.div('.playerjiu',target.node.avatar);\r\n\t\t\t\t\t\t\t\ttarget.node.jiu2=ui.create.div('.playerjiu',target.node.avatar2);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(gain2&&card.clone&&(card.clone.parentNode==target.parentNode||card.clone.parentNode==ui.arena)){\r\n\t\t\t\t\t\t\t\tcard.clone.moveDelete(target);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},target,card,target==targets[0]&&cards.length==1);\r\n\t\t\t\t\t\tif(target==targets[0]&&cards.length==1){\r\n\t\t\t\t\t\t\tif(card.clone&&(card.clone.parentNode==target.parentNode||card.clone.parentNode==ui.arena)){\r\n\t\t\t\t\t\t\t\tgame.addVideo('gain2',target,get.cardsInfo([card]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(get.nature(event.card)=='ocean'&&!target.hujia)\ttarget.changeHujia();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:function(card,i){\r\n\t\t\t\t\t\t\tif(_status.event.player.hp>1){\r\n\t\t\t\t\t\t\t\tif(i==0) return 4;\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(i==0) return 7.3;\r\n\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tvalue:function(card,player,i){\r\n\t\t\t\t\t\t\tif(player.hp>1){\r\n\t\t\t\t\t\t\t\tif(i==0) return 5;\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(i==0) return 7.3;\r\n\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\torder:function(){\r\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(target&&target.isDying()) return 2;\r\n\t\t\t\t\t\t\tif(target&&!target.isPhaseUsing()) return 0;\r\n\t\t\t\t\t\t\tif(lib.config.mode=='stone'&&!player.isMin()){\r\n\t\t\t\t\t\t\t\tif(player.getActCount()+1>=player.actcount) return 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar shas=player.getCards('h','sha');\r\n\t\t\t\t\t\t\tif(shas.length>1&&(player.getCardUsable('sha')>1||player.countCards('h','zhuge'))){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tshas.sort(function(a,b){\r\n\t\t\t\t\t\t\t\treturn get.order(b)-get.order(a);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tvar card;\r\n\t\t\t\t\t\t\tif(shas.length){\r\n\t\t\t\t\t\t\t\tfor(var i=0;i<shas.length;i++){\r\n\t\t\t\t\t\t\t\t\tif(lib.filter.filterCard(shas[i],target)){\r\n\t\t\t\t\t\t\t\t\t\tcard=shas[i];break;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(player.hasSha()&&player.needsToDiscard()){\r\n\t\t\t\t\t\t\t\tif(player.countCards('h','hufu')!=1){\r\n\t\t\t\t\t\t\t\t\tcard={name:'sha'};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(card){\r\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\t\treturn (get.attitude(target,current)<0&&\r\n\t\t\t\t\t\t\t\t\t\ttarget.canUse(card,current,true,true)&&\r\n\t\t\t\t\t\t\t\t\t\t!current.hasSkillTag('filterDamage',null,{\r\n\t\t\t\t\t\t\t\t\t\t\tplayer:player,\r\n\t\t\t\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t\t\t\t\tjiu:true,\r\n\t\t\t\t\t\t\t\t\t\t})&&\r\n\t\t\t\t\t\t\t\t\t\tget.effect(current,card,target)>0);\r\n\t\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tsave:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thuogong:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tcardnature:'fire',\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(player!=game.me&&player.countCards('h')<2) return false;\r\n\t\t\t\t\treturn target.countCards('h')>0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tif(target.countCards('h')==0){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.chooseCard(true).ai=function(card){\r\n\t\t\t\t\t\tif(_status.event.getRand()<0.5) return Math.random();\r\n\t\t\t\t\t\treturn get.value(card);\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tevent.dialog=ui.create.dialog(get.translation(target)+'展示的手牌',result.cards);\r\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\r\n\r\n\t\t\t\t\tgame.broadcast('createDialog',event.videoId,get.translation(target)+'展示的手牌',result.cards);\r\n\t\t\t\t\tgame.addVideo('cardDialog',null,[get.translation(target)+'展示的手牌',get.cardsInfo(result.cards),event.videoId]);\r\n\t\t\t\t\tevent.card2=result.cards[0];\r\n\t\t\t\t\tgame.log(target,'展示了',event.card2);\r\n\t\t\t\t\tevent._result={};\r\n\t\t\t\t\tplayer.chooseToDiscard({suit:get.suit(event.card2)},function(card){\r\n\t\t\t\t\t\tvar evt=_status.event.getParent();\r\n\t\t\t\t\t\tif(evt.player.hasSkillTag('kuiquan')&&evt.card2&&get.value(evt.card2,player,'raw')>get.value(card)&&card.name=='sha')\treturn 7;\t\r\n\t\t\t\t\t\tif(get.damageEffect(evt.target,evt.player,evt.player,'fire')>0){\r\n\t\t\t\t\t\t\treturn 7-get.value(card,evt.player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}).prompt=false;\r\n\t\t\t\t\tgame.delay(2);\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tif(player.hasSkillTag('kuiquan')&&result.cards&&result.cards[0].name=='sha')\tplayer.gain(event.card2,target,'giveAuto');\r\n\t\t\t\t\t\ttarget.damage('fire',event.baseDamage||1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\ttarget.addTempSkill('huogong2');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\tgame.addVideo('cardDialog',null,event.videoId);\r\n\t\t\t\t\tgame.broadcast('closeDialog',event.videoId);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:4,\r\n\t\t\t\t\t\tvalue:[3,1],\r\n\t\t\t\t\t\tuseful:1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\twuxie:function(target,card,player,current,state){\r\n\t\t\t\t\t\tif(get.attitude(current,player)>=0&&state>0) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:function(player){\r\n\t\t\t\t\t\t\tvar nh=player.countCards('h');\r\n\t\t\t\t\t\t\tif(nh<=player.hp&&nh<=4&&_status.event.name=='chooseToUse'){\r\n\t\t\t\t\t\t\t\tif(typeof _status.event.filterCard=='function'&&\r\n\t\t\t\t\t\t\t\t\t_status.event.filterCard({name:'huogong'},player,_status.event)){\r\n\t\t\t\t\t\t\t\t\treturn -10;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(_status.event.skill){\r\n\t\t\t\t\t\t\t\t\tvar viewAs=get.info(_status.event.skill).viewAs;\r\n\t\t\t\t\t\t\t\t\tif(viewAs=='huogong') return -10;\r\n\t\t\t\t\t\t\t\t\tif(viewAs&&viewAs.name=='huogong') return -10;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(target.hasSkill('huogong2')||target.countCards('h')==0) return 0;\r\n\t\t\t\t\t\t\tif(player.countCards('h')<=1) return 0;\r\n\t\t\t\t\t\t\tif(target==player){\r\n\t\t\t\t\t\t\t\tif(typeof _status.event.filterCard=='function'&&\r\n\t\t\t\t\t\t\t\t\t_status.event.filterCard({name:'huogong'},player,_status.event)){\r\n\t\t\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(_status.event.skill){\r\n\t\t\t\t\t\t\t\t\tvar viewAs=get.info(_status.event.skill).viewAs;\r\n\t\t\t\t\t\t\t\t\tif(viewAs=='huogong') return -1.5;\r\n\t\t\t\t\t\t\t\t\tif(viewAs&&viewAs.name=='huogong') return -1.5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\tfireDamage:1,\r\n\t\t\t\t\t\tnatureDamage:1,\r\n\t\t\t\t\t\tnorepeat:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttiesuo:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tfilterTarget:true,\r\n\t\t\t\tselectTarget:[1,2],\r\n\t\t\t\tcomplexTarget:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttarget.link();\r\n\t\t\t\t},\r\n\t\t\t\tchongzhu:true,\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(target,card,player,viewer){\r\n\t\t\t\t\t\tif(_status.event.getRand()<0.5) return 0;\r\n\t\t\t\t\t\tif(player==game.me&&get.attitude(viewer,player)>0){\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:4,\r\n\t\t\t\t\t\tvalue:4,\r\n\t\t\t\t\t\torder:7\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(target.isLinked()){\r\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('link')) return 0;\r\n\t\t\t\t\t\t\t\tvar f=target.hasSkillTag('nofire');\r\n\t\t\t\t\t\t\t\tvar t=target.hasSkillTag('nothunder');\r\n\t\t\t\t\t\t\t\tif(f&&t) return 0;\r\n\t\t\t\t\t\t\t\tif(f||t) return 0.5;\r\n\t\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)>=0) return -0.9;\r\n\t\t\t\t\t\t\tif(ui.selected.targets.length) return -0.9;\r\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)<=-1&&current!=target&&!current.isLinked();\r\n\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\treturn -0.9;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tmultitarget:1,\r\n\t\t\t\t\t\tmultineg:1,\r\n\t\t\t\t\t\tnorepeat:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbingliang:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'delay',\r\n\t\t\t\trange:{global:1},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn (lib.filter.judge(card,player,target)&&player!=target);\r\n\t\t\t\t},\r\n\t\t\t\tjudge:function(card){\r\n\t\t\t\t\tif(get.suit(card)=='club') return 0;\r\n\t\t\t\t\treturn -3;\r\n\t\t\t\t},\r\n\t\t\t\teffect:function(){\r\n\t\t\t\t\tif(result.bool==false){\r\n\t\t\t\t\t\tif(get.is.changban()) player.addTempSkill('bingliang_changban');\r\n\t\t\t\t\t\telse player.skip('phaseDraw');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:1,\r\n\t\t\t\t\t\tuseful:1,\r\n\t\t\t\t\t\tvalue:4,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(target.hasJudge('caomu')) return 0;\r\n\t\t\t\t\t\t\treturn -1.5/Math.sqrt(target.countCards('h')+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tskip:'phaseDraw'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thualiu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip3',\r\n\t\t\t\tdistance:{globalTo:1},\r\n\t\t\t},\r\n\t\t\tzhuque:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\t//cardnature:'fire',\r\n\t\t\t\tdistance:{attackFrom:-3},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['zhuque_skill']\r\n\t\t\t},\r\n\t\t\tguding:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['guding_skill']\r\n\t\t\t},\r\n\t\t\ttengjia:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\t//cardnature:'fire',\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.hasSkillTag('maixie')&&player.hp>1) return 0;\r\n\t\t\t\t\t\tif(player.hasSkillTag('noDirectDamage')) return 10;\r\n\t\t\t\t\t\tif(get.damageEffect(player,player,player,'fire')>=0) return 10;\r\n\t\t\t\t\t\tvar num=3-game.countPlayer(function(current){\r\n\t\t\t\t\t\t\treturn get.attitude(current,player)<0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(player.hp==1) num+=4;\r\n\t\t\t\t\t\tif(player.hp==2) num+=1;\r\n\t\t\t\t\t\tif(player.hp==3) num--;\r\n\t\t\t\t\t\tif(player.hp>3) num-=4;\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:3\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tskills:['tengjia1','tengjia2','tengjia3']\r\n\t\t\t},\r\n\t\t\tbaiyin:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tloseDelay:false,\r\n\t\t\t\tonLose:function(){\r\n\t\t\t\t\tif(player.isDamaged()) player.logSkill('baiyin_skill');\r\n\t\t\t\t\tvar next=game.createEvent('baiyin_recover');\r\n\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\tevent.getParent().after.push(next);\r\n\t\t\t\t\tnext.player=player;\r\n\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tfilterLose:function(card,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tskills:['baiyin_skill'],\r\n\t\t\t\ttag:{\r\n\t\t\t\t\trecover:1,\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9.5,\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.hp==player.maxHp) return 5;\r\n\t\t\t\t\t\tif(player.countCards('h','baiyin')) return 6;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tskill:{\r\n\t\t\tbingliang_changban:{\r\n\t\t\t\tcardSkill:true,\r\n\t\t\t\tunique:true,\r\n\t\t\t\ttrigger:{player:'phaseDrawBegin'},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t},\r\n\t\t\t\tgroup:'bingliang_changban2'\r\n\t\t\t},\r\n\t\t\tbingliang_changban2:{\r\n\t\t\t\tcardSkill:true,\r\n\t\t\t\ttrigger:{player:'phaseDrawAfter'},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(player.enemy) player.enemy.draw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmuniu_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tenable:'phaseUse',\r\n\t\t\t\tusable:1,\r\n\t\t\t\tfilterCard:true,\r\n\t\t\t\tcheck:function(card){\r\n\t\t\t\t\tif(card.name=='du') return 20;\r\n\t\t\t\t\tvar player=_status.event.player;\r\n\t\t\t\t\tvar nh=player.countCards('h');\r\n\t\t\t\t\tif(!player.needsToDiscard()){\r\n\t\t\t\t\t\tif(nh<3) return 0;\r\n\t\t\t\t\t\tif(nh==3) return 5-get.value(card);\r\n\t\t\t\t\t\treturn 7-get.value(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 10-get.useful(card);\r\n\t\t\t\t},\r\n\t\t\t\tdiscard:false,\r\n\t\t\t\tlose:false,\r\n\t\t\t\tdelay:false,\r\n\t\t\t\tsync:function(muniu){\r\n\t\t\t\t\tif(game.online){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!muniu.cards){\r\n\t\t\t\t\t\tmuniu.cards=[];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(var i=0;i<muniu.cards.length;i++){\r\n\t\t\t\t\t\tif(get.position(muniu.cards[i])!='s'){\r\n\t\t\t\t\t\t\tmuniu.cards.splice(i--,1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.broadcast(function(muniu,cards){\r\n\t\t\t\t\t\tmuniu.cards=cards;\r\n\t\t\t\t\t},muniu,muniu.cards);\r\n\t\t\t\t},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.countCards('h')>0;\r\n\t\t\t\t},\r\n\t\t\t\tprepare:function(cards,player){\r\n\t\t\t\t\tplayer.$give(1,player,false);\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tplayer.loseToSpecial(cards,'muniu');\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\r\n\t\t\t\t\t\tif(cards[i].destroyed||!cards[i].hasGaintag('muniu')||get.position(cards[i])!='s'){\r\n\t\t\t\t\t\t\tcards[i].remove();\r\n\t\t\t\t\t\t\tcards.splice(i--,1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar muniu=player.getEquip(5);\r\n\t\t\t\t\tif(!muniu||!cards.length){\r\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\r\n\t\t\t\t\t\t\tcards[i].discard();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(muniu.cards==undefined) muniu.cards=[];\r\n\t\t\t\t\tmuniu.cards.push(cards[0]);\r\n\t\t\t\t\tgame.broadcast(function(muniu,cards){\r\n\t\t\t\t\t\tmuniu.cards=cards;\r\n\t\t\t\t\t},muniu,muniu.cards);\r\n\t\t\t\t\tgame.delayx();\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tvar players=game.filterPlayer(function(current){\r\n\t\t\t\t\t\tif(!current.getEquip(5)&&current!=player&&!current.isTurnedOver()&&\r\n\t\t\t\t\t\t\tget.attitude(player,current)>=3&&get.attitude(current,player)>=3){\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tplayers.sort(lib.sort.seat);\r\n\t\t\t\t\tvar choice=players[0];\r\n\t\t\t\t\tvar next=player.chooseTarget('是否移动木牛流马？',function(card,player,target){\r\n\t\t\t\t\t\treturn !target.isMin()&&player!=target&&target.isEmpty(5);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.set('ai',function(target){\r\n\t\t\t\t\t\treturn target==_status.event.choice?1:-1;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.set('choice',choice);\r\n\t\t\t\t\t\"step 3\"\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tvar card=player.getEquip(5);\r\n\t\t\t\t\t\tresult.targets[0].equip(card);\r\n\t\t\t\t\t\tplayer.$give(card,result.targets[0]);\r\n\t\t\t\t\t\tplayer.line(result.targets,'green');\r\n\t\t\t\t\t\tgame.delay();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tplayer.updateMarks();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:1,\r\n\t\t\t\t\texpose:0.1,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:1\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tmod:{\r\n\t\t\t\t\tcardEnabled2:function(card,player){\r\n\t\t\t\t\t\tif(!ui.selected.cards.length) return;\r\n\t\t\t\t\t\tvar muniu=player.getEquip('muniu');\r\n\t\t\t\t\t\tif(!muniu||!muniu.cards||!muniu.cards.length) return;\r\n\t\t\t\t\t\tfor(var i of ui.selected.cards){\r\n\t\t\t\t\t\t\tif(i==muniu&&muniu.cards.contains(card)) return false;\r\n\t\t\t\t\t\t\tif(muniu.cards.contains(i)&&card==muniu) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark:true,\r\n\t\t\t\tintro:{\r\n\t\t\t\t\tcontent:function(storage,player){\r\n\t\t\t\t\t\tvar muniu=player.getEquip(5);\r\n\t\t\t\t\t\tif(!muniu||!muniu.cards||!muniu.cards.length) return '共有〇张牌';\r\n\t\t\t\t\t\tif(player.isUnderControl(true)){\r\n\t\t\t\t\t\t\treturn get.translation(muniu.cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\treturn '共有'+get.cnNumber(muniu.cards.length)+'张牌';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark:function(dialog,storage,player){\r\n\t\t\t\t\t\tvar muniu=player.getEquip(5);\r\n\t\t\t\t\t\tif(!muniu||!muniu.cards||!muniu.cards.length) return '共有〇张牌';\r\n\t\t\t\t\t\tif(player.isUnderControl(true)){\r\n\t\t\t\t\t\t\tdialog.addAuto(muniu.cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\treturn '共有'+get.cnNumber(muniu.cards.length)+'张牌';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmarkcount:function(storage,player){\r\n\t\t\t\t\t\tvar muniu=player.getEquip(5);\r\n\t\t\t\t\t\tif(muniu&&muniu.cards) return muniu.cards.length;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmuniu_skill7:{\r\n\t\t\t\ttrigger:{player:'loseEnd'},\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(!event.ss||!event.ss.length||event.parent.name=='lose_muniu') return false;\r\n\t\t\t\t\tvar muniu=player.getEquip('muniu');\r\n\t\t\t\t\tif(!muniu||!muniu.cards) return false;\r\n\t\t\t\t\treturn event.ss.filter(function(card){\r\n\t\t\t\t\t\treturn muniu.cards.contains(card);\r\n\t\t\t\t\t}).length>0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar muniu=player.getEquip(5);\r\n\t\t\t\t\tif(muniu&&muniu.cards){\r\n\t\t\t\t\t\tmuniu.cards.removeArray(trigger.ss);\r\n\t\t\t\t\t\tlib.skill.muniu_skill.sync(muniu);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.updateMarks();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thuogong2:{},\r\n\t\t\tjiu:{\r\n\t\t\t\ttrigger:{player:'useCard1'},\r\n\t\t\t\tfilter:function(event){\r\n\t\t\t\t\treturn event.card&&event.card.name=='sha';\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tcharlotte:true,\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(!trigger.baseDamage) trigger.baseDamage=1;\r\n\t\t\t\t\ttrigger.baseDamage+=player.storage.jiu;\r\n\t\t\t\t\ttrigger.jiu=true;\r\n\t\t\t\t\ttrigger.jiu_add=player.storage.jiu;\r\n\t\t\t\t\tgame.addVideo('jiuNode',player,false);\r\n\t\t\t\t\tgame.broadcastAll(function(player){\r\n\t\t\t\t\t\tplayer.removeSkill('jiu');\r\n\t\t\t\t\t},player);\r\n\t\t\t\t},\r\n\t\t\t\ttemp:true,\r\n\t\t\t\tvanish:true,\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tnopop:true,\r\n\t\t\t\tonremove:function(player){\r\n\t\t\t\t\tif(player.node.jiu){\r\n\t\t\t\t\t\tplayer.node.jiu.delete();\r\n\t\t\t\t\t\tplayer.node.jiu2.delete();\r\n\t\t\t\t\t\tdelete player.node.jiu;\r\n\t\t\t\t\t\tdelete player.node.jiu2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete player.storage.jiu;\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tdamageBonus:true\r\n\t\t\t\t},\r\n\t\t\t\tgroup:'jiu2'\r\n\t\t\t},\r\n\t\t\tjiu2:{\r\n\t\t\t\ttrigger:{player:'useCardAfter',global:'phaseAfter'},\r\n\t\t\t\tpriority:2,\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tcharlotte:true,\r\n\t\t\t\tfilter:function(event){\r\n\t\t\t\t\tif(event.name=='useCard') return (event.card&&(event.card.name=='sha'));\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\taudio:false,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tgame.broadcastAll(function(player){\r\n\t\t\t\t\t\tplayer.removeSkill('jiu');\r\n\t\t\t\t\t},player);\r\n\t\t\t\t\tgame.addVideo('jiuNode',player,false);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tguding_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttrigger:{source:'damageBegin1'},\r\n\t\t\t\tfilter:function(event){\r\n\t\t\t\t\tif(event.parent.name=='_lianhuan'||event.parent.name=='_lianhuan2') return false;\r\n\t\t\t\t\tif(event.card&&event.card.name=='sha'){\r\n\t\t\t\t\t\tif(event.player.countCards('h')==0) return true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\tplayer:function(card,player,target,current){\r\n\t\t\t\t\t\t\tif(card.name=='sha'&&target.countCards('h')==0&&!target.hasSkillTag('filterDamage',null,{\r\n\t\t\t\t\t\t\t\tplayer:player,\r\n\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t})) return [1,0,1,-3];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttengjia1:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{target:['useCardToBefore']},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpriority:6,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\tif(event.card.name=='nanman') return true;\r\n\t\t\t\t\tif(event.card.name=='wanjian') return true;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target,current){\r\n\t\t\t\t\t\t\tif(target.hasSkillTag('unequip2')) return;\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})||player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})) return;\r\n\t\t\t\t\t\t\tif(card.name=='nanman'||card.name=='wanjian') return 'zerotarget';\r\n\t\t\t\t\t\t\tif(card.name=='sha'){\r\n\t\t\t\t\t\t\t\tvar equip1=player.getEquip(1);\r\n\t\t\t\t\t\t\t\tif(equip1&&equip1.name=='zhuque') return 1.9;\r\n\t\t\t\t\t\t\t\tif(!card.nature) return 'zerotarget';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttengjia2:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'damageBegin3'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.nature!='fire') return false;\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.source&&event.source.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tforced:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target,current){\r\n\t\t\t\t\t\t\tif(card.name=='sha'){\r\n\t\t\t\t\t\t\t\tif(card.nature=='fire') return 2;\r\n\t\t\t\t\t\t\t\tif(player.hasSkill('zhuque_skill')) return 1.9;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(get.tag(card,'fireDamage')&&current<0) return 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttengjia3:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:'tengjia1',\r\n\t\t\t\ttrigger:{target:'shaBefore'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\tif(event.card.name=='sha'&&!event.card.nature) return true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tbaiyin_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'damageBegin4'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.num<=1) return false;\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.source&&event.source.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\t//priority:-10,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.num=1;\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tfilterDamage:true,\r\n\t\t\t\t\tskillTagFilter:function(player,tag,arg){\r\n\t\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\t\tif(arg&&arg.player){\r\n\t\t\t\t\t\t\tif(arg.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:arg.card?arg.card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\t\t\tcard:arg.card,\r\n\t\t\t\t\t\t\t})) return false;\r\n\t\t\t\t\t\t\tif(arg.player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\tname:arg.card?arg.card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\t\t\tcard:arg.card,\r\n\t\t\t\t\t\t\t})) return false;\r\n\t\t\t\t\t\t\tif(arg.player.hasSkillTag('jueqing',false,player)) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tzhuque_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCard1'},\r\n\t\t\t\t//priority:7,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.card.name=='sha'&&!event.card.nature) return true;\r\n\t\t\t\t},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\tvar eff=0;\r\n\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\r\n\t\t\t\t\t\tvar target=event.targets[i];\r\n\t\t\t\t\t\tvar eff1=get.damageEffect(target,player,player);\r\n\t\t\t\t\t\tvar eff2=get.damageEffect(target,player,player,'fire');\r\n\t\t\t\t\t\teff+=eff2;\r\n\t\t\t\t\t\teff-=eff1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn eff>=0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.card.nature='fire';\r\n\t\t\t\t\tif(get.itemtype(trigger.card)=='card'){\r\n\t\t\t\t\t\tvar next=game.createEvent('zhuque_clear');\r\n\t\t\t\t\t\tnext.card=trigger.card;\r\n\t\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\t\ttrigger.after.push(next);\r\n\t\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\t\tdelete card.nature;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tzhuque_skill2:{\r\n\t\t\t\ttrigger:{player:'useCardAfter'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tdelete player.storage.zhuque_skill.nature;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thuogon2:{},\r\n\t\t},\r\n\t\ttranslate:{\r\n\t\t\tjiu:'酒',\r\n\t\t\tjiu_info:'出牌阶段，对自己使用，令自己的下一张使用的【杀】造成的伤害+1（每回合限使用1次）；濒死阶段，对自己使用，回复1点体力',\r\n\t\t\thuogong:'火攻',\r\n\t\t\ttiesuo:'铁索连环',\r\n\t\t\ttiesuo_info:'出牌阶段使用，选择1至2个角色，分别横置或重置这些角色',\r\n\t\t\thuogong_bg:'攻',\r\n\t\t\thuogong_info:'目标角色展示一张手牌，然后若你能弃掉一张与所展示牌相同花色的手牌，则火攻对该角色造成1点火焰伤害。',\r\n\t\t\ttiesuo_bg:'索',\r\n\t\t\tbingliang:'兵粮寸断',\r\n\t\t\thualiu:'渡渡鸟',\r\n\t\t\tzhuque:'RPG',\r\n\t\t\tbingliang_bg:'粮',\r\n\t\t\tbingliang_info:'目标角色判定阶段进行判定：若判定结果不为梅花，则跳过该角色的摸牌阶段。',\r\n\t\t\thualiu_bg:'+马',\r\n\t\t\thualiu_info:'你的防御距离+1',\r\n\t\t\tzhuque_bg:'扇',\r\n\t\t\tzhuque_skill:'RPG',\r\n\t\t\tzhuque_info:'你可以将一张普通【杀】当具火焰伤害的【杀】使用。',\r\n\t\t\tzhuque_skill_info:'你可以将一张普通【杀】当具火焰伤害的【杀】使用。',\r\n\t\t\tguding:'军刀',\r\n\t\t\tguding_info:'锁定技，当你使用【杀】对目标角色造成伤害时，若其没有手牌，此伤害+1。',\r\n\t\t\tguding_skill:'军刀',\r\n\t\t\ttengjia:'初始服',\r\n\t\t\ttengjia_info:'锁定技，【南蛮入侵】、【万箭齐发】和普通【杀】对你无效。你每次受到火焰伤害时，该伤害+1。',\r\n\t\t\ttengjia1:'初始服',\r\n\t\t\ttengjia2:'初始服',\r\n\t\t\ttengjia3:'初始服',\r\n\t\t\tbaiyin:'防毒面具',\r\n\t\t\tbaiyin_info:'锁定技，你每次受到伤害时，最多承受1点伤害（防止多余的伤害）；当你失去装备区里的【防毒面具】时，你回复1点体力。',\r\n\t\t\tbaiyin_skill:'防毒面具',\r\n\t\t\t\r\n\t\t\tmuniu:'拉普拉斯',\r\n\t\t\tmuniu_bg:'鱼',\r\n\t\t\tmuniu_skill:'雏鸟',\r\n\t\t\tmuniu_skill_bg:'雀',\r\n\t\t\tmuniu_info:'出牌阶段限一次，你可以将一张手牌扣置于你装备区里的【拉普拉斯】下，若如此做，你可以将此装备移动到一名其他角色的装备区里；你可以将此装备牌下的牌如手牌般使用或打出。',\r\n\t\t\tmuniu_skill_info:'出牌阶段限一次，你可以将一张手牌扣置于你装备区里的【拉普拉斯】下，若如此做，你可以将此装备移动到一名其他角色的装备区里；你可以将此装备牌下的牌如手牌般使用或打出。',\r\n\t\t},\r\n\t\tlist:[\r\n\t\t\t[\"heart\",4,\"sha\",\"fire\"],\r\n\t\t\t[\"heart\",7,\"sha\",\"fire\"],\r\n\t\t\t[\"heart\",10,\"sha\",\"fire\"],\r\n\t\t\t[\"diamond\",4,\"sha\",\"fire\"],\r\n\t\t\t[\"diamond\",5,\"sha\",\"fire\"],\r\n\t\t\t[\"spade\",4,\"sha\",\"thunder\"],\r\n\t\t\t[\"spade\",5,\"sha\",\"thunder\"],\r\n\t\t\t[\"spade\",6,\"sha\",\"thunder\"],\r\n\t\t\t[\"spade\",7,\"sha\",\"thunder\"],\r\n\t\t\t[\"spade\",8,\"sha\",\"thunder\"],\r\n\t\t\t[\"club\",5,\"sha\",\"thunder\"],\r\n\t\t\t[\"club\",6,\"sha\",\"thunder\"],\r\n\t\t\t[\"club\",7,\"sha\",\"thunder\"],\r\n\t\t\t[\"club\",8,\"sha\",\"thunder\"],\r\n\t\t\t[\"heart\",8,\"shan\"],\r\n\t\t\t[\"heart\",9,\"shan\"],\r\n\t\t\t[\"heart\",11,\"shan\"],\r\n\t\t\t[\"heart\",12,\"shan\"],\r\n\t\t\t[\"diamond\",6,\"shan\"],\r\n\t\t\t[\"diamond\",7,\"shan\"],\r\n\t\t\t[\"diamond\",8,\"shan\"],\r\n\t\t\t[\"diamond\",10,\"shan\"],\r\n\t\t\t[\"diamond\",11,\"shan\"],\r\n\t\t\t[\"heart\",5,\"tao\"],\r\n\t\t\t[\"heart\",6,\"tao\"],\r\n\t\t\t[\"diamond\",2,\"tao\"],\r\n\t\t\t[\"diamond\",3,\"tao\"],\r\n\t\t\t[\"diamond\",9,\"jiu\"],\r\n\t\t\t[\"spade\",3,\"jiu\"],\r\n\t\t\t[\"spade\",9,\"jiu\"],\r\n\t\t\t[\"club\",3,\"jiu\"],\r\n\t\t\t[\"club\",9,\"jiu\"],\r\n\r\n\t\t\t[\"diamond\",13,\"hualiu\"],\r\n\t\t\t[\"club\",1,\"baiyin\"],\r\n\t\t\t[\"spade\",2,\"tengjia\"],\r\n\t\t\t[\"club\",2,\"tengjia\"],\r\n\t\t\t[\"spade\",1,\"guding\"],\r\n\t\t\t[\"diamond\",1,\"zhuque\"],\r\n\r\n\t\t\t[\"heart\",2,\"huogong\"],\r\n\t\t\t[\"heart\",3,\"huogong\"],\r\n\t\t\t[\"diamond\",12,\"huogong\"],\r\n\t\t\t[\"spade\",11,\"tiesuo\"],\r\n\t\t\t[\"spade\",12,\"tiesuo\"],\r\n\t\t\t[\"club\",10,\"tiesuo\"],\r\n\t\t\t[\"club\",11,\"tiesuo\"],\r\n\t\t\t[\"club\",12,\"tiesuo\"],\r\n\t\t\t[\"club\",13,\"tiesuo\"],\r\n\t\t\t[\"heart\",13,\"wuxie\"],\r\n\t\t\t[\"heart\",1,\"wuxie\"],\t//\t[\"heart\",13,\"wuxie\"],\r\n\t\t\t[\"spade\",13,\"wuxie\"],\r\n\t\t\t[\"spade\",10,\"bingliang\"],\r\n\t\t\t[\"club\",4,\"bingliang\"],\r\n\t\t\t\r\n\t\t\t['diamond',5,'muniu'],\r\n\t\t],\r\n\t}\r\n});\r\n\n\n//# sourceURL=webpack:///./card/extra.js?")},"./card/guozhan.js":()=>{eval("\r\ngame.import('card',function(lib,game,ui,get,ai,_status){\r\n\treturn {\r\n\t\tname:'guozhan',\r\n\t\tconnect:true,\r\n\t\tcard:{\r\n\t\t\tliulongcanjia:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip6',\r\n\t\t\t\tnomod:true,\r\n\t\t\t\tnopower:true,\r\n\t\t\t\tunique:true,\r\n\t\t\t\tdistance:{\r\n\t\t\t\t\tglobalFrom:-1,\r\n\t\t\t\t\tglobalTo:+1,\r\n\t\t\t\t},\r\n\t\t\t\tonEquip:function(){\r\n\t\t\t\t\tvar cards=player.getCards('e',{subtype:['equip3','equip4']});\r\n\t\t\t\t\tif(cards.length) player.discard(cards);\r\n\t\t\t\t},\r\n\t\t\t\tskills:['liulongcanjia'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.countCards('e',{subtype:['equip3','equip4']})>1) return 1;\r\n\t\t\t\t\t\tif(player.hasSkill('gzzongyu')) return 9;\r\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\treturn current.hasSkill('gzzongyu')&&get.attitude(player,current)<=0;\r\n\t\t\t\t\t\t}))\treturn 1;\r\n\t\t\t\t\t\treturn 7.2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7.2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tminguangkai:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tskills:['minguangkai_cancel','minguangkai_link'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:6\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdinglanyemingzhu:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip5',\r\n\t\t\t\tnomod:true,\r\n\t\t\t\tnopower:true,\r\n\t\t\t\tunique:true,\r\n\t\t\t\tglobal:'g_dinglanyemingzhu_ai',\r\n\t\t\t\tskills:['dinglanyemingzhu_skill'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.hasSkill('jubao')) return 8;\r\n\t\t\t\t\t\tif(player.hasSkill('gzzhiheng')) return 6;\r\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\treturn current.hasSkill('jubao')&&get.attitude(player,current)<=0;\r\n\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 7;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:6.5\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfeilongduofeng:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tnomod:true,\r\n\t\t\t\tnopower:true,\r\n\t\t\t\tunique:true,\r\n\t\t\t\tglobal:'g_feilongduofeng_ai',\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tskills:['feilongduofeng','feilongduofeng3'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.hasSkill('zhangwu')) return 9;\r\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\treturn current.hasSkill('zhangwu')&&get.attitude(player,current)<=0;\r\n\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 8;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttaipingyaoshu:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tnomod:true,\r\n\t\t\t\tnopower:true,\r\n\t\t\t\tunique:true,\r\n\t\t\t\tglobal:['g_taipingyaoshu_ai'],\r\n\t\t\t\tskills:['taipingyaoshu'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.hasSkill('wendao')) return 9;\r\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\treturn current.hasSkill('wendao')&&get.attitude(player,current)<=0;\r\n\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 6;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:6\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfilterLose:function(card,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tloseDelay:false,\r\n\t\t\t\tonLose:function(){\r\n\t\t\t\t\tvar next=game.createEvent('taipingyaoshu');\r\n\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\tvar evt=event.getParent();\r\n\t\t\t\t\tif(evt.getlx===false) evt=evt.getParent();\r\n\t\t\t\t\tevt.after.push(next);\r\n\t\t\t\t\tnext.player=player;\r\n\t\t\t\t\tnext.setContent(lib.card.taipingyaoshu.onLosex);\r\n\t\t\t\t},\r\n\t\t\t\tonLosex:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tplayer.logSkill('taipingyaoshu');\r\n\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(player.hp>1) player.loseHp();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tyuxi:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip5',\r\n\t\t\t\tskills:['yuxi_skill'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:9\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\txietianzi:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:function(card,player,event){\r\n\t\t\t\t\tif(get.mode()=='guozhan'&&!player.isMajor()) return false;\r\n\t\t\t\t\tif(player.hasSkill('xietianzi')) return false;\r\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\r\n\t\t\t\t\tvar evt=event||_status.event;\r\n\t\t\t\t\tif(evt.name!='chooseToUse') evt=evt.getParent('chooseToUse');\r\n\t\t\t\t\treturn evt.type=='phase';\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn player==target;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar evt=_status.event.getParent('phaseUse');\r\n\t\t\t\t\tif(evt&&evt.name=='phaseUse'){\r\n\t\t\t\t\t\tevt.skipped=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.addTempSkill('xietianzi');\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:0.5,\r\n\t\t\t\t\tvalue:4,\r\n\t\t\t\t\tuseful:2,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(target.countCards('h')>=2) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshuiyanqijunx:{\r\n\t\t\t\taudio:'shuiyanqijun',\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player&&(get.mode()!='guozhan'||_status.mode=='yingbian'||_status.mode=='free'||target.countCards('e')>0);\r\n\t\t\t\t},\r\n\t\t\t\tenable:true,\r\n\t\t\t\tyingbian_prompt:function(card){\r\n\t\t\t\t\tvar str='';\r\n\t\t\t\t\tif(get.cardtag(card,'yingbian_all')){\r\n\t\t\t\t\t\tstr+='此牌的效果改为依次执行所有选项';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!str.length||get.cardtag(card,'yingbian_add')){\r\n\t\t\t\t\t\tif(str.length) str+='；';\r\n\t\t\t\t\t\tstr+='当你使用此牌选择目标后，你可为此牌增加一个目标';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t},\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tvar card=event.card,bool=false;\r\n\t\t\t\t\tif(get.cardtag(card,'yingbian_all')){\r\n\t\t\t\t\t\tbool=true;\r\n\t\t\t\t\t\tcard.yingbian_all=true;\r\n\t\t\t\t\t\tgame.log(card,'执行所有选项');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!bool||get.cardtag(card,'yingbian_add')){\r\n\t\t\t\t\t\tevent.yingbian_addTarget=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(event.card.yingbian_all){\r\n\t\t\t\t\t\ttarget.discard(target.getCards('e',function(card){\r\n\t\t\t\t\t\t\treturn lib.filter.cardDiscardable(card,target,'shuiyanqijunx');\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\ttarget.damage('thunder',event.baseDamage||1);\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(!target.countCards('e',function(card){\r\n\t\t\t\t\t\treturn lib.filter.cardDiscardable(card,target,'shuiyanqijunx');\r\n\t\t\t\t\t})){\r\n\t\t\t\t\t\tvar next=target.damage(event.baseDamage||1);\r\n\t\t\t\t\t\tif(!get.is.single()) next.nature='thunder';\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse target.chooseControl('discard_card','take_damage',function(event,player){\r\n\t\t\t\t\t\tif(get.damageEffect(player,event.player,player,'thunder')>=0){\r\n\t\t\t\t\t\t\treturn 'take_damage';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(player.hp>=3&&player.countCards('e')>=2){\r\n\t\t\t\t\t\t\treturn 'take_damage';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 'discard_card';\r\n\t\t\t\t\t});\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.control=='discard_card'){\r\n\t\t\t\t\t\ttarget.discard(target.getCards('e',function(card){\r\n\t\t\t\t\t\t\treturn lib.filter.cardDiscardable(card,target,'shuiyanqijunx');\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar next=target.damage(event.baseDamage||1);\r\n\t\t\t\t\t\tif(!get.is.single()) next.nature='thunder'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.finish();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tcanLink:function(player,target,card){\r\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\r\n\t\t\t\t\t\tvar es=target.countCards('e');\r\n\t\t\t\t\t\tif(!es) return true;\r\n\t\t\t\t\t\tif(target.hp>=3&&es>=2){\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\torder:6,\r\n\t\t\t\t\tvalue:4,\r\n\t\t\t\t\tuseful:2,\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\tthunderDamage:1,\r\n\t\t\t\t\t\tnatureDamage:1,\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyingbian:function(card,player,targets,viewer){\r\n\t\t\t\t\t\tif(get.attitude(viewer,player)<=0) return 0;\r\n\t\t\t\t\t\tvar base=0;\r\n\t\t\t\t\t\tif(get.cardtag(card,'yingbian_all')){\r\n\t\t\t\t\t\t\tif(targets.filter(function(current){\r\n\t\t\t\t\t\t\t\treturn get.damageEffect(current,player,player,'thunder')>0&&current.countCards('e',function(card){\r\n\t\t\t\t\t\t\t\t\treturn get.value(card,current)<=0;\r\n\t\t\t\t\t\t\t\t})<2&&current.countCards('e',function(card){\r\n\t\t\t\t\t\t\t\t\treturn get.value(card,current)>0;\r\n\t\t\t\t\t\t\t\t})>0;\r\n\t\t\t\t\t\t\t}).length) base+=6;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(get.cardtag(card,'yingbian_add')){\r\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn !targets.contains(current)&&lib.filter.targetEnabled2(card,player,current)&&get.effect(current,card,player,player)>0;\r\n\t\t\t\t\t\t\t})) base+=6;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target,card,isLink){\r\n\t\t\t\t\t\t\tif(isLink) return -1.5;\r\n\t\t\t\t\t\t\tvar es=target.getCards('e');\r\n\t\t\t\t\t\t\tif(!es.length) return -1.5;\r\n\t\t\t\t\t\t\tvar val=0;\r\n\t\t\t\t\t\t\tfor(var i of es) val+=get.value(i,target);\r\n\t\t\t\t\t\t\treturn -Math.min(1.5,val/5);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlulitongxin:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\tif(get.mode()=='versus') return true;\r\n\t\t\t\t\treturn game.hasPlayer(function(current){\r\n\t\t\t\t\t\treturn current.isMajor();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tmode:['guozhan','versus'],\r\n\t\t\t\tfilterTarget:true,\r\n\t\t\t\tchongzhu:true,\r\n\t\t\t\tchangeTarget:function(player,targets){\r\n\t\t\t\t\tvar target=targets[0];\r\n\t\t\t\t\tgame.filterPlayer(function(current){\r\n\t\t\t\t\t\tif(get.mode()=='versus') return current.isFriendOf(target);\r\n\t\t\t\t\t\treturn current.isMajor()==target.isMajor()&&current!=target&&!current.hasSkill('diaohulishan');\r\n\t\t\t\t\t},targets);\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(get.mode()=='versus'){\r\n\t\t\t\t\t\tif(target.isEnemyOf(player)) target.link(true);\r\n\t\t\t\t\t\telse if(target.isLinked()) target.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(target.isLinked()){\r\n\t\t\t\t\t\ttarget.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\ttarget.link();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:7.5,\r\n\t\t\t\t\tvalue:4,\r\n\t\t\t\t\tuseful:2,\r\n\t\t\t\t\twuxie:function(){\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(get.mode()=='versus'){\r\n\t\t\t\t\t\t\t\tif(target.isFriendOf(player)) return target.isLinked()?1:0;\r\n\t\t\t\t\t\t\t\treturn target.isLinked()?0:-1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn target.isLinked()?1:-1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlianjunshengyan:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\tif(get.mode()=='guozhan') return !player.isUnseen();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tmode:['guozhan','boss'],\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(get.mode()=='guozhan') return target!=player&&target.identity!='unknown'&&(target.identity!=player.identity||target.identity=='ye');\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:function(){\r\n\t\t\t\t\treturn get.mode()=='guozhan'?1:-1;\r\n\t\t\t\t},\r\n\t\t\t\tchangeTarget:function(player,targets){\r\n\t\t\t\t\tif(get.mode()=='guozhan'){\r\n\t\t\t\t\t\tvar target=targets[0];\r\n\t\t\t\t\t\ttargets.push(player);\r\n\t\t\t\t\t\tif(target.identity!='ye'){\r\n\t\t\t\t\t\tgame.filterPlayer(function(current){\r\n\t\t\t\t\t\t\treturn target!=current&&target.identity==current.identity&&!current.hasSkill('diaohulishan');\r\n\t\t\t\t\t\t\t},targets);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontentBefore:function(){\r\n\t\t\t\t\tif(get.mode()=='guozhan'){\r\n\t\t\t\t\t\tvar evt=event.getParent();\r\n\t\t\t\t\t\tif(evt&&evt.targets&&evt.targets.contains(player)){\r\n\t\t\t\t\t\t\tevt.fixedSeat=true;\r\n\t\t\t\t\t\t\tevt.targets.sortBySeat();\r\n\t\t\t\t\t\t\tevt.targets.remove(player);\r\n\t\t\t\t\t\t\tevt.targets.push(player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(get.mode()!='guozhan'){\r\n\t\t\t\t\t\tif(player==target) target.draw(game.players.length);\r\n\t\t\t\t\t\telse target.chooseDrawRecover(true);\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif(target==player){\r\n\t\t\t\t\t\t\tvar num=targets.length-1;\r\n\t\t\t\t\t\t\tevent.num=num;\r\n\t\t\t\t\t\t\tvar damaged=target.maxHp-target.hp;\r\n\t\t\t\t\t\t\tif(damaged==0){\r\n\t\t\t\t\t\t\t\ttarget.draw(num);\r\n\t\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tvar list=[];\r\n\t\t\t\t\t\t\t\tfor(var i=Math.min(num,damaged);i>=0;i--){\r\n\t\t\t\t\t\t\t\t\tlist.push('摸'+(num-i)+'回'+i);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttarget.chooseControl(list).set('prompt','请分配自己的摸牌数和回复量').ai=function(){\r\n\t\t\t\t\t\t\t\t\tif(player.hasSkill('diaohulishan')) return 0;\r\n\t\t\t\t\t\t\t\t\tif(_status._aozhan) return list.length-1;\r\n\t\t\t\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\ttarget.draw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(target!=player) target.link(false);\r\n\t\t\t\t\telse if(typeof result.control=='string'){\r\n\t\t\t\t\t\tvar index=result.control.indexOf('回');\r\n\t\t\t\t\t\tvar draw=parseInt(result.control.slice(1,index));\r\n\t\t\t\t\t\tvar recover=parseInt(result.control.slice(index+1));\r\n\t\t\t\t\t\tif(draw) target.draw(draw);\r\n\t\t\t\t\t\tif(recover) target.recover(recover);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:3,\r\n\t\t\t\t\tvalue:4,\r\n\t\t\t\t\tuseful:2,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(player==target) return 2;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tchiling:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:function(){\r\n\t\t\t\t\treturn game.hasPlayer(function(current){\r\n\t\t\t\t\t\treturn current.isUnseen();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\tglobal:['g_chiling1','g_chiling2','g_chiling3'],\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.isUnseen();\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tchooseai:function(event,player){\r\n\t\t\t\t\tif(_status.event.controls.contains('选项三')){\r\n\t\t\t\t\t\treturn Math.random()<0.5?'选项一':'选项三';\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif(_status.event.getParent().nomingzhi){\r\n\t\t\t\t\t\t\tif(_status.event.controls.contains('选项二')) return '选项二';\r\n\t\t\t\t\t\t\treturn '选项一';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(player.hasSkillTag('maixie_hp')||player.hp<=2) return '选项一';\r\n\t\t\t\t\t\treturn Math.random()<0.5?'选项一':'选项二';\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tvar choiceList=['明置一张武将牌，然后摸一张牌','失去1点体力'];\r\n\t\t\t\t\tevent.nomingzhi=target.hasSkillTag('nomingzhi',false,null,true);\r\n\t\t\t\t\tif(event.nomingzhi){\r\n\t\t\t\t\t\tchoiceList.shift();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(target.countCards('he',{type:'equip'})){\r\n\t\t\t\t\t\tchoiceList.push('弃置一张装备牌');\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.chooseControl(lib.card.chiling.chooseai).set('prompt','敕令').set('choiceList',choiceList);\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tvar index=result.index;\r\n\t\t\t\t\tif(event.nomingzhi){\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(index==0){\r\n\t\t\t\t\t\ttarget.chooseControl('主将','副将',function(){\r\n\t\t\t\t\t\t\treturn Math.floor(Math.random()*2);\r\n\t\t\t\t\t\t}).set('prompt','选择要明置的武将牌');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(index==1){\r\n\t\t\t\t\t\ttarget.loseHp();\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\ttarget.chooseToDiscard('he',{type:'equip'},true);\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tif(result.index==0){\r\n\t\t\t\t\t\ttarget.showCharacter(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\ttarget.showCharacter(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.draw();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:6,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tmultitarget:1,\r\n\t\t\t\t\t\tmultineg:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdiaohulishan:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tglobal:'g_diaohulishan',\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:[1,2],\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttarget.addTempSkill('diaohulishan');\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:10,\r\n\t\t\t\t\tvalue:4,\r\n\t\t\t\t\tuseful:[2,1],\r\n\t\t\t\t\twuxie:function(){\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:function(player,target){\r\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\r\n\t\t\t\t\t\t\tif(target.hp==1&&att<0) return 0;\r\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)<att;\r\n\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\tvar num=1;\r\n\t\t\t\t\t\t\t\tif(target==player.next||target==player.previous){\r\n\t\t\t\t\t\t\t\t\tnum+=0.5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thuxinjing:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:\"equip\",\r\n\t\t\t\tsubtype:\"equip2\",\r\n\t\t\t\tskills:['huxinjing'],\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(get.mode()!='guozhan') return true;\r\n\t\t\t\t\treturn player==target;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:function(){\r\n\t\t\t\t\treturn get.mode()=='guozhan'?-1:1;\r\n\t\t\t\t},\r\n\t\t\t\ttoself:false,\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:6\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thuoshaolianying:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(get.mode()=='guozhan'){\r\n\t\t\t\t\t\tvar next=player.getNext();\r\n\t\t\t\t\t\tif(!next) return false;\r\n\t\t\t\t\t\treturn target==next||target.inline(next);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(player==target) return false;\r\n\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\treturn current.isLinked()&&current!=player;\r\n\t\t\t\t\t})){\r\n\t\t\t\t\t\tif(!target.isLinked()) return false;\r\n\t\t\t\t\t\tvar distance=get.distance(player,target,'absolute');\r\n\t\t\t\t\t\treturn !game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\tif(target!=current&&current!=player&&current.isLinked()){\r\n\t\t\t\t\t\t\t\tvar dist=get.distance(player,current,'absolute');\r\n\t\t\t\t\t\t\t\tif(dist<distance){\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(dist==distance&&parseInt(current.dataset.position)<parseInt(target.dataset.position)){\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar dist=get.distance(player,target);\r\n\t\t\t\t\t\treturn !game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\treturn current!=player&&get.distance(player,current)<dist\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tmodTarget:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttarget.damage('fire',event.baseDamage||1);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:5,\r\n\t\t\t\t\tvalue:6,\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\tnatureDamage:1,\r\n\t\t\t\t\t\tfireDamage:1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(target.hasSkillTag('nofire')||target.hasSkillTag('nodamage')) return 0;\r\n\t\t\t\t\t\t\tif(target.hasSkill('xuying')&&target.countCards('h')==0) return 0;\r\n\t\t\t\t\t\t\tif(!target.isLinked()){\r\n\t\t\t\t\t\t\t\treturn get.damageEffect(target,player,target,'fire');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn game.countPlayer(function(current){\r\n\t\t\t\t\t\t\t\tif(current.isLinked()){\r\n\t\t\t\t\t\t\t\t\treturn get.sgn(get.damageEffect(current,player,target,'fire'));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tyuanjiao:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\tif(get.mode()=='guozhan'&&player.isUnseen()) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(get.mode()!='guozhan') return player!=target;\r\n\t\t\t\t\tif(target.identity=='unknown'||player.identity=='unknown') return false;\r\n\t\t\t\t\tif(player==target) return false;\r\n\t\t\t\t\tif(player.identity=='ye') return true;\r\n\t\t\t\t\treturn player.identity!=target.identity;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tgame.asyncDraw([target,player],[1,get.mode()=='guozhan'?3:1]);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:4,\r\n\t\t\t\t\t\tvalue:8,\r\n\t\t\t\t\t\torder:9\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:1,\r\n\t\t\t\t\t\tplayer:3,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tzhibi:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tchongzhu:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(player==target) return false;\r\n\t\t\t\t\treturn (target.countCards('h')||target.isUnseen(2));\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tif(!player.storage.zhibi){\r\n\t\t\t\t\t\tplayer.storage.zhibi=[];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.storage.zhibi.add(target);\r\n\t\t\t\t\tvar controls=[];\r\n\t\t\t\t\tif(target.countCards('h')) controls.push('手牌');\r\n\t\t\t\t\tif(target.isUnseen(0)) controls.push('主将');\r\n\t\t\t\t\tif(target.isUnseen(1)) controls.push('副将');\r\n\t\t\t\t\tif(controls.length>1){\r\n\t\t\t\t\t\tplayer.chooseControl(controls).set('ai',function(){return 1});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(controls.length==0) event.finish();\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tvar content;\r\n\t\t\t\t\tvar str=get.translation(target)+'的';\r\n\t\t\t\t\tevent.control = result.control;\r\n\t\t\t\t\tif(result.control){\r\n\t\t\t\t\t\tif(result.control=='手牌'){\r\n\t\t\t\t\t\t\tcontent=[str+'手牌',target.getCards('h')];\r\n\t\t\t\t\t\t\tgame.log(player,'观看了',target,'的手牌');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(result.control=='主将'){\r\n\t\t\t\t\t\t\tcontent=[str+'主将',[[target.name1],'character']];\r\n\t\t\t\t\t\t\tgame.log(player,'观看了',target,'的主将');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tcontent=[str+'副将',[[target.name2],'character']];\r\n\t\t\t\t\t\t\tgame.log(player,'观看了',target,'的副将');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(target.countCards('h')){\r\n\t\t\t\t\t\tevent.control = '手牌';\r\n\t\t\t\t\t\tcontent=[str+'手牌',target.getCards('h')];\r\n\t\t\t\t\t\tgame.log(player,'观看了',target,'的手牌');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(target.isUnseen(0)){\r\n\t\t\t\t\t\tevent.control = '主将';\r\n\t\t\t\t\t\tcontent=[str+'主将',[[target.name1],'character']];\r\n\t\t\t\t\t\tgame.log(player,'观看了',target,'的主将');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.control = '副将';\r\n\t\t\t\t\t\tcontent=[str+'副将',[[target.name2],'character']];\r\n\t\t\t\t\t\tgame.log(player,'观看了',target,'的副将');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.chooseControl('ok').set('dialog',content);\r\n\t\t\t\t},\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9.5,\r\n\t\t\t\t\twuxie:function(){\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:function(player,target){\r\n\t\t\t\t\t\t\tif(player.countCards('h')<=player.hp) return 0;\r\n\t\t\t\t\t\t\tif(player.storage.zhibi&&player.storage.zhibi.contains(target)) return 0;\r\n\t\t\t\t\t\t\treturn target.isUnseen()?1:0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tyiyi:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(get.mode()=='guozhan'){\r\n\t\t\t\t\t\tif(player.identity=='unknown'||player.identity=='ye') return player==target;\r\n\t\t\t\t\t\treturn player.identity==target.identity;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(get.is.versus()){\r\n\t\t\t\t\t\treturn player.side==target.side;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:function(){\r\n\t\t\t\t\tif(get.mode()=='guozhan') return -1;\r\n\t\t\t\t\treturn [1,3];\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\ttarget.draw(2);\r\n\t\t\t\t\ttarget.chooseToDiscard(2,'he',true).ai=get.disvalue;\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tevent.discards = result.cards||[];\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(){\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:3,\r\n\t\t\t\t\t\tvalue:3,\r\n\t\t\t\t\t\torder:5\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar hs=target.getCards('h');\r\n\t\t\t\t\t\t\tif(hs.length<=1){\r\n\t\t\t\t\t\t\t\tif(target==player&&(hs.length==0||hs[0].name=='yiyi')){\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn 0.3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn Math.sqrt(target.countCards('he'));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tdiscard:1,\r\n\t\t\t\t\t\tnorepeat:1\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\twuliu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tglobal:'g_wuliu_skill',\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.identity=='unknown'||player.identity=='ye') return 2.5;\r\n\t\t\t\t\t\treturn 2+game.countPlayer(function(current){\r\n\t\t\t\t\t\t\treturn current.identity==player.identity;\r\n\t\t\t\t\t\t})/2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:3\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['wuliu_skill'],\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t},\r\n\t\t\tsanjian:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:4\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['sanjian_skill']\r\n\t\t\t},\r\n\t\t\tjingfanma:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip4',\r\n\t\t\t\tdistance:{globalFrom:-1},\r\n\t\t\t},\r\n\t\t},\r\n\t\tskill:{\r\n\t\t\tliulongcanjia:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tmod:{\r\n\t\t\t\t\ttargetEnabled:function(card,player,target){\r\n\t\t\t\t\t\tif(['equip3','equip4'].contains(get.subtype(card))) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tminguangkai_cancel:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{target:'useCardToTarget'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\treturn get.effect(event.target,event.card,event.player,player)<0;\r\n\t\t\t\t},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(['huoshaolianying','huogong'].contains(event.card.name)) return true;\r\n\t\t\t\t\tif(event.card.name=='sha') return event.card.nature=='fire';\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.getParent().targets.remove(player);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target,current){\r\n\t\t\t\t\t\t\tif(['huoshaolianying','huogong'].contains(card.name)||(card.name=='sha'&&card.nature=='fire')){\r\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tminguangkai_link:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'linkBefore'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\t//priority:20,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn !player.isMajor()&&!player.isLinked();\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target,current){\r\n\t\t\t\t\t\t\tif(target.isMinor()&&['tiesuo','lulitongxin'].contains(card.name)){\r\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdinglanyemingzhu_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tinherit:'zhiheng',\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn !player.hasSkill('gzzhiheng',true);\r\n\t\t\t\t},\r\n\t\t\t\tselectCard:function(){\r\n\t\t\t\t\tvar player=_status.event.player;\r\n\t\t\t\t\treturn [1,player.maxHp];\r\n\t\t\t\t},\r\n\t\t\t\tfilterCard:function(card,player){\r\n\t\t\t\t\treturn card!=player.getEquip(5);\r\n\t\t\t\t},\r\n\t\t\t\tprompt:'出牌阶段限一次，你可以弃置至多X张牌（X为你的体力上限），然后摸等量的牌'\r\n\t\t\t},\r\n\t\t\tg_dinglanyemingzhu_ai:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\tplayer:function(card,player){\r\n\t\t\t\t\t\t\tif(player.hasSkill('jubao')) return;\r\n\t\t\t\t\t\t\tif(card.name=='dinglanyemingzhu'&&game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn current.hasSkill('jubao')&&get.attitude(player,current)<=0;\r\n\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\treturn [0,0,0,0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tg_feilongduofeng_ai:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\tplayer:function(card,player){\r\n\t\t\t\t\t\t\tif(player.hasSkill('zhangwu')) return;\r\n\t\t\t\t\t\t\tif(card.name=='feilongduofeng'&&game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn current.hasSkill('zhangwu')&&get.attitude(player,current)<=0;\r\n\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\treturn [0,0,0,0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tg_taipingyaoshu_ai:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\tplayer:function(card,player){\r\n\t\t\t\t\t\t\tif(player.hasSkill('wendao')) return;\r\n\t\t\t\t\t\t\tif(card.name=='taipingyaoshu'&&game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn current.hasSkill('wendao')&&get.attitude(player,current)<=0;\r\n\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\treturn [0,0,0,0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfeilongduofeng:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCardToPlayered'},\r\n\t\t\t\tlogTarget:'target',\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\treturn get.attitude(player,event.target)<=0;\r\n\t\t\t\t},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn event.card.name=='sha'&&event.target.countCards('he');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.target.chooseToDiscard('he',true);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfeilongduofeng2:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'dieAfter'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.reason&&event.reason.card&&event.reason.card.name=='sha'){\r\n\t\t\t\t\t\treturn event.player.isDead()&&lib.group.contains(player.identity)&&player.isMinor();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tlogTarget:'player',\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tvar list=[];\r\n\t\t\t\t\tfor(var i=0;i<_status.characterlist.length;i++){\r\n\t\t\t\t\t\tvar info=lib.character[_status.characterlist[i]];\r\n\t\t\t\t\t\tif(info[4]&&info[4].contains('jun')) continue;\r\n\t\t\t\t\t\tif(info[1]==player.identity){\r\n\t\t\t\t\t\t\tlist.push(_status.characterlist[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.identity=event.player.identity;\r\n\t\t\t\t\tif(trigger.player==game.me&&!_status.auto){\r\n\t\t\t\t\t\tevent.dialog=ui.create.dialog('是否选择一名角色重新加入游戏？',[list,'character']);\r\n\t\t\t\t\t\tevent.filterButton=function(){return true};\r\n\t\t\t\t\t\tevent.player=game.me;\r\n\t\t\t\t\t\tevent.custom.replace.confirm=function(){\r\n\t\t\t\t\t\t\tif(!ui.selected.buttons.length){\r\n\t\t\t\t\t\t\t\tevent.directresult='refuse';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tevent.directresult=ui.selected.buttons[0].link;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t\tif(ui.confirm) ui.confirm.close();\r\n\t\t\t\t\t\t\tdelete event.player;\r\n\t\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.switchToAuto=function(){\r\n\t\t\t\t\t\t\tevent.directresult=list.randomGet();\r\n\t\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t\tif(ui.confirm) ui.confirm.close();\r\n\t\t\t\t\t\t\tdelete event.player;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgame.check();\r\n\t\t\t\t\t\tgame.pause();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(trigger.player.isOnline()){\r\n\t\t\t\t\t\ttrigger.player.send(function(player,list){\r\n\t\t\t\t\t\t\tif(_status.auto){\r\n\t\t\t\t\t\t\t\t_status.event._result=list.randomGet();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tvar next=game.createEvent('replacePlayer');\r\n\t\t\t\t\t\t\t\tnext.source=player;\r\n\t\t\t\t\t\t\t\tnext.list=list;\r\n\t\t\t\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\t\t\t\tevent.dialog=ui.create.dialog('是否选择一名角色重新加入游戏？',[event.list,'character']);\r\n\t\t\t\t\t\t\t\t\tevent.filterButton=function(){return true};\r\n\t\t\t\t\t\t\t\t\tevent.player=event.source;\r\n\t\t\t\t\t\t\t\t\tevent.custom.replace.confirm=function(){\r\n\t\t\t\t\t\t\t\t\t\tif(!ui.selected.buttons.length){\r\n\t\t\t\t\t\t\t\t\t\t\tevent.result='refuse';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\t\tevent.result=ui.selected.buttons[0].link;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t\t\t\t\tif(ui.confirm) ui.confirm.close();\r\n\t\t\t\t\t\t\t\t\t\tdelete event.player;\r\n\t\t\t\t\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t\t\t\t\tgame.uncheck();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tevent.switchToAuto=function(){\r\n\t\t\t\t\t\t\t\t\t\tevent.result=list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t\t\t\t\tif(ui.confirm) ui.confirm.close();\r\n\t\t\t\t\t\t\t\t\t\tdelete event.player;\r\n\t\t\t\t\t\t\t\t\t\tgame.uncheck();\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tgame.check();\r\n\t\t\t\t\t\t\t\t\tgame.pause();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t},trigger.player,list);\r\n\t\t\t\t\t\ttrigger.player.wait();\r\n\t\t\t\t\t\tgame.pause();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.directresult=list.randomGet();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.list=list;\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tgame.uncheck();\r\n\t\t\t\t\tif(!event.directresult){\r\n\t\t\t\t\t\tif(event.resultOL){\r\n\t\t\t\t\t\t\tevent.directresult=event.resultOL[trigger.player.playerid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!event.directresult||event.directresult=='ai'){\r\n\t\t\t\t\t\t\tevent.directresult=event.list.randomGet();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(event.directresult=='refuse'){\r\n\t\t\t\t\t\tgame.log(trigger.player,'拒绝重新加入游戏');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.log(trigger.player,'重新加入游戏');\r\n\t\t\t\t\tvar name=event.directresult;\r\n\t\t\t\t\tgame.log(trigger.player,'将主将替换为','#b'+name);\r\n\t\t\t\t\t_status.characterlist.remove(name);\r\n\t\t\t\t\tgame.broadcastAll(function(source,name,identity){\r\n\t\t\t\t\t\tsource.revive(2,false);\r\n\t\t\t\t\t\tsource.identity=identity;\r\n\t\t\t\t\t\tsource._group=identity;\r\n\t\t\t\t\t\tsource.setIdentity();\r\n\t\t\t\t\t\tif(source==game.me){\r\n\t\t\t\t\t\t\tui.arena.classList.remove('selecting');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},trigger.player,name,event.identity);\r\n\t\t\t\t\ttrigger.player.draw();\r\n\t\t\t\t\ttrigger.player.reinit(trigger.player.name1,name,false);\r\n\t\t\t\t\ttrigger.player.removeCharacter(1);\r\n\t\t\t\t\ttrigger.getParent('damage').untrigger(false,trigger.player);\r\n\t\t\t\t\tgame.addVideo('setIdentity',trigger.player,event.identity);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfeilongduofeng3:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'dying'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tvar evt=event.getParent('damage');\r\n\t\t\t\t\treturn evt&&evt.card&&evt.card.name=='sha'&&event.player.countGainableCards(player,'h')>0;\r\n\t\t\t\t},\r\n\t\t\t\t//priority:7,\r\n\t\t\t\tlogTarget:'player',\r\n\t\t\t\tprompt2:'获得该角色的一张手牌',\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\treturn get.attitude(player,event.player)<0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tplayer.gainPlayerCard(trigger.player,'h',true);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttaipingyaoshu:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tmod:{\r\n\t\t\t\t\tmaxHandcard:function(player,num){\r\n\t\t\t\t\t\tif(player.hasSkill('huangjintianbingfu')){\r\n\t\t\t\t\t\t\tnum+=player.storage.huangjintianbingfu.length;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn num+game.countPlayer(function(current){\r\n\t\t\t\t\t\t\treturn current.isFriendOf(player);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\ttrigger:{player:'damageBegin4'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.source&&event.source.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\tif(event.nature) return true;\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tnofire:true,\r\n\t\t\t\t\tnothunder:true,\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target,current){\r\n\t\t\t\t\t\t\tif(target.hasSkillTag('unequip2')) return;\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})||player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})) return;\r\n\t\t\t\t\t\t\tif(get.tag(card,'natureDamage')) return 'zerotarget';\r\n\t\t\t\t\t\t\tif(card.name=='tiesuo'){\r\n\t\t\t\t\t\t\t\treturn [0,0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tg_taipingyaoshu:{},\r\n\t\t\tyuxi_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'phaseDrawBegin2'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn !player.isUnseen()&&!event.numFixed;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tthreaten:1.3\r\n\t\t\t\t},\r\n\t\t\t\tgroup:'yuxi_skill2'\r\n\t\t\t},\r\n\t\t\tyuxi_skill2:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'phaseUseBegin'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(player.isUnseen()) return false;\r\n\t\t\t\t\treturn game.hasPlayer(function(current){\r\n\t\t\t\t\t\treturn player.canUse('zhibi',current);\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tplayer.chooseUseTarget('玉玺：选择知己知彼的目标',{name:'zhibi'});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\txietianzi:{\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.countCards('h')>0;\r\n\t\t\t\t},\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\tplayer:'phaseDiscardAfter',\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tplayer.removeSkill('xietianzi');\r\n\t\t\t\t\tplayer.chooseToDiscard('h','是否弃置一张手牌并获得一个额外回合？').set('ai',function(card){\r\n\t\t\t\t\t\treturn 10-get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tplayer.insertPhase();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tg_chiling1:{\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\tplayer:'loseEnd',\r\n\t\t\t\t\tglobal:'cardsDiscardEnd',\r\n\t\t\t\t},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tvar evt=event.getParent().relatedEvent;\r\n\t\t\t\t\tif(evt&&evt.name=='useCard') return false;\r\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\r\n\t\t\t\t\t\tif(event.cards[i].name=='chiling'&&get.position(event.cards[i],true)=='d'){\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar cards=[];\r\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\r\n\t\t\t\t\t\tif(trigger.cards[i].name=='chiling'&&get.position(trigger.cards[i],true)=='d'){\r\n\t\t\t\t\t\t\tcards.push(trigger.cards[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(cards.length){\r\n\t\t\t\t\t\tgame.cardsGotoSpecial(cards);\r\n\t\t\t\t\t\tgame.log(cards,'已被移出游戏');\r\n\t\t\t\t\t\t_status.chiling=true;\r\n\t\t\t\t\t\tif(player&&player.popup) player.popup('敕令');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tg_chiling2:{},\r\n\t\t\tg_chiling3:{\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\ttrigger:{player:'phaseAfter'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tfilter:function(){\r\n\t\t\t\t\treturn _status.chiling==true;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\t_status.chiling=false;\r\n\t\t\t\t\tvar targets=game.filterPlayer(function(target){\r\n\t\t\t\t\t\treturn target.isUnseen();\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttargets.sort(lib.sort.seat);\r\n\t\t\t\t\tevent.targets=targets;\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(event.targets.length){\r\n\t\t\t\t\t\tvar target=event.targets.shift();\r\n\t\t\t\t\t\tevent.current=target;\r\n\t\t\t\t\t\tvar choiceList=['明置一张武将牌，然后摸一张牌','失去1点体力'];\r\n\t\t\t\t\t\tif(target.countCards('he',{type:'equip'})){\r\n\t\t\t\t\t\t\tchoiceList.push('弃置一张装备牌');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.chooseControl(lib.card.chiling.chooseai).set('prompt','敕令').set('choiceList',choiceList);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tvar target=event.current;\r\n\t\t\t\t\tif(result.control=='选项一'){\r\n\t\t\t\t\t\ttarget.chooseControl('主将','副将',function(){\r\n\t\t\t\t\t\t\treturn Math.floor(Math.random()*2);\r\n\t\t\t\t\t\t}).set('prompt','选择要明置的武将牌');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(result.control=='选项二'){\r\n\t\t\t\t\t\ttarget.loseHp();\r\n\t\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\ttarget.chooseToDiscard('he',{type:'equip'},true);\r\n\t\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 3'\r\n\t\t\t\t\tvar target=event.current;\r\n\t\t\t\t\tif(result.index==0){\r\n\t\t\t\t\t\ttarget.showCharacter(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\ttarget.showCharacter(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.draw();\r\n\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tg_diaohulishan:{},\r\n\t\t\tdiaohulishan:{\r\n\t\t\t\ttrigger:{player:['damageBegin3','loseHpBefore','recoverBefore']},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t},\r\n\t\t\t\tmod:{\r\n\t\t\t\t\tcardEnabled:function(){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcardSavable:function(){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttargetEnabled:function(){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark:true,\r\n\t\t\t\tintro:{\r\n\t\t\t\t\tcontent:'不计入距离的计算且不能使用牌且不是牌的合法目标且不能失去/回复体力和受到伤害'\r\n\t\t\t\t},\r\n\t\t\t\tgroup:'undist',\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function (card,player,target){\r\n\t\t\t\t\t\t\tif(get.tag(card,'recover')||get.tag(card,'damage')) return 'zeroplayertarget';\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thuxinjing:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'damageBegin4'},\r\n\t\t\t\t// forced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.source&&event.source.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\tif(get.mode()!='guozhan'&&event.num>1) return true;\r\n\t\t\t\t\treturn event.num>=player.hp;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\tvar e2=player.getEquip('huxinjing');\r\n\t\t\t\t\tif(e2){\r\n\t\t\t\t\t\tplayer.discard(e2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.removeSkill('huxinjing');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twuliu_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t},\r\n\t\t\tg_wuliu_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tmod:{\r\n\t\t\t\t\tattackFrom:function(from,to,distance){\r\n\t\t\t\t\t\treturn distance-game.countPlayer(function(current){\r\n\t\t\t\t\t\t\tif(current==from) return false;\r\n\t\t\t\t\t\t\tif(current.identity=='unknown'||current.identity=='ye') return false;\r\n\t\t\t\t\t\t\tif(current.identity!=from.identity) return false;\r\n\t\t\t\t\t\t\tif(current.hasSkill('wuliu_skill')) return true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsanjian_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttrigger:{source:'damageSource'},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.player.isDead()) return false;\r\n\t\t\t\t\tif(player.countCards('h')==0) return false;\r\n\t\t\t\t\tif(!event.card) return false;\r\n\t\t\t\t\tif(event.card.name!='sha') return false;\r\n\t\t\t\t\tif(!event.notLink()) return false;\r\n\t\t\t\t\treturn game.hasPlayer(function(current){\r\n\t\t\t\t\t\treturn current!=event.player&&get.distance(event.player,current)<=1;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tvar damaged=trigger.player;\r\n\t\t\t\t\tplayer.chooseCardTarget({\r\n\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\r\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\t\t\tvar damaged=_status.event.damaged;\r\n\t\t\t\t\t\t\treturn get.distance(damaged,target)<=1&&target!=damaged;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai1:function(card){\r\n\t\t\t\t\t\t\treturn 9-get.value(card);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tai2:function(target){\r\n\t\t\t\t\t\t\tvar player=_status.event.player;\r\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprompt:get.prompt('sanjian')\r\n\t\t\t\t\t}).set('damaged',damaged);\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tplayer.logSkill('sanjian_skill',result.targets);\r\n\t\t\t\t\t\tplayer.discard(result.cards);\r\n\t\t\t\t\t\tresult.targets[0].damage();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\ttranslate:{\r\n\t\t\tliulongcanjia:'高收益车',\r\n\t\t\tliulongcanjia_info:'锁定技，你计算与其他角色的距离-1，其他角色计算与你的距离+1。</br>锁定技，当此牌进入你的装备区时，你弃置你装备区内其他坐骑牌；当此牌在你的装备区内，你不能使用其他坐骑牌（你的装备区便不能置入其他坐骑牌）。',\r\n\t\t\tminguangkai:'明光铠',\r\n\t\t\tminguangkai_cancel:'明光铠',\r\n\t\t\tminguangkai_link:'明光铠',\r\n\t\t\tminguangkai_info:'锁定技，当你成为【火烧连营】、【火攻】或火【杀】的目标时，取消之；若你是小势力角色，你不会被横置。',\r\n\t\t\tdinglanyemingzhu:'定澜夜明珠',\r\n\t\t\tdinglanyemingzhu_bg:'珠',\r\n\t\t\tdinglanyemingzhu_info:'锁定技，你视为拥有技能“制衡”，若你已经有“制衡”，则改为取消弃置牌数的限制。',\r\n\t\t\tdinglanyemingzhu_skill:'制衡',\r\n\t\t\tdinglanyemingzhu_skill_info:'出牌阶段限一次，你可以弃置至多X张牌（X为你的体力上限），然后摸等量的牌',\r\n\t\t\tfeilongduofeng:'卡祖笛',\r\n\t\t\tfeilongduofeng2:'卡祖笛',\r\n\t\t\tfeilongduofeng3:'卡祖笛',\r\n\t\t\tfeilongduofeng_info:'当你使用【杀】指定一名角色为目标后，你可令该角色弃置一张牌。当你使用【杀】令其他角色进入濒死状态时，你可以获得其一张手牌。',\r\n\t\t\ttaipingyaoshu:'太平要术',\r\n\t\t\ttaipingyaoshu_info:'锁定技，防止你受到的所有属性伤害；全场每有一名与你势力相同的角色存活，你的手牌上限便+1；当你失去装备区里的【太平要术】时，你摸两张牌，然后若你的体力值大于1，你失去1点体力。',\r\n\t\t\tyuxi_skill:'玉玺',\r\n\t\t\tyuxi_skill2:'玉玺',\r\n\t\t\tyuxi:'玉玺',\r\n\t\t\tyuxi_info:'锁定技，若你有明置的武将牌，你的势力视为唯一的大势力；锁定技，摸牌阶段，若你有明置的武将牌，你多摸一张牌；锁定技，出牌阶段开始时，若你有明置的武将牌，你视为使用【知己知彼】',\r\n\t\t\txietianzi:'挟令',\r\n\t\t\txietianzi_info:'出牌阶段，对自己使用。你结束出牌阶段，若如此做，弃牌阶段结束时，你可以弃置一张手牌，获得一个额外的回合',\r\n\t\t\txietianzi_info_guozhan:'出牌阶段，对为大势力角色的你使用。你结束出牌阶段，若如此做，弃牌阶段结束时，你可以弃置一张手牌，获得一个额外的回合',\r\n\t\t\tshuiyanqijunx:'水淹七军',\r\n\t\t\tshuiyanqijunx_info:'出牌阶段，对一名其他角色使用。目标角色选择一项：1、弃置装备区里的所有牌（至少一张）；2、受到你造成的1点雷电伤害',\r\n\t\t\tshuiyanqijunx_info_guozhan:'出牌阶段，对一名装备区里有牌的其他角色使用。目标角色选择一项：1、弃置装备区里的所有牌；2、受到你造成的1点雷电伤害',\r\n\t\t\tlulitongxin:'勠力同心',\r\n\t\t\tlulitongxin_info:'出牌阶段，对所有大势力角色或所有小势力角色使用。若目标角色：不处于“连环状态”，其横置；处于“连环状态”，其摸一张牌',\r\n\t\t\tlulitongxin_info_versus:'出牌阶段，对所有敌方角色或所有己方角色使用。若目标角色：为敌方角色且不处于“连环状态”，其横置；为己方角色且处于“连环状态”，其摸一张牌。',\r\n\t\t\tlianjunshengyan:'联军盛宴',\r\n\t\t\tlianjunshengyan_info:'出牌阶段，对你和你选择的除你的势力外的一个势力的所有角色。若目标角色：为你，你选择摸Y张牌并回复X-Y点体力（X为该势力的角色数，Y∈[0,X]）；不为你，其摸一张牌，然后重置。',\r\n\t\t\tlianjunshengyan_info_boss:'出牌阶段，对场上所有角色使用。你摸X张牌（X为目存活角色数），其他角色依次选择回复1点体力或摸一张牌。',\r\n\t\t\tchiling:'敕令',\r\n\t\t\tchiling_info:'出牌阶段，对所有没有势力的角色使用。目标角色选择一项：1、明置一张武将牌，然后摸一张牌；2、弃置一张装备牌；3、失去1点体力。当【敕令】因判定或弃置而置入弃牌堆时，系统将之移出游戏，然后系统于当前回合结束后视为对所有没有势力的角色使用【敕令】',\r\n\t\t\tdiaohulishan:'调虎离山',\r\n\t\t\tdiaohulishan_info:'出牌阶段，对至多两名其他角色使用。目标角色于此回合结束之前不计入距离的计算且不能使用牌且不是牌的合法目标且不能失去或回复体力或受到伤害。',\r\n\t\t\thuoshaolianying:'火烧连营',\r\n\t\t\thuoshaolianying_bg:'烧',\r\n\t\t\thuoshaolianying_info_guozhan:'出牌阶段，对你的下家和与其处于同一队列的角色使用，每名角色受到一点火焰伤害',\r\n\t\t\thuoshaolianying_info:'对离你最近的一名横置角色使用（若无横置角色则改为对距离你最近的所有角色使用），对目标造成一点火焰伤害',\r\n\t\t\tyuanjiao:'远交近攻',\r\n\t\t\tyuanjiao_info_guozhan:'对一名不同势力的角色使用，对方摸一张牌，然后你摸3张牌',\r\n\t\t\tyuanjiao_info:'对一名其他角色使用，你与其各摸一张牌',\r\n\t\t\tyuanjiao_bg:'交',\r\n\t\t\tzhibi:'知己知彼',\r\n\t\t\tzhibi_info:'出牌阶段对一名其他角色使用，观看其手牌或武将牌',\r\n\t\t\tyiyi:'以逸待劳',\r\n\t\t\tyiyi_info_guozhan:'对与自己势力相同的所有角色使用，摸两张牌然后弃置两张牌',\r\n\t\t\tyiyi_info_combat:'对所有友方角色使用，摸两张牌然后弃置两张牌',\r\n\t\t\tyiyi_info:'对与任意三名角色使用，摸两张牌然后弃置两张牌',\r\n\t\t\tyiyi_bg:'逸',\r\n\t\t\twuliu:'吴六剑',\r\n\t\t\twuliu_info:'其他与装备者势力相同的角色攻击范围+1',\r\n\t\t\tsanjian:'三尖两刃刀',\r\n\t\t\tsanjian_info:'当你使用杀造成伤害后，可以弃置1张手牌对一名距离受伤害角色1以内的其他角色造成1点伤害',\r\n\t\t\twuliu_skill:'吴六剑',\r\n\t\t\tsanjian_skill:'三尖两刃刀',\r\n\t\t\tjingfanma_bg:'-马',\r\n\t\t\tjingfanma:'三轮摩托',\r\n\t\t\tjingfanma_info:'你的进攻距离+1',\r\n\t\t\thuxinjing_bg:'镜',\r\n\t\t\thuxinjing:'烤阿草',\r\n\t\t\thuxinjing_info:'此牌可对其他角色使用。当你受到伤害时，若伤害值大于1或大于等于你的体力值，则你可以将【护心镜】置入弃牌堆，然后防止此伤害。',\r\n\t\t\thuxinjing_info_guozhan:'当你受到伤害时，若伤害值大于或等于你的体力值，则你可以将【护心镜】置入弃牌堆，然后防止此伤害。',\r\n\t\t},\r\n\t\tlist:[\r\n\t\t\t['heart',9,'yuanjiao'],\r\n\t\t\t['club',3,'zhibi'],\r\n\t\t\t['club',4,'zhibi'],\r\n\t\t\t['diamond',4,'yiyi'],\r\n\t\t\t['heart',11,'yiyi'],\r\n\t\t\t['diamond',6,'wuliu'],\r\n\t\t\t['diamond',12,'sanjian'],\r\n\t\t\t['heart',3,'jingfanma'],\r\n\t\t\t[\"spade\",4,'shunshou'],\r\n\t\t\t[\"spade\",12,'guohe'],\r\n\t\t\t[\"spade\",11,'wuxie'],\r\n\t\t\t['spade',3,'huoshaolianying','fire'],\r\n\t\t\t['club',11,'huoshaolianying','fire'],\r\n\t\t\t['heart',12,'huoshaolianying','fire'],\r\n\t\t\t['club',2,'huxinjing'],\r\n\t\t\t['heart',2,'diaohulishan'],\r\n\t\t\t['diamond',10,'diaohulishan'],\r\n\t\t\t['heart',1,'lianjunshengyan'],\r\n\t\t\t['club',3,'chiling'],\r\n\t\t\t['spade',12,'lulitongxin'],\r\n\t\t\t['club',10,'lulitongxin'],\r\n\t\t\t['club',12,'shuiyanqijunx'],\r\n\t\t\t['heart',13,'shuiyanqijunx'],\r\n\t\t\t['spade',1,'xietianzi'],\r\n\t\t\t['diamond',1,'xietianzi'],\r\n\t\t\t['diamond',4,'xietianzi'],\r\n\t\t\t['club',1,'yuxi'],\r\n\t\t],\r\n\t}\r\n});\r\n\n\n//# sourceURL=webpack:///./card/guozhan.js?")},"./card/huajing.js":()=>{eval("\r\ngame.import('card',function(lib,game,ui,get,ai,_status){\r\n\treturn {\r\n\t\tname:'huajing',\r\n\t\tconnect:true,\r\n\t\tcard:{\r\n\t\t\t//化鲸篇\r\n\t\t\tqi:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tenable:true,\r\n\t\t\t\ttype:'basic',\r\n\t\t\t\ttoself:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tmodTarget:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(!target.hasSkill('qi_skill')){\r\n\t\t\t\t\t\ttarget.addTempSkill('qi_skill')\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(target.isDamaged()){\r\n\t\t\t\t\t\ttarget.changeHujia();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:function(item,player){\r\n\t\t\t\t\t\tif(player.isDamaged()) return 5.1;\r\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.3;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalue:5,\r\n\t\t\t\t\tuseful:[3,2,2,1],\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(target.isDamaged()) return 1.1;\r\n\t\t\t\t\t\t\telse if(!target.isPhaseUsing())\treturn 0;\r\n\t\t\t\t\t\t\tvar shas=player.getCards('h','sha');\r\n\t\t\t\t\t\t\tif(shas.length>1&&(player.getCardUsable('sha')>1||player.countCards('h','zhuge'))){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tshas.sort(function(a,b){\r\n\t\t\t\t\t\t\t\treturn get.order(b)-get.order(a);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tvar card;\r\n\t\t\t\t\t\t\tif(shas.length){\r\n\t\t\t\t\t\t\t\tfor(var i=0;i<shas.length;i++){\r\n\t\t\t\t\t\t\t\t\tif(lib.filter.filterCard(shas[i],target)){\r\n\t\t\t\t\t\t\t\t\t\tcard=shas[i];break;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(card){\r\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\t\treturn (get.attitude(target,current)<0&&\r\n\t\t\t\t\t\t\t\t\t\ttarget.canUse(card,current,true,true)&&\r\n\t\t\t\t\t\t\t\t\t\t!current.hasSkillTag('filterDamage',null,{\r\n\t\t\t\t\t\t\t\t\t\t\tplayer:player,\r\n\t\t\t\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t\t\t\t\tqi:true,\r\n\t\t\t\t\t\t\t\t\t\t})&&\r\n\t\t\t\t\t\t\t\t\t\tget.effect(current,card,target)>0);\r\n\t\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\t\tif(card.nature)\treturn 0.2;\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t//一些新标签\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tchangeNatrue:1,\r\n\t\t\t\t\t\tgainHujia:0.8,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tjingluo:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tyingbian_prompt:'当你使用此牌选择目标后，你可为此牌减少一个目标',\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tevent.yingbian_removeTarget=true;\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\treverseOrder:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(typeof event.baseDamage!='number') event.baseDamage=1;\r\n\t\t\t\t\tif(event.directHit) event._result={bool:false};\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar next=target.chooseToDiscard('he');\r\n\t\t\t\t\t\tnext.set('ai',function(card){\r\n\t\t\t\t\t\t\tvar evt=_status.event.getParent();\r\n\t\t\t\t\t\t\tif(evt.target.hp==evt.target.maxHp) return 0;\r\n\t\t\t\t\t\t\tif(!evt.target.isLinked())\treturn 4-get.value(card);\r\n\t\t\t\t\t\t\tif(get.name(card)=='shan'&&evt.target.hp>1)\treturn 2;\r\n\t\t\t\t\t\t\treturn 9-get.value(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnext.set('prompt','弃置一张牌，否则横置并摸一张牌');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.cards&&result.cards.length){\r\n\t\t\t\t\t\ttarget.changeHujia(event.baseDamage);\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tif(target.isLinked())\tevent.finish();\r\n\t\t\t\t\t'step 3'\r\n\t\t\t\t\ttarget.link();\r\n\t\t\t\t\ttarget.draw();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(target,card,player,viewer){\r\n\t\t\t\t\t\tif(get.attitude(viewer,target)<0){\r\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:9,\r\n\t\t\t\t\t\tuseful:[5,1],\r\n\t\t\t\t\t\tvalue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 1;\r\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\r\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\r\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return 2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(nh==0) return 1.5;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t\tloseCard:0.5,\r\n\t\t\t\t\t\tdiscard:0.5,\r\n\t\t\t\t\t\tdraw:0.5,\r\n\t\t\t\t\t\tgainHujia:0.8,\r\n\t\t\t\t\t\tmultitarget:1,\r\n\t\t\t\t\t\tmultineg:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thaixiao:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\treverseOrder:true,\r\n\t\t\t\tcardnature:'ocean',\r\n\t\t\t\tyingbian_prompt:'当你使用此牌选择目标后，你可为此牌减少一个目标',\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tevent.yingbian_removeTarget=true;\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(typeof event.baseDamage!='number') event.baseDamage=1;\r\n\t\t\t\t\tif(event.directHit) event._result={bool:false};\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar sourcecolor = get.color(card,player);\r\n\t\t\t\t\t\tvar next=target.chooseToRespond({color:sourcecolor});\r\n\t\t\t\t\t\tnext.set('ai',function(card){\r\n\t\t\t\t\t\t\tvar evt=_status.event.getParent();\r\n\t\t\t\t\t\t\tif(get.damageEffect(evt.target,evt.player,evt.target)>=0) return 0;\r\n\t\t\t\t\t\t\tif(evt.player.hasSkillTag('notricksource')) return 0;\r\n\t\t\t\t\t\t\tif(evt.target.hasSkillTag('notrick')) return 0;\r\n\t\t\t\t\t\t\tif(evt.target.hasSkillTag('noocean')||evt.target.hasSkillTag('nodamage')){\r\n\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 8-get.value(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnext.set('prompt',`【海啸】：打出一张颜色为${get.translation(sourcecolor)}的牌响应之，否则受到${get.cnNumber(event.baseDamage)}点海洋伤害`);\r\n\t\t\t\t\t\tnext.autochoose=lib.filter.autoRespondShan;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.bool==false){\r\n\t\t\t\t\t\ttarget.damage(event.baseDamage,'ocean');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(target,card,player,viewer){\r\n\t\t\t\t\t\tvar suit = get.suit(card);\r\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h',function(card){\r\n\t\t\t\t\t\t\treturn suit==get.suit(card);\r\n\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:9,\r\n\t\t\t\t\t\tuseful:1,\r\n\t\t\t\t\t\tvalue:5\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\r\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\r\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\r\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(nh==0) return -2;\r\n\t\t\t\t\t\t\tif(nh==1) return -1.7\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t\trespond:1,\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\tnatureDamage:1,\r\n\t\t\t\t\t\toceanDamage:1,\r\n\t\t\t\t\t\tmultitarget:1,\r\n\t\t\t\t\t\tmultineg:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlangyong:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tcardnature:'ocean',\r\n\t\t\t\tmodTarget:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.countCards('e');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(typeof event.baseDamage!='number') event.baseDamage=1;\r\n\t\t\t\t\ttarget.chooseControl('dialogcontrol',['弃置装备区所有牌','受到海洋伤害']).set('ai',function(){\r\n\t\t\t\t\t\tvar evt=_status.event.getParent();\r\n\t\t\t\t\t\tif(evt.player.hasSkillTag('notricksource')) return 1;\r\n\t\t\t\t\t\tif(evt.player.hasSkillTag('noocean')) return 1;\r\n\t\t\t\t\t\tif(evt.target.hasSkillTag('notrick')) return 1;\r\n\t\t\t\t\t\tif(evt.target.hp==1)\treturn 0;\r\n\t\t\t\t\t\treturn Math.random()<0.5?1:0;\r\n\t\t\t\t\t}).set('prompt',`【浪涌】：弃置装备区里所有的牌，或受到${get.translation(player)}造成的${get.cnNumber(event.baseDamage)}点海洋伤害。`);\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.control=='弃置装备区所有牌'){\r\n\t\t\t\t\t\ttarget.discard(target.getCards('e'))\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttarget.damage(event.baseDamage,'ocean')\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:9.5,\r\n\t\t\t\t\t\tuseful:[3,1],\r\n\t\t\t\t\t\tvalue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(player.hasSkill('miaomiao'))\treturn get.recoverEffect(target,player,player);\r\n\t\t\t\t\t\t\tif(target.hasSkillTag('noocean')) return 0;\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tdiscard:1,\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\tnatureDamage:1,\r\n\t\t\t\t\t\toceanDamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchenmo:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.countCards('he');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tplayer.choosePlayerCard(target, 'he', [1, 3], '【沉没】：移除至多3张牌',true).set('ai',function(button){\r\n\t\t\t\t\t\tvar val = get.buttonValue(button);\r\n\t\t\t\t\t\tvar att = get.attitude(_status.event.player,get.owner(button.link));\r\n\t\t\t\t\t\tvar pos = get.position(button.link);\r\n\t\t\t\t\t\tvar extra = get.owner(button.link).getCards('h').removeArray(ui.selected.cards);\r\n\t\t\t\t\t\tif(att>0&&pos=='h') return 8+val;\r\n\t\t\t\t\t\telse if(pos=='h'&&extra.length==1&&extra.contains(button.link)) return 0;\r\n\t\t\t\t\t\telse if(att>0)\treturn -val;\r\n\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tevent.cards = result.links.slice(0);\r\n\t\t\t\t\t\tif(!target.hasSkill('chen_card')){\r\n\t\t\t\t\t\t\ttarget.addSkill('chen_card');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.lose(result.links,ui.special,'toStorage');\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\ttarget.markAuto('chen_card',event.cards);\r\n\t\t\t\t\tevent.result = {cards:event.cards};\r\n\t\t\t\t\t'step 3'\r\n\t\t\t\t\tif (target && target.countCards('h') == 0) {\r\n\t\t\t\t\t\ttarget.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:10.5,\r\n\t\t\t\t\t\tuseful:[2,1],\r\n\t\t\t\t\t\tvalue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(!player.inRange(target)&&!player.hasCard('juedou'))\treturn 0;\r\n\t\t\t\t\t\t\tif(target==player&&player.needsToDiscard())\treturn 1;\r\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\r\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\r\n\t\t\t\t\t\t\tif(att>0){\r\n\t\t\t\t\t\t\t\tvar js=target.getCards('j');\r\n\t\t\t\t\t\t\t\tif(js.length){\r\n\t\t\t\t\t\t\t\t\tvar jj=js[0].viewAs?{name:js[0].viewAs}:js[0];\r\n\t\t\t\t\t\t\t\t\tif(jj.name=='guohe'||js.length>1||get.effect(target,jj,target,player)<0){\r\n\t\t\t\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(target.getEquip('baiyin')&&target.isDamaged()&&\r\n\t\t\t\t\t\t\t\t\tget.recoverEffect(target,player,player)>0){\r\n\t\t\t\t\t\t\t\t\tif(target.hp==1&&!target.hujia) return 1.6;\r\n\t\t\t\t\t\t\t\t\tif(target.hp==2) return 0.01;\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar es=target.getCards('e');\r\n\t\t\t\t\t\t\tvar noe=(es.length==0||target.hasSkillTag('noe'));\r\n\t\t\t\t\t\t\tvar noe2=(es.filter(function(esx){\r\n\t\t\t\t\t\t\treturn esx.name=='tengjia'||get.value(esx)>0\r\n\t\t\t\t\t\t\t}).length==0);\r\n\t\t\t\t\t\t\tvar noh=(nh==0||target.hasSkillTag('noh'));\r\n\t\t\t\t\t\t\tif(noh&&(noe||noe2)) return 0;\r\n\t\t\t\t\t\t\tif(att<=0&&!target.countCards('he')) return 1.5;\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t\tdraw:1,\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tdiscard:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchenjing:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.countCards('he');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tplayer.choosePlayerCard(target, 'he', [1, 3], '【沉静】：移除至多3张牌',true).set('ai',function(button){\r\n\t\t\t\t\t\tvar val = get.buttonValue(button);\r\n\t\t\t\t\t\tvar att = get.attitude(_status.event.player,get.owner(button.link));\r\n\t\t\t\t\t\tvar pos = get.position(button.link);\r\n\t\t\t\t\t\tvar extra = get.owner(button.link).getCards('h').removeArray(ui.selected.cards);\r\n\t\t\t\t\t\tif(att>0&&pos=='h') return 8+val;\r\n\t\t\t\t\t\telse if(pos=='h'&&extra.length==1&&extra.contains(button.link)) return 0;\r\n\t\t\t\t\t\telse if(att>0)\treturn -val;\r\n\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tevent.cards = result.links.slice(0);\r\n\t\t\t\t\t\tif(!target.hasSkill('chen_card')){\r\n\t\t\t\t\t\t\ttarget.addSkill('chen_card');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.lose(result.links,ui.special,'toStorage');\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\ttarget.markAuto('chen_card',event.cards);\r\n\t\t\t\t\tevent.result = {cards:event.cards};\r\n\t\t\t\t\t'step 3'\r\n\t\t\t\t\tif (target && target.countCards('h') == 0) {\r\n\t\t\t\t\t\ttarget.changeHujia();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:10.5,\r\n\t\t\t\t\t\tuseful:[2,1],\r\n\t\t\t\t\t\tvalue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(!player.inRange(target)&&!player.hasCard('juedou'))\treturn 0;\r\n\t\t\t\t\t\t\tif(target==player&&player.needsToDiscard())\treturn 1;\r\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\r\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\r\n\t\t\t\t\t\t\tif(att>0){\r\n\t\t\t\t\t\t\t\tvar js=target.getCards('j');\r\n\t\t\t\t\t\t\t\tif(js.length){\r\n\t\t\t\t\t\t\t\t\tvar jj=js[0].viewAs?{name:js[0].viewAs}:js[0];\r\n\t\t\t\t\t\t\t\t\tif(jj.name=='guohe'||js.length>1||get.effect(target,jj,target,player)<0){\r\n\t\t\t\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(target.getEquip('baiyin')&&target.isDamaged()&&\r\n\t\t\t\t\t\t\t\t\tget.recoverEffect(target,player,player)>0){\r\n\t\t\t\t\t\t\t\t\tif(target.hp==1&&!target.hujia) return 1.6;\r\n\t\t\t\t\t\t\t\t\tif(target.hp==2) return 0.01;\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar es=target.getCards('e');\r\n\t\t\t\t\t\t\tvar noe=(es.length==0||target.hasSkillTag('noe'));\r\n\t\t\t\t\t\t\tvar noe2=(es.filter(function(esx){\r\n\t\t\t\t\t\t\treturn esx.name=='tengjia'||get.value(esx)>0\r\n\t\t\t\t\t\t\t}).length==0);\r\n\t\t\t\t\t\t\tvar noh=(nh==0||target.hasSkillTag('noh'));\r\n\t\t\t\t\t\t\tif(noh&&(noe||noe2)) return 0;\r\n\t\t\t\t\t\t\tif(att<=0&&!target.countCards('he')) return 1.5;\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t\tgainHujia:0.8,\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tdiscard:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\txuanwo:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'delay',\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn (lib.filter.judge(card,player,target)&&player!=target);\r\n\t\t\t\t},\r\n\t\t\t\tjudge:function(card){\r\n\t\t\t\t\tif(get.suit(card)=='diamond') return 2;\r\n\t\t\t\t\treturn -3;\r\n\t\t\t\t},\r\n\t\t\t\teffect:function(){\r\n\t\t\t\t\tif(result.bool==false){\r\n\t\t\t\t\t\tvar list = game.filterPlayer(function(current){\r\n\t\t\t\t\t\t\treturn get.distance(player,current,'pure')==1;\r\n\t\t\t\t\t\t},targets);\r\n\t\t\t\t\t\tlist.unshift(player);\r\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\r\n\t\t\t\t\t\t\tlist[i].chooseToDiscard(1,true,'he');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.addJudgeNext(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:1,\r\n\t\t\t\t\t\tuseful:1,\r\n\t\t\t\t\t\tvalue:8,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar num=target.hp-target.countCards('h')-2;\r\n\t\t\t\t\t\t\tif(num>-1) return -0.01;\r\n\t\t\t\t\t\t\tif(target.hp<3) num--;\r\n\t\t\t\t\t\t\tif(target.isTurnedOver()) num/=2;\r\n\t\t\t\t\t\t\tvar dist=get.distance(player,target,'absolute');\r\n\t\t\t\t\t\t\tif(dist<1) dist=1;\r\n\t\t\t\t\t\t\treturn num/Math.sqrt(dist);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tdiscard:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thaidi:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'delay',\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn (lib.filter.judge(card,player,target));\r\n\t\t\t\t},\r\n\t\t\t\tjudge:function(card){\r\n\t\t\t\t\tif(get.number(card)>10) return 3;\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t},\r\n\t\t\t\teffect:function(){\r\n\t\t\t\t\tif(result.bool==true){\r\n\t\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tplayer.storage.haidi = 2;\r\n\t\t\t\t\t\tif(!player.hasSkill('haidi')){\r\n\t\t\t\t\t\t\tplayer.addTempSkill('haidi');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.addJudge({name:'haidi'},card);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:1,\r\n\t\t\t\t\t\tuseful:[2,1],\r\n\t\t\t\t\t\tvalue:8,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t\tdraw:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tsanchaji:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:6\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['sanchaji_skill']\r\n\t\t\t},\r\n\t\t\tyinghua:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:6\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['yinghua_skill']\r\n\t\t\t},\r\n\t\t\tlinghunshouge:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-4},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:4\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['linghunshouge_skill']\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\twaiguge:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tequipDelay:false,\r\n\t\t\t\tonEquip:function(){\r\n\t\t\t\t\tplayer.changeHujia();\r\n\t\t\t\t},\r\n\t\t\t\tfilterLose:function(card,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tskills:['waiguge_skill'],\r\n\t\t\t\ttag:{\r\n\t\t\t\t\tgainHujia:1,\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9.5,\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.countCards('h','waiguge')) return 6;\r\n\t\t\t\t\t\treturn 5;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tqiyu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip4',\r\n\t\t\t\tdistance:{globalFrom:-1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:4\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyalishanda:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip5',\r\n\t\t\t\tnomod:true,\r\n\t\t\t\tforceDie:true,\r\n\t\t\t\tclearLose:true,\r\n\t\t\t\tskills:['yalishanda_skill','yalishanda_skill2'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card){\r\n\t\t\t\t\t\treturn 7;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//二扩\r\n\t\t\tqinshi:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\treturn player.countDiscardableCards(player,'he',function(i){\r\n\t\t\t\t\t\treturn i!=card;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player&&target.hujia;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(typeof event.baseDamage!='number') event.baseDamage=1;\r\n\t\t\t\t\tevent.dis = player.chooseToDiscard('he',true).set('prompt2',`若弃置装备牌，则额外对目标造成${get.cnNumber(event.baseDamage)}点暗影伤害`).set('ai',function(card){\r\n\t\t\t\t\t\tvar target = _status.event.getParent().target;\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tif(get.type(card)==='equip') return get.damageEffect(target,player,player)+7-get.value(card);\r\n\t\t\t\t\t\treturn 7-get.value(card);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tevent.num = target.hujia;\r\n\t\t\t\t\ttarget.changeHujia(-event.num);\r\n\t\t\t\t\tgame.delay(1.5);\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tlet card = event.dis.result.cards[0]\r\n\t\t\t\t\tif(card&&get.type(card)==='equip')\ttarget.damage(event.baseDamage,'yami');\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:10.5,\r\n\t\t\t\t\t\tuseful:[5,3,1],\r\n\t\t\t\t\t\tvalue:[5,3,1],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:function(player,target){\r\n\t\t\t\t\t\t\treturn -0.7;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\treturn -target.hujia;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\tyamiDamage:1,\r\n\t\t\t\t\t\toceanDamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbowen:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player&&target.hujia;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(typeof event.baseDamage!='number')\tevent.baseDamage=1;\r\n\t\t\t\t\tevent.num = target.hujia;\r\n\t\t\t\t\ttarget.chooseToDiscard(event.num,true);\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.cards.length<event.num)\ttarget.damage(event.baseDamage,'ocean');\r\n\t\t\t\t},\r\n\t\t\t\tchongzhu:true,\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:10.5,\r\n\t\t\t\t\t\tuseful:[5,3,1],\r\n\t\t\t\t\t\tvalue:[5,3,1],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar hs = target.countCards('h');\r\n\t\t\t\t\t\t\tvar hujia = target.hujia;\r\n\t\t\t\t\t\t\tif(hs<hujia)\treturn -(2+hs);\r\n\t\t\t\t\t\t\telse return -hujia;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t\tdiscard:1,\r\n\t\t\t\t\t\tdamage:0.2,\r\n\t\t\t\t\t\tnatureDamage:1,\r\n\t\t\t\t\t\toceanDamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thuiliu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\trange:{global:2},\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player&&target.hujia;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(typeof event.baseDamage!='number')\tevent.baseDamage=1;\r\n\t\t\t\t\ttarget.changeHujia(-event.baseDamage);\r\n\t\t\t\t\tgame.delay(0.5);\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tplayer.changeHujia(event.baseDamage + (player.isDamaged()?1:0));\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:10.5,\r\n\t\t\t\t\t\tuseful:[5,3,1],\r\n\t\t\t\t\t\tvalue:[5,3,1],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:function(player,target){\r\n\t\t\t\t\t\t\tif(player.isDamaged())\treturn 2;\r\n\t\t\t\t\t\t\telse return 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttarget:-1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t\tgainHujia:1.5,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsuansuyulei:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:4\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['suansuyulei_skill']\r\n\t\t\t},\r\n\t\t\tshenshuizhadan:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.countCards('h')) return 7;\r\n\t\t\t\t\t\tif(player.countCards('e')>1) return 6;\r\n\t\t\t\t\t\treturn 4;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['shenshuizhadan_skill']\r\n\t\t\t},\r\n\t\t\tqianshuifu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tequipDelay:false,\r\n\t\t\t\tonLose:function(){\r\n\t\t\t\t\tplayer.logSkill('qianshuifu_skill');\r\n\t\t\t\t\tvar next=game.createEvent('qianshuifu_draw');\r\n\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\tevent.getParent().after.push(next);\r\n\t\t\t\t\tnext.player=player;\r\n\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tfilterLose:function(card,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tskills:['qianshuifu_skill'],\r\n\t\t\t\ttag:{\r\n\t\t\t\t\tdraw:1,\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9.5,\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.countCards('h','qianshuifu')) return 6;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfanchuan:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip3',\r\n\t\t\t\tdistance:{globalTo:1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:4,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyatelandisi:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip5',\r\n\t\t\t\tnomod:true,\r\n\t\t\t\tforceDie:true,\r\n\t\t\t\tclearLose:true,\r\n\t\t\t\tskills:['yatelandisi_skill1','yatelandisi_skill2'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.countCards('e')>=3) return 8;\r\n\t\t\t\t\t\treturn 7;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\thuajing:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tskill:{\r\n\t\t\tqi_skill:{\r\n\t\t\t\ttrigger:{player:'useCard1'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(!get.info(event.card).nature)\treturn false;\r\n\t\t\t\t\tvar natures = get.info(event.card).nature.slice(0);\r\n\t\t\t\t\tnatures.remove('kami');\r\n\t\t\t\t\tif(event.card.nature)\tnatures.remove(event.card.nature);\r\n\t\t\t\t\treturn natures.length;\r\n\t\t\t\t},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tonremove:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tvar list=get.info(trigger.card).nature.slice(0);\r\n\t\t\t\t\tlist.remove('kami');\r\n\t\t\t\t\tif(trigger.card.nature)\tlist.remove(trigger.card.nature);\r\n\t\t\t\t\tlist.push('cancel2');\r\n\t\t\t\t\tplayer.chooseControl(list).set('prompt',get.prompt('qi')).set('prompt2','将'+get.translation(trigger.card)+'转换为以下属性之一').set('ai',function(){\r\n\t\t\t\t\t\tvar player = _status.event.player;\r\n\t\t\t\t\t\tvar card = _status.event.getTrigger().card;\r\n\t\t\t\t\t\tif(get.name(card)=='tao'&&get.nature(card)=='ocean')\treturn 'cancel2';\r\n\t\t\t\t\t\tif(get.name(card)=='tao'&&get.nature(card)!='ocean')\treturn 'ocean';\r\n\t\t\t\t\t\tif(get.name(card)=='sha'){\r\n\t\t\t\t\t\t\tvar targets = _status.event.getTrigger().targets;\r\n\t\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\r\n\t\t\t\t\t\t\t\tif(get.damageEffect(target,player,player)){\r\n\t\t\t\t\t\t\t\t\tif(targets[i].hasSkillTag('nodamage'))\treturn 'ice';\r\n\t\t\t\t\t\t\t\t\tif(!targets[i].hasSkillTag('noocean')&&targets[i].hujia>0)\treturn 'ocean';\r\n\t\t\t\t\t\t\t\t\tif(!targets[i].hasSkillTag('nofire')&&targets[i].getEquip('tengjia'))\treturn 'fire';\r\n\t\t\t\t\t\t\t\t\tif(!targets[i].hasSkillTag('noyami')&&targets[i].countCards('h')>=player.countCards('h'))\treturn 'yami';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn list.randomGet();\r\n\t\t\t\t\t});\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.control!='cancel2'){\r\n\t\t\t\t\t\tplayer.logSkill('qi');\r\n\t\t\t\t\t\ttrigger.card.nature=result.control;\r\n\t\t\t\t\t\tplayer.popup(get.translation(trigger.card).slice(0,2),result.control);\r\n\t\t\t\t\t\tgame.log('#y'+get.translation(get.name(trigger.card)),'被转为了',trigger.card);\r\n\t\t\t\t\t\tplayer.removeSkill('qi_skill');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tchen_card: {\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\tglobal:'phaseEnd'\r\n\t\t\t\t},\r\n\t\t\t\tmark:true,\r\n\t\t\t\tmarktext:'沉',\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tintro:{\r\n\t\t\t\t\tcontent:'cardCount',\r\n\t\t\t\t\tonunmark:function(storage,player){\r\n\t\t\t\t\t\tif(storage&&storage.length){\r\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\r\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\r\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\r\n\t\t\t\t\t\t\tstorage.length=0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(player.storage.chen_card){\r\n\t\t\t\t\t\tplayer.gain(player.storage.chen_card,'fromStorage');\r\n\t\t\t\t\t\tdelete player.storage.chen_card;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.removeSkill('chen_card');\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thaidi:{\r\n\t\t\t\tmark:true,\r\n\t\t\t\tmarktext:'宝',\r\n\t\t\t\tintro:{\r\n\t\t\t\t\tcontent:'手牌上限+#',\r\n\t\t\t\t},\r\n\t\t\t\tmod:{\r\n\t\t\t\t\tmaxHandcard:function (player,num){\r\n\t\t\t\t\t\treturn num+player.storage.haidi;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsanchaji_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCard1'},\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\tif(event.targets[0].hujia==0)\treturn false;\r\n\t\t\t\t\tif(event.targets[0].isLinked()&&player.isLinked&&!player.hasSkillTag('noocean'))\treturn false;\r\n\t\t\t\t\tif(get.attitude(player,event.targets[0])>0) return true;\r\n\t\t\t\t\tvar eff=0;\r\n\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\r\n\t\t\t\t\t\tvar target=event.targets[i];\r\n\t\t\t\t\t\tvar eff1=get.damageEffect(target,player,player);\r\n\t\t\t\t\t\tvar eff2=get.damageEffect(target,player,player,'ocean');\r\n\t\t\t\t\t\teff+=eff2;\r\n\t\t\t\t\t\teff-=eff1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn eff>=0;\r\n\t\t\t\t},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.card.name=='sha'&&event.card.nature!='ocean') return true;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(trigger.card.nature){\r\n\t\t\t\t\t\tevent.nature = trigger.card.nature;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\ttrigger.card.nature='ocean';\r\n\t\t\t\t\tif(get.itemtype(trigger.card)=='card'){\r\n\t\t\t\t\t\tvar next=game.createEvent('sanchaji_clear');\r\n\t\t\t\t\t\tnext.card=trigger.card;\r\n\t\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\t\ttrigger.after.push(next);\r\n\t\t\t\t\t\tif(event.nature){\r\n\t\t\t\t\t\t\tnext.nature = event.nature;\r\n\t\t\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\t\t\tcard.nature = nature;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\t\t\tdelete card.nature;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlinghunshouge_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'damageBegin4'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tlogTarget:'player',\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn event.player.hujia>0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){},\r\n\t\t\t\tai:{\r\n\t\t\t\t\toverHujia:true,\r\n\t\t\t\t\tskillTagFilter:function(player){\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsuansuyulei_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'damageBegin4'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tlogTarget:'player',\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn event.card&&(get.tag(event.card,'damage')&&get.nature(event.card)=='ocean'\r\n\t\t\t\t\t||get.tag(event.card,'oceanDamage'))&&event.player.hujia>0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tunequip:true,\r\n\t\t\t\t\toverHujia:true,\r\n\t\t\t\t\tskillTagFilter:function(player,tag,arg){\r\n\t\t\t\t\t\tif(!arg||!arg.card||!(get.tag(arg.card,'damage')&&get.nature(arg.card)=='ocean'\r\n\t\t\t\t\t\t||get.tag(arg.card,'oceanDamage'))) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tshenshuizhadan_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\thiddenYami:function(player,name){\r\n\t\t\t\t\treturn player.countCards('h',function(card){\r\n\t\t\t\t\t\tif(!lib.skill.shenshuizhadan_skill.filterCard(card,false,player))\treturn false;\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tenable:'chooseToUse',\r\n\t\t\t\tviewAs:{name:'sha',nature:'yami'},\r\n\t\t\t\tposition:'h',\r\n\t\t\t\tfilterCard:function(card,player,event){\r\n\t\t\t\t\treturn get.type(card,'trick')=='trick';\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyinghua_skill:{\r\n\t\t\t\ttrigger:{player:'shaBegin'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn lib.filter.filterTarget({name:'langyong'},player,event.target);\r\n\t\t\t\t},\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\tif(event.target.hujia==0)\treturn false;\r\n\t\t\t\t\tif(event.target.isLinked()&&player.isLinked&&!player.hasSkillTag('noocean'))\treturn false;\r\n\t\t\t\t\tif(get.attitude(player,event.target)>0&&event.target.hasSkillTag('noocean')) return true;\r\n\t\t\t\t\tvar eff=0;\r\n\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\r\n\t\t\t\t\t\tvar target=event.targets[i];\r\n\t\t\t\t\t\tvar eff1=get.damageEffect(target,player,player);\r\n\t\t\t\t\t\tvar eff2=get.damageEffect(target,player,player,'ocean');\r\n\t\t\t\t\t\teff+=eff2;\r\n\t\t\t\t\t\teff-=eff1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn eff>=0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar fun = lib.card.langyong.content;\r\n\t\t\t\t\tgame.log(player,'将',trigger.card,'的效果改为【浪涌】');\r\n\t\t\t\t\ttrigger.setContent(fun);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\twaiguge_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'damageBegin4'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tlastDo:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.source&&event.source.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn event.nature=='ocean';\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.changeToZero();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tfilterDamage:true,\r\n\t\t\t\t\tskillTagFilter:function(player,tag,arg){\r\n\t\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\t\tif(arg&&arg.player){\r\n\t\t\t\t\t\t\tif(arg.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:arg.card?arg.card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\t\t\tcard:arg.card,\r\n\t\t\t\t\t\t\t})) return false;\r\n\t\t\t\t\t\t\tif(arg.player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\tname:arg.card?arg.card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\t\t\tcard:arg.card,\r\n\t\t\t\t\t\t\t})) return false;\r\n\t\t\t\t\t\t\tif(arg.player.hasSkillTag('jueqing',false,player)) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tqianshuifu_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'damageBegin4'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tlastDo:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(!event.source||event.source.inRange(player)||event.source.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn event.num>0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyalishanda_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'damageBegin1'},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tvar list=lib.linked.slice(0);\r\n\t\t\t\t\tlist.remove('kami');\r\n\t\t\t\t\tif(trigger.nature)\tlist.remove(trigger.nature);\r\n\t\t\t\t\tlist.push('cancel2');\r\n\t\t\t\t\tplayer.chooseControl(list).set('prompt',get.prompt('yalishanda_skill')).set('prompt2','将本次伤害转换为以下属性之一');\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.control!='cancel2'){\r\n\t\t\t\t\t\tplayer.logSkill('yalishanda');\r\n\t\t\t\t\t\ttrigger.nature=result.control;\r\n\t\t\t\t\t\tgame.log('本次伤害被转为了','#y'+get.translation(result.control),'属性')\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyalishanda_skill2:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'damageEnd'},\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn event.player.countCards('he');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tplayer.discard(player.getCards('e',{name:'yalishanda'}));\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\ttrigger.player.chooseToDiscard('he',2,true);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyatelandisi_skill1:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{global:'phaseBegin'},//\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.countCards('e',function(i){\r\n\t\t\t\t\t\tvar subtype = get.subtype(i)\r\n\t\t\t\t\t\tif(player.storage.yatelandisi_skill2&&player.storage.yatelandisi_skill2.contains(subtype))\treturn false;\r\n\t\t\t\t\t\treturn ['equip1','equip2'].contains(subtype);\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tvar att = get.attitude(player,_status.currentPhase)>=0;\r\n\t\t\t\t\tatt = (att)?0:1;\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tevent.equip1 = player.getEquip(1);\r\n\t\t\t\t\tevent.equip2 = player.getEquip(2);\r\n\t\t\t\t\tif(event.equip1&&!player.getStorage('yatelandisi_skill2').contains('equip1')){\r\n\t\t\t\t\t\tlist.push('武器栏');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(event.equip2&&!player.getStorage('yatelandisi_skill2').contains('equip2')){\r\n\t\t\t\t\t\tlist.push('防具栏');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(list.length==1&&att==1)\tatt = -1;\r\n\t\t\t\t\tlist.push('取消');\r\n\t\t\t\t\tplayer.chooseControl('dialogcontrol',list,function(){\r\n\t\t\t\t\t\treturn _status.event.att;\r\n\t\t\t\t\t}).set('att',att).set('prompt',get.prompt2('yatelandisi'));\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.control!='取消'){\r\n\t\t\t\t\t\tplayer.logSkill('yatelandisi');\r\n\t\t\t\t\t\tswitch(result.control){\r\n\t\t\t\t\t\t\tcase '武器栏':event.subtype = 'equip1';break;\r\n\t\t\t\t\t\t\tcase '防具栏':event.subtype = 'equip2';break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.popup(result.control);\r\n\t\t\t\t\t\tgame.delay(0.5);\r\n\t\t\t\t\t\tvar list=[];\r\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\r\n\t\t\t\t\t\t\tvar name=lib.inpile[i];\r\n\t\t\t\t\t\t\tif(get.subtype(name)==event.subtype) list.push(['装备','',name]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.broadcastAll(function(id, list){\r\n\t\t\t\t\t\t\tvar dialog=ui.create.dialog('###『亚特兰蒂斯』###声明一张牌',[list,'vcard']);\r\n\t\t\t\t\t\t\tdialog.videoId = id;\r\n\t\t\t\t\t\t}, event.videoId, list);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tvar next = player.chooseButton(1 ,true);\r\n\t\t\t\t\tnext.set('dialog',event.videoId);\r\n\t\t\t\t\tnext.set('ai',function(button){\r\n\t\t\t\t\t\tvar value = player.getUseValue({name:button.link[2],isCard:true});\r\n\t\t\t\t\t\tif(player.hasCard({name:button.link[2]}))\treturn 2*value;\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t'step 3'\r\n\t\t\t\t\tgame.broadcastAll('closeDialog', event.videoId);\r\n\t\t\t\t\tif (result.bool&&event[event.subtype]) {\r\n\t\t\t\t\t\tplayer.popup(event.subtype,event[event.subtype],event[event.subtype].name);\r\n\t\t\t\t\t\tgame.delay(0.5);\r\n\t\t\t\t\t\tvar name0 = event[event.subtype].name;\r\n\t\t\t\t\t\tvar cardid = event[event.subtype].cardid;\r\n\t\t\t\t\t\tevent[event.subtype].viewAs = result.links[0][2];\r\n\t\t\t\t\t\tevent[event.subtype].name = result.links[0][2];\r\n\t\t\t\t\t\tif(!player.storage.yatelandisi_skill2)\tplayer.storage.yatelandisi_skill2 = [];\r\n\t\t\t\t\t\tplayer.storage.yatelandisi_skill2.add(event.subtype);\r\n\t\t\t\t\t\tif(player.storage.yatelandisi_skill3&&player.storage.yatelandisi_skill3.length){\r\n\t\t\t\t\t\t\tplayer.removeSkill('yatelandisi_skill3');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.storage.yatelandisi_skill3 = [cardid,name0,event[event.subtype]];\r\n\t\t\t\t\t\tgame.log(player,'的『',event.name,'』声明了【',event[event.subtype].viewAs,'】');\r\n\t\t\t\t\t\tplayer.syncStorage('yatelandisi_skill3');\r\n\t\t\t\t\t\tplayer.addTempSkill('yatelandisi_skill3');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 4'\r\n\t\t\t\t\tplayer.useCard({name:'chenjing'},[player]);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyatelandisi_skill2:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{global:'roundStart'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.storage.yatelandisi_skill2;\r\n\t\t\t\t},\r\n\t\t\t\tonremove:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tplayer.storage.yatelandisi_skill2 = [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tyatelandisi_skill3:{\r\n\t\t\t\tmark:true,\r\n\t\t\t\tintro:{\r\n\t\t\t\t\tcontent:function(storage,player){\r\n\t\t\t\t\t\tif(storage.length==3)\treturn '更改了装备区【'+get.translation(storage[1])+'】的名称';\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmarkcount:function(storage,player){\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tonremove:function(player,skill){\r\n\t\t\t\t\tvar args = player.storage.yatelandisi_skill3;\r\n\t\t\t\t\tvar change = player.getCards('e',function(i){\r\n\t\t\t\t\t\treturn i.cardid==args[0];\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(args,change);\r\n\t\t\t\t\tif(change&&change[0]){\r\n\t\t\t\t\t\tchange[0].name = args[1];\r\n\t\t\t\t\t\tchange[0].viewAs = args[1];\r\n\t\t\t\t\t\tplayer.popup(args[1])\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\ttrigger:{player:'loseBegin'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tvar args = player.storage.yatelandisi_skill3;\r\n\t\t\t\t\treturn args&&event.cards.filter(function(i){\r\n\t\t\t\t\t\treturn i.cardid==args[0];\r\n\t\t\t\t\t}).length;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tplayer.removeSkill('yatelandisi_skill3');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\ttranslate:{\r\n\t\t\tqi: '气',\r\n\t\t\tqi_skill: '聚气',\r\n\t\t\tqi_info: '目标角色本回合使用下一张牌时可指定属性。若其已受伤，额外获得1点护甲。',\r\n\t\t\tqi_skill_info: '本回合使用下一张牌时可指定属性。',\r\n\t\t\tjingluo: '鲸落',\r\n\t\t\tjingluo_info: '出牌阶段，对所有角色使用，目标依次选择一项：弃置一张牌以获得1点护甲；或横置武将牌以摸一张牌。',\r\n\t\t\thaixiao: '海啸',\r\n\t\t\thaixiao_info: '出牌阶段，对所有其他角色使用，目标依次选择一项：打出一张颜色相同的牌，或受到你造成的1点海洋伤害。',\r\n\t\t\tlangyong: '浪涌',\r\n\t\t\tlangyong_info: '出牌阶段，对一名装备区里有牌的角色使用，其选择一项：弃置装备区里所有的牌，或受到你造成的1点海洋伤害。',\r\n\t\t\tchenmo: '沉没',\r\n\t\t\tchenmo_info: '出牌阶段，对一名角色使用，移除目标的至多三张牌直到回合结束，若因此移除了所有手牌，其摸一张牌。',\r\n\t\t\tchenjing: '沉静',\r\n\t\t\tchenjing_info: '出牌阶段，对一名角色使用，移除目标的至多三张牌直到回合结束，若因此移除了所有手牌，其获得1点护甲。',\r\n\t\t\tchen_card:'消失之牌',\r\n\r\n\t\t\thuiliu: '回流',\r\n\t\t\thuiliu_info: '出牌阶段，对距离2以内且有护甲的一名其他角色使用。你获取其一点护甲，若你已受伤，则额外获得一点护甲。',\r\n\t\t\tqinshi: '浸蚀',\r\n\t\t\tqinshi_info: '出牌阶段，对有护甲的一名其他角色使用，你弃置一张牌，移除其所有护甲，若你弃置了装备牌，则额外对目标造成一点暗影伤害。',\r\n\t\t\tbowen: '波纹',\r\n\t\t\tbowen_info: '出牌阶段，对有护甲的一名其他角色使用，令其弃置自身护甲数量的手牌，若不足，则额外对其造成一点海洋伤害。',\r\n\r\n\t\t\txuanwo: '漩涡',\r\n\t\t\txuanwo_info: '出牌阶段，对一名其他角色使用（横置于判定区内）；若判定结果不为♦，该角色与其相邻的角色各弃置一张牌；然后将此牌移至当前回合角色下家。',\r\n\t\t\thaidi: '海底宝藏',\r\n\t\t\thaidi_info: '出牌阶段，对一名角色使用（横置于判定区内）；若判定结果点数大于10，摸两张牌。否则其本回合手牌上限+2，保留此牌。',\r\n\r\n\t\t\tsanchaji: '三叉戟',\r\n\t\t\tsanchaji_bg: '叉',\r\n\t\t\tsanchaji_skill: '三叉戟',\r\n\t\t\tsanchaji_info: '你可以将你的任一张【杀】当具海洋伤害的【杀】来使用。',\r\n\t\t\tsanchaji_skill_info: '你可以将你的任一张【杀】当具海洋伤害的【杀】来使用。',\r\n\t\t\tlinghunshouge: '灵魂收割者',\r\n\t\t\tlinghunshouge_bg: '灵',\r\n\t\t\tlinghunshouge_skill: '灵魂收割者',\r\n\t\t\tlinghunshouge_info: '锁定技 你造成的伤害无视护甲。',\r\n\t\t\tlinghunshouge_skill_info: '锁定技 你造成的伤害无视护甲。',\r\n\t\t\tyinghua: '樱华水刃',\r\n\t\t\tyinghua_bg: '樱',\r\n\t\t\tyinghua_skill: '樱华水刃',\r\n\t\t\tyinghua_info: '你使用【杀】指定装备区里有牌的角色为目标时，你可以将之效果改为【浪涌】。',\r\n\t\t\tyinghua_skill_info: '你使用【杀】指定装备区里有牌的角色为目标时，你可以将之效果改为【浪涌】。',\r\n\t\t\tsuansuyulei: '酸素鱼雷',\r\n\t\t\tsuansuyulei_bg: '酸',\r\n\t\t\tsuansuyulei_skill: '酸素鱼雷',\r\n\t\t\tsuansuyulei_info: '锁定技 你使用的海洋属性的牌无视护甲与防具。',\r\n\t\t\tsuansuyulei_skill_info: '锁定技 你使用的海洋属性的牌无视护甲与防具。',\r\n\t\t\tshenshuizhadan: '深水炸弹',\r\n\t\t\tshenshuizhadan_bg: '炸',\r\n\t\t\tshenshuizhadan_info: '你可以将任意锦囊牌当作暗影属性的【杀】使用。',\r\n\t\t\tshenshuizhadan_skill: '炸鱼',\r\n\t\t\tshenshuizhadan_skill_info: '你可以将任意锦囊牌当作暗影属性的【杀】使用。',\r\n\t\t\tqianshuifu: '潜水服',\r\n\t\t\tqianshuifu_skill: '潜水服',\r\n\t\t\tqianshuifu_bg: '服',\r\n\t\t\tqianshuifu_info: ' 锁定技 你在一名角色攻击范围外时，受到来源为其的伤害-1；当你失去装备区里的【潜水服】时，你摸一张牌。',\r\n\t\t\tfanchuan: '帆船',\r\n\t\t\tfanchuan_bg: '帆',\r\n\t\t\tfanchuan_info: '锁定技 其他角色计算与你的距离+1。',\r\n\t\t\tyatelandisi: '亚特兰蒂斯',\r\n\t\t\tyatelandisi_info: ' 每轮每项限一次，一个回合开始时，你可以声明一张武器/防具的技能并视为对自己使用一张【沉静】，然后直到回合结束，将自己装备区内武器/防具的技能改为之。',\r\n\t\t\tyatelandisi_skill1: '亚特兰',\r\n\t\t\tyatelandisi_skill3: '失落之城',\r\n\r\n\t\t\twaiguge: '外骨骼',\r\n\t\t\twaiguge_bg: '骨',\r\n\t\t\twaiguge_skill: '外骨骼',\r\n\t\t\twaiguge_info: '锁定技 装备时获得1点护甲，防止你受到的海洋伤害。',\r\n\t\t\twaiguge_skill_info: '锁定技 装备时获得1点护甲，防止你受到的海洋伤害。',\r\n\t\t\tqiyu: '旗鱼',\r\n\t\t\tqiyu_bg: '鱼',\r\n\t\t\tqiyu_info: '锁定技 你计算与其他角色的距离-1。',\r\n\t\t\tyalishanda: '亚历山大石',\r\n\t\t\tyalishanda_info: '石',\r\n\t\t\tyalishanda_skill: '亚历山大石',\r\n\t\t\tyalishanda_skill2: '亚历山大石',\r\n\t\t\tyalishanda_info: '你可以指定你造成伤害的属性。你造成伤害后可以弃置此牌，令目标弃置两张牌。',\r\n\t\t\tyalishanda_skill_info: '你可以指定你造成伤害的属性。',\r\n\t\t\tyalishanda_skill2_info: '你造成伤害后可以弃置此牌，令目标弃置两张牌。',\r\n\t\t},\r\n\t\tlist:[\r\n\t\t\t['spade',1,'qi'],\r\n\t\t\t['spade',1,'qinshi'],\r\n\t\t\t['spade',2,'sha','yami'],\r\n\t\t\t['spade',2,'huiliu'],\r\n\t\t\t['spade',3,'sanchaji'],\r\n\t\t\t['spade',3,'suansuyulei'],\r\n\t\t\t['spade',4,'sha','ocean'],\r\n\t\t\t['spade',4,'sha','yami'],\r\n\t\t\t['spade',5,'langyong'],\r\n\t\t\t['spade',5,'langyong'],\r\n\t\t\t['spade',6,'sha','ocean'],\r\n\t\t\t['spade',6,'sha','ocean'],\r\n\t\t\t['spade',7,'haixiao'],\r\n\t\t\t['spade',7,'qi'],\r\n\t\t\t['spade',8,'waiguge'],\r\n\t\t\t['spade',8,'juedou','yami'],\r\n\t\t\t['spade',9,'sha','yami'],\r\n\t\t\t['spade',9,'jiu','ocean'],\r\n\t\t\t['spade',10,'qi'],\r\n\t\t\t['spade',10,'sha','ocean'],\r\n\t\t\t['spade',11,'wuxie',null,['yingbian_kongchao']],\r\n\t\t\t['spade',11,'sha','ocean'],\r\n\t\t\t['spade',12,'wuxie',null,['yingbian_kongchao']],\r\n\t\t\t['spade',12,'huiliu'],\r\n\t\t\t['spade',13,'tiesuo'],\r\n\t\t\t['spade',13,'haixiao'],\r\n\r\n\t\t\t['heart',1,'qi'],\r\n\t\t\t['heart',1,'bowen'],\r\n\t\t\t['heart',2,'shan'],\r\n\t\t\t['heart',2,'sha'],\r\n\t\t\t['heart',3,'sha','ocean'],\r\n\t\t\t['heart',3,'lebu'],\r\n\t\t\t['heart',4,'tao','ocean'],\r\n\t\t\t['heart',4,'tao'],\r\n\t\t\t['heart',5,'tao','ocean'],\r\n\t\t\t['heart',5,'qi'],\r\n\t\t\t['heart',6,'chenjing'],\r\n\t\t\t['heart',6,'tao'],\r\n\t\t\t['heart',7,'chenmo'],\r\n\t\t\t['heart',7,'huiliu'],\r\n\t\t\t['heart',8,'sha','ocean'],\r\n\t\t\t['heart',8,'tao','ocean'],\r\n\t\t\t['heart',9,'jiu'],\r\n\t\t\t['heart',9,'lebu'],\r\n\t\t\t['heart',10,'yinghua'],\r\n\t\t\t['heart',10,'shan'],\r\n\t\t\t['heart',11,'qi'],\r\n\t\t\t['spade',11,'jiu','ocean'],\r\n\t\t\t['heart',12,'wuxie',null,['yingbian_kongchao']],\r\n\t\t\t['heart',12,'yatelandisi'],\r\n\t\t\t['heart',13,'jingluo'],\r\n\t\t\t['heart',13,'wuxie',null,['yingbian_kongchao']],\r\n\r\n\t\t\t['club',1,'chenmo'],\r\n\t\t\t['club',1,'shenshuizhadan'],\r\n\t\t\t['club',2,'sha','yami'],\r\n\t\t\t['club',2,'sha','thunder'],\r\n\t\t\t['club',3,'jiu'],\r\n\t\t\t['club',3,'sha','yami'],\r\n\t\t\t['club',4,'sha','yami'],\r\n\t\t\t['club',4,'tiesuo'],\r\n\t\t\t['club',5,'qi'],\r\n\t\t\t['club',5,'sha','yami'],\r\n\t\t\t['club',6,'langyong'],\r\n\t\t\t['club',6,'haixiao'],\r\n\t\t\t['club',7,'sha','ocean'],\r\n\t\t\t['club',7,'juedou','ocean'],\r\n\t\t\t['club',8,'sha','yami'],\r\n\t\t\t['club',8,'chenmo'],\r\n\t\t\t['club',9,'sha','yami'],\r\n\t\t\t['club',9,'jingluo'],\r\n\t\t\t['club',10,'haixiao'],\r\n\t\t\t['club',10,'bowen','yami'],\r\n\t\t\t['club',11,'tiesuo'],\r\n\t\t\t['club',11,'qianshuifu'],\r\n\t\t\t['club',12,'qiyu'],\r\n\t\t\t['club',12,'qinshi'],\r\n\t\t\t['club',13,'jingluo'],\r\n\t\t\t['club',13,'tiesuo'],\r\n\r\n\t\t\t['diamond',1,'xuanwo'],\r\n\t\t\t['diamond',2,'tao','ocean'],\r\n\t\t\t['diamond',2,'qinshi'],\r\n\t\t\t['diamond',3,'shan'],\r\n\t\t\t['diamond',3,'wuzhong','ocean'],\r\n\t\t\t['diamond',4,'sha','yami'],\r\n\t\t\t['diamond',4,'tao','ocean'],\r\n\t\t\t['diamond',5,'linghunshouge'],\r\n\t\t\t['diamond',5,'shan',null,['yingbian_kongchao']],\r\n\t\t\t['diamond',6,'sha','ocean'],\r\n\t\t\t['diamond',6,'bowen'],\r\n\t\t\t['diamond',7,'xuanwo'],\r\n\t\t\t['diamond',7,'qi'],\r\n\t\t\t['diamond',8,'qi'],\r\n\t\t\t['diamond',8,'shan',null,['yingbian_kongchao']],\r\n\t\t\t['diamond',9,'shan'],\r\n\t\t\t['diamond',9,'jiu'],\r\n\t\t\t['diamond',10,'waiguge'],\r\n\t\t\t['diamond',11,'wuxie',null,['yingbian_kongchao']],\r\n\t\t\t['diamond',11,'shan',null,['yingbian_kongchao']],\r\n\t\t\t['diamond',12,'shan'],\r\n\t\t\t['diamond',12,'wuxie'],\r\n\t\t\t['diamond',13,'haidi'],\r\n\t\t\t['diamond',13,'fanchuan'],\r\n\t\t],\r\n\t\thelp:{\r\n\t\t\t'化鲸篇':('<div style=\"margin:10px\">海洋与暗影</div><ul style=\"margin-top:0\">'+\r\n\t\t\t'<li>当带有护甲的角色受到海洋伤害时，本次伤害+1且不引起传递；而非伤害类的海洋属性的牌，会使没有护甲的目标额外获得一点护甲。'+\r\n\t\t\t'<br><li>一名角色对手牌数多于自己的目标使用暗影属性的牌时，此牌不可被目标响应；暗影属性的牌可以在其他角色的结束阶段对其使用。</ul></ul>'),\r\n\t\t},\r\n\t}\r\n});\n\n//# sourceURL=webpack:///./card/huajing.js?")},"./card/longlaoguan.js":()=>{eval("\r\ngame.import('card',function(lib,game,ui,get,ai,_status){\r\n return {\r\n\t\tname:'longlaoguan',\r\n\t\t// connect:true,\r\n\t\tcard:{\r\n\t\t\tdulun:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tmodeimage:'longlaoguan',\r\n\t\t\t\tenable:function(){\r\n\t\t\t\t\treturn game.hasPlayer(function(cur){\r\n\t\t\t\t\t\tif(cur.identity=='fan'){\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.identity=='fan';\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\ttarget.chooseControl('dialogcontrol',['使用无法响应的杀','摸一张牌']).set('ai',function(){\r\n\t\t\t\t\t\tvar player=_status.event.player;\r\n\t\t\t\t\t\tif(player.countCards('h')<2)\treturn 1;\r\n\t\t\t\t\t\tif(player.hasSha())\treturn 0;\r\n\t\t\t\t\t\treturn Math.random()<0.5?1:0;\r\n\t\t\t\t\t}).set('prompt',get.prompt('dulun'));\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tvar fan = event.target;\r\n\t\t\t\t\tswitch(result.control){\r\n\t\t\t\t\t\tcase '使用无法响应的杀':{\r\n\t\t\t\t\t\t\tgame.log(target,'的下一张杀无法被响应');\r\n\t\t\t\t\t\t\tfan.addTempSkill('dulun_sha');\r\n\t\t\t\t\t\t\tfan.chooseToUse({\r\n\t\t\t\t\t\t\t\tfilterCard:function(card,player){\r\n\t\t\t\t\t\t\t\t\treturn get.name(card)=='sha'&&lib.filter.filterCard.apply(this,arguments);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\t\t\t\t\treturn lib.filter.filterTarget.apply(this,arguments);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\taddCount:false,\r\n\t\t\t\t\t\t\t}).set('target',fan)\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase '摸一张牌':{\r\n\t\t\t\t\t\t\tfan.draw();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:[4,1],\r\n\t\t\t\t\t\tvalue:[4,1],\r\n\t\t\t\t\t},\r\n\t\t\t\t\torder:function(item,player){\r\n\t\t\t\t\t\tif(player.identity!='fan')\treturn 0;\r\n\t\t\t\t\t\tif(_status.event.player.hasSkillTag('presha',true,null,true)) return 10;\r\n\t\t\t\t\t\treturn 3.6;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdraw:0.5,\r\n\t\t\t\t\t\trespond:1,\r\n\t\t\t\t\t\trespondSha:1,\r\n\t\t\t\t\t\tunequip_ai:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tchuanjia:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tmodeimage:'longlaoguan',\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\treturn player.identity=='fan';\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.identity=='zhu';\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttarget.addTempSkill('chuanjia_po','phaseAfter');\r\n\t\t\t\t\ttarget.markSkill('chuanjia_po');\r\n\t\t\t\t\tif(target.hujia) target.changeHujia(-1);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:[5,1],\r\n\t\t\t\t\t\tvalue:[5,1],\r\n\t\t\t\t\t},\r\n\t\t\t\t\torder:function(item){\r\n\t\t\t\t\t\tif(_status.event.player.hasSkillTag('presha',true,null,true)) return 10;\r\n\t\t\t\t\t\tif(lib.linked.contains(get.nature(item))) return 3.1;\r\n\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tzhinengdulun:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tmodeimage:'longlaoguan',\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\treturn player.identity=='fan';\r\n\t\t\t\t},\r\n\t\t\t\t//toself:true,\r\n\t\t\t\ttype:\"equip\",\r\n\t\t\t\tsubtype:\"equip5\",\r\n\t\t\t\tskills:['zhinengdulun_skill'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:10,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlongjiao:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tmodeimage:'longlaoguan',\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\treturn player.identity!='fan';\r\n\t\t\t\t},\r\n\t\t\t\t//toself:true,\r\n\t\t\t\ttype:\"equip\",\r\n\t\t\t\tsubtype:\"equip1\",\r\n\t\t\t\tdistance:{attackFrom:-3},\r\n\t\t\t\tskills:['longjiao'],\r\n\t\t\t\tglobal: 'g_longjiao',\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlongwei:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tmodeimage:'longlaoguan',\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\treturn player.identity!='fan';\r\n\t\t\t\t},\r\n\t\t\t\t//toself:true,\r\n\t\t\t\tonLose:function(){\r\n\t\t\t\t\tif(get.name(player)=='KiryuuCoco')\r\n\t\t\t\t\t\tplayer.removeSkill('yugaimizhang');\r\n\t\t\t\t\tif(get.name(player)=='AjatarCoco')\r\n\t\t\t\t\t\tplayer.removeSkill('esuyingye');\r\n\t\t\t\t},\r\n\t\t\t\ttype:\"equip\",\r\n\t\t\t\tsubtype:\"equip5\",\r\n\t\t\t\tskills:['longwei'],\r\n\t\t\t\tglobal: 'g_longwei',\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttakeover:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tmodeimage:'longlaoguan',\r\n\t\t\t\tenable:function(){\r\n\t\t\t\t\treturn game.hasPlayer(function(cur){\r\n\t\t\t\t\t\tif(cur.identity=='fan'){\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t//\t\tchongzhu:function(){\r\n\t\t//\t\t\treturn game.countPlayer()<=2;\r\n\t\t//\t\t},\r\n\t\t\t\tsingleCard:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tcardcolor:'red',\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tfilterTarget:true,\r\n\t\t\t\tcontentBefore:function(){\r\n\t\t\t\t\tif(!targets.length){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar fans = 0;\r\n\t\t\t\t\tgame.hasPlayer(function(cur){\r\n\t\t\t\t\t\tif(cur.identity=='fan'){\r\n\t\t\t\t\t\t\tfans++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(fans==0){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar card = this.card;\r\n\t\t\t\t\tgame.hasPlayer(function(cur){\r\n\t\t\t\t\t\tif(cur.identity=='fan'){\r\n\t\t\t\t\t\t\tvar che = game.createCard('zhinengdulun',card.suit,card.number);\r\n\t\t\t\t\t\t\tcur.equip(che);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcontentAfter:function(){\r\n\t\t\t\t\tgame.log(card,'已移出游戏');\r\n\t\t\t\t\tgame.cardsGotoSpecial(this.card);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:8,\r\n\t\t\t\t\tuseful:4,\r\n\t\t\t\t\tvalue:10,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tbigong:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tmodeimage:'longlaoguan',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tsingleCard:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.identity =='fan';\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\ttarget.chooseControl('dialogcontrol',['本轮内失去所有技能','交给桐生可可两张不同类型的牌']).set('ai',function(){\r\n\t\t\t\t\t\tvar player=_status.event.player;\r\n\t\t\t\t\t\tif(player.countCards('he')<2)\treturn 1;\r\n\t\t\t\t\t\tif(player.hp<=1)\treturn 0;\r\n\t\t\t\t\t\treturn Math.random()<0.5?1:0;\r\n\t\t\t\t\t}).set('prompt','【逼宫】：选择一项');\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tswitch(result.control){\r\n\t\t\t\t\t\tcase '本轮内失去所有技能':{\r\n\t\t\t\t\t\t\tgame.log(target,'失去了所有技能');\r\n\t\t\t\t\t\t\ttarget.addTempSkill('bigong_clear','roundStart');\r\n\t\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase '交给桐生可可两张不同类型的牌':{\r\n\t\t\t\t\t\t\tvar next=target.countCards('交给桐生可可两张不同类型的牌(取消则依然发动效果1)',2,'he',true);\r\n\t\t\t\t\t\t\tnext.set('filterCard',function(card){\r\n\t\t\t\t\t\t\t\tif(ui.selected.cards.length){\r\n\t\t\t\t\t\t\t\t\tvar from=ui.selected.cards[0];\r\n\t\t\t\t\t\t\t\t\tif(get.type(card)!=get.type(from)) return true;\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tnext.set('complexCard',true);\r\n\t\t\t\t\t\t\tnext.set('ai',function(card){\r\n\t\t\t\t\t\t\t\treturn 2-get.value(card);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tif(result.buttons.length){\r\n\t\t\t\t\t\t\tgame.zhu.gain(result.buttons,target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontentAfter:function(){\r\n\t\t\t\t\tgame.log(card,'已移出游戏');\r\n\t\t\t\t\tgame.cardsGotoSpecial(this.card);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9,\r\n\t\t\t\t\tuseful:4,\r\n\t\t\t\t\tvalue:10,\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tgain:2,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t\r\n\t\tskill:{\r\n\t\t\tg_longjiao:{\r\n\t\t\t\ttrigger:{player:['loseAfter']},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(_status.currentPhase&&_status.currentPhase.identity=='zhu') return false;\r\n\t\t\t\t\tif(player.isPhaseUsing()) return false;\r\n\t\t\t\t\tif(!(event.name=='cardsDiscard'||(event.name=='lose'&&event.getParent().name=='discard')))\treturn false;\r\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\r\n\t\t\t\t\t\tif(event.cards[i].name=='longjiao') return true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\r\n\t\t\t\t\t\tif(trigger.cards[i].name=='longjiao') event.card=trigger.cards[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tui.cardPile.insertBefore(event.card,ui.cardPile.firstChild);\r\n\t\t\t\t\t// var cards=get.cards(ui.cardPile.childElementCount+1);\r\n\t\t\t\t\t// for(var i=0;i<cards.length;i++){\r\n\t\t\t\t\t// \tui.cardPile.insertBefore(cards[i],ui.cardPile.childNodes[get.rand(ui.cardPile.childElementCount)]);\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tg_longwei:{\r\n\t\t\t\ttrigger:{player:['loseAfter']},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(_status.currentPhase&&_status.currentPhase.identity=='zhu') return false;\r\n\t\t\t\t\tif(player.isPhaseUsing()) return false;\r\n\t\t\t\t\tif(!(event.name=='cardsDiscard'||(event.name=='lose'&&event.getParent().name=='discard')))\treturn false;\r\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\r\n\t\t\t\t\t\tif(event.cards[i].name=='longwei') return true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\r\n\t\t\t\t\t\tif(trigger.cards[i].name=='longwei') event.card=trigger.cards[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tui.cardPile.insertBefore(event.card,ui.cardPile.childNodes[get.rand(ui.cardPile.childElementCount)]);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tdulun_sha:{\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tforced:true,\r\n\t\t\t\ttrigger:{player:'useCardToPlayered'},\r\n\t\t\t\tilter:function(event,player){\r\n\t\t\t\t\treturn event.card.name=='sha';\r\n\t\t\t\t},\r\n\t\t\t\tlogTarget:'target',\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\r\n\t\t\t\t\tplayer.removeSkill('dulun_sha');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tbigong_clear:{\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\tglobal:'roundStart',\r\n\t\t\t\t},\r\n\t\t\t\tpriority:99,\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tunique:true,\r\n\t\t\t\tcontent:function (){\r\n\t\t\t\t\tplayer.enableSkill('bigong_clear');\r\n\t\t\t\t\tplayer.unmarkSkill('bigong_clear');\r\n\t\t\t\t\tplayer.removeSkill('bigong_clear')\r\n\t\t\t\t},\r\n\t\t\t\tmark:true,\r\n\t\t\t\tintro:{\r\n\t\t\t\t\tcontent:function (storage,player,skill){\r\n\t\t\t\t\t\tvar str='<li>锁定技，你的其他技能全部失效。';\r\n\t\t\t\t\t\tvar list=[];\r\n\t\t\t\t\t\tfor(var i in player.disabledSkills){\r\n\t\t\t\t\t\t\tif(player.disabledSkills[i].contains(skill)){\r\n\t\t\t\t\t\t\t\tlist.push(i)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(list.length){\r\n\t\t\t\t\t\t\tstr+='<br><li>失效技能：';\r\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\r\n\t\t\t\t\t\t\t\tif(lib.translate[list[i]+'_info']){\r\n\t\t\t\t\t\t\t\t\tstr+=get.translation(list[i])+'、';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn str.slice(0,str.length-1);\r\n\t\t\t\t\t\t}else return str;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tinit:function (player,skill){\r\n\t\t\t\t\tvar skills=player.getSkills(true,false);\r\n\t\t\t\t\tfor(var i=0;i<skills.length;i++){\r\n\t\t\t\t\t\tvar info=get.info(skills[i]);\r\n\t\t\t\t\t\tif(skills[i]=='bigong_clear'||info.charlotte){\r\n\t\t\t\t\t\t\tskills.splice(i--,1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.disableSkill(skill,skills);\r\n\t\t\t\t},\r\n\t\t\t\tonremove:function (player,skill){\r\n\t\t\t\t\tplayer.enableSkill(skill);\r\n\t\t\t\t},\r\n\t\t\t\tlocked:true,\r\n\t\t\t},\r\n\t\t\tchuanjia_po:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tmarktext:'f**k',\r\n\t\t\t\tlocked:true,\r\n\t\t\t\tnotemp:true,\r\n\t\t\t\tmark: true,\r\n\t\t\t\tintro: {\r\n\t\t\t\t\tcontent: '被破防',\r\n\t\t\t\t},\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\ttarget:'useCardToPlayered',\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpriority:444,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(!get.name(event.card,event.player)=='sha')\treturn false;\r\n\t\t\t\t\tconsole.log('OK');\r\n\t\t\t\t\treturn player.countCards('e');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function (){\r\n\t\t\t\t\tplayer.discardPlayerCard('被穿甲弹破防……', player, true, 'e');\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tneg:true,\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function (card,player,target,current){\r\n\t\t\t\t\t\t\tif(get.name(card,player)=='sha') return [0,-4];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tzhinengdulun_skill:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\tplayer:\"phaseBegin\",\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tcontent:function (){\r\n\t\t\t\t\tplayer.useCard({name:'dulun',isCard:true},player);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\threaten:4,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlongjiao:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tenable:['chooseToUse','chooseToRespond'],\r\n\t\t\t\tfilterCard:true,\r\n\t\t\t\tselectCard:1,\r\n\t\t\t\tposition:'he',\r\n\t\t\t\tviewAs:{name:'sha'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.countCards('h')>=1;\r\n\t\t\t\t},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tprompt:'将一张牌当杀使用或打出',\r\n\t\t\t\tcheck:function(card){\r\n\t\t\t\t\tif(card.name=='sha') return 0;\r\n\t\t\t\t\treturn 5-get.value(card)\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\trespondSha:true,\r\n\t\t\t\t\tskillTagFilter:function(player){\r\n\t\t\t\t\t\treturn player.countCards('he')>=1;\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t\t// audio:true,\r\n\t\t\t\t// equipSkill:true,\r\n\t\t\t\t// mod:{\r\n\t\t\t\t// \tcardUsable:function(card,player,num){\r\n\t\t\t\t// \t\tif(get.name(card)=='sha') \r\n\t\t\t\t// \t\t\treturn num+1;\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tcardEnabled:function(card,player){\r\n                //         if(card.name=='sha'&&(player.getStat().card.sha>2)) \r\n                //             return false\r\n\t\t\t\t// \t},\r\n\t\t\t\t// },\r\n\t\t\t\t// ai:{\r\n\t\t\t\t// \threaten:1,\r\n\t\t\t\t// },\r\n\t\t\t},\r\n\t\t\tlongwei:{\r\n\t\t\t\tinit:function (player){//获得技能时发动\r\n\t\t\t\t\tif(get.name(player)=='KiryuuCoco')\r\n\t\t\t\t\t\tplayer.addSkill('yugaimizhang');\r\n\t\t\t\t\tif(get.name(player)=='AjatarCoco')\r\n\t\t\t\t\t\tplayer.addSkill('esuyingye');\r\n\t\t\t\t},\r\n\t\t\t\tonremove:function(player){//失去技能时发动\r\n\t\t\t\t},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfrequent:true,\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tcontent:function (){\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\threaten:1,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttranslate:{\r\n\t\t\tdulun: '独轮车',\r\n\t\t\tdulun_info: '出牌阶段，对一名反抗军使用，其可以立即使用一张不可被响应的【杀】或摸一张牌。',\r\n\t\t\tchuanjia: '穿甲弹',\r\n\t\t\tchuanjia_info: '出牌阶段，对桐生可可使用（使之减少1护甲），本回合其成为【杀】的目标后需弃置装备区内的一张牌。',\r\n\t\t\tzhinengdulun: '智能独轮车',\r\n\t\t\tzhinengdulun_info: '回合开始时，你视为使用一张【独轮车】。',\r\n\t\t\tlongjiao: '龙角',\r\n\t\t\tlongjiao_info: '反抗军无法装备。你可以将任意一张牌当【杀】使用。在反抗军的回合进入弃牌堆时，改为置于牌堆顶。',\r\n\t\t\tlongwei: '龙尾',\r\n\t\t\tlongwei_info: '反抗军无法装备。若为桐生可可形态，则获得『欲盖弥彰』，若为恶龙形态，则获得『滥觞之至』。在反抗军的回合进入弃牌堆时，改为洗入牌堆。',\r\n\t\t\ttakeover: '所向无前',\r\n\t\t\ttakeover_info: '为所有反抗军装备【智能独轮车】，使用后移出游戏。',\r\n\t\t\tbigong: '逼宫',\r\n\t\t\tbigong_info: '对一名反抗军使用，令其选择一项：本轮内失去所有技能，或交给桐生可可两张不同类型的牌，使用后移出游戏。',\r\n\t\t\tbigong_clear: '逼宫后续',\r\n\t\t\tchuanjia_po: 'fuck',\r\n\t\t},\r\n\t\t// list:[\r\n\t\t// \t//3张独轮车\r\n\t\t// \t[\"spade\",\"5\",\"dulun\"],\r\n\t\t// \t[\"club\",\"9\",\"dulun\"],\r\n\t\t// \t[\"diamond\",\"11\",\"dulun\"],\r\n\t\t// \t//2张穿甲\r\n\t\t// \t[\"heart\",\"13\",\"chuanjia\"],\r\n\t\t// \t[\"club\",\"5\",\"chuanjia\"],\r\n\t\t// \t//\r\n\t\t// \t[\"diamond\",\"1\",\"zhinengdulun\"],\r\n\t\t// \t//\r\n\t\t// \t[\"spade\",\"2\",\"longjiao\"],\r\n\t\t// \t//\r\n\t\t// \t[\"spade\",\"6\",\"longwei\"],\r\n\t\t// \t//\r\n\t\t// \t[\"heart\",\"10\",\"takeover\"],\r\n\t\t// \t//2张逼宫\r\n\t\t// \t[\"club\",\"9\",\"bigong\"],\r\n\t\t// \t[\"heart\",\"8\",\"bigong\"],\r\n\t\t// ],\r\n\t}\r\n});\t\t\n\n//# sourceURL=webpack:///./card/longlaoguan.js?")},"./card/remark.js":()=>{eval("\r\ngame.import('card',function(lib,game,ui,get,ai,_status){\r\n\treturn {\r\n\t\tname:'remark',\r\n\t\tconnect:true,\r\n\t\tcard:{\r\n\t\t\trm_bagua:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7.5\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_bagua_skill']\r\n\t\t\t},\r\n\t\t\trm_jueying:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip3',\r\n\t\t\t\tdistance:{globalTo:1},\r\n\t\t\t},\r\n\t\t\trm_dilu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip3',\r\n\t\t\t\tdistance:{globalTo:1},\r\n\t\t\t},\r\n\t\t\trm_zhuahuang:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip3',\r\n\t\t\t\tdistance:{globalTo:1},\r\n\t\t\t},\r\n\t\t\trm_chitu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip4',\r\n\t\t\t\tdistance:{globalFrom:-1},\r\n\t\t\t},\r\n\t\t\trm_dawan:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip4',\r\n\t\t\t\tdistance:{globalFrom:-1},\r\n\t\t\t},\r\n\t\t\trm_zixin:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip4',\r\n\t\t\t\tdistance:{globalFrom:-1},\r\n\t\t\t},\r\n\t\t\trm_zhuge:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:function(){\r\n\t\t\t\t\t\treturn get.order({name:'sha'})-0.1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player._rm_zhuge_temp) return 1;\r\n\t\t\t\t\t\tplayer._rm_zhuge_temp=true;\r\n\t\t\t\t\t\tvar result=function(){\r\n\t\t\t\t\t\t\tif(!game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn get.distance(player,current)<=1&&player.canUse('sha',current)&&get.effect(current,{name:'sha'},player,player)>0;\r\n\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(player.hasSha()&&_status.currentPhase==player){\r\n\t\t\t\t\t\t\t\tif(player.getEquip('rm_zhuge')&&player.countUsed('sha')||player.getCardUsable('sha')==0){\r\n\t\t\t\t\t\t\t\t\treturn 10;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar num=player.countCards('h','sha');\r\n\t\t\t\t\t\t\tif(num>1) return 6+num;\r\n\t\t\t\t\t\t\treturn 3+num;\r\n\t\t\t\t\t\t}();\r\n\t\t\t\t\t\tdelete player._rm_zhuge_temp;\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tvalueswap:1\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_zhuge_skill']\r\n\t\t\t},\r\n\t\t\trm_cixiong:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_cixiong_skill']\r\n\t\t\t},\r\n\t\t\trm_qinggang:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_qinggang_skill']\r\n\t\t\t},\r\n\t\t\trm_qinglong:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\treturn Math.min(2.5+player.countCards('h','sha'),4);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:3.5\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_qinglong_skill','rm_qinglong_guozhan']\r\n\t\t\t},\r\n\t\t\trm_zhangba:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tvar num=2.5+player.countCards('h')/3;\r\n\t\t\t\t\t\treturn Math.min(num,4);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:3.5\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_zhangba_skill']\r\n\t\t\t},\r\n\t\t\trm_guanshi:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tvar num=2.5+(player.countCards('h')+player.countCards('e'))/2.5;\r\n\t\t\t\t\t\treturn Math.min(num,5);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:4.5,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_guanshi_skill']\r\n\t\t\t},\r\n\t\t\trm_fangtian:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-3},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2.5\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_fangtian_skill','rm_fangtian_guozhan']\r\n\t\t\t},\r\n\t\t\trm_qilin:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-4},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:3\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_qilin_skill']\r\n\t\t\t},\r\n\t\t\trm_hanbing:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:\"equip\",\r\n\t\t\t\tsubtype:\"equip1\",\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tskills:['rm_hanbing_skill'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trm_renwang:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:\"equip\",\r\n\t\t\t\tsubtype:\"equip2\",\r\n\t\t\t\tskills:['rm_renwang_skill'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7.5\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\trm_muniu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip5',\r\n\t\t\t\tnomod:true,\r\n\t\t\t\tonEquip:function(){\r\n\t\t\t\t\tif(card&&card.cards&&card.cards.length){\r\n\t\t\t\t\t\tplayer.directgains(card.cards,null,'rm_muniu');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.markSkill('rm_muniu_skill');\r\n\t\t\t\t},\r\n\t\t\t\tforceDie:true,\r\n\t\t\t\tonLose:function(){\r\n\t\t\t\t\tplayer.unmarkSkill('rm_muniu_skill');\r\n\t\t\t\t\tdelete player.getStat('skill').rm_muniu_skill;\r\n\t\t\t\t\tif(!card||!card.cards||!card.cards.length) return;\r\n\t\t\t\t\tif((event.getParent(2)&&event.getParent(2).name!='swapEquip')&&event.parent.type!='equip'){\r\n\t\t\t\t\t\tplayer.lose(card.cards,ui.discardPile);\r\n\t\t\t\t\t\tplayer.$throw(card.cards,1000);\r\n\t\t\t\t\t\tplayer.popup('rm_muniu');\r\n\t\t\t\t\t\tgame.log(card,'掉落了',card.cards);\r\n\t\t\t\t\t\tcard.cards.length=0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tplayer.lose(card.cards,ui.special);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tclearLose:true,\r\n\t\t\t\tequipDelay:false,\r\n\t\t\t\tloseDelay:false,\r\n\t\t\t\tskills:['rm_muniu_skill','rm_muniu_skill7'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card){\r\n\t\t\t\t\t\tif(card.card) return 7+card.card.length;\r\n\t\t\t\t\t\treturn 7;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_hualiu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip3',\r\n\t\t\t\tdistance:{globalTo:1},\r\n\t\t\t},\r\n\t\t\trm_zhuque:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\t//cardnature:'fire',\r\n\t\t\t\tdistance:{attackFrom:-3},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_zhuque_skill']\r\n\t\t\t},\r\n\t\t\trm_guding:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_guding_skill']\r\n\t\t\t},\r\n\t\t\trm_tengjia:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\t//cardnature:'fire',\r\n\t\t\t\tai:{\r\n\t\t\t\t\tvalue:function(card,player,index,method){\r\n\t\t\t\t\t\tif(player.isDisabled(2)) return 0.01;\r\n\t\t\t\t\t\tif(card==player.getEquip(2)){\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('noDirectDamage')) return 10;\r\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn current!=player&&get.attitude(current,player)<0&&current.hasSkillTag('fireAttack',null,null,true);\r\n\t\t\t\t\t\t\t})) return 0;\r\n\t\t\t\t\t\t\treturn 6;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar value=0;\r\n\t\t\t\t\t\tvar info=get.info(card);\r\n\t\t\t\t\t\tvar current=player.getEquip(info.subtype);\r\n\t\t\t\t\t\tif(current&&card!=current){\r\n\t\t\t\t\t\t\tvalue=get.value(current,player);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar equipValue=info.ai.equipValue;\r\n\t\t\t\t\t\tif(equipValue==undefined){\r\n\t\t\t\t\t\t\tequipValue=info.ai.basic.equipValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(typeof equipValue=='function'){\r\n\t\t\t\t\t\t\tif(method=='raw') return equipValue(card,player);\r\n\t\t\t\t\t\t\tif(method=='raw2') return equipValue(card,player)-value;\r\n\t\t\t\t\t\t\treturn Math.max(0.1,equipValue(card,player)-value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(typeof equipValue!='number') equipValue=0;\r\n\t\t\t\t\t\tif(method=='raw') return equipValue;\r\n\t\t\t\t\t\tif(method=='raw2') return equipValue-value;\r\n\t\t\t\t\t\treturn Math.max(0.1,equipValue-value);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.hasSkillTag('maixie')&&player.hp>1) return 0;\r\n\t\t\t\t\t\tif(player.hasSkillTag('noDirectDamage')) return 10;\r\n\t\t\t\t\t\tif(get.damageEffect(player,player,player,'fire')>=0) return 10;\r\n\t\t\t\t\t\tvar num=4-game.countPlayer(function(current){\r\n\t\t\t\t\t\t\tif(get.attitude(current,player)<0){\r\n\t\t\t\t\t\t\t\tif(current.hasSkillTag('fireAttack',null,null,true)) return 3;\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(player.hp==1) num+=3;\r\n\t\t\t\t\t\tif(player.hp==2) num+=1;\r\n\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:3\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_tengjia1','rm_tengjia2','rm_tengjia3']\r\n\t\t\t},\r\n\t\t\trm_baiyin:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tloseDelay:false,\r\n\t\t\t\tonLose:function(){\r\n\t\t\t\t\tvar next=game.createEvent('rm_baiyin_recover');\r\n\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\tvar evt=event.getParent();\r\n\t\t\t\t\tif(evt.getlx===false) evt=evt.getParent();\r\n\t\t\t\t\tevt.after.push(next);\r\n\t\t\t\t\tnext.player=player;\r\n\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\tif(player.isDamaged()) player.logSkill('rm_baiyin_skill');\r\n\t\t\t\t\t\tplayer.recover();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tfilterLose:function(card,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_baiyin_skill'],\r\n\t\t\t\ttag:{\r\n\t\t\t\t\trecover:1,\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9.5,\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.hp==player.maxHp) return 5;\r\n\t\t\t\t\t\tif(player.countCards('h','rm_baiyin')) return 6;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\trm_numa:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip4',\r\n\t\t\t\tfilterTarget:lib.filter.notMe,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\ttoself:false,\r\n\t\t\t\tloseThrow:true,\r\n\t\t\t\tcustomSwap:function(){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9,\r\n\t\t\t\t\tvalue:function(card,player){\r\n\t\t\t\t\t\tif(player.getEquip(4)==card) return 0;\r\n\t\t\t\t\t\treturn 4;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.getCards('e').contains(card)) return 0;\r\n\t\t\t\t\t\treturn -get.value(player.getCards('e'));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tkeepAI:true,\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar cards=target.getCards('e');\r\n\t\t\t\t\t\t\tvar val=get.value(cards,target);\r\n\t\t\t\t\t\t\tif(val>0) return -val;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trm_feilongduofeng:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tnomod:true,\r\n\t\t\t\tnopower:true,\r\n\t\t\t\tunique:true,\r\n\t\t\t\tglobal:'g_rm_feilongduofeng_ai',\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tskills:['rm_feilongduofeng','rm_feilongduofeng3'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.hasSkill('zhangwu')) return 9;\r\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\treturn current.hasSkill('zhangwu')&&get.attitude(player,current)<=0;\r\n\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 8;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_liulongcanjia:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tmode:['guozhan'],\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip6',\r\n\t\t\t\tnomod:true,\r\n\t\t\t\tnopower:true,\r\n\t\t\t\tunique:true,\r\n\t\t\t\tdistance:{\r\n\t\t\t\t\tglobalFrom:-1,\r\n\t\t\t\t\tglobalTo:+1,\r\n\t\t\t\t},\r\n\t\t\t\tonEquip:function(){\r\n\t\t\t\t\tvar cards=player.getCards('e',{subtype:['equip3','equip4']});\r\n\t\t\t\t\tif(cards.length) player.discard(cards);\r\n\t\t\t\t},\r\n\t\t\t\tskills:['rm_liulongcanjia'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.countCards('e',{subtype:['equip3','equip4']})>1) return 1;\r\n\t\t\t\t\t\tif(player.hasSkill('gzzongyu')) return 9;\r\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\treturn current.hasSkill('gzzongyu')&&get.attitude(player,current)<=0;\r\n\t\t\t\t\t\t}))\treturn 1;\r\n\t\t\t\t\t\treturn 7.2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7.2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\t\r\n\t\t\trm_wuxingpan:{\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip5',\r\n\t\t\t\tskills:['rm_wuxingpan_skill'],\r\n\t\t\t\tfullskin:true\r\n\t\t\t}\r\n\t\t},\r\n\t\tskill:{\r\n\t\t\trm_qinglong_guozhan:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCard'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\taudio:'rm_qinglong_skill',\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn get.mode()=='guozhan'&&event.card.name=='sha';\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(!_status.rm_qinglong_guozhan) _status.rm_qinglong_guozhan=[];\r\n\t\t\t\t\t_status.rm_qinglong_guozhan=[];\r\n\t\t\t\t\t_status.rm_qinglong_guozhan.add(trigger);\r\n\t\t\t\t\tgame.countPlayer2(function(current){\r\n\t\t\t\t\t\tcurrent.addTempSkill('rm_qinglong_guozhan_mingzhi');\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar next=game.createEvent('rm_qinglong_guozhan');\r\n\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\ttrigger.after.add(next);\r\n\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\t_status.rm_qinglong_guozhan.remove(event.parent);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_qinglong_guozhan_mingzhi:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tnomingzhi:true,\r\n\t\t\t\t\tskillTagFilter:function(player){\r\n\t\t\t\t\t\tif(_status.rm_qinglong_guozhan){\r\n\t\t\t\t\t\t\tfor(var i=0;i<_status.rm_qinglong_guozhan.length;i++){\r\n\t\t\t\t\t\t\t\tif(_status.rm_qinglong_guozhan[i].targets.contains(player)) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_hanbing_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'damageBegin2'},\r\n\t\t\t\t//direct:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event){\r\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.notLink()&&event.player.getCards('he').length>0;\r\n\t\t\t\t},\r\n\t\t\t\t//priority:1,\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\tvar target=event.player;\r\n\t\t\t\t\tvar eff=get.damageEffect(target,player,player,event.nature);\r\n\t\t\t\t\tif(get.attitude(player,target)>0){\r\n\t\t\t\t\t\tif(eff>=0) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(eff<=0) return true;\r\n\t\t\t\t\tif(target.hp==1) return false;\r\n\t\t\t\t\tif(event.num>1||player.hasSkill('tianxianjiu')||\r\n\t\t\t\t\t\tplayer.hasSkill('luoyi2')||player.hasSkill('reluoyi2')) return false;\r\n\t\t\t\t\tif(target.countCards('he')<2) return false;\r\n\t\t\t\t\tvar num=0;\r\n\t\t\t\t\tvar cards=target.getCards('he');\r\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\r\n\t\t\t\t\t\tif(get.value(cards[i])>6) num++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(num>=2) return true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tlogTarget:\"player\",\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(trigger.player.countDiscardableCards(player,'he')){\r\n\t\t\t\t\t\tplayer.line(trigger.player);\r\n\t\t\t\t\t\tplayer.discardPlayerCard('he',trigger.player,true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tif(trigger.player.countDiscardableCards(player,'he')){\r\n\t\t\t\t\t\tplayer.line(trigger.player);\r\n\t\t\t\t\t\tplayer.discardPlayerCard('he',trigger.player,true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_renwang_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{target:'shaBegin'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpriority:6,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn (event.card.name=='sha'&&get.color(event.card)=='black')\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target){\r\n\t\t\t\t\t\t\tif(target.hasSkillTag('unequip2')) return;\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})||player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})) return;\r\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='black') return 'zerotarget';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_zhuge_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\ttrigger:{player:'useCard1'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn !event.audioed&&event.card.name=='sha'&&player.countUsed('sha',true)>1&&event.getParent().type=='phase';\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.audioed=true;\r\n\t\t\t\t},\r\n\t\t\t\tmod:{\r\n\t\t\t\t\tcardUsable:function(card,player,num){\r\n\t\t\t\t\t\tvar cardx=player.getEquip('rm_zhuge');\r\n\t\t\t\t\t\tif(card.name=='sha'&&(!cardx||player.hasSkill('rm_zhuge_skill',null,false)||(!_status.rm_zhuge_temp&&!ui.selected.cards.contains(cardx)))){\r\n\t\t\t\t\t\t\tif(get.is.versus()||get.is.changban()){\r\n\t\t\t\t\t\t\t\treturn num+3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn Infinity;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcardEnabled2:function(card,player){\r\n\t\t\t\t\t\tif(!_status.event.addCount_extra||player.hasSkill('rm_zhuge_skill',null,false)) return;\r\n\t\t\t\t\t\tif(card&&card==player.getEquip('rm_zhuge')){\r\n\t\t\t\t\t\t\t_status.rm_zhuge_temp=true;\r\n\t\t\t\t\t\t\tvar bool=lib.filter.cardUsable(get.autoViewAs({name:'sha'},ui.selected.cards.concat([card])),player);\r\n\t\t\t\t\t\t\tdelete _status.rm_zhuge_temp;\r\n\t\t\t\t\t\t\tif(!bool) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trm_cixiong_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCardToPlayered'},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tlogTarget:'target',\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\tif(get.attitude(player,event.target)>0) return true;\r\n\t\t\t\t\tvar target=event.target;\r\n\t\t\t\t\treturn target.countCards('h')==0||!target.hasSkillTag('noh');\r\n\t\t\t\t},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.card.name!='sha') return false;\r\n\t\t\t\t\tif(player.sex=='male'&&event.target.sex=='female') return true;\r\n\t\t\t\t\tif(player.sex=='female'&&event.target.sex=='male') return true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\ttrigger.target.chooseToDiscard('弃置一张手牌，或令'+get.translation(player)+'摸一张牌').set('ai',function(card){\r\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\r\n\t\t\t\t\t\treturn -get.attitude(trigger.target,trigger.player)-get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.bool==false) player.draw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_qinggang_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\tplayer:'useCardToPlayered',\r\n\t\t\t\t},\r\n\t\t\t\tfilter:function(event){\r\n\t\t\t\t\treturn event.card.name=='sha';\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tlogTarget:'target',\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.target.addTempSkill('rm_qinggang2');\r\n\t\t\t\t\ttrigger.target.storage.rm_qinggang2.add(trigger.card);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tunequip_ai:true,\r\n\t\t\t\t\tskillTagFilter:function(player,tag,arg){\r\n\t\t\t\t\t\tif(arg&&arg.name=='sha') return true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_qinggang2:{\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tai:{unequip2:true},\r\n\t\t\t\tinit:function(player,skill){\r\n\t\t\t\t\tif(!player.storage[skill]) player.storage[skill]=[];\r\n\t\t\t\t},\r\n\t\t\t\tonremove:true,\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\tplayer:['damage','damageCancelled','damageZero'],\r\n\t\t\t\t\tsource:['damage','damageCancelled','damageZero'],\r\n\t\t\t\t\ttarget:['shaMiss','useCardToExcluded','useCardToEnd'],\r\n\t\t\t\t\tglobal:['useCardEnd'],\r\n\t\t\t\t},\r\n\t\t\t\tcharlotte:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.storage.rm_qinggang2&&event.card&&player.storage.rm_qinggang2.contains(event.card)&&(event.name!='damage'||event.notLink());\r\n\t\t\t\t},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tpriority:12,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tplayer.storage.rm_qinggang2.remove(trigger.card);\r\n\t\t\t\t\tif(!player.storage.rm_qinggang2.length) player.removeSkill('rm_qinggang2');\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trm_qinglong_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'shaMiss'},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(get.mode()=='guozhan') return false;\r\n\t\t\t\t\treturn player.canUse('sha',event.target,false)&&(player.hasSha()||_status.connectMode&&player.countCards('h'));\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tplayer.chooseToUse(get.prompt('rm_qinglong'),function(card,player,event){\r\n\t\t\t\t\t\tif(get.name(card)!='sha') return false;\r\n\t\t\t\t\t\treturn lib.filter.filterCard.apply(this,arguments);\r\n\t\t\t\t\t},trigger.target,-1).set('addCount',false).logSkill='rm_qinglong_skill';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_zhangba_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tenable:['chooseToUse','chooseToRespond'],\r\n\t\t\t\tfilterCard:true,\r\n\t\t\t\tselectCard:2,\r\n\t\t\t\tposition:'h',\r\n\t\t\t\tviewAs:{name:'sha'},\r\n\t\t\t\tcomplexCard:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.countCards('h')>=2;\r\n\t\t\t\t},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tprompt:'将两张手牌当杀使用或打出',\r\n\t\t\t\tcheck:function(card){\r\n\t\t\t\t\tif(card.name=='sha') return 0;\r\n\t\t\t\t\treturn 5-get.value(card)\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\trespondSha:true,\r\n\t\t\t\t\tskillTagFilter:function(player){\r\n\t\t\t\t\t\treturn player.countCards('h')>=2;\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_guanshi_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'shaMiss'},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.countCards('he',function(card){\r\n\t\t\t\t\t\treturn card!=player.getEquip('rm_guanshi');\r\n\t\t\t\t\t})>=2&&event.target.isAlive();\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('rm_guanshi'),2,'he',function(card){\r\n\t\t\t\t\t\treturn _status.event.player.getEquip('rm_guanshi')!=card;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.logSkill='rm_guanshi_skill';\r\n\t\t\t\t\tnext.set('ai',function(card){\r\n\t\t\t\t\t\tvar evt=_status.event.getTrigger();\r\n\t\t\t\t\t\tif(get.attitude(evt.player,evt.target)<0){\r\n\t\t\t\t\t\t\tif(evt.baseDamage+evt.extraDamage>=Math.min(2,evt.target.hp)){\r\n\t\t\t\t\t\t\t\treturn 8-get.value(card)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 5-get.value(card)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\ttrigger.trigger('shaHit');\r\n\t\t\t\t\t\ttrigger._result.bool=false;\r\n\t\t\t\t\t\ttrigger._result.result=null;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tdirectHit_ai:true,\r\n\t\t\t\t\tskillTagFilter:function(player,tag,arg){\r\n\t\t\t\t\t\tif(player._rm_guanshi_temp) return;\r\n\t\t\t\t\t\tplayer._rm_guanshi_temp=true;\r\n\t\t\t\t\t\tvar bool=(get.attitude(player,arg.target)<0&&arg.card.name=='sha'&&player.countCards('he',function(card){\r\n\t\t\t\t\t\t\treturn card!=player.getEquip('rm_guanshi')&&card!=arg.card&&(!arg.card.cards||!arg.card.cards.contains(card))&&get.value(card)<5;\r\n\t\t\t\t\t\t})>1);\r\n\t\t\t\t\t\tdelete player._rm_guanshi_temp;\r\n\t\t\t\t\t\treturn bool;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trm_fangtian_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttrigger:{player:'useCard1'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.card.name!='sha'||get.mode()=='guozhan') return false;\r\n\t\t\t\t\tvar card=event.card;\r\n\t\t\t\t\tvar range;\r\n\t\t\t\t\tvar select=get.copy(get.info(card).selectTarget);\r\n\t\t\t\t\tif(select==undefined){\r\n\t\t\t\t\t\tif(get.info(card).filterTarget==undefined) return false;\r\n\t\t\t\t\t\trange=[1,1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(typeof select=='number') range=[select,select];\r\n\t\t\t\t\telse if(get.itemtype(select)=='select') range=select;\r\n\t\t\t\t\telse if(typeof select=='function') range=select(card,player);\r\n\t\t\t\t\tgame.checkMod(card,player,range,'selectTarget',player);\r\n\t\t\t\t\treturn range[1]!=-1&&event.targets.length>range[1];\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){},\r\n\t\t\t\tmod:{\r\n\t\t\t\t\tselectTarget:function(card,player,range){\r\n\t\t\t\t\t\tif(card.name!='sha') return;\r\n\t\t\t\t\t\tif(get.mode()=='guozhan') return;\r\n\t\t\t\t\t\tif(range[1]==-1) return;\r\n\t\t\t\t\t\tvar cards=player.getCards('h');\r\n\t\t\t\t\t\tif(!cards.length) return;\r\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\r\n\t\t\t\t\t\t\tif(cards[i].classList.contains('selected')==false)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\trange[1]+=2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_fangtian_guozhan:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCard2'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(get.mode()!='guozhan') return false;\r\n\t\t\t\t\tif(event.card.name!='sha') return false;\r\n\t\t\t\t\treturn game.hasPlayer(function(target){\r\n\t\t\t\t\t\tif(event.targets.contains(target)) return false;\r\n\t\t\t\t\t\tif(!lib.filter.filterTarget(event.card,player,target)) return false;\r\n\t\t\t\t\t\tif(target.identity=='ye'||target.identity=='unknown') return true;\r\n\t\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\r\n\t\t\t\t\t\t\tif(target.identity==event.targets[i].identity) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('rm_fangtian'),[1,Infinity],function(card,player,target){\r\n\t\t\t\t\t\tvar cardx=_status.event.cardx;\r\n\t\t\t\t\t\tif(!lib.filter.filterTarget(cardx,player,target)) return false;\r\n\t\t\t\t\t\tvar targets=_status.event.targets.slice(0).concat(ui.selected.targets);\r\n\t\t\t\t\t\tif(targets.contains(target)) return false;\r\n\t\t\t\t\t\tif(target.identity=='ye'||target.identity=='unknown') return true;\r\n\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\r\n\t\t\t\t\t\t\tif(target.identity==targets[i].identity) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}).set('promptbar','none').set('cardx',trigger.card).set('targets',trigger.targets).set('ai',function(target){\r\n\t\t\t\t\t\tvar player=_status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target,_status.event.cardx,player,player)\r\n\t\t\t\t\t});\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tplayer.logSkill('rm_fangtian_skill',result.targets);\r\n\t\t\t\t\t\tif(!player.storage.rm_fangtian_guozhan_trigger) player.storage.rm_fangtian_guozhan_trigger=[];\r\n\t\t\t\t\t\tplayer.storage.rm_fangtian_guozhan_trigger.add(trigger.card);\r\n\t\t\t\t\t\ttrigger.targets.addArray(result.targets);\r\n\t\t\t\t\t\tplayer.addTempSkill('rm_fangtian_guozhan_trigger');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trm_fangtian_guozhan_trigger:{\r\n\t\t\t\ttrigger:{player:'shaMiss'},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tonremove:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(player.storage[event.name].contains(trigger.card)) trigger.getParent().excluded.addArray(trigger.getParent().targets);\r\n\t\t\t\t},\r\n\t\t\t\tgroup:'rm_fangtian_guozhan_remove',\r\n\t\t\t},\r\n\t\t\trm_fangtian_guozhan_remove:{\r\n\t\t\t\ttrigger:{player:['useCardAfter','useCardCancelled']},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.storage.rm_fangtian_guozhan_trigger&&player.storage.rm_fangtian_guozhan_trigger.contains(event.card);\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tplayer.storage.rm_fangtian_guozhan_trigger.remove(trigger.card);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_qilin_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'damageBegin2'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.notLink()&&event.player.getCards('e',{subtype:['equip3','equip4','equip6']}).length>0\r\n\t\t\t\t},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tvar att=(get.attitude(player,trigger.player)<=0);\r\n\t\t\t\t\tvar next=player.chooseButton();\r\n\t\t\t\t\tnext.set('att',att);\r\n\t\t\t\t\tnext.set('createDialog',['是否发动【麒麟弓】，弃置'+get.translation(trigger.player)+'的一张坐骑牌？',trigger.player.getCards('e',{subtype:['equip3','equip4','equip6']})]);\r\n\t\t\t\t\tnext.set('ai',function(button){\r\n\t\t\t\t\t\tif(_status.event.att) return get.buttonValue(button);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tplayer.logSkill('rm_qilin_skill',trigger.player);\r\n\t\t\t\t\t\ttrigger.player.discard(result.links[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_bagua_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:['chooseToRespondBegin','chooseToUseBegin']},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.responded) return false;\r\n\t\t\t\t\tif(event.rm_bagua_skill) return false;\r\n\t\t\t\t\tif(!event.filterCard||!event.filterCard({name:'shan'},player,event)) return false;\r\n\t\t\t\t\tif(event.name=='chooseToRespond'&&!lib.filter.cardRespondable({name:'shan'},player,event)) return false;\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tvar evt=event.getParent();\r\n\t\t\t\t\tif(evt.player&&evt.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:evt.card?evt.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:evt.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\tif(event&&(event.ai||event.ai1)){\r\n\t\t\t\t\t\tvar ai=event.ai||event.ai1;\r\n\t\t\t\t\t\tvar tmp=_status.event;\r\n\t\t\t\t\t\t_status.event=event;\r\n\t\t\t\t\t\tvar result=ai({name:'shan'},_status.event.player,event);\r\n\t\t\t\t\t\t_status.event=tmp;\r\n\t\t\t\t\t\treturn result>0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\ttrigger.rm_bagua_skill=true;\r\n\t\t\t\t\tplayer.judge('rm_bagua',function(card){return (get.color(card)=='red')?1.5:-0.5});\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.judge>0){\r\n\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\ttrigger.set('responded',true);\r\n\t\t\t\t\t\ttrigger.result={bool:true,card:{name:'shan',isCard:true}}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\trespondShan:true,\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target,effect){\r\n\t\t\t\t\t\t\tif(target.hasSkillTag('unequip2')) return;\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})||player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})) return;\r\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')) return 0.5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_muniu_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tenable:'phaseUse',\r\n\t\t\t\tusable:1,\r\n\t\t\t\tfilterCard:true,\r\n\t\t\t\tcheck:function(card){\r\n\t\t\t\t\tif(card.name=='du') return 20;\r\n\t\t\t\t\tvar player=_status.event.player;\r\n\t\t\t\t\tvar nh=player.countCards('h');\r\n\t\t\t\t\tif(!player.needsToDiscard()){\r\n\t\t\t\t\t\tif(nh<3) return 0;\r\n\t\t\t\t\t\tif(nh==3) return 5-get.value(card);\r\n\t\t\t\t\t\treturn 7-get.value(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 10-get.useful(card);\r\n\t\t\t\t},\r\n\t\t\t\tdiscard:false,\r\n\t\t\t\tlose:false,\r\n\t\t\t\tdelay:false,\r\n\t\t\t\tsync:function(rm_muniu){\r\n\t\t\t\t\tif(game.online){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!rm_muniu.cards){\r\n\t\t\t\t\t\trm_muniu.cards=[];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(var i=0;i<rm_muniu.cards.length;i++){\r\n\t\t\t\t\t\tif(get.position(rm_muniu.cards[i])!='s'){\r\n\t\t\t\t\t\t\trm_muniu.cards.splice(i--,1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.broadcast(function(rm_muniu,cards){\r\n\t\t\t\t\t\trm_muniu.cards=cards;\r\n\t\t\t\t\t},rm_muniu,rm_muniu.cards);\r\n\t\t\t\t},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.countCards('h')>0;\r\n\t\t\t\t},\r\n\t\t\t\tprepare:function(cards,player){\r\n\t\t\t\t\tplayer.$give(1,player,false);\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tplayer.loseToSpecial(cards,'rm_muniu');\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\r\n\t\t\t\t\t\tif(cards[i].destroyed||!cards[i].hasGaintag('rm_muniu')||get.position(cards[i])!='s'){\r\n\t\t\t\t\t\t\tcards[i].remove();\r\n\t\t\t\t\t\t\tcards.splice(i--,1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar rm_muniu=player.getEquip(5);\r\n\t\t\t\t\tif(!rm_muniu||!cards.length){\r\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\r\n\t\t\t\t\t\t\tcards[i].discard();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(rm_muniu.cards==undefined) rm_muniu.cards=[];\r\n\t\t\t\t\trm_muniu.cards.push(cards[0]);\r\n\t\t\t\t\tgame.broadcast(function(rm_muniu,cards){\r\n\t\t\t\t\t\trm_muniu.cards=cards;\r\n\t\t\t\t\t},rm_muniu,rm_muniu.cards);\r\n\t\t\t\t\tgame.delayx();\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tvar players=game.filterPlayer(function(current){\r\n\t\t\t\t\t\tif(!current.getEquip(5)&&current!=player&&!current.isTurnedOver()&&\r\n\t\t\t\t\t\t\tget.attitude(player,current)>=3&&get.attitude(current,player)>=3){\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tplayers.sort(lib.sort.seat);\r\n\t\t\t\t\tvar choice=players[0];\r\n\t\t\t\t\tvar next=player.chooseTarget('是否移动木牛流马？',function(card,player,target){\r\n\t\t\t\t\t\treturn !target.isMin()&&player!=target&&target.isEmpty(5);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.set('ai',function(target){\r\n\t\t\t\t\t\treturn target==_status.event.choice?1:-1;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.set('choice',choice);\r\n\t\t\t\t\t\"step 3\"\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tvar card=player.getEquip(5);\r\n\t\t\t\t\t\tresult.targets[0].equip(card);\r\n\t\t\t\t\t\tplayer.$give(card,result.targets[0]);\r\n\t\t\t\t\t\tplayer.line(result.targets,'green');\r\n\t\t\t\t\t\tgame.delay();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tplayer.updateMarks();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:1,\r\n\t\t\t\t\texpose:0.1,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:1\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tmod:{\r\n\t\t\t\t\tcardEnabled2:function(card,player){\r\n\t\t\t\t\t\tif(!ui.selected.cards.length) return;\r\n\t\t\t\t\t\tvar rm_muniu=player.getEquip('rm_muniu');\r\n\t\t\t\t\t\tif(!rm_muniu||!rm_muniu.cards||!rm_muniu.cards.length) return;\r\n\t\t\t\t\t\tfor(var i of ui.selected.cards){\r\n\t\t\t\t\t\t\tif(i==rm_muniu&&rm_muniu.cards.contains(card)) return false;\r\n\t\t\t\t\t\t\tif(rm_muniu.cards.contains(i)&&card==rm_muniu) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark:true,\r\n\t\t\t\tintro:{\r\n\t\t\t\t\tcontent:function(storage,player){\r\n\t\t\t\t\t\tvar rm_muniu=player.getEquip(5);\r\n\t\t\t\t\t\tif(!rm_muniu||!rm_muniu.cards||!rm_muniu.cards.length) return '共有〇张牌';\r\n\t\t\t\t\t\tif(player.isUnderControl(true)){\r\n\t\t\t\t\t\t\treturn get.translation(rm_muniu.cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\treturn '共有'+get.cnNumber(rm_muniu.cards.length)+'张牌';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmark:function(dialog,storage,player){\r\n\t\t\t\t\t\tvar rm_muniu=player.getEquip(5);\r\n\t\t\t\t\t\tif(!rm_muniu||!rm_muniu.cards||!rm_muniu.cards.length) return '共有〇张牌';\r\n\t\t\t\t\t\tif(player.isUnderControl(true)){\r\n\t\t\t\t\t\t\tdialog.addAuto(rm_muniu.cards);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\treturn '共有'+get.cnNumber(rm_muniu.cards.length)+'张牌';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmarkcount:function(storage,player){\r\n\t\t\t\t\t\tvar rm_muniu=player.getEquip(5);\r\n\t\t\t\t\t\tif(rm_muniu&&rm_muniu.cards) return rm_muniu.cards.length;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_muniu_skill7:{\r\n\t\t\t\ttrigger:{player:'loseEnd'},\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(!event.ss||!event.ss.length||event.parent.name=='lose_rm_muniu') return false;\r\n\t\t\t\t\tvar rm_muniu=player.getEquip('rm_muniu');\r\n\t\t\t\t\tif(!rm_muniu||!rm_muniu.cards) return false;\r\n\t\t\t\t\treturn event.ss.filter(function(card){\r\n\t\t\t\t\t\treturn rm_muniu.cards.contains(card);\r\n\t\t\t\t\t}).length>0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar rm_muniu=player.getEquip(5);\r\n\t\t\t\t\tif(rm_muniu&&rm_muniu.cards){\r\n\t\t\t\t\t\trm_muniu.cards.removeArray(trigger.ss);\r\n\t\t\t\t\t\tlib.skill.rm_muniu_skill.sync(rm_muniu);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.updateMarks();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trm_guding_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttrigger:{source:'damageBegin1'},\r\n\t\t\t\tfilter:function(event){\r\n\t\t\t\t\tif(event.parent.name=='_lianhuan'||event.parent.name=='_lianhuan2') return false;\r\n\t\t\t\t\tif(event.card&&event.card.name=='sha'){\r\n\t\t\t\t\t\tif(event.player.countCards('h')==0) return true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\tplayer:function(card,player,target,current,isLink){\r\n\t\t\t\t\t\t\tif(card.name=='sha'&&!isLink&&target.countCards('h')==0&&!target.hasSkillTag('filterDamage',null,{\r\n\t\t\t\t\t\t\t\tplayer:player,\r\n\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t})) return [1,0,1,-3];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_tengjia1:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{target:['useCardToBefore']},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpriority:6,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\tif(event.card.name=='nanman') return true;\r\n\t\t\t\t\tif(event.card.name=='wanjian') return true;\r\n\t\t\t\t\tif(event.card.name=='chuqibuyi') return true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target,current){\r\n\t\t\t\t\t\t\tif(target.hasSkillTag('unequip2')) return;\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})||player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})) return;\r\n\t\t\t\t\t\t\tif(card.name=='nanman'||card.name=='wanjian'||card.name=='chuqibuyi') return 'zerotarget';\r\n\t\t\t\t\t\t\tif(card.name=='sha'){\r\n\t\t\t\t\t\t\t\tvar equip1=player.getEquip(1);\r\n\t\t\t\t\t\t\t\tif(equip1&&equip1.name=='rm_zhuque') return 1.9;\r\n\t\t\t\t\t\t\t\tif(!card.nature) return 'zerotarget';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_tengjia2:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'damageBegin3'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.nature!='fire') return false;\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.source&&event.source.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tforced:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tfireAttack:true,\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target,current){\r\n\t\t\t\t\t\t\tif(card.name=='sha'){\r\n\t\t\t\t\t\t\t\tif(card.nature=='fire') return 2;\r\n\t\t\t\t\t\t\t\tif(player.hasSkill('rm_zhuque_skill')) return 1.9;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(get.tag(card,'fireDamage')&&current<0) return 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_tengjia3:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:'rm_tengjia1',\r\n\t\t\t\ttrigger:{target:'shaBefore'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\tif(event.card.name=='sha'&&!event.card.nature) return true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trm_baiyin_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'damageBegin4'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.num<=1) return false;\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.source&&event.source.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\t//priority:-10,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.num=1;\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tfilterDamage:true,\r\n\t\t\t\t\tskillTagFilter:function(player,tag,arg){\r\n\t\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\t\tif(arg&&arg.player){\r\n\t\t\t\t\t\t\tif(arg.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:arg.card?arg.card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\t\t\tcard:arg.card,\r\n\t\t\t\t\t\t\t})) return false;\r\n\t\t\t\t\t\t\tif(arg.player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\tname:arg.card?arg.card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\t\t\tcard:arg.card,\r\n\t\t\t\t\t\t\t})) return false;\r\n\t\t\t\t\t\t\tif(arg.player.hasSkillTag('jueqing',false,player)) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trm_zhuque_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCard1'},\r\n\t\t\t\t//priority:7,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.card.name=='sha'&&!event.card.nature) return true;\r\n\t\t\t\t},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\tvar eff=0;\r\n\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\r\n\t\t\t\t\t\tvar target=event.targets[i];\r\n\t\t\t\t\t\tvar eff1=get.damageEffect(target,player,player);\r\n\t\t\t\t\t\tvar eff2=get.damageEffect(target,player,player,'fire');\r\n\t\t\t\t\t\teff+=eff2;\r\n\t\t\t\t\t\teff-=eff1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn eff>=0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.card.nature='fire';\r\n\t\t\t\t\tif(get.itemtype(trigger.card)=='card'){\r\n\t\t\t\t\t\tvar next=game.createEvent('rm_zhuque_clear');\r\n\t\t\t\t\t\tnext.card=trigger.card;\r\n\t\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\t\ttrigger.after.push(next);\r\n\t\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\t\tdelete card.nature;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_zhuque_skill2:{\r\n\t\t\t\ttrigger:{player:'useCardAfter'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tdelete player.storage.rm_zhuque_skill.nature;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\trm_feilongduofeng:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCardToPlayered'},\r\n\t\t\t\tlogTarget:'target',\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\treturn get.attitude(player,event.target)<=0;\r\n\t\t\t\t},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn event.card.name=='sha'&&event.target.countCards('he');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.target.chooseToDiscard('he',true);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trm_feilongduofeng2:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'dieAfter'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.reason&&event.reason.card&&event.reason.card.name=='sha'){\r\n\t\t\t\t\t\treturn event.player.isDead()&&lib.group.contains(player.identity)&&player.isMinor();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tlogTarget:'player',\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tvar list=[];\r\n\t\t\t\t\tfor(var i=0;i<_status.characterlist.length;i++){\r\n\t\t\t\t\t\tvar info=lib.character[_status.characterlist[i]];\r\n\t\t\t\t\t\tif(info[4]&&info[4].contains('jun')) continue;\r\n\t\t\t\t\t\tif(info[1]==player.identity){\r\n\t\t\t\t\t\t\tlist.push(_status.characterlist[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.identity=event.player.identity;\r\n\t\t\t\t\tif(trigger.player==game.me&&!_status.auto){\r\n\t\t\t\t\t\tevent.dialog=ui.create.dialog('是否选择一名角色重新加入游戏？',[list,'character']);\r\n\t\t\t\t\t\tevent.filterButton=function(){return true};\r\n\t\t\t\t\t\tevent.player=game.me;\r\n\t\t\t\t\t\tevent.custom.replace.confirm=function(){\r\n\t\t\t\t\t\t\tif(!ui.selected.buttons.length){\r\n\t\t\t\t\t\t\t\tevent.directresult='refuse';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tevent.directresult=ui.selected.buttons[0].link;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t\tif(ui.confirm) ui.confirm.close();\r\n\t\t\t\t\t\t\tdelete event.player;\r\n\t\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.switchToAuto=function(){\r\n\t\t\t\t\t\t\tevent.directresult=list.randomGet();\r\n\t\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t\tif(ui.confirm) ui.confirm.close();\r\n\t\t\t\t\t\t\tdelete event.player;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgame.check();\r\n\t\t\t\t\t\tgame.pause();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(trigger.player.isOnline()){\r\n\t\t\t\t\t\ttrigger.player.send(function(player,list){\r\n\t\t\t\t\t\t\tif(_status.auto){\r\n\t\t\t\t\t\t\t\t_status.event._result=list.randomGet();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tvar next=game.createEvent('replacePlayer');\r\n\t\t\t\t\t\t\t\tnext.source=player;\r\n\t\t\t\t\t\t\t\tnext.list=list;\r\n\t\t\t\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\t\t\t\tevent.dialog=ui.create.dialog('是否选择一名角色重新加入游戏？',[event.list,'character']);\r\n\t\t\t\t\t\t\t\t\tevent.filterButton=function(){return true};\r\n\t\t\t\t\t\t\t\t\tevent.player=event.source;\r\n\t\t\t\t\t\t\t\t\tevent.custom.replace.confirm=function(){\r\n\t\t\t\t\t\t\t\t\t\tif(!ui.selected.buttons.length){\r\n\t\t\t\t\t\t\t\t\t\t\tevent.result='refuse';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\t\tevent.result=ui.selected.buttons[0].link;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t\t\t\t\tif(ui.confirm) ui.confirm.close();\r\n\t\t\t\t\t\t\t\t\t\tdelete event.player;\r\n\t\t\t\t\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t\t\t\t\tgame.uncheck();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tevent.switchToAuto=function(){\r\n\t\t\t\t\t\t\t\t\t\tevent.result=list.randomGet();\r\n\t\t\t\t\t\t\t\t\t\tevent.dialog.close();\r\n\t\t\t\t\t\t\t\t\t\tif(ui.confirm) ui.confirm.close();\r\n\t\t\t\t\t\t\t\t\t\tdelete event.player;\r\n\t\t\t\t\t\t\t\t\t\tgame.uncheck();\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tgame.check();\r\n\t\t\t\t\t\t\t\t\tgame.pause();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t},trigger.player,list);\r\n\t\t\t\t\t\ttrigger.player.wait();\r\n\t\t\t\t\t\tgame.pause();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.directresult=list.randomGet();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.list=list;\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tgame.uncheck();\r\n\t\t\t\t\tif(!event.directresult){\r\n\t\t\t\t\t\tif(event.resultOL){\r\n\t\t\t\t\t\t\tevent.directresult=event.resultOL[trigger.player.playerid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!event.directresult||event.directresult=='ai'){\r\n\t\t\t\t\t\t\tevent.directresult=event.list.randomGet();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(event.directresult=='refuse'){\r\n\t\t\t\t\t\tgame.log(trigger.player,'拒绝重新加入游戏');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.log(trigger.player,'重新加入游戏');\r\n\t\t\t\t\tvar name=event.directresult;\r\n\t\t\t\t\tgame.log(trigger.player,'将主将替换为','#b'+name);\r\n\t\t\t\t\t_status.characterlist.remove(name);\r\n\t\t\t\t\tgame.broadcastAll(function(source,name,identity){\r\n\t\t\t\t\t\tsource.revive(2,false);\r\n\t\t\t\t\t\tsource.identity=identity;\r\n\t\t\t\t\t\tsource._group=identity;\r\n\t\t\t\t\t\tsource.setIdentity();\r\n\t\t\t\t\t\tif(source==game.me){\r\n\t\t\t\t\t\t\tui.arena.classList.remove('selecting');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},trigger.player,name,event.identity);\r\n\t\t\t\t\ttrigger.player.draw();\r\n\t\t\t\t\ttrigger.player.reinit(trigger.player.name1,name,false);\r\n\t\t\t\t\ttrigger.player.removeCharacter(1);\r\n\t\t\t\t\ttrigger.getParent('damage').untrigger(false,trigger.player);\r\n\t\t\t\t\tgame.addVideo('setIdentity',trigger.player,event.identity);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trm_feilongduofeng3:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'dying'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tvar evt=event.getParent('damage');\r\n\t\t\t\t\treturn evt&&evt.card&&evt.card.name=='sha'&&event.player.countGainableCards(player,'h')>0;\r\n\t\t\t\t},\r\n\t\t\t\t//priority:7,\r\n\t\t\t\tlogTarget:'player',\r\n\t\t\t\tprompt2:'获得该角色的一张手牌',\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\treturn get.attitude(player,event.player)<0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tplayer.gainPlayerCard(trigger.player,'h',true);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trm_liulongcanjia:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tmod:{\r\n\t\t\t\t\ttargetEnabled:function(card,player,target){\r\n\t\t\t\t\t\tif(['equip3','equip4'].contains(get.subtype(card))) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\trm_wuxingpan_skill:{\r\n\t\t\t\tenable:'phaseUse',\r\n\t\t\t\tusable:1,\r\n\t\t\t\tfilterCard:true,\r\n\t\t\t\tlose:false,\r\n\t\t\t\tprompt:'选择一张手牌永久改变其五行属性',\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tplayer.chooseControl('metal','wood','water','fire','soil');\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tvar card=cards[0];\r\n\t\t\t\t\tif(!card.node.wuxing){\r\n\t\t\t\t\t\tcard.node.wuxing=ui.create.div('.wunature',card);\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tcard.wunature=result.control;\r\n\t\t\t\t\tcard.node.wuxing.dataset.nature=result.control;\r\n\t\t\t\t\tcard.node.wuxing.innerHTML=get.translation(result.control);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\ttranslate:{\r\n\t\t\trm_bagua:'八卦阵',\r\n\t\t\trm_bagua_bg:'卦',\r\n\t\t\trm_bagua_skill:'八卦阵',\r\n\t\t\trm_jueying:'绝影',\r\n\t\t\trm_dilu:'的卢',\r\n\t\t\trm_zhuahuang:'爪黄飞电',\r\n\t\t\trm_jueying_bg:'+马',\r\n\t\t\trm_dilu_bg:'+马',\r\n\t\t\trm_zhuahuang_bg:'+马',\r\n\t\t\trm_chitu:'赤兔',\r\n\t\t\trm_chitu_bg:'-马',\r\n\t\t\trm_dawan:'大宛',\r\n\t\t\trm_dawan_bg:'-马',\r\n\t\t\trm_zixin:'紫骍',\r\n\t\t\trm_zixin_bg:'-马',\r\n\t\t\trm_zhuge:'诸葛连弩',\r\n\t\t\trm_cixiong:'雌雄双股剑',\r\n\t\t\trm_zhuge_bg:'弩',\r\n\t\t\trm_cixiong_bg:'双',\r\n\t\t\trm_qinggang:'青釭剑',\r\n\t\t\trm_qinglong:'青龙偃月刀',\r\n\t\t\trm_zhangba:'丈八蛇矛',\r\n\t\t\trm_qinglong_bg:'偃',\r\n\t\t\trm_zhangba_bg:'蛇',\r\n\t\t\trm_guanshi:'贯石斧',\r\n\t\t\trm_fangtian:'方天画戟',\r\n\t\t\trm_qilin:'麒麟弓',\r\n\t\t\trm_qilin_bg:'弓',\r\n\t\t\trm_zhuge_skill:'诸葛连弩',\r\n\t\t\trm_cixiong_skill:'雌雄双股剑',\r\n\t\t\trm_qinggang_skill:'青釭剑',\r\n\t\t\trm_qinglong_skill:'青龙偃月刀',\r\n\t\t\trm_qinglong_guozhan:'青龙偃月刀',\r\n\t\t\trm_zhangba_skill:'丈八蛇矛',\r\n\t\t\trm_guanshi_skill:'贯石斧',\r\n\t\t\trm_fangtian_skill:'方天画戟',\r\n\t\t\trm_qilin_skill:'麒麟弓',\r\n\t\t\trm_hanbing:'寒冰剑',\r\n\t\t\trm_renwang:'仁王盾',\r\n\t\t\trm_hanbing_bg:'冰',\r\n\t\t\trm_renwang_bg:'盾',\r\n\t\t\trm_hanbing_skill:'寒冰剑',\r\n\t\t\trm_renwang_skill:'仁王盾',\r\n\t\t\trm_hanbing_info:'当你使用杀造成伤害时，你可以防止此伤害，改为依次弃置目标角色的两张牌。',\r\n\t\t\trm_hanbing_skill_info:'当你使用杀造成伤害时，你可以防止此伤害，改为依次弃置目标角色的两张牌。',\r\n\t\t\trm_renwang_info:'锁定技，黑色的杀对你无效',\r\n\t\t\trm_renwang_skill_info:'锁定技，黑色的杀对你无效',\r\n\t\t\trm_bagua_info:'当你需要使用或打出一张【闪】时，你可以进行一次判定，若判定结果为红色，视为你使用或打出了一张【闪】。',\r\n\t\t\trm_bagua_skill_info:'当你需要使用或打出一张【闪】时，你可以进行一次判定，若判定结果为红色，视为你使用或打出了一张【闪】。',\r\n\t\t\trm_jueying_info:'锁定技，其他角色计算与你的距离+1。',\r\n\t\t\trm_dilu_info:'锁定技，其他角色计算与你的距离+1。',\r\n\t\t\trm_zhuahuang_info:'锁定技，其他角色计算与你的距离+1。',\r\n\t\t\trm_chitu_info:'锁定技，你计算与其他角色的距离-1。',\r\n\t\t\trm_dawan_info:'锁定技，你计算与其他角色的距离-1。',\r\n\t\t\trm_zixin_info:'锁定技，你计算与其他角色的距离-1。',\r\n\t\t\trm_zhuge_skill_info:'锁定技，你于出牌阶段内使用【杀】无次数限制。',\r\n\t\t\trm_zhuge_info:'锁定技，你于出牌阶段内使用【杀】无次数限制。',\r\n\t\t\trm_cixiong_skill_info:'当你使用【杀】指定一名异性的目标角色后，你可以令其选择一项：1.弃置一张手牌；2.令你摸一张牌。',\r\n\t\t\trm_cixiong_info:'当你使用【杀】指定一名异性的目标角色后，你可以令其选择一项：1.弃置一张手牌；2.令你摸一张牌。',\r\n\t\t\trm_qinggang_skill_info:'锁定技，当你使用【杀】指定一名目标角色后，你令其防具技能无效直到此【杀】被抵消或造成伤害。',\r\n\t\t\trm_qinggang_info:'锁定技，当你使用【杀】指定一名目标角色后，你令其防具技能无效直到此【杀】被抵消或造成伤害。',\r\n\t\t\trm_qinglong_skill_info:'当你使用的【杀】被目标角色使用的【闪】抵消时，你可以对其使用一张【杀】（无距离限制）。',\r\n\t\t\trm_qinglong_guozhan_info:'锁定技，当你使用【杀】指定目标后，所有目标角色不能明置武将牌直到此【杀】结算完毕为止。',\r\n\t\t\trm_qinglong_info:'当你使用的【杀】被目标角色使用的【闪】抵消时，你可以对其使用一张【杀】（无距离限制）。',\r\n\t\t\trm_qinglong_info_guozhan:'锁定技，当你使用【杀】指定目标后，所有目标角色不能明置武将牌直到此【杀】结算完毕为止。',\r\n\t\t\trm_zhangba_skill_info:'你可以将两张手牌当【杀】使用或打出。',\r\n\t\t\trm_zhangba_info:'你可以将两张手牌当【杀】使用或打出。',\r\n\t\t\trm_guanshi_skill_info:'当你使用的【杀】被目标角色使用的【闪】抵消时，你可以弃置两张牌，令此【杀】依然对其造成伤害。',\r\n\t\t\trm_guanshi_info:'当你使用的【杀】被目标角色使用的【闪】抵消时，你可以弃置两张牌，令此【杀】依然对其造成伤害。',\r\n\t\t\trm_fangtian_skill_info:'你使用的【杀】若是你最后的手牌，你可以额外选择至多两个目标。',\r\n\t\t\trm_fangtian_info:'你使用的【杀】若是你最后的手牌，你可以额外选择至多两个目标。',\r\n\t\t\trm_fangtian_info_guozhan:'你使用【杀】可以指定任意名角色为目标（不能包含势力相同的角色），若任意一名目标角色使用【闪】抵消了此【杀】，则此【杀】对剩余的目标角色无效。',\r\n\t\t\trm_qilin_skill_info:'当你使用【杀】对目标角色造成伤害时，你可以弃置其装备区里的一张坐骑牌。',\r\n\t\t\trm_qilin_info:'当你使用【杀】对目标角色造成伤害时，你可以弃置其装备区里的一张坐骑牌。',\r\n\r\n\t\t\trm_hualiu:'骅骝',\r\n\t\t\trm_zhuque:'朱雀羽扇',\r\n\t\t\trm_hualiu_bg:'+马',\r\n\t\t\trm_hualiu_info:'你的防御距离+1',\r\n\t\t\trm_zhuque_bg:'扇',\r\n\t\t\trm_zhuque_skill:'朱雀羽扇',\r\n\t\t\trm_zhuque_info:'你可以将一张普通【杀】当具火焰伤害的【杀】使用。',\r\n\t\t\trm_guding:'古锭刀',\r\n\t\t\trm_guding_info:'锁定技，当你使用【杀】对目标角色造成伤害时，若其没有手牌，此伤害+1。',\r\n\t\t\trm_guding_skill:'古锭刀',\r\n\t\t\trm_tengjia:'藤甲',\r\n\t\t\trm_tengjia_info:'锁定技，【南蛮入侵】、【万箭齐发】、【出其不意】和普通【杀】对你无效。当你受到火焰伤害时，该伤害+1。',\r\n\t\t\trm_tengjia1:'藤甲',\r\n\t\t\trm_tengjia2:'藤甲',\r\n\t\t\trm_tengjia3:'藤甲',\r\n\t\t\trm_baiyin:'白银狮子',\r\n\t\t\trm_baiyin_info:'锁定技，你每次受到伤害时，最多承受1点伤害（防止多余的伤害）；当你失去装备区里的【白银狮子】时，你回复1点体力。',\r\n\t\t\trm_baiyin_skill:'白银狮子',\r\n\t\t\t\r\n\t\t\trm_muniu:'木牛流马',\r\n\t\t\trm_muniu_bg:'牛',\r\n\t\t\trm_muniu_skill:'木牛',\r\n\t\t\trm_muniu_skill_bg:'辎',\r\n\t\t\trm_muniu_info:'出牌阶段限一次，你可以将一张手牌扣置于你装备区里的【木牛流马】下，若如此做，你可以将此装备移动到一名其他角色的装备区里；你可以将此装备牌下的牌如手牌般使用或打出。',\r\n\t\t\trm_muniu_skill_info:'出牌阶段限一次，你可以将一张手牌扣置于你装备区里的【木牛流马】下，若如此做，你可以将此装备移动到一名其他角色的装备区里；你可以将此装备牌下的牌如手牌般使用或打出。',\r\n\r\n\r\n\t\t\trm_numa:'驽马',\r\n\t\t\trm_numa_info:'锁定技，当此牌进入你的装备区时，你弃置装备区内的所有其他牌。',\r\n\r\n\t\t\trm_feilongduofeng:'飞龙夺凤',\r\n\t\t\trm_feilongduofeng2:'飞龙夺凤',\r\n\t\t\trm_feilongduofeng3:'飞龙夺凤',\r\n\t\t\trm_feilongduofeng_info:'当你使用【杀】指定一名角色为目标后，你可令该角色弃置一张牌。当你使用【杀】令其他角色进入濒死状态时，你可以获得其一张手牌。',\r\n\t\t\trm_liulongcanjia:'六龙骖驾',\r\n\t\t\trm_liulongcanjia_info:'锁定技，你计算与其他角色的距离-1，其他角色计算与你的距离+1。</br>锁定技，当此牌进入你的装备区时，你弃置你装备区内其他坐骑牌；当此牌在你的装备区内，你不能使用其他坐骑牌（你的装备区便不能置入其他坐骑牌）。',\r\n\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\trm_wuxingpan:'五行盘',\r\n\t\t\trm_wuxingpan_skill:'五行',\r\n\t\t\trm_wuxingpan_skill_info:'出牌阶段限一次，你可以永久改变一张手牌的五行属性',\r\n\t\t\trm_wuxingpan_info:'出牌阶段限一次，你可以永久改变一张手牌的五行属性',\r\n\t\t},\r\n\t\tlist:[\r\n\t\t],\r\n\t}\r\n});\n\n//# sourceURL=webpack:///./card/remark.js?")},"./card/sp.js":()=>{eval("\r\ngame.import('card',function(lib,game,ui,get,ai,_status){\r\n\treturn {\r\n\t\tname:'sp',\r\n\t\tconnect:true,\r\n\t\tcard:{\r\n\t\t\tjinchan:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\twuxieable:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tnotarget:true,\r\n\t\t\t\tglobal:['g_jinchan','g_jinchan2'],\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar evt=event.getParent(3)._trigger;\r\n\t\t\t\t\tif(evt.jinchan){\r\n\t\t\t\t\t\tvar type=get.type(evt.card,'trick');\r\n\t\t\t\t\t\tif(type=='basic'||type=='trick'){\r\n\t\t\t\t\t\t\tevt.cancel();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.draw(2);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tuseful:function(){\r\n\t\t\t\t\t\tvar player=_status.event.player;\r\n\t\t\t\t\t\tvar nj=player.countCards('h','jinchan');\r\n\t\t\t\t\t\tvar num=player.getHandcardLimit();\r\n\t\t\t\t\t\tif(nj>=num){\r\n\t\t\t\t\t\t\treturn 10;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(nj==num-1){\r\n\t\t\t\t\t\t\treturn 6;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalue:5\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tqijia:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(target==player) return false;\r\n\t\t\t\t\tif(target.getEquip(5)){\r\n\t\t\t\t\t\treturn target.countCards('e')>1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\treturn target.countCards('e')>0;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tvar e1=[],e2=[];\r\n\t\t\t\t\tvar he=target.getCards('he');\r\n\t\t\t\t\tfor(var i=0;i<he.length;i++){\r\n\t\t\t\t\t\tif(get.type(he[i])=='equip'){\r\n\t\t\t\t\t\t\tvar subtype=get.subtype(he[i]);\r\n\t\t\t\t\t\t\tif(subtype=='equip1'||subtype=='equip4'){\r\n\t\t\t\t\t\t\t\te1.push(he[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(subtype=='equip2'||subtype=='equip3'){\r\n\t\t\t\t\t\t\t\te2.push(he[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e1.length&&e2.length){\r\n\t\t\t\t\t\tvar choice=0;\r\n\t\t\t\t\t\tif(e1.length>e2.length||(target.hp>=3&&Math.random()<0.3)){\r\n\t\t\t\t\t\t\tchoice=1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.e1=e1;\r\n\t\t\t\t\t\tevent.e2=e2;\r\n\t\t\t\t\t\ttarget.chooseControl(choice).set('choiceList',['弃置'+get.translation(e1),'弃置'+get.translation(e2)]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif(e1.length){\r\n\t\t\t\t\t\t\ttarget.discard(e1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(e2.length){\r\n\t\t\t\t\t\t\ttarget.discard(e2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.index==0){\r\n\t\t\t\t\t\ttarget.discard(event.e1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\ttarget.discard(event.e2);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9.01,\r\n\t\t\t\t\tuseful:1,\r\n\t\t\t\t\tvalue:5,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar num1=0,num2=0;\r\n\t\t\t\t\t\t\tfor(var i=1;i<=4;i++){\r\n\t\t\t\t\t\t\t\tvar card=target.getEquip(i);\r\n\t\t\t\t\t\t\t\tif(card){\r\n\t\t\t\t\t\t\t\t\tif(i==1||i==4){\r\n\t\t\t\t\t\t\t\t\t\tnum1+=get.equipValue(card);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\tnum2+=get.equipValue(card);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar num;\r\n\t\t\t\t\t\t\tif(num1==0){\r\n\t\t\t\t\t\t\t\tnum=num2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(num2==0){\r\n\t\t\t\t\t\t\t\tnum=num1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tnum=Math.min(num1,num2);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(num>0){\r\n\t\t\t\t\t\t\t\treturn -0.8-num/10;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tdiscard:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfulei:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'delay',\r\n\t\t\t\tcardnature:'thunder',\r\n\t\t\t\tmodTarget:function(card,player,target){\r\n\t\t\t\t\treturn lib.filter.judge(card,player,target);\r\n\t\t\t\t},\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\treturn player.canAddJudge(card);\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn (lib.filter.judge(card,player,target)&&player==target);\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:[-1,-1],\r\n\t\t\t\tjudge:function(card){\r\n\t\t\t\t\tif(get.suit(card)=='spade') return -6;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\teffect:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(result.bool==false){\r\n\t\t\t\t\t\tif(!card.storage.fulei){\r\n\t\t\t\t\t\t\tcard.storage.fulei=1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tcard.storage.fulei++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.damage(card.storage.fulei,'thunder','nosource');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tplayer.addJudgeNext(card);\r\n\t\t\t\t},\r\n\t\t\t\tcancel:function(){\r\n\t\t\t\t\tplayer.addJudgeNext(card);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:1,\r\n\t\t\t\t\t\tuseful:0,\r\n\t\t\t\t\t\tvalue:0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\treturn lib.card.shandian.ai.result.target(player,target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tqibaodao:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tskills:['qibaodao','qibaodao2'],\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\treturn player.canUse('sha',current)&&current.isHealthy()&&get.attitude(player,current)<0;\r\n\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\treturn 5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tzhungangshuo:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tskills:['zhungangshuo'],\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:4\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlanyinjia:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tskills:['lanyinjia','lanyinjia2'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:6\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tyinyueqiang:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:4\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['yinyueqiang']\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tdu:{\r\n\t\t\t\ttype:'basic',\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttoself:true,\r\n\t\t\t\tai:{\r\n\t\t\t\t\tvalue:-5,\r\n\t\t\t\t\tuseful:6,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:function(player,target){\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('usedu')) return 5;\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\torder:7.5\r\n\t\t\t\t},\r\n\t\t\t\tenable:true,\r\n\t\t\t\tmodTarget:true,\r\n\t\t\t\tglobal:'g_du',\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target==player;\r\n\t\t\t\t},\r\n\t\t\t\tdelay:false,\r\n\t\t\t\tcontent:function(){},\r\n\t\t\t\tselectTarget:-1\r\n\t\t\t},\r\n\t\t\tshengdong:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tenable:function(){\r\n\t\t\t\t\treturn game.countPlayer()>2;\r\n\t\t\t\t},\r\n\t\t\t\tchongzhu:function(){\r\n\t\t\t\t\treturn game.countPlayer()<=2;\r\n\t\t\t\t},\r\n\t\t\t\tsingleCard:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tselectTarget:2,\r\n\t\t\t\tcomplexTarget:true,\r\n\t\t\t\tmultitarget:true,\r\n\t\t\t\ttargetprompt:['给一张牌','得两张牌'],\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(!player.countCards('h')){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.target1=target;\r\n\t\t\t\t\t\tevent.target2=event.addedTarget;\r\n\t\t\t\t\t\tplayer.chooseCard('h','将一张手牌交给'+get.translation(event.target1),true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tplayer.$giveAuto(result.cards,event.target1);\r\n\t\t\t\t\tevent.target1.gain(result.cards,player);\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tif(!event.target1.countCards('h')){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar he=event.target1.getCards('he');\r\n\t\t\t\t\t\tif(he.length<=2){\r\n\t\t\t\t\t\t\tevent.directresult=he;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tevent.target1.chooseCard('he','将两张牌交给'+get.translation(event.target2),2,true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 3'\r\n\t\t\t\t\tif(!event.directresult){\r\n\t\t\t\t\t\tevent.directresult=result.cards;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.target1.$giveAuto(event.directresult,event.target2);\r\n\t\t\t\t\tevent.target2.gain(event.directresult,event.target1);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:2.5,\r\n\t\t\t\t\tvalue:[4,1],\r\n\t\t\t\t\tuseful:1,\r\n\t\t\t\t\twuxie:function(){\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar ok=false;\r\n\t\t\t\t\t\t\tvar hs=player.getCards('h');\r\n\t\t\t\t\t\t\tif(hs.length<=1) return 0;\r\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\r\n\t\t\t\t\t\t\t\tif(get.value(hs[i])<=5){\r\n\t\t\t\t\t\t\t\t\tok=true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!ok) return 0;\r\n\t\t\t\t\t\t\tif(ui.selected.targets.length==1){\r\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return 0;\r\n\t\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(target.countCards('he')==0) return 0;\r\n\t\t\t\t\t\t\tif(player.hasFriend()) return -1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tzengbin:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tenable:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tfilterTarget:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\ttarget.draw(3);\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(target.countCards('he',{type:'basic'})<target.countCards('he')){\r\n\t\t\t\t\t\ttarget.chooseToDiscard('增兵减灶','he',function(card){\r\n\t\t\t\t\t\t\treturn get.type(card)!='basic';\r\n\t\t\t\t\t\t}).set('ai',function(card){\r\n\t\t\t\t\t\t\tif(_status.event.goon) return 8-get.value(card);\r\n\t\t\t\t\t\t\treturn 11-get.value(card);\r\n\t\t\t\t\t\t}).set('goon',target.countCards('h',function(card){\r\n\t\t\t\t\t\t\treturn get.value(card,target,'raw')<8;\r\n\t\t\t\t\t\t})>1).set('prompt2','弃置一张非基本牌，或取消并弃置两张牌');\r\n\t\t\t\t\t\tevent.more=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\ttarget.chooseToDiscard('he',2,true).set('ai',get.disvalue2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tif(event.more&&!result.bool){\r\n\t\t\t\t\t\ttarget.chooseToDiscard('he',2,true).set('ai',get.disvalue2);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:7,\r\n\t\t\t\t\tuseful:4,\r\n\t\t\t\t\tvalue:10,\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdraw:2\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(target.hasJudge('lebu')) return 0;\r\n\t\t\t\t\t\t\treturn Math.max(1,2-target.countCards('h')/10);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcaomu:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tenable:true,\r\n\t\t\t\ttype:'delay',\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn (lib.filter.judge(card,player,target)&&player!=target);\r\n\t\t\t\t},\r\n\t\t\t\tjudge:function(card){\r\n\t\t\t\t\tif(get.suit(card)=='club') return 0;\r\n\t\t\t\t\treturn -3;\r\n\t\t\t\t},\r\n\t\t\t\teffect:function(){\r\n\t\t\t\t\tif(result.bool==false){\r\n\t\t\t\t\t\tplayer.addTempSkill('caomu_skill');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:1,\r\n\t\t\t\t\t\tuseful:1,\r\n\t\t\t\t\t\tvalue:4.5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:function(player,target){\r\n\t\t\t\t\t\t\treturn game.countPlayer(function(current){\r\n\t\t\t\t\t\t\t\tif(get.distance(target,current)<=1&&current!=target){\r\n\t\t\t\t\t\t\t\t\tvar att=get.attitude(player,current);\r\n\t\t\t\t\t\t\t\t\tif(att>3){\r\n\t\t\t\t\t\t\t\t\t\treturn 1.1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse if(att>0){\r\n\t\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse if(att<-3){\r\n\t\t\t\t\t\t\t\t\t\treturn -1.1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse if(att<0){\r\n\t\t\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(target.hasJudge('bingliang')) return 0;\r\n\t\t\t\t\t\t\treturn -1.5/Math.sqrt(target.countCards('h')+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tskill:{\r\n\t\t\tlanyinjia:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tenable:['chooseToUse','chooseToRespond'],\r\n\t\t\t\tfilterCard:true,\r\n\t\t\t\tviewAs:{name:'shan'},\r\n\t\t\t\tviewAsFilter:function(player){\r\n\t\t\t\t\tif(!player.countCards('h')) return false;\r\n\t\t\t\t},\r\n\t\t\t\tprompt:'将一张手牌当闪使用或打出',\r\n\t\t\t\tcheck:function(card){\r\n\t\t\t\t\treturn 6-get.value(card);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\trespondShan:true,\r\n\t\t\t\t\tskillTagFilter:function(player){\r\n\t\t\t\t\t\tif(!player.countCards('h')) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target,current){\r\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')&&current<0&&target.countCards('h')) return 0.59\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\torder:4,\r\n\t\t\t\t\tuseful:-0.5,\r\n\t\t\t\t\tvalue:-0.5\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlanyinjia2:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'damageBegin4'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&player.getEquip('lanyinjia');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar card=player.getEquip('lanyinjia');\r\n\t\t\t\t\tif(card){\r\n\t\t\t\t\t\tplayer.discard(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tzhungangshuo:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCardToPlayered'},\r\n\t\t\t\tlogTarget:'target',\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn event.card.name=='sha'&&(event.player.countCards('h')||player.countCards('h'));\r\n\t\t\t\t},\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\tvar target=event.target;\r\n\t\t\t\t\tif(get.attitude(player,target)>=0) return false;\r\n\t\t\t\t\tif(player.hasCard(function(card){\r\n\t\t\t\t\t\treturn get.value(card)>=8;\r\n\t\t\t\t\t})){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar n1=event.target.countCards('h');\r\n\t\t\t\t\treturn n1>0&&n1<=player.countCards('h');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tgame.delayx();\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\ttrigger.target.discardPlayerCard('h',player,true);\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tplayer.discardPlayerCard('h',trigger.target,true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tqibaodao:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'damageBegin1'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event){\r\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player.isHealthy();\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.num++;\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\tplayer:function(card,player,target){\r\n\t\t\t\t\t\t\tif(card.name=='sha'&&target.isHealthy()&&get.attitude(player,target)>0){\r\n\t\t\t\t\t\t\t\treturn [1,-2];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tqibaodao2:{\r\n\t\t\t\tinherit:'qinggang_skill',\r\n\t\t\t},\r\n\t\t\tg_jinchan:{\r\n\t\t\t\tcardSkill:true,\r\n\t\t\t\ttrigger:{target:'useCardToBefore'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.player==player) return false;\r\n\t\t\t\t\tif(event.getParent().directHit.contains(player)) return false;\r\n\t\t\t\t\tvar num=player.countCards('h','jinchan');\r\n\t\t\t\t\treturn num&&num==player.countCards('h');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tplayer.chooseToUse('是否对'+get.translation(trigger.card)+'使用【金蝉脱壳】？').set('ai1',function(card){\r\n\t\t\t\t\t\treturn _status.event.bool;\r\n\t\t\t\t\t}).set('bool',-get.effect(player,trigger.card,trigger.player,player)).set('respondTo',[trigger.player,trigger.card]).set('filterCard',function(card,player){\r\n\t\t\t\t\t\tif(get.name(card)!='jinchan') return false;\r\n\t\t\t\t\t\treturn lib.filter.cardEnabled(card,player,'forceEnable');\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttrigger.jinchan=true;\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tdelete trigger.jinchan;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tg_jinchan2:{\r\n\t\t\t\ttrigger:{player:'discardAfter'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\r\n\t\t\t\t\t\tif(event.cards[i].name=='jinchan') return true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar num=0;\r\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\r\n\t\t\t\t\t\tif(trigger.cards[i].name=='jinchan') num++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(num){\r\n\t\t\t\t\t\tplayer.draw(num);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tyinyueqiang:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:['useCard','respondAfter']},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(_status.currentPhase==player) return false;\r\n\t\t\t\t\tif(!event.cards) return false;\r\n\t\t\t\t\tif(event.cards.length!=1) return false;\r\n\t\t\t\t\tif(lib.filter.autoRespondSha.call({player:player})) return false;\r\n\t\t\t\t\treturn get.color(event.cards[0])=='black';\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tvar next=player.chooseToUse(get.prompt('yinyueqiang'),{name:'sha'});\r\n\t\t\t\t\tnext.aidelay=true;\r\n\t\t\t\t\tnext.logSkill='yinyueqiang';\r\n\t\t\t\t\tnext.noButton=true;\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tgame.delay();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tg_du:{\r\n\t\t\t\tcardSkill:true,\r\n\t\t\t\ttrigger:{player:'loseEnd'},\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(!event.visible) return false;\r\n\t\t\t\t\tif(player.hasSkillTag('nodu')) return false;\r\n\t\t\t\t\tif(event.hs){\r\n\t\t\t\t\t\tfor(var i=0;i<event.hs.length;i++){\r\n\t\t\t\t\t\t\tif(get.name(event.hs[i],player)=='du') return true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar num=0;\r\n\t\t\t\t\tfor(var i=0;i<trigger.hs.length;i++){\r\n\t\t\t\t\t\tif(get.name(trigger.hs[i],player)=='du') num++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(trigger.getParent().name!='useCard'||trigger.getParent().card.name!='du') player.popup('毒','wood');\r\n\t\t\t\t\tplayer.loseHp(num).type='du';\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcaomu_skill:{\r\n\t\t\t\tcardSkill:true,\r\n\t\t\t\tunique:true,\r\n\t\t\t\ttrigger:{player:'phaseDrawBegin'},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.num--;\r\n\t\t\t\t},\r\n\t\t\t\tgroup:'caomu_skill2'\r\n\t\t\t},\r\n\t\t\tcaomu_skill2:{\r\n\t\t\t\ttrigger:{player:'phaseDrawAfter'},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\r\n\t\t\t\t\t\treturn get.distance(player,current)<=1&&player!=current;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(targets.length){\r\n\t\t\t\t\t\tgame.asyncDraw(targets);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\ttranslate:{\r\n\t\t\tqijia:'弃甲曳兵',\r\n\t\t\tqijia_info:'出牌阶段，对一名装备区里有牌的其他角色使用。该角色选择一项：1.弃置手牌区和装备区里所有的武器和-1坐骑；2.弃置手牌区和装备区里所有的防具和+1坐骑。',\r\n\t\t\tjinchan:'金蝉脱壳',\r\n\t\t\tg_jinchan2:'金蝉脱壳',\r\n\t\t\tg_jinchan2_info:'当你因弃置而失去【金蝉脱壳】时，你摸一张牌',\r\n\t\t\tjinchan_info:'当你成为其他角色使用牌的目标时，若你的手牌里只有【金蝉脱壳】，使目标锦囊牌或基本牌对你无效，你摸两张牌。当你因弃置而失去【金蝉脱壳】时，你摸一张牌。',\r\n\t\t\tfulei:'浮雷',\r\n\t\t\tfulei_info:'出牌阶段，对你使用。将【浮雷】放置于你的判定区里，若判定结果为黑桃，则目标角色受到X点雷电伤害（X为此锦囊判定结果为黑桃的次数）。判定完成后，将此牌移动到下家的判定区里。',\r\n\t\t\tqibaodao:'田中剑',\r\n\t\t\tqibaodao_info:'攻击范围2；锁定技，你使用【杀】无视目标防具，若目标角色未损失体力值，此【杀】伤害+1',\r\n\t\t\tqibaodao2:'田中剑',\r\n\t\t\tzhungangshuo:'TNT',\r\n\t\t\tzhungangshuo_info:'当你使用【杀】指定一名角色为目标后，你可令该角色弃置你的一张手牌，然后你弃置其一张手牌',\r\n\t\t\tlanyinjia:'钢板',\r\n\t\t\tlanyinjia_info:'你可以将一张手牌当做【闪】使用或打出。锁定技，【钢板】不会无效化；当你受到【杀】造成的伤害时，弃置【钢板】。',\r\n\t\t\tyinyueqiang:'铁棍',\r\n\t\t\tyinyueqiang_info:'你的回合外，每当你使用或打出了一张黑色手牌（若为使用则在它结算之前），你可以立即对你攻击范围内的任意一名角色使用一张【杀】',\r\n\t\t\tdu:'毒',\r\n\t\t\tdu_info:'当此牌正面朝上离开你的手牌区时，你失去一点体力',\r\n\t\t\tshengdong:'声东击西',\r\n\t\t\tshengdong_info:'出牌阶段，对一名其他角色使用。你交给目标角色一张手牌，若如此做，其将两张牌交给另一名由你选择的其他角色（不足则全给，存活角色不超过2时可重铸）',\r\n\t\t\tzengbin:'增兵减灶',\r\n\t\t\tzengbin_info:'出牌阶段，对一名角色使用。目标角色摸三张牌，然后选择一项：1.弃置一张非基本牌；2.弃置两张牌',\r\n\t\t\tcaomu:'草木皆兵',\r\n\t\t\tcaomu_info:'出牌阶段，对一名其他角色使用。将【草木皆兵】放置于该角色的判定区里，若判定结果不为梅花：摸牌阶段，目标角色少摸一张牌；摸牌阶段结束时，与其距离为1的角色各摸一张牌',\r\n\t\t},\r\n\t\tlist:[\r\n\t\t\t['spade',1,'caomu'],\r\n\t\t\t['club',3,'caomu'],\r\n\t\t\t['heart',12,'shengdong'],\r\n\t\t\t['club',9,'shengdong'],\r\n\t\t\t['spade',9,'shengdong'],\r\n\t\t\t['diamond',4,'zengbin'],\r\n\t\t\t['heart',6,'zengbin'],\r\n\t\t\t['spade',7,'zengbin'],\r\n\t\t\t['spade',3,'du'],\r\n\t\t\t['spade',9,'du'],\r\n\t\t\t['club',3,'du'],\r\n\t\t\t['club',9,'du'],\r\n\t\t\t['diamond',5,'du'],\r\n\t\t\t['diamond',9,'du'],\r\n\t\t\t['diamond',12,'yinyueqiang'],\r\n\t\t\t[\"spade\",11,'jinchan'],\r\n\t\t\t[\"club\",12,'jinchan'],\r\n\t\t\t[\"club\",13,'jinchan'],\r\n\t\t\t[\"club\",12,'qijia'],\r\n\t\t\t[\"club\",13,'qijia'],\r\n\t\t\t[\"spade\",1,'fulei'],\r\n\t\t\t[\"spade\",6,'qibaodao'],\r\n\t\t\t[\"spade\",5,'zhungangshuo'],\r\n\t\t\t[\"spade\",2,'lanyinjia'],\r\n\t\t\t[\"club\",2,'lanyinjia'],\r\n\t\t],\r\n\t};\r\n});\r\n\n\n//# sourceURL=webpack:///./card/sp.js?")},"./card/standard.js":()=>{eval("\r\ngame.import('card',function(lib,game,ui,get,ai,_status){\r\n\treturn {\r\n\t\tname:'standard',\r\n\t\tconnect:true,\r\n\t\tcard:{\r\n\t\t\tdamage:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1.5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdamage:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trecover:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:1.5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\trecover:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfiredamage:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1.5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\tfireDamage:1,\r\n\t\t\t\t\t\tnatureDamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tthunderdamage:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1.5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\tthunderDamage:1,\r\n\t\t\t\t\t\tnatureDamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ticedamage:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1.5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\ticeDamage:1,\r\n\t\t\t\t\t\tnatureDamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\toceandamage:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1.5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\toceanDamage:1,\r\n\t\t\t\t\t\tnatureDamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tyamidamage:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1.5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\tyamiDamage:1,\r\n\t\t\t\t\t\tnatureDamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trespondShan:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1.5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\trespond:1,\r\n\t\t\t\t\t\trespondShan:1,\r\n\t\t\t\t\t\tdamage:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsha:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tnature:['thunder','fire','kami','ocean','ice','yami'],\r\n\t\t\t\ttype:'basic',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tusable:1,\r\n\t\t\t\tupdateUsable:'phaseUse',\r\n\t\t\t\tglobal:'icesha_skill',\r\n\t\t\t\trange:{attack:1},\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tyingbian_prompt:function(card){\r\n\t\t\t\t\tvar str='';\r\n\t\t\t\t\tif(get.cardtag(card,'yingbian_hit')){\r\n\t\t\t\t\t\tstr+='此牌不可被响应';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(get.cardtag(card,'yingbian_damage')){\r\n\t\t\t\t\t\tif(str.length) str+='；';\r\n\t\t\t\t\t\tstr+='此牌的伤害值基数+1';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!str.length||get.cardtag(card,'yingbian_add')){\r\n\t\t\t\t\t\tif(str.length) str+='；';\r\n\t\t\t\t\t\tstr+='当你使用此牌选择目标后，你可为此牌增加一个目标';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t},\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tvar card=event.card,bool=false;\r\n\t\t\t\t\tif(get.cardtag(card,'yingbian_hit')){\r\n\t\t\t\t\t\tbool=true;\r\n\t\t\t\t\t\tevent.directHit.addArray(game.players);\r\n\t\t\t\t\t\tgame.log(card,'不可被响应');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(get.cardtag(card,'yingbian_damage')){\r\n\t\t\t\t\t\tbool=true;\r\n\t\t\t\t\t\tif(typeof event.baseDamage!='number') event.baseDamage=1;\r\n\t\t\t\t\t\tevent.baseDamage++;\r\n\t\t\t\t\t\tgame.log(event.card,'的伤害值基数+1');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!bool||get.cardtag(card,'yingbian_add')){\r\n\t\t\t\t\t\tevent.yingbian_addTarget=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tyingbian_tags:['hit','damage','add'],\r\n\t\t\t\tfilterTarget:function(card,player,target){return player!=target},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tif(typeof event.shanRequired!='number'||!event.shanRequired||event.shanRequired<0){\r\n\t\t\t\t\t\tevent.shanRequired=1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(typeof event.baseDamage!='number') event.baseDamage=1;\r\n\t\t\t\t\tif(typeof event.extraDamage!='number') event.extraDamage=0;\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(event.directHit||event.directHit2||(!_status.connectMode&&lib.config.skip_shan&&!target.hasShan())){\r\n\t\t\t\t\t\tevent._result={bool:false};\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(event.skipShan){\r\n\t\t\t\t\t\tevent._result={bool:true,result:'shaned'};\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar next=target.chooseToUse('请使用一张闪响应杀');\r\n\t\t\t\t\t\tnext.set('type','respondShan');\r\n\t\t\t\t\t\tnext.set('filterCard',function(card,player){\r\n\t\t\t\t\t\t\tif(get.name(card)!='shan') return false;\r\n\t\t\t\t\t\t\treturn lib.filter.cardEnabled(card,player,'forceEnable');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(event.shanRequired>1){\r\n\t\t\t\t\t\t\tnext.set('prompt2','（共需使用'+event.shanRequired+'张闪）');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnext.set('ai1',function(card){\r\n\t\t\t\t\t\t\tvar target=_status.event.player;\r\n\t\t\t\t\t\t\tvar evt=_status.event.getParent();\r\n\t\t\t\t\t\t\tvar bool=true;\r\n\t\t\t\t\t\t\tif(_status.event.shanRequired>1&&!get.is.object(card)&&target.countCards('h','shan')<_status.event.shanRequired){\r\n\t\t\t\t\t\t\t\tbool=false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(target.hasSkillTag('useShan')){\r\n\t\t\t\t\t\t\t\tbool=true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(target.hasSkillTag('noShan')){\r\n\t\t\t\t\t\t\t\tbool=false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(get.damageEffect(target,evt.player,target,evt.card.nature)>=0) bool=false;\r\n\t\t\t\t\t\t\tif(bool){\r\n\t\t\t\t\t\t\t\treturn get.order(card);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}).set('shanRequired',event.shanRequired);\r\n\t\t\t\t\t\tnext.set('respondTo',[player,card]);\r\n\t\t\t\t\t\t//next.autochoose=lib.filter.autoRespondShan;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tif(!result||!result.bool||!result.result||result.result!='shaned'){\r\n\t\t\t\t\t\tevent.trigger('shaHit');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.shanRequired--;\r\n\t\t\t\t\t\tif(event.shanRequired>0){\r\n\t\t\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tevent.trigger('shaMiss');\r\n\t\t\t\t\t\t\tevent.responded=result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 3\"\r\n\t\t\t\t\tif((!result||!result.bool||!result.result||result.result!='shaned')&&!event.unhurt){\r\n\t\t\t\t\t\ttarget.damage(get.nature(event.card),event.baseDamage+event.extraDamage);\r\n\t\t\t\t\t\tevent.result={bool:true}\r\n\t\t\t\t\t\tevent.trigger('shaDamage');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.result={bool:false}\r\n\t\t\t\t\t\tevent.trigger('shaUnhirt');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tyingbian:function(card,player,targets,viewer){\r\n\t\t\t\t\t\tif(get.attitude(viewer,player)<=0) return 0;\r\n\t\t\t\t\t\tvar base=0,hit=false;\r\n\t\t\t\t\t\tif(get.cardtag(card,'yingbian_hit')){\r\n\t\t\t\t\t\t\thit=true;\r\n\t\t\t\t\t\t\tif(targets.filter(function(target){\r\n\t\t\t\t\t\t\t\treturn target.hasShan()&&get.attitude(viewer,target)<0&&get.damageEffect(target,player,viewer,get.nature(card))>0;\r\n\t\t\t\t\t\t\t})) base+=5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(get.cardtag(card,'yingbian_all')){\r\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn !targets.contains(current)&&lib.filter.targetEnabled2(card,player,current)&&get.effect(current,card,player,player)>0;\r\n\t\t\t\t\t\t\t})) base+=5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(get.cardtag(card,'yingbian_damage')){\r\n\t\t\t\t\t\t\tif(targets.filter(function(target){\r\n\t\t\t\t\t\t\t\treturn get.attitude(player,target)<0&&(hit||!target.mayHaveShan()||player.hasSkillTag('directHit_ai',true,{\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t\t},true))&&!target.hasSkillTag('filterDamage',null,{\r\n\t\t\t\t\t\t\t\t\tplayer:player,\r\n\t\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t\t\tjiu:true,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})) base+=5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn base;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcanLink:function(player,target,card){\r\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\r\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\r\n\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t},true)) return false;\r\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||player.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:[5,3,1],\r\n\t\t\t\t\t\tvalue:[5,3,1],\r\n\t\t\t\t\t},\r\n\t\t\t\t\torder:function(item,player){\r\n\t\t\t\t\t\tif(player.hasSkillTag('presha',true,null,true)) return 10;\r\n\t\t\t\t\t\tif(lib.linked.contains(get.nature(item))){\r\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);\r\n\t\t\t\t\t\t\t})&&game.countPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;\r\n\t\t\t\t\t\t\t})>1) return 3.1;\r\n\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 3.05;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target,card,isLink){\r\n\t\t\t\t\t\t\tvar eff=function(){\r\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\r\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\r\n\t\t\t\t\t\t\t\t\t\tplayer:player,\r\n\t\t\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t\t\t\tjiu:true,\r\n\t\t\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\r\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn -0.5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t\t}();\r\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t},true)) return eff/1.2;\r\n\t\t\t\t\t\t\treturn eff;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\trespond:1,\r\n\t\t\t\t\t\trespondShan:1,\r\n\t\t\t\t\t\tdamage:function(card){\r\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tnatureDamage:function(card){\r\n\t\t\t\t\t\t\tif(card.nature) return 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfireDamage:function(card,nature){\r\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tthunderDamage:function(card,nature){\r\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\toceanDamage:function(card,nature){\r\n\t\t\t\t\t\t\tif(card.nature=='ocean') return 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tpoisonDamage:function(card,nature){\r\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshacopy:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:[5,3,1],\r\n\t\t\t\t\t\tvalue:[5,3,1],\r\n\t\t\t\t\t},\r\n\t\t\t\t\torder:3,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1.5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\trespond:1,\r\n\t\t\t\t\t\trespondShan:1,\r\n\t\t\t\t\t\tdamage:function(card){\r\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tnatureDamage:function(card){\r\n\t\t\t\t\t\t\tif(card.nature) return 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfireDamage:function(card,nature){\r\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tthunderDamage:function(card,nature){\r\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\toceanDamage:function(card,nature){\r\n\t\t\t\t\t\t\tif(card.nature=='ocean') return 1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tpoisonDamage:function(card,nature){\r\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshan:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'basic',\r\n\t\t\t\tcardcolor:'red',\r\n\t\t\t\tnotarget:true,\r\n\t\t\t\tnodelay:true,\r\n\t\t\t\tyingbian_prompt:function(card){\r\n\t\t\t\t\tvar str='';\r\n\t\t\t\t\tif(get.cardtag(card,'yingbian_gain')){\r\n\t\t\t\t\t\tstr+='当你声明使用此牌时，你获得此牌响应的目标牌';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!str.length||get.cardtag(card,'yingbian_draw')){\r\n\t\t\t\t\t\tif(str.length) str+='；';\r\n\t\t\t\t\t\tstr+='当你声明使用此牌时，你摸一张牌';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t},\r\n\t\t\t\tyingbian_tags:['gain','draw'],\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tvar bool=false;\r\n\t\t\t\t\tif(get.cardtag(event.card,'yingbian_damage')){\r\n\t\t\t\t\t\tbool=true;\r\n\t\t\t\t\t\tvar cardx=event.respondTo;\r\n\t\t\t\t\t\tif(cardx&&cardx[1]&&cardx[1].cards&&cardx[1].cards.filterInD('od').length) event.player.gain(cardx[1].cards.filterInD('od'),'gain2','log');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!bool||get.cardtag(event.card,'yingbian_draw')) event.player.draw();\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tevent.result='shaned';\r\n\t\t\t\t\tevent.getParent().delayx=false;\r\n\t\t\t\t\tgame.delay(0.5);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:3,\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:[7,5.1,2],\r\n\t\t\t\t\t\tvalue:[7,5.1,2],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{player:1},\r\n\t\t\t\t\t//expose:0.2\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttao:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tnature:['ocean'],\r\n\t\t\t\ttype:'basic',\r\n\t\t\t\tcardcolor:'red',\r\n\t\t\t\ttoself:true,\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\treturn player.hp<player.maxHp;\r\n\t\t\t\t},\r\n\t\t\t\tsavable:true,\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target==player&&target.hp<target.maxHp;\r\n\t\t\t\t},\r\n\t\t\t\tmodTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.hp<target.maxHp;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttarget.recover(event.baseDamage||1);\r\n\t\t\t\t\tif(get.nature(event.card)=='ocean'&&!target.hujia)\ttarget.changeHujia();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:function(card,player){\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('pretao')) return 5;\r\n\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tuseful:[6.5,4,3,2],\r\n\t\t\t\t\t\tvalue:[6.5,4,3,2],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:2,\r\n\t\t\t\t\t\ttarget_use:function(player,target){\r\n\t\t\t\t\t\t\t// if(player==target&&player.hp<=0) return 2;\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('nokeep',true,null,true)) return 2;\r\n\t\t\t\t\t\t\tvar nd=player.needsToDiscard();\r\n\t\t\t\t\t\t\tvar keep=false;\r\n\t\t\t\t\t\t\tif(nd<=0){\r\n\t\t\t\t\t\t\t\tkeep=true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(nd==1&&target.hp>=2&&target.countCards('h','tao')<=1){\r\n\t\t\t\t\t\t\t\tkeep=true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar mode=get.mode();\r\n\t\t\t\t\t\t\tif(target.hp>=2&&keep&&target.hasFriend()){\r\n\t\t\t\t\t\t\t\tif(target.hp>2||nd==0) return 0;\r\n\t\t\t\t\t\t\t\tif(target.hp==2){\r\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\t\t\tif(target!=current&&get.attitude(target,current)>=3){\r\n\t\t\t\t\t\t\t\t\t\t\tif(current.hp<=1) return true;\r\n\t\t\t\t\t\t\t\t\t\t\tif((mode=='identity'||mode=='versus'||mode=='chess')&&current.identity=='zhu'&&current.hp<=2) return true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(target.hp<0&&target!=player&&target.identity!='zhu') return 0;\r\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\r\n\t\t\t\t\t\t\tif(att<3&&att>=0&&player!=target) return 0;\r\n\t\t\t\t\t\t\tvar tri=_status.event.getTrigger();\r\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='fan'&&target.identity=='fan'){\r\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='fan'&&tri.source!=target){\r\n\t\t\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\r\n\t\t\t\t\t\t\t\t\t\tif(current.identity=='fan'){\r\n\t\t\t\t\t\t\t\t\t\t\treturn current.countCards('h','tao');\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tif(num>1&&player==target) return 2;\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='zhu'&&target.identity=='nei'){\r\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='zhong'){\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(mode=='stone'&&target.isMin()&&\r\n\t\t\t\t\t\t\tplayer!=target&&tri&&tri.name=='dying'&&player.side==target.side&&\r\n\t\t\t\t\t\t\ttri.source!=target.getEnemy()){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\trecover:1,\r\n\t\t\t\t\t\tsave:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbagua:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7.5\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['bagua_skill']\r\n\t\t\t},\r\n\t\t\tjueying:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip3',\r\n\t\t\t\tdistance:{globalTo:1},\r\n\t\t\t},\r\n\t\t\tdilu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip3',\r\n\t\t\t\tdistance:{globalTo:1},\r\n\t\t\t},\r\n\t\t\tzhuahuang:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip3',\r\n\t\t\t\tdistance:{globalTo:1},\r\n\t\t\t},\r\n\t\t\tchitu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip4',\r\n\t\t\t\tdistance:{globalFrom:-1},\r\n\t\t\t},\r\n\t\t\tdawan:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip4',\r\n\t\t\t\tdistance:{globalFrom:-1},\r\n\t\t\t},\r\n\t\t\tzixin:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip4',\r\n\t\t\t\tdistance:{globalFrom:-1},\r\n\t\t\t},\r\n\t\t\tzhuge:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:function(){\r\n\t\t\t\t\t\treturn get.order({name:'sha'})-0.1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player._zhuge_temp) return 1;\r\n\t\t\t\t\t\tplayer._zhuge_temp=true;\r\n\t\t\t\t\t\tvar result=function(){\r\n\t\t\t\t\t\t\tif(!game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn get.distance(player,current)<=1&&player.canUse('sha',current)&&get.effect(current,{name:'sha'},player,player)>0;\r\n\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(player.hasSha()&&_status.currentPhase==player){\r\n\t\t\t\t\t\t\t\tif(player.getEquip('zhuge')&&player.countUsed('sha')||player.getCardUsable('sha')==0){\r\n\t\t\t\t\t\t\t\t\treturn 10;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar num=player.countCards('h','sha');\r\n\t\t\t\t\t\t\tif(num>1) return 6+num;\r\n\t\t\t\t\t\t\treturn 3+num;\r\n\t\t\t\t\t\t}();\r\n\t\t\t\t\t\tdelete player._zhuge_temp;\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tvalueswap:1\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['zhuge_skill']\r\n\t\t\t},\r\n\t\t\tcixiong:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['cixiong_skill']\r\n\t\t\t},\r\n\t\t\tqinggang:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['qinggang_skill']\r\n\t\t\t},\r\n\t\t\tqinglong:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\treturn Math.min(2.5+player.countCards('h','sha'),4);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:3.5\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['qinglong_skill','qinglong_guozhan']\r\n\t\t\t},\r\n\t\t\tzhangba:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tvar num=2.5+player.countCards('h')/3;\r\n\t\t\t\t\t\treturn Math.min(num,4);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:3.5\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['zhangba_skill']\r\n\t\t\t},\r\n\t\t\tguanshi:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tvar num=2.5+(player.countCards('h')+player.countCards('e'))/2.5;\r\n\t\t\t\t\t\treturn Math.min(num,5);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:4.5,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['guanshi_skill']\r\n\t\t\t},\r\n\t\t\tfangtian:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-3},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2.5\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['fangtian_skill','fangtian_guozhan']\r\n\t\t\t},\r\n\t\t\tqilin:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-4},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:3\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['qilin_skill']\r\n\t\t\t},\r\n\t\t\twugu:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tcardcolor:'red',\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tfilterTarget:true,\r\n\t\t\t\tcontentBefore:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tif(!targets.length){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(get.is.versus()){\r\n\t\t\t\t\t\tplayer.chooseControl('顺时针','逆时针',function(event,player){\r\n\t\t\t\t\t\t\tif(player.next.side==player.side) return '逆时针';\r\n\t\t\t\t\t\t\treturn '顺时针';\r\n\t\t\t\t\t\t}).set('prompt','选择'+get.translation(card)+'的结算方向');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result&&result.control=='顺时针'){\r\n\t\t\t\t\t\tvar evt=event.getParent();\r\n\t\t\t\t\t\tevt.fixedSeat=true;\r\n\t\t\t\t\t\tevt.targets.sortBySeat();\r\n\t\t\t\t\t\tevt.targets.reverse();\r\n\t\t\t\t\t\tif(evt.targets[evt.targets.length-1]==player){\r\n\t\t\t\t\t\t\tevt.targets.unshift(evt.targets.pop());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tui.clear();\r\n\t\t\t\t\tvar num;\r\n\t\t\t\t\tif(event.targets){\r\n\t\t\t\t\t\tnum=event.targets.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tnum=game.countPlayer();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar cards=get.cards(num);\r\n\t\t\t\t\tgame.cardsGotoOrdering(cards).relatedEvent=event.getParent();\r\n\t\t\t\t\tvar dialog=ui.create.dialog('五谷丰登',cards,true);\r\n\t\t\t\t\t_status.dieClose.push(dialog);\r\n\t\t\t\t\tdialog.videoId=lib.status.videoId++;\r\n\t\t\t\t\tgame.addVideo('cardDialog',null,['五谷丰登',get.cardsInfo(cards),dialog.videoId]);\r\n\t\t\t\t\tevent.getParent().preResult=dialog.videoId;\r\n\t\t\t\t\tgame.broadcast(function(cards,id){\r\n\t\t\t\t\t\tvar dialog=ui.create.dialog('五谷丰登',cards,true);\r\n\t\t\t\t\t\t_status.dieClose.push(dialog);\r\n\t\t\t\t\t\tdialog.videoId=id;\r\n\t\t\t\t\t},cards,dialog.videoId);\r\n\t\t\t\t\tgame.log(event.card,'亮出了',cards);\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tfor(var i=0;i<ui.dialogs.length;i++){\r\n\t\t\t\t\t\tif(ui.dialogs[i].videoId==event.preResult){\r\n\t\t\t\t\t\t\tevent.dialog=ui.dialogs[i];break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!event.dialog){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(event.dialog.buttons.length>1){\r\n\t\t\t\t\t\tvar next=target.chooseButton(true,function(button){\r\n\t\t\t\t\t\t\treturn get.value(button.link,_status.event.player);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnext.set('dialog',event.preResult);\r\n\t\t\t\t\t\tnext.set('closeDialog',false);\r\n\t\t\t\t\t\tnext.set('dialogdisplay',true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.directButton=event.dialog.buttons[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tvar dialog=event.dialog;\r\n\t\t\t\t\tvar card;\r\n\t\t\t\t\tif(event.directButton){\r\n\t\t\t\t\t\tcard=event.directButton.link;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tfor(var i of dialog.buttons){\r\n\t\t\t\t\t\t\tif(i.link==result.links[0]){\r\n\t\t\t\t\t\t\t\tcard=i.link;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!card) card=event.dialog.buttons[0].link;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar button;\r\n\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\r\n\t\t\t\t\t\tif(dialog.buttons[i].link==card){\r\n\t\t\t\t\t\t\tbutton=dialog.buttons[i];\r\n\t\t\t\t\t\t\tbutton.querySelector('.info').innerHTML=function(target){\r\n\t\t\t\t\t\t\t\tif(target._tempTranslate) return target._tempTranslate;\r\n\t\t\t\t\t\t\t\tvar name=target.name;\r\n\t\t\t\t\t\t\t\tif(lib.translate[name+'_ab']) return lib.translate[name+'_ab'];\r\n\t\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t\t}(target);\r\n\t\t\t\t\t\t\tdialog.buttons.remove(button);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar capt=get.translation(target)+'选择了'+get.translation(button.link);\r\n\t\t\t\t\tif(card){\r\n\t\t\t\t\t\ttarget.gain(card,'visible');\r\n\t\t\t\t\t\ttarget.$gain2(card);\r\n\t\t\t\t\t\tgame.broadcast(function(card,id,name,capt){\r\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\r\n\t\t\t\t\t\t\tif(dialog){\r\n\t\t\t\t\t\t\t\tdialog.content.firstChild.innerHTML=capt;\r\n\t\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\r\n\t\t\t\t\t\t\t\t\tif(dialog.buttons[i].link==card){\r\n\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].querySelector('.info').innerHTML=name;\r\n\t\t\t\t\t\t\t\t\t\tdialog.buttons.splice(i--,1);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},card,dialog.videoId,function(target){\r\n\t\t\t\t\t\t\tif(target._tempTranslate) return target._tempTranslate;\r\n\t\t\t\t\t\t\tvar name=target.name;\r\n\t\t\t\t\t\t\tif(lib.translate[name+'_ab']) return lib.translate[name+'_ab'];\r\n\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t}(target),capt);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdialog.content.firstChild.innerHTML=capt;\r\n\t\t\t\t\tgame.addVideo('dialogCapt',null,[dialog.videoId,dialog.content.firstChild.innerHTML]);\r\n\t\t\t\t\tgame.log(target,'选择了',button.link);\r\n\t\t\t\t\tgame.delay();\r\n\t\t\t\t},\r\n\t\t\t\tcontentAfter:function(){\r\n\t\t\t\t\tfor(var i=0;i<ui.dialogs.length;i++){\r\n\t\t\t\t\t\tif(ui.dialogs[i].videoId==event.preResult){\r\n\t\t\t\t\t\t\tvar dialog=ui.dialogs[i];\r\n\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t\t_status.dieClose.remove(dialog);\r\n\t\t\t\t\t\t\tif(dialog.buttons.length){\r\n\t\t\t\t\t\t\t\tevent.remained=[];\r\n\t\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\r\n\t\t\t\t\t\t\t\t\tevent.remained.push(dialog.buttons[i].link);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tevent.trigger('wuguRemained');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.broadcast(function(id){\r\n\t\t\t\t\t\tvar dialog=get.idDialog(id);\r\n\t\t\t\t\t\tif(dialog){\r\n\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t\t_status.dieClose.remove(dialog);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},event.preResult);\r\n\t\t\t\t\tgame.addVideo('cardDialog',null,event.preResult);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(){\r\n\t\t\t\t\t\tif(Math.random()<0.5) return 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:3,\r\n\t\t\t\t\t\tuseful:0.5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(get.is.versus()){\r\n\t\t\t\t\t\t\t\tif(target==player) return 1.5;\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(player.hasUnknown(2)){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn (1-get.distance(player,target,'absolute')/game.countPlayer())*get.attitude(player,target)>0?0.5:0.7;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdraw:1,\r\n\t\t\t\t\t\tmultitarget:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttaoyuan:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tcardcolor:'red',\r\n\t\t\t\treverseOrder:true,\r\n\t\t\t\tyingbian_prompt:'当你使用此牌选择目标后，你可为此牌减少一个目标',\r\n\t\t\t\tyingbian_tags:['remove'],\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tevent.yingbian_removeTarget=true;\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\t//return target.hp<target.maxHp;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tignoreTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.isHealthy();\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttarget.recover(event.baseDamage||1);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:function(){\r\n\t\t\t\t\t\t\treturn 11;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tuseful:[3,1],\r\n\t\t\t\t\t\tvalue:0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\treturn (target.hp<target.maxHp)?2:0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\trecover:0.5,\r\n\t\t\t\t\t\tmultitarget:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnanman:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tyingbian_prompt:'当你使用此牌选择目标后，你可为此牌减少一个目标',\r\n\t\t\t\tyingbian_tags:['remove'],\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tevent.yingbian_removeTarget=true;\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player;\r\n\t\t\t\t},\r\n\t\t\t\treverseOrder:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tif(typeof event.baseDamage!='number') event.baseDamage=1;\r\n\t\t\t\t\tif(event.directHit) event._result={bool:false};\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar next=target.chooseToRespond({name:'sha'});\r\n\t\t\t\t\t\tnext.set('ai',function(card){\r\n\t\t\t\t\t\t\tvar evt=_status.event.getParent();\r\n\t\t\t\t\t\t\tif(get.damageEffect(evt.target,evt.player,evt.target)>=0) return 0;\r\n\t\t\t\t\t\t\tif(evt.player.hasSkillTag('notricksource')) return 0;\r\n\t\t\t\t\t\t\tif(evt.target.hasSkillTag('notrick')) return 0;\r\n\t\t\t\t\t\t\tif(evt.target.hp>=2&&evt.player.hasSkillTag('directHit_ai',true,{\r\n\t\t\t\t\t\t\t\ttarget:evt.target,\r\n\t\t\t\t\t\t\t\tcard:evt.card,\r\n\t\t\t\t\t\t\t},true)){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn get.order(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnext.autochoose=lib.filter.autoRespondSha;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.bool==false){\r\n\t\t\t\t\t\ttarget.damage(event.baseDamage,event.customSource||player);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(target,card,player,viewer){\r\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','sha')){\r\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:9,\r\n\t\t\t\t\t\tuseful:[5,1],\r\n\t\t\t\t\t\tvalue:5\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget_use:function(player,target){\r\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\r\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\r\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\r\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(nh==0) return -2;\r\n\t\t\t\t\t\t\tif(nh==1) return -1.7\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\r\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\r\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(nh==0) return -2;\r\n\t\t\t\t\t\t\tif(nh==1) return -1.7\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\trespond:1,\r\n\t\t\t\t\t\trespondSha:1,\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\tmultitarget:1,\r\n\t\t\t\t\t\tmultineg:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twanjian:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\treverseOrder:true,\r\n\t\t\t\tyingbian_prompt:'当你使用此牌选择目标后，你可为此牌减少一个目标',\r\n\t\t\t\tyingbian_tags:['remove'],\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tevent.yingbian_removeTarget=true;\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tif(typeof event.baseDamage!='number') event.baseDamage=1;\r\n\t\t\t\t\tif(event.directHit) event._result={bool:false};\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar next=target.chooseToRespond({name:'shan'});\r\n\t\t\t\t\t\tnext.set('ai',function(card){\r\n\t\t\t\t\t\t\tvar evt=_status.event.getParent();\r\n\t\t\t\t\t\t\tif(get.damageEffect(evt.target,evt.player,evt.target)>=0) return 0;\r\n\t\t\t\t\t\t\tif(evt.player.hasSkillTag('notricksource')) return 0;\r\n\t\t\t\t\t\t\tif(evt.target.hasSkillTag('notrick')) return 0;\r\n\t\t\t\t\t\t\tif(evt.target.hasSkillTag('noShan')){\r\n\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(evt.target.hp>=2&&evt.player.hasSkillTag('directHit_ai',true,{\r\n\t\t\t\t\t\t\t\ttarget:evt.target,\r\n\t\t\t\t\t\t\t\tcard:evt.card,\r\n\t\t\t\t\t\t\t},true)){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn get.order(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnext.autochoose=lib.filter.autoRespondShan;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.bool==false){\r\n\t\t\t\t\t\ttarget.damage(event.baseDamage);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(target,card,player,viewer){\r\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','shan')){\r\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:9,\r\n\t\t\t\t\t\tuseful:1,\r\n\t\t\t\t\t\tvalue:5\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget_use:function(player,target){\r\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\r\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\r\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\r\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(nh==0) return -2;\r\n\t\t\t\t\t\t\tif(nh==1) return -1.7\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\r\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\r\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(nh==0) return -2;\r\n\t\t\t\t\t\t\tif(nh==1) return -1.7\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\trespond:1,\r\n\t\t\t\t\t\trespondShan:1,\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t\tmultitarget:1,\r\n\t\t\t\t\t\tmultineg:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twuzhong:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tnature:['ocean'],\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tcardcolor:'red',\r\n\t\t\t\ttoself:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target==player;\r\n\t\t\t\t},\r\n\t\t\t\tmodTarget:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(get.is.versus()){\r\n\t\t\t\t\t\tif(game.friend.contains(target)){\r\n\t\t\t\t\t\t\tif(game.friend.length<game.enemy.length){\r\n\t\t\t\t\t\t\t\ttarget.draw(3);return;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tif(game.friend.length>game.enemy.length){\r\n\t\t\t\t\t\t\t\ttarget.draw(3);return;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.draw(2);\r\n\t\t\t\t\tif(get.nature(event.card)=='ocean'&&!target.hujia)\ttarget.changeHujia();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:7.2,\r\n\t\t\t\t\t\tuseful:4.5,\r\n\t\t\t\t\t\tvalue:9.2\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:2,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdraw:2\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tjuedou:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tnature:['ocean','yami'],\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tyingbian_prompt:'你令此牌不可被响应',\r\n\t\t\t\tyingbian_tags:['hit'],\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tevent.directHit.addArray(game.players);\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tif(event.turn==undefined) event.turn=target;\r\n\t\t\t\t\tif(typeof event.baseDamage!='number') event.baseDamage=1;\r\n\t\t\t\t\tif(typeof event.extraDamage!='number'){\r\n\t\t\t\t\t\tevent.extraDamage=0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!event.shaReq) event.shaReq={};\r\n\t\t\t\t\tif(typeof event.shaReq[player.playerid]!='number') event.shaReq[player.playerid]=1;\r\n\t\t\t\t\tif(typeof event.shaReq[target.playerid]!='number') event.shaReq[target.playerid]=1;\r\n\t\t\t\t\tevent.playerCards=[];\r\n\t\t\t\t\tevent.targetCards=[];\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tevent.trigger('juedou');\r\n\t\t\t\t\tevent.shaRequired=event.shaReq[event.turn.playerid];\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tif(event.directHit){\r\n\t\t\t\t\t\tevent._result={bool:false};\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar next=event.turn.chooseToRespond({name:'sha'});\r\n\t\t\t\t\t\tif(event.shaRequired>1){\r\n\t\t\t\t\t\t\tnext.set('prompt2','共需打出'+event.shaRequired+'张杀')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnext.set('ai',function(card){\r\n\t\t\t\t\t\t\tvar event=_status.event;\r\n\t\t\t\t\t\t\tvar player=event.splayer;\r\n\t\t\t\t\t\t\tvar target=event.starget;\r\n\t\t\t\t\t\t\tvar evt=_status.event.getParent();\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('notricksource')) return 0;\r\n\t\t\t\t\t\t\tif(target.hasSkillTag('notrick')) return 0;\r\n\t\t\t\t\t\t\tif(event.shaRequired>1&&player.countCards('h','sha')<event.shaRequired) return 0;\r\n\t\t\t\t\t\t\tif(evt.target.hp>=2&&evt.player.hasSkillTag('directHit_ai',true,{\r\n\t\t\t\t\t\t\t\ttarget:evt.target,\r\n\t\t\t\t\t\t\t\tcard:evt.card,\r\n\t\t\t\t\t\t\t},true)){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(event.player==target){\r\n\t\t\t\t\t\t\t\tif(player.hasSkill('naman')) return -1;\r\n\t\t\t\t\t\t\t\tif(get.attitude(target,player)<0||event.player.hp<=1){\r\n\t\t\t\t\t\t\t\t\treturn get.order(card);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tif(target.hasSkill('naman')) return -1;\r\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)<0||event.player.hp<=1){\r\n\t\t\t\t\t\t\t\t\treturn get.order(card);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnext.set('splayer',player);\r\n\t\t\t\t\t\tnext.set('starget',target);\r\n\t\t\t\t\t\tnext.set('shaRequired',event.shaRequired);\r\n\t\t\t\t\t\tnext.autochoose=lib.filter.autoRespondSha;\r\n\t\t\t\t\t\tif(event.turn==target){\r\n\t\t\t\t\t\t\tnext.source=player;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tnext.source=target;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 3\"\r\n\t\t\t\t\tif(event.target.isDead()||event.player.isDead()){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\t\tevent.shaRequired--;\r\n\t\t\t\t\t\t\tif(event.turn==target){\r\n\t\t\t\t\t\t\t\tif(result.cards) event.targetCards.addArray(result.cards);\r\n\t\t\t\t\t\t\t\tif(event.shaRequired>0) event.goto(2);\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tevent.turn=player;\r\n\t\t\t\t\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tif(result.cards) event.playerCards.addArray(result.cards);\r\n\t\t\t\t\t\t\t\tif(event.shaRequired>0) event.goto(2);\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tevent.turn=target;\r\n\t\t\t\t\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tif(event.turn==target){\r\n\t\t\t\t\t\t\t\ttarget.damage(get.nature(event.card),event.baseDamage+event.extraDamage);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tplayer.damage(get.nature(event.card),target,event.baseDamage+event.extraDamage);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(target,card,player,viewer){\r\n\t\t\t\t\t\tif(player==game.me&&get.attitude(viewer,player)>0){\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:5,\r\n\t\t\t\t\t\tuseful:1,\r\n\t\t\t\t\t\tvalue:5.5\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1.5,\r\n\t\t\t\t\t\tplayer:function(player,target,card){\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('directHit_ai',true,{\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t},true)){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(get.damageEffect(target,player,target)>0&&get.attitude(player,target)>0&&get.attitude(target,player)>0){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar hs1=target.getCards('h','sha');\r\n\t\t\t\t\t\t\tvar hs2=player.getCards('h','sha');\r\n\t\t\t\t\t\t\tif(hs1.length>hs2.length+1){\r\n\t\t\t\t\t\t\t\treturn -2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar hsx=target.getCards('h');\r\n\t\t\t\t\t\t\tif(hsx.length>2&&hs2.length==0&&hsx[0].number<6){\r\n\t\t\t\t\t\t\t\treturn -2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(hsx.length>3&&hs2.length==0){\r\n\t\t\t\t\t\t\t\treturn -2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(hs1.length>hs2.length&&(!hs2.length||hs1[0].number>hs2[0].number)){\r\n\t\t\t\t\t\t\t\treturn -2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn -0.5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\trespond:2,\r\n\t\t\t\t\t\trespondSha:2,\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshunshou:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\trange:{global:1},\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tpostAi:function(targets){\r\n\t\t\t\t\treturn targets.length==1&&targets[0].countCards('j');\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(player==target) return false;\r\n\t\t\t\t\treturn target.countGainableCards(player,get.is.single()?'he':'hej')>0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar position=get.is.single()?'he':'hej';\r\n\t\t\t\t\tif(target.countGainableCards(player,position)){\r\n\t\t\t\t\t\tplayer.gainPlayerCard(position,target,true);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(target,card,player,viewer){\r\n\t\t\t\t\t\tif(get.attitude(viewer,player)>0&&get.attitude(viewer,target)>0){\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:7.5,\r\n\t\t\t\t\t\tuseful:4,\r\n\t\t\t\t\t\tvalue:9\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0) return (target.countCards('he',function(card){\r\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&card!=target.getEquip('jinhe');\r\n\t\t\t\t\t\t\t})>0)?-1.5:1.5;\r\n\t\t\t\t\t\t\treturn (target.countCards('ej',function(card){\r\n\t\t\t\t\t\t\t\tif(get.position(card)=='e') return get.value(card,target)<=0;\r\n\t\t\t\t\t\t\t\tvar cardj=card.viewAs?{name:card.viewAs}:card;\r\n\t\t\t\t\t\t\t\treturn get.effect(target,cardj,target,player)<0;\r\n\t\t\t\t\t\t\t})>0)?1.5:-1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tplayer:function(player,target){\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0&&!target.countCards('he',function(card){\r\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&card!=target.getEquip('jinhe');\r\n\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)>1){\r\n\t\t\t\t\t\t\t\treturn (target.countCards('ej',function(card){\r\n\t\t\t\t\t\t\t\t\tif(get.position(card)=='e') return get.value(card,target)<=0;\r\n\t\t\t\t\t\t\t\t\tvar cardj=card.viewAs?{name:card.viewAs}:card;\r\n\t\t\t\t\t\t\t\t\treturn get.effect(target,cardj,target,player)<0;\r\n\t\t\t\t\t\t\t\t})>0)?1.5:-1.5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tgain:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//特殊顺手ai，计算获得区域内一张牌('hej')的收益\r\n\t\t\tshunshou_copy:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:7.5,\r\n\t\t\t\t\t\tuseful:4,\r\n\t\t\t\t\t\tvalue:9\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0) return (target.countCards('he',function(card){\r\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&card!=target.getEquip('jinhe');\r\n\t\t\t\t\t\t\t})>0)?-1.5:1.5;\r\n\t\t\t\t\t\t\treturn (target.countCards('ej',function(card){\r\n\t\t\t\t\t\t\t\tif(get.position(card)=='e') return get.value(card,target)<=0;\r\n\t\t\t\t\t\t\t\tvar cardj=card.viewAs?{name:card.viewAs}:card;\r\n\t\t\t\t\t\t\t\treturn get.effect(target,cardj,target,player)<0;\r\n\t\t\t\t\t\t\t})>0)?1.5:-1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tplayer:function(player,target){\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0&&!target.countCards('he',function(card){\r\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&card!=target.getEquip('jinhe');\r\n\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)>1){\r\n\t\t\t\t\t\t\t\treturn (target.countCards('ej',function(card){\r\n\t\t\t\t\t\t\t\t\tif(get.position(card)=='e') return get.value(card,target)<=0;\r\n\t\t\t\t\t\t\t\t\tvar cardj=card.viewAs?{name:card.viewAs}:card;\r\n\t\t\t\t\t\t\t\t\treturn get.effect(target,cardj,target,player)<0;\r\n\t\t\t\t\t\t\t\t})>0)?1.5:-1.5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tgain:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//特殊顺手ai，计算获得一张牌('he')的收益\r\n\t\t\tshunshou_copy2:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:7.5,\r\n\t\t\t\t\t\tuseful:4,\r\n\t\t\t\t\t\tvalue:9\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0) return (target.countCards('he',function(card){\r\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&card!=target.getEquip('jinhe');\r\n\t\t\t\t\t\t\t})>0)?-1.5:1.5;\r\n\t\t\t\t\t\t\treturn (target.countCards('e',function(card){\r\n\t\t\t\t\t\t\t\treturn get.value(card,target)<=0;\r\n\t\t\t\t\t\t\t})>0)?1.5:-1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tplayer:function(player,target){\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0&&!target.countCards('he',function(card){\r\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&card!=target.getEquip('jinhe');\r\n\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)>1){\r\n\t\t\t\t\t\t\t\treturn (target.countCards('ej',function(card){\r\n\t\t\t\t\t\t\t\t\tif(get.position(card)=='e') return get.value(card,target)<=0;\r\n\t\t\t\t\t\t\t\t\tvar cardj=card.viewAs?{name:card.viewAs}:card;\r\n\t\t\t\t\t\t\t\t\treturn get.effect(target,cardj,target,player)<0;\r\n\t\t\t\t\t\t\t\t})>0)?1.5:-1.5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tgain:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tguohe:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\tpostAi:function(targets){\r\n\t\t\t\t\treturn targets.length==1&&targets[0].countCards('j');\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(player==target) return false;\r\n\t\t\t\t\treturn target.countDiscardableCards(player,get.is.single()?'he':'hej');\r\n\t\t\t\t},\r\n\t\t\t\tyingbian_prompt:'当你使用此牌选择目标后，你可为此牌增加一个目标',\r\n\t\t\t\tyingbian_tags:['add'],\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tevent.yingbian_addTarget=true;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(!get.is.single()&&target.countDiscardableCards(player,'hej')){\r\n\t\t\t\t\t\tplayer.discardPlayerCard('hej',target,true);\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar bool1=target.countDiscardableCards(player,'h');\r\n\t\t\t\t\t\tvar bool2=target.countDiscardableCards(player,'e');\r\n\t\t\t\t\t\tif(bool1&&bool2){\r\n\t\t\t\t\t\t\tplayer.chooseControl('手牌区','装备区').set('ai',function(){\r\n\t\t\t\t\t\t\t\treturn Math.random()<0.5?1:0;\r\n\t\t\t\t\t\t\t}).set('prompt','弃置'+(get.translation(target))+'装备区的一张牌，或观看其手牌并弃置其中的一张牌。');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse event._result={control:bool1?'手牌区':'装备区'};\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tvar pos=result.control=='手牌区'?'h':'e';\r\n\t\t\t\t\tplayer.discardPlayerCard(target,pos,true,'visible');\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:9,\r\n\t\t\t\t\t\tuseful:5,\r\n\t\t\t\t\t\tvalue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyingbian:function(card,player,targets,viewer){\r\n\t\t\t\t\t\tif(get.attitude(viewer,player)<=0) return 0;\r\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\treturn !targets.contains(current)&&lib.filter.targetEnabled2(card,player,current)&&get.effect(current,card,player,player)>0;\r\n\t\t\t\t\t\t})) return 6;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\r\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\r\n\t\t\t\t\t\t\tif(att>0){\r\n\t\t\t\t\t\t\t\tif(target.countCards('j',function(card){\r\n\t\t\t\t\t\t\t\t\tvar cardj=card.viewAs?{name:card.viewAs}:card;\r\n\t\t\t\t\t\t\t\t\treturn get.effect(target,cardj,target,player)<0;\r\n\t\t\t\t\t\t\t\t})>0) return 3;\r\n\t\t\t\t\t\t\t\tif(target.getEquip('baiyin')&&target.isDamaged()&&\r\n\t\t\t\t\t\t\t\t\tget.recoverEffect(target,player,player)>0){\r\n\t\t\t\t\t\t\t\t\tif(target.hp==1&&!target.hujia) return 1.6;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(target.countCards('e',function(card){\r\n\t\t\t\t\t\t\t\t\tif(get.position(card)=='e') return get.value(card,target)<0;\r\n\t\t\t\t\t\t\t\t})>0) return 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar es=target.getCards('e');\r\n\t\t\t\t\t\t\tvar noe=(es.length==0||target.hasSkillTag('noe'));\r\n\t\t\t\t\t\t\tvar noe2=(es.filter(function(esx){\r\n\t\t\t\t\t\t\t\treturn get.value(esx,target)>0;\r\n\t\t\t\t\t\t\t}).length==0);\r\n\t\t\t\t\t\t\tvar noh=(nh==0||target.hasSkillTag('noh'));\r\n\t\t\t\t\t\t\tif(noh&&(noe||noe2)) return 0;\r\n\t\t\t\t\t\t\tif(att<=0&&!target.countCards('he')) return 1.5;\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tdiscard:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//特殊过河ai，计算弃置区域内一张牌('hej')的收益\r\n\t\t\tguohe_copy:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:9,\r\n\t\t\t\t\t\tuseful:5,\r\n\t\t\t\t\t\tvalue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\r\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\r\n\t\t\t\t\t\t\tif(att>0){\r\n\t\t\t\t\t\t\t\tif(target.countCards('j',function(card){\r\n\t\t\t\t\t\t\t\t\tvar cardj=card.viewAs?{name:card.viewAs}:card;\r\n\t\t\t\t\t\t\t\t\treturn get.effect(target,cardj,target,player)<0;\r\n\t\t\t\t\t\t\t\t})>0) return 3;\r\n\t\t\t\t\t\t\t\tif(target.getEquip('baiyin')&&target.isDamaged()&&\r\n\t\t\t\t\t\t\t\t\tget.recoverEffect(target,player,player)>0){\r\n\t\t\t\t\t\t\t\t\tif(target.hp==1&&!target.hujia) return 1.6;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(target.countCards('e',function(card){\r\n\t\t\t\t\t\t\t\t\tif(get.position(card)=='e') return get.value(card,target)<0;\r\n\t\t\t\t\t\t\t\t})>0) return 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar es=target.getCards('e');\r\n\t\t\t\t\t\t\tvar noe=(es.length==0||target.hasSkillTag('noe'));\r\n\t\t\t\t\t\t\tvar noe2=(es.filter(function(esx){\r\n\t\t\t\t\t\t\t\treturn get.value(esx,target)>0;\r\n\t\t\t\t\t\t\t}).length==0);\r\n\t\t\t\t\t\t\tvar noh=(nh==0||target.hasSkillTag('noh'));\r\n\t\t\t\t\t\t\tif(noh&&(noe||noe2)) return 0;\r\n\t\t\t\t\t\t\tif(att<=0&&!target.countCards('he')) return 1.5;\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tdiscard:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//特殊过河ai，计算弃置一张牌('he')的收益\r\n\t\t\tguohe_copy2:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:9,\r\n\t\t\t\t\t\tuseful:5,\r\n\t\t\t\t\t\tvalue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\r\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\r\n\t\t\t\t\t\t\tif(att>0){\r\n\t\t\t\t\t\t\t\tif(target.getEquip('baiyin')&&target.isDamaged()&&\r\n\t\t\t\t\t\t\t\t\tget.recoverEffect(target,player,player)>0){\r\n\t\t\t\t\t\t\t\t\tif(target.hp==1&&!target.hujia) return 1.6;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(target.countCards('e',function(card){\r\n\t\t\t\t\t\t\t\t\tif(get.position(card)=='e') return get.value(card,target)<0;\r\n\t\t\t\t\t\t\t\t})>0) return 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar es=target.getCards('e');\r\n\t\t\t\t\t\t\tvar noe=(es.length==0||target.hasSkillTag('noe'));\r\n\t\t\t\t\t\t\tvar noe2=(es.filter(function(esx){\r\n\t\t\t\t\t\t\t\treturn get.value(esx,target)>0;\r\n\t\t\t\t\t\t\t}).length==0);\r\n\t\t\t\t\t\t\tvar noh=(nh==0||target.hasSkillTag('noh'));\r\n\t\t\t\t\t\t\tif(noh&&(noe||noe2)) return 0;\r\n\t\t\t\t\t\t\tif(att<=0&&!target.countCards('he')) return 1.5;\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tdiscard:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tjiedao:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:2,\r\n\t\t\t\tsingleCard:true,\r\n\t\t\t\tmultitarget:true,\r\n\t\t\t\ttargetprompt:['被借刀','出杀目标'],\r\n\t\t\t\tcomplexTarget:true,\r\n\t\t\t\tmulticheck:function(){\r\n\t\t\t\t\treturn game.hasPlayer(function(current){\r\n\t\t\t\t\t\tif(current.getEquip(1)){\r\n\t\t\t\t\t\t\treturn game.hasPlayer(function(current2){\r\n\t\t\t\t\t\t\t\treturn lib.filter.filterTarget({name:'sha'},current,current2);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(ui.selected.targets.length==0){\r\n\t\t\t\t\t\treturn (player!=target&&target.getCards('e',{subtype:'equip1'}).length);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\treturn lib.filter.filterTarget({name:'sha'},ui.selected.targets[0],target);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tif(event.directHit||(!_status.connectMode&&lib.config.skip_shan&&!target.hasSha())){\r\n\t\t\t\t\t\tevent.directfalse=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\ttarget.chooseToUse('对'+get.translation(event.addedTarget)+'使用一张杀，或令'+get.translation(player)+'获得你的武器牌',function(card,player){\r\n\t\t\t\t\t\t\tif(get.name(card)!='sha') return false;\r\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this,arguments);\r\n\t\t\t\t\t\t}).set('targetRequired',true).set('complexSelect',true).set('filterTarget',function(card,player,target){\r\n\t\t\t\t\t\tif(target!=_status.event.sourcex&&!ui.selected.targets.contains(_status.event.sourcex)) return false;\r\n\t\t\t\t\t\treturn lib.filter.filterTarget.apply(this,arguments);\r\n\t\t\t\t\t}).set('sourcex',event.addedTarget).set('addCount',false).set('respondTo',[player,card]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(event.directfalse||result.bool==false){\r\n\t\t\t\t\t\tvar cards=target.getCards('e',{subtype:'equip1'});\r\n\t\t\t\t\t\tif(cards.length) player.gain(cards,target,'give');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(target,card,player,viewer){\r\n\t\t\t\t\t\tif(player==game.me&&get.attitude(viewer,player)>0){\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:8,\r\n\t\t\t\t\t\tvalue:2,\r\n\t\t\t\t\t\tuseful:1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1.5,\r\n\t\t\t\t\t\tplayer:function(player){\r\n\t\t\t\t\t\t\tif(player.getCards('he',{subtype:'equip1'}).length) return 0;\r\n\t\t\t\t\t\t\treturn 1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tgain:1,\r\n\t\t\t\t\t\tuse:1,\r\n\t\t\t\t\t\tuseSha:1,\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twuxie:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:[6,4,3],\r\n\t\t\t\t\t\tvalue:[6,4,3],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{player:1},\r\n\t\t\t\t\texpose:0.2\r\n\t\t\t\t},\r\n\t\t\t\tnotarget:true,\r\n\t\t\t\tyingbian_tags:['gain','draw'],\r\n\t\t\t\tyingbian_prompt:function(card){\r\n\t\t\t\t\tif(!get.cardtag(card,'yingbian_gain')) return '当你声明使用此牌时，你摸一张牌';\r\n\t\t\t\t\treturn '当此牌生效后，你获得此牌响应的目标牌';\r\n\t\t\t\t},\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tif(!get.cardtag(event.card,'yingbian_gain')||get.cardtag(event.card,'yingbian_draw')) event.player.draw();\r\n\t\t\t\t},\r\n\t\t\t\tcontentBefore:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(get.mode()=='guozhan'&&get.cardtag(card,'guo')){\r\n\t\t\t\t\t\tvar trigger=event.getParent(2);\r\n\t\t\t\t\t\tif(trigger.triggername!='phaseJudge'&&!trigger.statecard&&trigger.target.identity!='ye'&&trigger.target.identity!='unknown'){\r\n\t\t\t\t\t\t\tplayer.chooseControl('对单体使用','对势力使用').set('prompt','请选择'+get.translation(card)+'的使用方式').set('ai',function(){\r\n\t\t\t\t\t\t\t\treturn '对势力使用'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.control=='对势力使用'){\r\n\t\t\t\t\t\tplayer.chat('对势力使用');\r\n\t\t\t\t\t\tevent.getParent(2).guowuxie=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar evt=event.getParent();\r\n\t\t\t\t\tevent.result={\r\n\t\t\t\t\t\twuxied:true,\r\n\t\t\t\t\t\tdirectHit:evt.directHit||[],\r\n\t\t\t\t\t\tnowuxie:evt.nowuxie,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif(player.isOnline()){\r\n\t\t\t\t\t\tplayer.send(function(player){\r\n\t\t\t\t\t\t\tif(ui.tempnowuxie&&!player.hasWuxie()){\r\n\t\t\t\t\t\t\t\tui.tempnowuxie.close();\r\n\t\t\t\t\t\t\t\tdelete ui.tempnowuxie;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},player);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(player==game.me){\r\n\t\t\t\t\t\tif(ui.tempnowuxie&&!player.hasWuxie()){\r\n\t\t\t\t\t\t\tui.tempnowuxie.close();\r\n\t\t\t\t\t\t\tdelete ui.tempnowuxie;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(event.card.yingbian&&get.cardtag(event.card,'yingbian_gain')){\r\n\t\t\t\t\t\tvar cardx=event.getParent().respondTo;\r\n\t\t\t\t\t\tif(cardx&&cardx[1]&&cardx[1].cards&&cardx[1].cards.filterInD('od').length) player.gain(cardx[1].cards.filterInD('od'),'gain2','log');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlebu:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'delay',\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn (lib.filter.judge(card,player,target)&&player!=target);\r\n\t\t\t\t},\r\n\t\t\t\tjudge:function(card){\r\n\t\t\t\t\tif(get.suit(card)=='heart') return 0;\r\n\t\t\t\t\treturn -3;\r\n\t\t\t\t},\r\n\t\t\t\teffect:function(){\r\n\t\t\t\t\tif(result.bool==false){\r\n\t\t\t\t\t\tplayer.skip('phaseUse');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:1,\r\n\t\t\t\t\t\tuseful:1,\r\n\t\t\t\t\t\tvalue:8,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar num=target.hp-target.countCards('h')-2;\r\n\t\t\t\t\t\t\tif(num>-1) return -0.01;\r\n\t\t\t\t\t\t\tif(target.hp<3) num--;\r\n\t\t\t\t\t\t\tif(target.isTurnedOver()) num/=2;\r\n\t\t\t\t\t\t\tvar dist=get.distance(player,target,'absolute');\r\n\t\t\t\t\t\t\tif(dist<1) dist=1;\r\n\t\t\t\t\t\t\treturn num/Math.sqrt(dist);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tskip:'phaseUse'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshandian:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'delay',\r\n\t\t\t\tcardnature:'thunder',\r\n\t\t\t\tmodTarget:function(card,player,target){\r\n\t\t\t\t\treturn lib.filter.judge(card,player,target);\r\n\t\t\t\t},\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\treturn player.canAddJudge(card);\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn (lib.filter.judge(card,player,target)&&player==target);\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:[-1,-1],\r\n\t\t\t\tjudge:function(card){\r\n\t\t\t\t\tif(get.suit(card)=='spade'&&get.number(card)>1&&get.number(card)<10) return -6;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\teffect:function(){\r\n\t\t\t\t\tif(result.bool==false){\r\n\t\t\t\t\t\tplayer.damage(3,'thunder','nosource');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tplayer.addJudgeNext(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcancel:function(){\r\n\t\t\t\t\tplayer.addJudgeNext(card);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:1,\r\n\t\t\t\t\t\tuseful:0,\r\n\t\t\t\t\t\tvalue:0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\r\n\t\t\t\t\t\t\t\tvar skills=current.getSkills();\r\n\t\t\t\t\t\t\t\tfor(var j=0;j<current.skills.length;j++){\r\n\t\t\t\t\t\t\t\t\tvar rejudge=get.tag(current.skills[j],'rejudge',current);\r\n\t\t\t\t\t\t\t\t\tif(rejudge!=undefined){\r\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(target,current)>0&&\r\n\t\t\t\t\t\t\t\t\t\tget.attitude(current,target)>0){\r\n\t\t\t\t\t\t\t\t\t\t\treturn rejudge;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\t\treturn -rejudge;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif(num>0) return num;\r\n\t\t\t\t\t\t\tif(num==0){\r\n\t\t\t\t\t\t\t\tvar mode=get.mode();\r\n\t\t\t\t\t\t\t\tif(mode=='identity'){\r\n\t\t\t\t\t\t\t\t\tif(target.identity=='nei') return 1;\r\n\t\t\t\t\t\t\t\t\tvar situ=get.situation();\r\n\t\t\t\t\t\t\t\t\tif(target.identity=='fan'){\r\n\t\t\t\t\t\t\t\t\t\tif(situ>1) return 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\tif(situ<-1) return 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if(mode=='guozhan'){\r\n\t\t\t\t\t\t\t\t\tif(target.identity=='ye') return 1;\r\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\t\t\treturn current.identity=='unknown';\r\n\t\t\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif(get.population(target.identity)==1){\r\n\t\t\t\t\t\t\t\t\t\tif(target.maxHp>2&&target.hp<2) return 1;\r\n\t\t\t\t\t\t\t\t\t\tif(game.countPlayer()<3) return -1;\r\n\t\t\t\t\t\t\t\t\t\tif(target.hp<=2&&target.countCards('he')<=3) return 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\t// damage:1,\r\n\t\t\t\t\t\t// natureDamage:1,\r\n\t\t\t\t\t\t// thunderDamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thanbing:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:\"equip\",\r\n\t\t\t\tsubtype:\"equip1\",\r\n\t\t\t\tdistance:{attackFrom:-1},\r\n\t\t\t\tskills:['hanbing_skill'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trenwang:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:\"equip\",\r\n\t\t\t\tsubtype:\"equip2\",\r\n\t\t\t\tskills:['renwang_skill'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:7.5\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tskill:{\r\n\t\t\tqinglong_guozhan:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCard'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\taudio:'qinglong_skill',\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn get.mode()=='guozhan'&&event.card.name=='sha';\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(!_status.qinglong_guozhan) _status.qinglong_guozhan=[];\r\n\t\t\t\t\t_status.qinglong_guozhan=[];\r\n\t\t\t\t\t_status.qinglong_guozhan.add(trigger);\r\n\t\t\t\t\tgame.countPlayer2(function(current){\r\n\t\t\t\t\t\tcurrent.addTempSkill('qinglong_guozhan_mingzhi');\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar next=game.createEvent('qinglong_guozhan');\r\n\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\ttrigger.after.add(next);\r\n\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\t_status.qinglong_guozhan.remove(event.parent);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tqinglong_guozhan_mingzhi:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\tnomingzhi:true,\r\n\t\t\t\t\tskillTagFilter:function(player){\r\n\t\t\t\t\t\tif(_status.qinglong_guozhan){\r\n\t\t\t\t\t\t\tfor(var i=0;i<_status.qinglong_guozhan.length;i++){\r\n\t\t\t\t\t\t\t\tif(_status.qinglong_guozhan[i].targets.contains(player)) return true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thanbing_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'damageBegin2'},\r\n\t\t\t\t//direct:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event){\r\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.notLink()&&event.player.getCards('he').length>0;\r\n\t\t\t\t},\r\n\t\t\t\t//priority:1,\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\tvar target=event.player;\r\n\t\t\t\t\tvar eff=get.damageEffect(target,player,player,event.nature);\r\n\t\t\t\t\tif(get.attitude(player,target)>0){\r\n\t\t\t\t\t\tif(eff>=0) return false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(eff<=0) return true;\r\n\t\t\t\t\tif(target.hp==1) return false;\r\n\t\t\t\t\tif(event.num>1||player.hasSkill('tianxianjiu')||\r\n\t\t\t\t\t\tplayer.hasSkill('luoyi2')||player.hasSkill('reluoyi2')) return false;\r\n\t\t\t\t\tif(target.countCards('he')<2) return false;\r\n\t\t\t\t\tvar num=0;\r\n\t\t\t\t\tvar cards=target.getCards('he');\r\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\r\n\t\t\t\t\t\tif(get.value(cards[i])>6) num++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(num>=2) return true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tlogTarget:\"player\",\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(trigger.player.countDiscardableCards(player,'he')){\r\n\t\t\t\t\t\tplayer.line(trigger.player);\r\n\t\t\t\t\t\tplayer.discardPlayerCard('he',trigger.player,true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tif(trigger.player.countDiscardableCards(player,'he')){\r\n\t\t\t\t\t\tplayer.line(trigger.player);\r\n\t\t\t\t\t\tplayer.discardPlayerCard('he',trigger.player,true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ticesha_skill:{\r\n\t\t\t\tinherit:'hanbing_skill',\r\n\t\t\t\ttrigger:{source:'damageBegin2'},\r\n\t\t\t\tequipSkill:false,\r\n\t\t\t\truleSkill:true,\r\n\t\t\t\tfilter:function(event){\r\n\t\t\t\t\treturn event.nature=='ice'&&event.notLink()&&event.player.getCards('he').length>0;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\trenwang_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{target:'shaBegin'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpriority:6,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn (event.card.name=='sha'&&get.color(event.card)=='black')\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target){\r\n\t\t\t\t\t\t\tif(target.hasSkillTag('unequip2')) return;\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})||player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})) return;\r\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='black') return 'zerotarget';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tzhuge_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\ttrigger:{player:'useCard1'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn !event.audioed&&event.card.name=='sha'&&player.countUsed('sha',true)>1&&event.getParent().type=='phase';\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.audioed=true;\r\n\t\t\t\t},\r\n\t\t\t\tmod:{\r\n\t\t\t\t\tcardUsable:function(card,player,num){\r\n\t\t\t\t\t\tvar cardx=player.getEquip('zhuge');\r\n\t\t\t\t\t\tif(card.name=='sha'&&(!cardx||player.hasSkill('zhuge_skill',null,false)||(!_status.zhuge_temp&&!ui.selected.cards.contains(cardx)))){\r\n\t\t\t\t\t\t\tif(get.is.versus()||get.is.changban()){\r\n\t\t\t\t\t\t\t\treturn num+3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn Infinity;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcardEnabled2:function(card,player){\r\n\t\t\t\t\t\tif(!_status.event.addCount_extra||player.hasSkill('zhuge_skill',null,false)) return;\r\n\t\t\t\t\t\tif(card&&card==player.getEquip('zhuge')){\r\n\t\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\t\tvar cardz=get.card();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcatch(e){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!cardz||cardz.name!='sha') return;\r\n\t\t\t\t\t\t\t_status.zhuge_temp=true;\r\n\t\t\t\t\t\t\tvar bool=lib.filter.cardUsable(get.autoViewAs({name:'sha'},ui.selected.cards.concat([card])),player);\r\n\t\t\t\t\t\t\tdelete _status.zhuge_temp;\r\n\t\t\t\t\t\t\tif(!bool) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcixiong_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCardToPlayered'},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tlogTarget:'target',\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\tif(get.attitude(player,event.target)>0) return true;\r\n\t\t\t\t\tvar target=event.target;\r\n\t\t\t\t\treturn target.countCards('h')==0||!target.hasSkillTag('noh');\r\n\t\t\t\t},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.card.name!='sha') return false;\r\n\t\t\t\t\tif(player.sex=='male'&&event.target.sex=='female') return true;\r\n\t\t\t\t\tif(player.sex=='female'&&event.target.sex=='male') return true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\ttrigger.target.chooseToDiscard('弃置一张手牌，或令'+get.translation(player)+'摸一张牌').set('ai',function(card){\r\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\r\n\t\t\t\t\t\treturn -get.attitude(trigger.target,trigger.player)-get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.bool==false) player.draw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tqinggang_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\tplayer:'useCardToPlayered',\r\n\t\t\t\t},\r\n\t\t\t\tfilter:function(event){\r\n\t\t\t\t\treturn event.card.name=='sha';\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tlogTarget:'target',\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.target.addTempSkill('qinggang2');\r\n\t\t\t\t\ttrigger.target.storage.qinggang2.add(trigger.card);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tunequip_ai:true,\r\n\t\t\t\t\tskillTagFilter:function(player,tag,arg){\r\n\t\t\t\t\t\tif(arg&&arg.name=='sha') return true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tqinggang2:{\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tai:{unequip2:true},\r\n\t\t\t\tinit:function(player,skill){\r\n\t\t\t\t\tif(!player.storage[skill]) player.storage[skill]=[];\r\n\t\t\t\t},\r\n\t\t\t\tonremove:true,\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\tplayer:['damage','damageCancelled','damageZero'],\r\n\t\t\t\t\tsource:['damage','damageCancelled','damageZero'],\r\n\t\t\t\t\ttarget:['shaMiss','useCardToExcluded','useCardToEnd'],\r\n\t\t\t\t\tglobal:['useCardEnd'],\r\n\t\t\t\t},\r\n\t\t\t\tcharlotte:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.storage.qinggang2&&event.card&&player.storage.qinggang2.contains(event.card)&&(event.name!='damage'||event.notLink());\r\n\t\t\t\t},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tpriority:12,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tplayer.storage.qinggang2.remove(trigger.card);\r\n\t\t\t\t\tif(!player.storage.qinggang2.length) player.removeSkill('qinggang2');\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tqinglong_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'shaMiss'},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(get.mode()=='guozhan') return false;\r\n\t\t\t\t\treturn player.canUse('sha',event.target,false)&&(player.hasSha()||_status.connectMode&&player.countCards('h'));\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tplayer.chooseToUse(get.prompt('qinglong'),function(card,player,event){\r\n\t\t\t\t\t\tif(get.name(card)!='sha') return false;\r\n\t\t\t\t\t\treturn lib.filter.filterCard.apply(this,arguments);\r\n\t\t\t\t\t},trigger.target,-1).set('addCount',false).logSkill='qinglong_skill';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tzhangba_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tenable:['chooseToUse','chooseToRespond'],\r\n\t\t\t\tfilterCard:true,\r\n\t\t\t\tselectCard:2,\r\n\t\t\t\tposition:'hs',\r\n\t\t\t\tviewAs:{name:'sha'},\r\n\t\t\t\tcomplexCard:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.countCards('hs')>=2;\r\n\t\t\t\t},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tprompt:'将两张手牌当杀使用或打出',\r\n\t\t\t\tcheck:function(card){\r\n\t\t\t\t\tif(card.name=='sha') return 0;\r\n\t\t\t\t\treturn 5-get.value(card)\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\trespondSha:true,\r\n\t\t\t\t\tskillTagFilter:function(player){\r\n\t\t\t\t\t\treturn player.countCards('hs')>=2;\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tguanshi_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'shaMiss'},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.countCards('he',function(card){\r\n\t\t\t\t\t\treturn card!=player.getEquip('guanshi');\r\n\t\t\t\t\t})>=2&&event.target.isAlive();\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('guanshi'),2,'he',function(card){\r\n\t\t\t\t\t\treturn _status.event.player.getEquip('guanshi')!=card;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.logSkill='guanshi_skill';\r\n\t\t\t\t\tnext.set('ai',function(card){\r\n\t\t\t\t\t\tvar evt=_status.event.getTrigger();\r\n\t\t\t\t\t\tif(get.attitude(evt.player,evt.target)<0){\r\n\t\t\t\t\t\t\tif(evt.baseDamage+evt.extraDamage>=Math.min(2,evt.target.hp)){\r\n\t\t\t\t\t\t\t\treturn 8-get.value(card)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 5-get.value(card)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\ttrigger.trigger('shaHit');\r\n\t\t\t\t\t\ttrigger._result.bool=false;\r\n\t\t\t\t\t\ttrigger._result.result=null;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tdirectHit_ai:true,\r\n\t\t\t\t\tskillTagFilter:function(player,tag,arg){\r\n\t\t\t\t\t\tif(player._guanshi_temp) return;\r\n\t\t\t\t\t\tplayer._guanshi_temp=true;\r\n\t\t\t\t\t\tvar bool=(get.attitude(player,arg.target)<0&&arg.card.name=='sha'&&player.countCards('he',function(card){\r\n\t\t\t\t\t\t\treturn card!=player.getEquip('guanshi')&&card!=arg.card&&(!arg.card.cards||!arg.card.cards.contains(card))&&get.value(card)<5;\r\n\t\t\t\t\t\t})>1);\r\n\t\t\t\t\t\tdelete player._guanshi_temp;\r\n\t\t\t\t\t\treturn bool;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfangtian_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttrigger:{player:'useCard1'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.card.name!='sha'||get.mode()=='guozhan') return false;\r\n\t\t\t\t\tvar card=event.card;\r\n\t\t\t\t\tvar range;\r\n\t\t\t\t\tvar select=get.copy(get.info(card).selectTarget);\r\n\t\t\t\t\tif(select==undefined){\r\n\t\t\t\t\t\tif(get.info(card).filterTarget==undefined) return false;\r\n\t\t\t\t\t\trange=[1,1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(typeof select=='number') range=[select,select];\r\n\t\t\t\t\telse if(get.itemtype(select)=='select') range=select;\r\n\t\t\t\t\telse if(typeof select=='function') range=select(card,player);\r\n\t\t\t\t\tgame.checkMod(card,player,range,'selectTarget',player);\r\n\t\t\t\t\treturn range[1]!=-1&&event.targets.length>range[1];\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){},\r\n\t\t\t\tmod:{\r\n\t\t\t\t\tselectTarget:function(card,player,range){\r\n\t\t\t\t\t\tif(card.name!='sha') return;\r\n\t\t\t\t\t\tif(get.mode()=='guozhan') return;\r\n\t\t\t\t\t\tif(range[1]==-1) return;\r\n\t\t\t\t\t\tvar cards=player.getCards('h');\r\n\t\t\t\t\t\tif(!cards.length) return;\r\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\r\n\t\t\t\t\t\t\tif(cards[i].classList.contains('selected')==false)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\trange[1]+=2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfangtian_guozhan:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCard2'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(get.mode()!='guozhan') return false;\r\n\t\t\t\t\tif(event.card.name!='sha') return false;\r\n\t\t\t\t\treturn game.hasPlayer(function(target){\r\n\t\t\t\t\t\tif(event.targets.contains(target)) return false;\r\n\t\t\t\t\t\tif(!lib.filter.filterTarget(event.card,player,target)) return false;\r\n\t\t\t\t\t\tif(target.identity=='ye'||target.identity=='unknown') return true;\r\n\t\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\r\n\t\t\t\t\t\t\tif(target.identity==event.targets[i].identity) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('fangtian'),[1,Infinity],function(card,player,target){\r\n\t\t\t\t\t\tvar cardx=_status.event.cardx;\r\n\t\t\t\t\t\tif(!lib.filter.filterTarget(cardx,player,target)) return false;\r\n\t\t\t\t\t\tvar targets=_status.event.targets.slice(0).concat(ui.selected.targets);\r\n\t\t\t\t\t\tif(targets.contains(target)) return false;\r\n\t\t\t\t\t\tif(target.identity=='ye'||target.identity=='unknown') return true;\r\n\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\r\n\t\t\t\t\t\t\tif(target.identity==targets[i].identity) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}).set('promptbar','none').set('cardx',trigger.card).set('targets',trigger.targets).set('ai',function(target){\r\n\t\t\t\t\t\tvar player=_status.event.player;\r\n\t\t\t\t\t\treturn get.effect(target,_status.event.cardx,player,player)\r\n\t\t\t\t\t});\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tplayer.logSkill('fangtian_skill',result.targets);\r\n\t\t\t\t\t\tif(!player.storage.fangtian_guozhan_trigger) player.storage.fangtian_guozhan_trigger=[];\r\n\t\t\t\t\t\tplayer.storage.fangtian_guozhan_trigger.add(trigger.card);\r\n\t\t\t\t\t\ttrigger.targets.addArray(result.targets);\r\n\t\t\t\t\t\tplayer.addTempSkill('fangtian_guozhan_trigger');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tfangtian_guozhan_trigger:{\r\n\t\t\t\ttrigger:{player:'shaMiss'},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tonremove:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(player.storage[event.name].contains(trigger.card)) trigger.getParent().excluded.addArray(trigger.getParent().targets);\r\n\t\t\t\t},\r\n\t\t\t\tgroup:'fangtian_guozhan_remove',\r\n\t\t\t},\r\n\t\t\tfangtian_guozhan_remove:{\r\n\t\t\t\ttrigger:{player:['useCardAfter','useCardCancelled']},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.storage.fangtian_guozhan_trigger&&player.storage.fangtian_guozhan_trigger.contains(event.card);\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tplayer.storage.fangtian_guozhan_trigger.remove(trigger.card);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tqilin_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{source:'damageBegin2'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.notLink()&&event.player.getCards('e',{subtype:['equip3','equip4','equip6']}).length>0\r\n\t\t\t\t},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tvar att=(get.attitude(player,trigger.player)<=0);\r\n\t\t\t\t\tvar next=player.chooseButton();\r\n\t\t\t\t\tnext.set('att',att);\r\n\t\t\t\t\tnext.set('createDialog',['是否发动【毛瑟步枪】，弃置'+get.translation(trigger.player)+'的一张坐骑牌？',trigger.player.getCards('e',{subtype:['equip3','equip4','equip6']})]);\r\n\t\t\t\t\tnext.set('ai',function(button){\r\n\t\t\t\t\t\tif(_status.event.att) return get.buttonValue(button);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tplayer.logSkill('qilin_skill',trigger.player);\r\n\t\t\t\t\t\ttrigger.player.discard(result.links[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbagua_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:['chooseToRespondBegin','chooseToUseBegin']},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.responded) return false;\r\n\t\t\t\t\tif(event.bagua_skill) return false;\r\n\t\t\t\t\tif(!event.filterCard||!event.filterCard({name:'shan'},player,event)) return false;\r\n\t\t\t\t\tif(event.name=='chooseToRespond'&&!lib.filter.cardRespondable({name:'shan'},player,event)) return false;\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tvar evt=event.getParent();\r\n\t\t\t\t\tif(evt.player&&evt.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:evt.card?evt.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:evt.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tcheck:function(event,player){\r\n\t\t\t\t\tif(event&&(event.ai||event.ai1)){\r\n\t\t\t\t\t\tvar ai=event.ai||event.ai1;\r\n\t\t\t\t\t\tvar tmp=_status.event;\r\n\t\t\t\t\t\t_status.event=event;\r\n\t\t\t\t\t\tvar result=ai({name:'shan'},_status.event.player,event);\r\n\t\t\t\t\t\t_status.event=tmp;\r\n\t\t\t\t\t\treturn result>0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\ttrigger.bagua_skill=true;\r\n\t\t\t\t\tplayer.judge('bagua',function(card){return (get.color(card)=='red')?1.5:-0.5}).judge2=function(result){\r\n\t\t\t\t\t\treturn result.bool;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.judge>0){\r\n\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\ttrigger.set('responded',true);\r\n\t\t\t\t\t\ttrigger.result={bool:true,card:{name:'shan',isCard:true}}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\trespondShan:true,\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target,effect){\r\n\t\t\t\t\t\t\tif(target.hasSkillTag('unequip2')) return;\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})||player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})) return;\r\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')) return 0.5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_wuxie:{\r\n\t\t\t\ttrigger:{player:['useCardToBegin','phaseJudge']},\r\n\t\t\t\tpriority:5,\r\n\t\t\t\tpopup:false,\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.card.storage&&event.card.storage.nowuxie) return false;\r\n\t\t\t\t\tvar card=event.card;\r\n\t\t\t\t\tif(event.name=='phaseJudge'&&card.viewAs) card={name:card.viewAs};\r\n\t\t\t\t\tvar info=get.info(card);\r\n\t\t\t\t\tif(info.wuxieable===false) return false;\r\n\t\t\t\t\tif(event.name!='phaseJudge'){\r\n\t\t\t\t\t\tif(event.getParent().nowuxie) return false;\r\n\t\t\t\t\t\tif(!event.target){\r\n\t\t\t\t\t\t\tif(info.wuxieable) return true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(event.player.hasSkillTag('playernowuxie',false,event.card)) return false;\r\n\t\t\t\t\t\tif(get.type(event.card)!='trick'&&!info.wuxieable) return false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tforceLoad:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tdelete event.wuxieresult;\r\n\t\t\t\t\tdelete event.wuxieresult2;\r\n\t\t\t\t\tif(trigger.multitarget){\r\n\t\t\t\t\t\tevent.targets=trigger.targets;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.target=trigger.target;\r\n\t\t\t\t\tif(event.triggername=='phaseJudge'){\r\n\t\t\t\t\t\tevent.target=trigger.player;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.sourcex=event.targets||event.target;\r\n\t\t\t\t\tif(!event.targets&&trigger.targets&&trigger.targets.length==1){\r\n\t\t\t\t\t\tevent.sourcex2=trigger.player;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.source=trigger.player;\r\n\t\t\t\t\tif(event.state==undefined) event.state=true;\r\n\t\t\t\t\tevent.card=trigger.card;\r\n\t\t\t\t\tevent._global_waiting=true;\r\n\t\t\t\t\tevent.tempnowuxie=(trigger.targets&&trigger.targets.length>1&&!trigger.multitarget);\r\n\t\t\t\t\tevent.filterCard=function(card,player){\r\n\t\t\t\t\t\tif(get.name(card)!='wuxie') return false;\r\n\t\t\t\t\t\treturn lib.filter.cardEnabled(card,player,'forceEnable');\r\n\t\t\t\t\t};\r\n\t\t\t\t\tevent.send=function(player,state,isJudge,card,source,target,targets,id,id2,tempnowuxie,skillState){\r\n\t\t\t\t\t\tif(skillState){\r\n\t\t\t\t\t\t\tplayer.applySkills(skillState);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate=state?1:-1;\r\n\t\t\t\t\t\tvar str='';\r\n\t\t\t\t\t\tif(isJudge){\r\n\t\t\t\t\t\t\tstr+=get.translation(source)+'的';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(isJudge){\r\n\t\t\t\t\t\t\tstr+=get.translation(card,'viewAs');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tstr+=get.translation(card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif((targets||target)&&!isJudge){\r\n\t\t\t\t\t\t\tstr+='对'+get.translation(targets||target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstr+='将'+(state>0?'生效':'失效')+'，是否无懈？';\r\n\r\n\t\t\t\t\t\tif(player.isUnderControl(true)&&!_status.auto&&!ui.tempnowuxie&&tempnowuxie){\r\n\t\t\t\t\t\t\tvar translation=get.translation(card.name);\r\n\t\t\t\t\t\t\tif(translation.length>=4){\r\n\t\t\t\t\t\t\t\ttranslation=lib.translate[card.name+'_ab']||translation.slice(0,2);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tui.tempnowuxie=ui.create.control('不无懈'+translation,ui.click.tempnowuxie,'stayleft');\r\n\t\t\t\t\t\t\tui.tempnowuxie._origin=id2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar next=player.chooseToUse({\r\n\t\t\t\t\t\t\tfilterCard:function(card,player){\r\n\t\t\t\t\t\t\t\tif(get.name(card)!='wuxie') return false;\r\n\t\t\t\t\t\t\t\treturn lib.filter.cardEnabled(card,player,'forceEnable');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tprompt:str,\r\n\t\t\t\t\t\t\ttype:'wuxie',\r\n\t\t\t\t\t\t\tstate:state,\r\n\t\t\t\t\t\t\t_global_waiting:true,\r\n\t\t\t\t\t\t\tai1:function(){\r\n\t\t\t\t\t\t\t\tif(isJudge){\r\n\t\t\t\t\t\t\t\t\tvar name=card.viewAs||card.name;\r\n\t\t\t\t\t\t\t\t\tvar info=lib.card[name];\r\n\t\t\t\t\t\t\t\t\tif(info&&info.ai&&info.ai.wuxie){\r\n\t\t\t\t\t\t\t\t\t\tvar aiii=info.ai.wuxie(source,card,source,_status.event.player,state);\r\n\t\t\t\t\t\t\t\t\t\tif(typeof aiii=='number') return aiii;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif(Math.abs(get.attitude(_status.event.player,source))<3) return 0;\r\n\t\t\t\t\t\t\t\t\tif(source.hasSkillTag('nowuxie_judge')||source.hasSkillTag('guanxing')&&(source!=player||!source.hasSkill('guanxing_fail'))) return 0;\r\n\t\t\t\t\t\t\t\t\tif(name!='lebu'&&name!='bingliang'){\r\n\t\t\t\t\t\t\t\t\t\tif(source!=_status.event.player){\r\n\t\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar card2;\r\n\t\t\t\t\t\t\t\t\tif(name!=card.name){\r\n\t\t\t\t\t\t\t\t\t\tcard2={name:name};\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\tcard2=card;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar eff=get.effect(source,card2,source,source);\r\n\t\t\t\t\t\t\t\t\tif(eff>=0) return 0;\r\n\t\t\t\t\t\t\t\t\treturn state*get.attitude(_status.event.player,source);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if(target){\r\n\t\t\t\t\t\t\t\t\tvar triggerevent=_status.event.getTrigger();\r\n\t\t\t\t\t\t\t\t\tif(triggerevent&&triggerevent.parent&&\r\n\t\t\t\t\t\t\t\t\t\ttriggerevent.parent.postAi&&\r\n\t\t\t\t\t\t\t\t\t\ttriggerevent.player.isUnknown(_status.event.player)){\r\n\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar info=get.info(card);\r\n\t\t\t\t\t\t\t\t\tif(info.ai&&info.ai.wuxie){\r\n\t\t\t\t\t\t\t\t\t\tvar aiii=info.ai.wuxie(target,card,source,_status.event.player,state);\r\n\t\t\t\t\t\t\t\t\t\tif(typeof aiii=='number') return aiii;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif(info.multitarget&&targets){\r\n\t\t\t\t\t\t\t\t\t\tvar eff=0;\r\n\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\r\n\t\t\t\t\t\t\t\t\t\t\teff+=get.effect(targets[i],card,source,_status.event.player)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn -eff*state;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif(Math.abs(get.attitude(_status.event.player,target))<3) return 0;\r\n\t\t\t\t\t\t\t\t\treturn -get.effect(target,card,source,_status.event.player)*state;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tvar triggerevent=_status.event.getTrigger();\r\n\t\t\t\t\t\t\t\t\tif(triggerevent&&triggerevent.parent&&\r\n\t\t\t\t\t\t\t\t\t\ttriggerevent.parent.postAi&&\r\n\t\t\t\t\t\t\t\t\t\ttriggerevent.player.isUnknown(_status.event.player)){\r\n\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar info=get.info(card);\r\n\t\t\t\t\t\t\t\t\tif(info.ai&&info.ai.wuxie){\r\n\t\t\t\t\t\t\t\t\t\tvar aiii=info.ai.wuxie(target,card,source,_status.event.player,state);\r\n\t\t\t\t\t\t\t\t\t\tif(typeof aiii=='number') return aiii;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif(Math.abs(get.attitude(_status.event.player,source))<3) return 0;\r\n\t\t\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,source)*state;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsource:target,\r\n\t\t\t\t\t\t\tsource2:targets,\r\n\t\t\t\t\t\t\tid:id,\r\n\t\t\t\t\t\t\tid2:id2\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(_status.event.stateplayer&&_status.event.statecard) next.set('respondTo',[_status.event.stateplayer,_status.event.statecard]);\r\n\t\t\t\t\t\telse if(!isJudge){\r\n\t\t\t\t\t\t\tnext.set('respondTo',[source,card]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(game.online){\r\n\t\t\t\t\t\t\t_status.event._resultid=id;\r\n\t\t\t\t\t\t\tgame.resume();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tnext.nouse=true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tevent.settle=function(){\r\n\t\t\t\t\t\tif(!event.state){\r\n\t\t\t\t\t\t\tif(event.triggername=='phaseJudge'){\r\n\t\t\t\t\t\t\t\ttrigger.untrigger();\r\n\t\t\t\t\t\t\t\ttrigger.cancelled=true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t\t\t\t\ttrigger.getParent('useCard').iswuxied = true;\r\n\t\t\t\t\t\t\t\tif(event.guowuxie==true){\r\n\t\t\t\t\t\t\t\t\tif(trigger.target.identity!='ye'&&trigger.target.identity!='unknown'){\r\n\t\t\t\t\t\t\t\t\t\ttrigger.getParent().excluded.addArray(game.filterPlayer(function(current){\r\n\t\t\t\t\t\t\t\t\t\t\treturn current.identity==trigger.target.identity;\r\n\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\r\n\t\t\t\t\t\tif(event.nowuxie) return false;\r\n\t\t\t\t\t\tif(event.directHit&&event.directHit.contains(current)) return false;\r\n\t\t\t\t\t\tif(event.triggername=='phaseJudge'){\r\n\t\t\t\t\t\t\tif(game.checkMod(trigger.card,player,current,'unchanged','wuxieJudgeEnabled',current)==false) return false;\r\n\t\t\t\t\t\t\tif(game.checkMod(trigger.card,player,current,'unchanged','wuxieJudgeRespondable',player)==false) return false;\r\n\t\t\t\t\t\t\tif(event.stateplayer&&event.statecard&&(game.checkMod(event.statecard,event.stateplayer,player,current,'unchanged','wuxieRespondable',event.stateplayer)==false)) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tif(!event.statecard&&trigger.getParent().directHit.contains(current)) return false;\r\n\t\t\t\t\t\t\tif(game.checkMod(trigger.card,player,trigger.target,current,'unchanged','wuxieEnabled',current)==false) return false;\r\n\t\t\t\t\t\t\tif(game.checkMod(trigger.card,player,trigger.target,current,'unchanged','wuxieRespondable',player)==false) return false;\r\n\t\t\t\t\t\t\tif(event.stateplayer&&event.statecard&&(game.checkMod(event.statecard,event.stateplayer,trigger.player,current,'unchanged','wuxieRespondable',event.stateplayer)==false)) return false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn current.hasWuxie();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tevent.list=list;\r\n\t\t\t\t\tevent.id=get.id();\r\n\t\t\t\t\tlist.sort(function(a,b){\r\n\t\t\t\t\t\treturn get.distance(event.source,a,'absolute')-get.distance(event.source,b,'absolute');\r\n\t\t\t\t\t});\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tif(event.list.length==0){\r\n\t\t\t\t\t\tevent.settle();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(_status.connectMode&&(event.list[0].isOnline()||event.list[0]==game.me)){\r\n\t\t\t\t\t\tevent.goto(4);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.current=event.list.shift();\r\n\t\t\t\t\t\tevent.send(event.current,event.state,event.triggername=='phaseJudge',\r\n\t\t\t\t\t\tevent.card,event.source,event.target,event.targets,event.id,trigger.parent.id,event.tempnowuxie);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 3'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tevent.wuxieresult=event.current;\r\n\t\t\t\t\t\tevent.wuxieresult2=result;\r\n\t\t\t\t\t\tevent.goto(8);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 4'\r\n\t\t\t\t\tvar id=event.id;\r\n\t\t\t\t\tvar sendback=function(result,player){\r\n\t\t\t\t\t\tif(result&&result.id==id&&!event.wuxieresult&&result.bool){\r\n\t\t\t\t\t\t\tevent.wuxieresult=player;\r\n\t\t\t\t\t\t\tevent.wuxieresult2=result;\r\n\t\t\t\t\t\t\tgame.broadcast('cancel',id);\r\n\t\t\t\t\t\t\tif(_status.event.id==id&&_status.event.name=='chooseToUse'&&_status.paused){\r\n\t\t\t\t\t\t\t\treturn (function(){\r\n\t\t\t\t\t\t\t\t\tevent.resultOL=_status.event.resultOL;\r\n\t\t\t\t\t\t\t\t\tui.click.cancel();\r\n\t\t\t\t\t\t\t\t\tif(ui.confirm) ui.confirm.close();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tif(_status.event.id==id&&_status.event.name=='chooseToUse'&&_status.paused){\r\n\t\t\t\t\t\t\t\treturn (function(){\r\n\t\t\t\t\t\t\t\t\tevent.resultOL=_status.event.resultOL;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar withme=false;\r\n\t\t\t\t\tvar withol=false;\r\n\t\t\t\t\tvar list=event.list;\r\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\r\n\t\t\t\t\t\tif(list[i].isOnline()){\r\n\t\t\t\t\t\t\twithol=true;\r\n\t\t\t\t\t\t\tlist[i].wait(sendback);\r\n\t\t\t\t\t\t\tlist[i].send(event.send,list[i],event.state,event.triggername=='phaseJudge',\r\n\t\t\t\t\t\t\tevent.card,event.source,event.target,event.targets,event.id,trigger.parent.id,event.tempnowuxie,get.skillState(list[i]));\r\n\t\t\t\t\t\t\tlist.splice(i--,1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(list[i]==game.me){\r\n\t\t\t\t\t\t\twithme=true;\r\n\t\t\t\t\t\t\tevent.send(list[i],event.state,event.triggername=='phaseJudge',\r\n\t\t\t\t\t\t\tevent.card,event.source,event.target,event.targets,event.id,trigger.parent.id,event.tempnowuxie);\r\n\t\t\t\t\t\t\tlist.splice(i--,1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!withme){\r\n\t\t\t\t\t\tevent.goto(6);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(_status.connectMode){\r\n\t\t\t\t\t\tif(withme||withol){\r\n\t\t\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\r\n\t\t\t\t\t\t\t\tgame.players[i].showTimer();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.withol=withol;\r\n\t\t\t\t\t'step 5'\r\n\t\t\t\t\tif(result&&result.bool&&!event.wuxieresult){\r\n\t\t\t\t\t\tgame.broadcast('cancel',event.id);\r\n\t\t\t\t\t\tevent.wuxieresult=game.me;\r\n\t\t\t\t\t\tevent.wuxieresult2=result;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 6'\r\n\t\t\t\t\tif(event.withol&&!event.resultOL){\r\n\t\t\t\t\t\tgame.pause();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 7'\r\n\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\r\n\t\t\t\t\t\tgame.players[i].hideTimer();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 8'\r\n\t\t\t\t\tif(event.wuxieresult&&event.wuxieresult2&&event.wuxieresult2.skill){\r\n\t\t\t\t\t\tvar info=get.info(event.wuxieresult2.skill);\r\n\t\t\t\t\t\tconsole.log(event,info,event.wuxieresult2)\r\n\t\t\t\t\t\tif(info&&info.precontent&&!info.viewAs&&!game.online){\r\n\t\t\t\t\t\t\tvar next=game.createEvent('pre_'+event.wuxieresult2.skill);\r\n\t\t\t\t\t\t\tnext.setContent(info.precontent);\r\n\t\t\t\t\t\t\tnext.set('result',event.wuxieresult2);\r\n\t\t\t\t\t\t\tnext.set('player',event.wuxieresult);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 9'\r\n\t\t\t\t\tif(event.wuxieresult){\r\n\t\t\t\t\t\tvar next=event.wuxieresult.useResult(event.wuxieresult2);\r\n\t\t\t\t\t\tif(event.stateplayer&&event.statecard) next.respondTo=[event.stateplayer,event.statecard];\r\n\t\t\t\t\t\telse if(event.triggername!='phaseJudge'){\r\n\t\t\t\t\t\t\tnext.respondTo=[trigger.player,trigger.card];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 10'\r\n\t\t\t\t\tif(event.wuxieresult){\r\n\t\t\t\t\t\tif(result.wuxied){\r\n\t\t\t\t\t\t\tevent.nowuxie=result.nowuxie;\r\n\t\t\t\t\t\t\tevent.directHit=result.directHit;\r\n\t\t\t\t\t\t\tevent.stateplayer=event.wuxieresult;\r\n\t\t\t\t\t\t\tif(event.wuxieresult2&&event.wuxieresult2.used){\r\n\t\t\t\t\t\t\t\tevent.statecard=event.wuxieresult2.used;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tevent.statecard=true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.state=!event.state;\r\n\t\t\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse event.settle();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(event.list.length){\r\n\t\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.settle();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete event.resultOL;\r\n\t\t\t\t\tdelete event.wuxieresult;\r\n\t\t\t\t\tdelete event.wuxieresult2;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\ttranslate:{\r\n\t\t\tsha:'杀',\r\n\t\t\tshan:'闪',\r\n\t\t\ttao:'桃',\r\n\t\t\tbagua:'宣传战',\r\n\t\t\tbagua_bg:'卦',\r\n\t\t\tbagua_skill:'宣传战',\r\n\t\t\tjueying:'自行车',\r\n\t\t\tdilu:'白马',\r\n\t\t\tzhuahuang:'卡丁车',\r\n\t\t\tjueying_bg:'+马',\r\n\t\t\tdilu_bg:'+马',\r\n\t\t\tzhuahuang_bg:'+马',\r\n\t\t\tchitu:'吉普车',\r\n\t\t\tchitu_bg:'-马',\r\n\t\t\tdawan:'轿车',\r\n\t\t\tdawan_bg:'-马',\r\n\t\t\tzixin:'蹦蹦',\r\n\t\t\tzixin_bg:'-马',\r\n\t\t\tzhuge:'AK47',\r\n\t\t\tcixiong:'节奏双剑',\r\n\t\t\tzhuge_bg:'弩',\r\n\t\t\tcixiong_bg:'双',\r\n\t\t\tqinggang:'青鼈斩',\r\n\t\t\tqinglong:'俄罗斯方块',\r\n\t\t\tzhangba:'钻石镐',\r\n\t\t\tqinglong_bg:'偃',\r\n\t\t\tzhangba_bg:'蛇',\r\n\t\t\tguanshi:'雪山斧',\r\n\t\t\tfangtian:'锯铊',\r\n\t\t\tqilin:'毛瑟步枪',\r\n\t\t\tqilin_bg:'弓',\r\n\t\t\tzhuge_skill:'AK47',\r\n\t\t\tcixiong_skill:'节奏双剑',\r\n\t\t\tqinggang_skill:'青鼈斩',\r\n\t\t\tqinglong_skill:'俄罗斯方块',\r\n\t\t\tqinglong_guozhan:'俄罗斯方块',\r\n\t\t\tzhangba_skill:'钻石镐',\r\n\t\t\tguanshi_skill:'雪山斧',\r\n\t\t\tfangtian_skill:'锯铊',\r\n\t\t\tqilin_skill:'毛瑟步枪',\r\n\t\t\twugu:'五谷丰登',\r\n\t\t\ttaoyuan:'桃园结义',\r\n\t\t\tnanman:'南蛮入侵',\r\n\t\t\twanjian:'万箭齐发',\r\n\t\t\twuzhong:'无中生有',\r\n\t\t\tjuedou:'决斗',\r\n\t\t\twugu_bg:'谷',\r\n\t\t\ttaoyuan_bg:'园',\r\n\t\t\tnanman_bg:'蛮',\r\n\t\t\twanjian_bg:'箭',\r\n\t\t\twuzhong_bg:'生',\r\n\t\t\tjuedou_bg:'斗',\r\n\t\t\tshunshou:'顺手牵羊',\r\n\t\t\tguohe:'过河拆桥',\r\n\t\t\tguohe_bg:'拆',\r\n\t\t\tjiedao:'借刀杀人',\r\n\t\t\twuxie:'无懈可击',\r\n\t\t\twuxie_bg:'懈',\r\n\t\t\tlebu:'乐不思蜀',\r\n\t\t\tshandian:'闪电',\r\n\t\t\tshandian_bg:'电',\r\n\t\t\thanbing:'赫国剑',\r\n\t\t\trenwang:'黑色阳伞',\r\n\t\t\thanbing_bg:'冰',\r\n\t\t\trenwang_bg:'盾',\r\n\t\t\thanbing_skill:'赫国剑',\r\n\t\t\trenwang_skill:'黑色阳伞',\r\n\t\t\thanbing_info:'当你使用杀造成伤害时，你可以防止此伤害，改为依次弃置目标角色的两张牌。',\r\n\t\t\thanbing_skill_info:'当你使用杀造成伤害时，你可以防止此伤害，改为依次弃置目标角色的两张牌。',\r\n\t\t\trenwang_info:'锁定技，黑色的杀对你无效',\r\n\t\t\trenwang_skill_info:'锁定技，黑色的杀对你无效',\r\n\t\t\tsha_info:'出牌阶段，对攻击范围内的一名角色使用，令其使用一张【闪】，否则受到一点伤害。',\r\n\t\t\tshan_info:'抵消一张【杀】',\r\n\t\t\ttao_info:'出牌阶段，对自己使用，回复一点体力。',\r\n\t\t\tbagua_info:'当你需要使用或打出一张【闪】时，你可以进行一次判定，若判定结果为红色，视为你使用或打出了一张【闪】。',\r\n\t\t\tbagua_skill_info:'当你需要使用或打出一张【闪】时，你可以进行一次判定，若判定结果为红色，视为你使用或打出了一张【闪】。',\r\n\t\t\tjueying_info:'锁定技，其他角色计算与你的距离+1。',\r\n\t\t\tdilu_info:'锁定技，其他角色计算与你的距离+1。',\r\n\t\t\tzhuahuang_info:'锁定技，其他角色计算与你的距离+1。',\r\n\t\t\tchitu_info:'锁定技，你计算与其他角色的距离-1。',\r\n\t\t\tdawan_info:'锁定技，你计算与其他角色的距离-1。',\r\n\t\t\tzixin_info:'锁定技，你计算与其他角色的距离-1。',\r\n\t\t\tzhuge_skill_info:'锁定技，你于出牌阶段内使用【杀】无次数限制。',\r\n\t\t\tzhuge_info:'锁定技，你于出牌阶段内使用【杀】无次数限制。',\r\n\t\t\tcixiong_skill_info:'当你使用【杀】指定一名异性的目标角色后，你可以令其选择一项：1.弃置一张手牌；2.令你摸一张牌。',\r\n\t\t\tcixiong_info:'当你使用【杀】指定一名异性的目标角色后，你可以令其选择一项：1.弃置一张手牌；2.令你摸一张牌。',\r\n\t\t\tqinggang_skill_info:'锁定技，当你使用【杀】指定一名目标角色后，你令其防具技能无效直到此【杀】被抵消或造成伤害。',\r\n\t\t\tqinggang_info:'锁定技，当你使用【杀】指定一名目标角色后，你令其防具技能无效直到此【杀】被抵消或造成伤害。',\r\n\t\t\tqinglong_skill_info:'当你使用的【杀】被目标角色使用的【闪】抵消时，你可以对其使用一张【杀】（无距离限制）。',\r\n\t\t\tqinglong_guozhan_info:'锁定技，当你使用【杀】指定目标后，所有目标角色不能明置武将牌直到此【杀】结算完毕为止。',\r\n\t\t\tqinglong_info:'当你使用的【杀】被目标角色使用的【闪】抵消时，你可以对其使用一张【杀】（无距离限制）。',\r\n\t\t\tqinglong_info_guozhan:'锁定技，当你使用【杀】指定目标后，所有目标角色不能明置武将牌直到此【杀】结算完毕为止。',\r\n\t\t\tzhangba_skill_info:'你可以将两张手牌当【杀】使用或打出。',\r\n\t\t\tzhangba_info:'你可以将两张手牌当【杀】使用或打出。',\r\n\t\t\tguanshi_skill_info:'当你使用的【杀】被目标角色使用的【闪】抵消时，你可以弃置两张牌，令此【杀】依然对其造成伤害。',\r\n\t\t\tguanshi_info:'当你使用的【杀】被目标角色使用的【闪】抵消时，你可以弃置两张牌，令此【杀】依然对其造成伤害。',\r\n\t\t\tfangtian_skill_info:'你使用的【杀】若是你最后的手牌，你可以额外选择至多两个目标。',\r\n\t\t\tfangtian_info:'你使用的【杀】若是你最后的手牌，你可以额外选择至多两个目标。',\r\n\t\t\tfangtian_info_guozhan:'你使用【杀】可以指定任意名角色为目标（不能包含势力相同的角色），若任意一名目标角色使用【闪】抵消了此【杀】，则此【杀】对剩余的目标角色无效。',\r\n\t\t\tqilin_skill_info:'当你使用【杀】对目标角色造成伤害时，你可以弃置其装备区里的一张坐骑牌。',\r\n\t\t\tqilin_info:'当你使用【杀】对目标角色造成伤害时，你可以弃置其装备区里的一张坐骑牌。',\r\n\t\t\twugu_info:'出牌阶段，对所有角色使用。（选择目标后）你从牌堆顶亮出等同于目标数量的牌，每名目标角色获得这些牌中（剩余的）的任意一张。',\r\n\t\t\ttaoyuan_info:'出牌阶段，对所有角色使用。每名目标角色回复1点体力。',\r\n\t\t\tnanman_info:'出牌阶段，对所有其他角色使用。每名目标角色需打出一张【杀】，否则受到1点伤害。',\r\n\t\t\twanjian_info:'出牌阶段，对所有其他角色使用。每名目标角色需打出一张【闪】，否则受到1点伤害。',\r\n\t\t\twuzhong_info:'出牌阶段，对你使用。你摸两张牌。',\r\n\t\t\tjuedou_info:'出牌阶段，对一名其他角色使用。由其开始，其与你轮流打出一张【杀】，直到其中一方未打出【杀】为止。未打出【杀】的一方受到另一方对其造成的1点伤害。',\r\n\t\t\tshunshou_info:'出牌阶段，对距离为1且区域里有牌的一名其他角色使用。你获得其区域里的一张牌。',\r\n\t\t\tguohe_info:'出牌阶段，对区域里有牌的一名其他角色使用。你弃置其区域里的一张牌。',\r\n\t\t\tjiedao_info:'出牌阶段，对装备区里有武器牌且有使用【杀】的目标的一名其他角色使用。令其对你指定的一名角色使用一张【杀】，否则将其装备区里的武器牌交给你。',\r\n\t\t\tjiedao_append:'<span class=\"text\" style=\"font-family: yuanli\">这是一种十分含蓄的计谋。</span>',\r\n\t\t\twuxie_info:'一张锦囊牌生效前，对此牌使用。抵消此牌对一名角色产生的效果，或抵消另一张【无懈可击】产生的效果。',\r\n\t\t\tlebu_info:'出牌阶段，对一名其他角色使用。若判定结果不为红桃，跳过其出牌阶段。',\r\n\t\t\tshandian_info:'出牌阶段，对自己使用。若判定结果为黑桃2~9，则目标角色受到3点雷电伤害。若判定不为黑桃2~9，将之移动到下家的判定区里。',\r\n\t\t\ticesha_skill:'冰杀',\r\n\t\t\ticesha_skill_info:'防止即将造成的伤害，改为依次弃置其两张牌。',\r\n\t\t},\r\n\t\tlist:[\r\n\t\t\t[\"spade\",7,\"sha\"],\r\n\t\t\t[\"spade\",8,\"sha\"],\r\n\t\t\t[\"spade\",8,\"sha\"],\r\n\t\t\t[\"spade\",9,\"sha\"],\r\n\t\t\t[\"spade\",9,\"sha\"],\r\n\t\t\t[\"spade\",10,\"sha\"],\r\n\t\t\t[\"spade\",10,\"sha\"],\r\n\t\t\t[\"club\",2,\"sha\"],\r\n\t\t\t[\"club\",3,\"sha\"],\r\n\t\t\t[\"club\",4,\"sha\"],\r\n\t\t\t[\"club\",5,\"sha\"],\r\n\t\t\t[\"club\",6,\"sha\"],\r\n\t\t\t[\"club\",7,\"sha\"],\r\n\t\t\t[\"club\",8,\"sha\"],\r\n\t\t\t[\"club\",8,\"sha\"],\r\n\t\t\t[\"club\",9,\"sha\"],\r\n\t\t\t[\"club\",9,\"sha\"],\r\n\t\t\t[\"club\",10,\"sha\"],\r\n\t\t\t[\"club\",10,\"sha\"],\r\n\t\t\t[\"club\",11,\"sha\"],\r\n\t\t\t[\"club\",11,\"sha\"],\r\n\t\t\t[\"heart\",10,\"sha\"],\r\n\t\t\t[\"heart\",10,\"sha\"],\r\n\t\t\t[\"heart\",11,\"sha\"],\r\n\t\t\t[\"diamond\",6,\"sha\"],\r\n\t\t\t[\"diamond\",7,\"sha\"],\r\n\t\t\t[\"diamond\",8,\"sha\"],\r\n\t\t\t[\"diamond\",9,\"sha\"],\r\n\t\t\t[\"diamond\",10,\"sha\"],\r\n\t\t\t[\"diamond\",13,\"sha\"],\r\n\t\t\t[\"heart\",2,\"shan\"],\r\n\t\t\t[\"heart\",2,\"shan\"],\r\n\t\t\t[\"heart\",13,\"shan\"],\r\n\t\t\t[\"diamond\",2,\"shan\"],\r\n\t\t\t[\"diamond\",2,\"shan\"],\r\n\t\t\t[\"diamond\",3,\"shan\"],\r\n\t\t\t[\"diamond\",4,\"shan\"],\r\n\t\t\t[\"diamond\",5,\"shan\"],\r\n\t\t\t[\"diamond\",6,\"shan\"],\r\n\t\t\t[\"diamond\",7,\"shan\"],\r\n\t\t\t[\"diamond\",8,\"shan\"],\r\n\t\t\t[\"diamond\",9,\"shan\"],\r\n\t\t\t[\"diamond\",10,\"shan\"],\r\n\t\t\t[\"diamond\",11,\"shan\"],\r\n\t\t\t[\"diamond\",11,\"shan\"],\r\n\t\t\t[\"heart\",3,\"tao\"],\r\n\t\t\t[\"heart\",4,\"tao\"],\r\n\t\t\t[\"heart\",6,\"tao\"],\r\n\t\t\t[\"heart\",7,\"tao\"],\r\n\t\t\t[\"heart\",8,\"tao\"],\r\n\t\t\t[\"heart\",9,\"tao\"],\r\n\t\t\t[\"heart\",12,\"tao\"],\r\n\t\t\t[\"diamond\",12,\"tao\"],\r\n\r\n\t\t\t[\"spade\",2,\"bagua\"],\r\n\t\t\t[\"club\",2,\"bagua\"],\r\n\t\t\t[\"spade\",5,\"jueying\"],\r\n\t\t\t[\"club\",5,\"dilu\"],\r\n\t\t\t[\"heart\",13,\"zhuahuang\"],\r\n\t\t\t[\"heart\",5,\"chitu\"],\r\n\t\t\t[\"spade\",13,\"dawan\"],\r\n\t\t\t[\"diamond\",13,\"zixin\"],\r\n\t\t\t[\"club\",1,\"zhuge\"],\r\n\t\t\t[\"diamond\",1,\"zhuge\"],\r\n\t\t\t[\"spade\",2,\"cixiong\"],\r\n\t\t\t[\"spade\",6,\"qinggang\"],\r\n\t\t\t[\"spade\",5,\"qinglong\"],\r\n\t\t\t[\"spade\",12,\"zhangba\"],\r\n\t\t\t[\"diamond\",5,\"guanshi\"],\r\n\t\t\t[\"diamond\",12,\"fangtian\"],\r\n\t\t\t[\"heart\",5,\"qilin\"],\r\n\r\n\t\t\t[\"heart\",3,\"wugu\"],\r\n\t\t\t[\"heart\",4,\"wugu\"],\r\n\t\t\t[\"heart\",1,\"taoyuan\"],\r\n\t\t\t[\"spade\",7,\"nanman\"],\r\n\t\t\t[\"spade\",13,\"nanman\"],\r\n\t\t\t[\"club\",7,\"nanman\"],\r\n\t\t\t[\"heart\",1,\"wanjian\"],\r\n\t\t\t[\"spade\",1,\"juedou\"],\r\n\t\t\t[\"club\",1,\"juedou\"],\r\n\t\t\t[\"diamond\",1,\"juedou\"],\r\n\t\t\t[\"heart\",7,\"wuzhong\"],\r\n\t\t\t[\"heart\",8,\"wuzhong\"],\r\n\t\t\t[\"heart\",9,\"wuzhong\"],\r\n\t\t\t[\"heart\",11,\"wuzhong\"],\r\n\t\t\t[\"spade\",3,'shunshou'],\r\n\t\t\t[\"spade\",4,'shunshou'],\r\n\t\t\t[\"spade\",11,'shunshou'],\r\n\t\t\t[\"diamond\",3,'shunshou'],\r\n\t\t\t[\"diamond\",4,'shunshou'],\r\n\t\t\t[\"spade\",3,'guohe'],\r\n\t\t\t[\"spade\",4,'guohe'],\r\n\t\t\t[\"spade\",12,'guohe'],\r\n\t\t\t[\"club\",3,'guohe'],\r\n\t\t\t[\"club\",4,'guohe'],\r\n\t\t\t[\"heart\",12,'guohe'],\r\n\t\t\t[\"club\",12,'jiedao'],\r\n\t\t\t[\"club\",13,'jiedao'],\r\n\t\t\t[\"spade\",11,'wuxie'],\r\n\t\t\t[\"club\",12,'wuxie'],\r\n\t\t\t[\"club\",13,'wuxie'],\r\n\t\t\t[\"spade\",6,'lebu'],\r\n\t\t\t[\"club\",6,'lebu'],\r\n\t\t\t[\"heart\",6,'lebu'],\r\n\t\t\t[\"spade\",1,'shandian'],\r\n\t\t\t[\"spade\",2,'hanbing'],\r\n\t\t\t[\"club\",2,'renwang'],\r\n\t\t\t[\"heart\",12,'shandian'],\r\n\t\t\t[\"diamond\",12,'wuxie'],\r\n\t\t],\r\n\t};\r\n});\r\n\n\n//# sourceURL=webpack:///./card/standard.js?")},"./card/xingtian.js":()=>{eval("\r\ngame.import('card',function(lib,game,ui,get,ai,_status){\r\n\treturn {\r\n\t\tname:'xingtian',\r\n\t\tconnect:true,\r\n\t\tcard:{\r\n\t\t},\r\n\t\tskill:{\r\n\t\t},\r\n\t\ttranslate:{\r\n\t\t},\r\n\t\tlist:[\r\n\r\n\t\t],\r\n\t\thelp:{\r\n\t\t\t'星天篇':('<div style=\"margin:10px\">升阶</div><ul style=\"margin-top:0\">'+\r\n\t\t\t'<li>每一张★牌均标注有对应素材；一名角色可以{指定}任意其满足条件的牌为升阶素材，将对应一张点数为14的★牌加入手牌，以此获得★牌的方法称为“升阶”。'+\r\n\t\t\t'<br><li>一名角色每个出牌阶段限一次，其可以{指定}自己的手牌并置将之入弃牌堆，进行一次升阶。'+\r\n\t\t\t'<br><li>{指定}牌这个行动并非可以随时进行，必需在执行效果时指定，并且，在此效果描述范围之内的任意牌均可以被指定</ul></ul>'),\r\n\t\t},\r\n\t}\r\n});\n\n//# sourceURL=webpack:///./card/xingtian.js?")},"./card/yingbian.js":()=>{eval("\r\ngame.import('card',function(lib,game,ui,get,ai,_status){\r\n\treturn {\r\n\t\tname:'yingbian',\r\n\t\tconnect:true,\r\n\t\tcard:{\r\n\t\t\tsuijiyingbian:{\r\n\t\t\t\tglobal:'suijiyingbian_skill',\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t},\r\n\t\t\tzhujinqiyuan:{\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player&&target.countCards('hej')>0;\r\n\t\t\t\t},\r\n\t\t\t\tyingbian_prompt:function(card){\r\n\t\t\t\t\tvar str='';\r\n\t\t\t\t\tif(get.cardtag(card,'yingbian_all')){\r\n\t\t\t\t\t\tstr+='此牌的效果改为依次执行所有选项';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(get.cardtag(card,'yingbian_hit')){\r\n\t\t\t\t\t\tif(str.length) str+='；';\r\n\t\t\t\t\t\tstr+='此牌不可被响应';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!str.length||get.cardtag(card,'yingbian_add')){\r\n\t\t\t\t\t\tif(str.length) str+='；';\r\n\t\t\t\t\t\tstr+='当你使用此牌选择目标后，你可为此牌增加一个目标';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t},\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tvar card=event.card,bool=false;\r\n\t\t\t\t\tif(get.cardtag(card,'yingbian_all')){\r\n\t\t\t\t\t\tbool=true;\r\n\t\t\t\t\t\tcard.yingbian_all=true;\r\n\t\t\t\t\t\tgame.log(card,'执行所有选项');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(get.cardtag(card,'yingbian_hit')){\r\n\t\t\t\t\t\tbool=true;\r\n\t\t\t\t\t\tevent.directHit.addArray(game.players);\r\n\t\t\t\t\t\tgame.log(card,'不可被响应');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!bool||get.cardtag(card,'yingbian_add')){\r\n\t\t\t\t\t\tevent.yingbian_addTarget=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar dist=get.distance(player,target);\r\n\t\t\t\t\tif(dist>1||card.yingbian_all) player.discardPlayerCard(target,'hej',true);\r\n\t\t\t\t\tif(dist<=1||card.yingbian_all) player.gainPlayerCard(target,'hej',true);\r\n\t\t\t\t},\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tpostAi:function(targets){\r\n\t\t\t\t\treturn targets.length==1&&targets[0].countCards('j');\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(target,card,player,viewer){\r\n\t\t\t\t\t\tif(get.attitude(viewer,player)>0&&get.attitude(viewer,target)>0){\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyingbian:function(card,player,targets,viewer){\r\n\t\t\t\t\t\tif(get.attitude(viewer,player)<=0) return 0;\r\n\t\t\t\t\t\tvar base=0;\r\n\t\t\t\t\t\tif(get.cardtag(card,'yingbian_all')){\r\n\t\t\t\t\t\t\tif(targets.filter(function(current){\r\n\t\t\t\t\t\t\t\tvar att=get.attitude(player,current);\r\n\t\t\t\t\t\t\t\tif(att<=0) return current.countCards('he',function(card){\r\n\t\t\t\t\t\t\t\t\treturn get.value(card,current)>0;\r\n\t\t\t\t\t\t\t\t})>1;\r\n\t\t\t\t\t\t\t\treturn current.countCards('ej',function(card){\r\n\t\t\t\t\t\t\t\t\treturn get.position(card)=='j'||get.value(card,current)<=0;\r\n\t\t\t\t\t\t\t\t})>1;\r\n\t\t\t\t\t\t\t}).length) base+=6;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(get.cardtag(card,'yingbian_add')){\r\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn !targets.contains(current)&&lib.filter.targetEnabled2(card,player,current)&&get.effect(current,card,player,player)>0;\r\n\t\t\t\t\t\t\t})) base+=5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(get.cardtag(card,'yingbian_hit')){\r\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\t\treturn get.attitude(current,player)<0&&current.hasWuxie();\r\n\t\t\t\t\t\t\t})) base+=3*targets.length;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn base;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:7.5,\r\n\t\t\t\t\t\tuseful:4,\r\n\t\t\t\t\t\tvalue:9\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar discard=get.distance(player,target)>1;\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0) return (target.countCards('he',function(card){\r\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&(discard||card!=target.getEquip('jinhe'));\r\n\t\t\t\t\t\t\t})>0)?-1.5:1.5;\r\n\t\t\t\t\t\t\tvar js=target.getCards('j');\r\n\t\t\t\t\t\t\tif(js.length){\r\n\t\t\t\t\t\t\t\tvar jj=js[0].viewAs?{name:js[0].viewAs}:js[0];\r\n\t\t\t\t\t\t\t\tif(js.length==1&&get.effect(target,jj,target,player)>=0){\r\n\t\t\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn -1.5;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tplayer:function(player,target){\r\n\t\t\t\t\t\t\tif(get.distance(player,target)>1) return 0;\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0&&!target.countCards('he',function(card){\r\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&card!=target.getEquip('jinhe');\r\n\t\t\t\t\t\t\t})){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(get.attitude(player,target)>1){\r\n\t\t\t\t\t\t\t\tvar js=target.getCards('j');\r\n\t\t\t\t\t\t\t\tif(js.length){\r\n\t\t\t\t\t\t\t\t\tvar jj=js[0].viewAs?{name:js[0].viewAs}:js[0];\r\n\t\t\t\t\t\t\t\t\tif(js.length==1&&get.effect(target,jj,target,player)>=0){\r\n\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tgain:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tdongzhuxianji:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\ttoself:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target==player;\r\n\t\t\t\t},\r\n\t\t\t\tmodTarget:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttarget.chooseToGuanxing(2);\r\n\t\t\t\t\ttarget.draw(2);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:7.2,\r\n\t\t\t\t\t\tuseful:4.5,\r\n\t\t\t\t\t\tvalue:9.2\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:2.1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdraw:2\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchuqibuyi:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tenable:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\r\n\t\t\t\t},\r\n\t\t\t\tyingbian_prompt:'当你使用此牌选择目标后，你可为此牌增加一个目标',\r\n\t\t\t\tyingbian:function(event){\r\n\t\t\t\t\tevent.yingbian_addTarget=true;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(player.isDead()||!target.countCards('h')){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplayer.choosePlayerCard(target,'h',true);\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\ttarget.showCards(result.cards);\r\n\t\t\t\t\t\tif(get.suit(card)!=get.suit(result.cards[0])) target.damage(event.baseDamage||1);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:5,\r\n\t\t\t\t\t\tuseful:2,\r\n\t\t\t\t\t\tvalue:6\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyingbian:function(card,player,targets,viewer){\r\n\t\t\t\t\t\tif(get.attitude(viewer,player)<=0) return 0;\r\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\r\n\t\t\t\t\t\t\treturn !targets.contains(current)&&lib.filter.targetEnabled2(card,player,current)&&get.effect(current,card,player,player)>0;\r\n\t\t\t\t\t\t})) return 6;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target,cardx){\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('viewHandcard',null,target,true)) return target.countCards('h',function(card){\r\n\t\t\t\t\t\t\t\treturn get.suit(card)!=get.suit(cardx)\r\n\t\t\t\t\t\t\t})>0?-1.5:0;\r\n\t\t\t\t\t\t\treturn -1.4;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twuxinghelingshan:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-3},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['wuxinghelingshan_skill']\r\n\t\t\t},\r\n\t\t\twutiesuolian:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['wutiesuolian_skill']\r\n\t\t\t},\r\n\t\t\theiguangkai:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:2\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['heiguangkai_skill'],\r\n\t\t\t},\r\n\t\t\ttongque:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip5',\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:6.5\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['tongque_skill']\r\n\t\t\t},\r\n\t\t\ttianjitu:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip5',\r\n\t\t\t\tloseDelay:false,\r\n\t\t\t\tonEquip:function(){\r\n\t\t\t\t\tif(player.countCards('he',function(cardx){\r\n\t\t\t\t\t\treturn cardx!=card;\r\n\t\t\t\t\t})>0){\r\n\t\t\t\t\t\tplayer.logSkill('tianjitu');\r\n\t\t\t\t\t\tplayer.chooseToDiscard(true,function(cardx){\r\n\t\t\t\t\t\t\treturn cardx!=_status.event.card;\r\n\t\t\t\t\t\t},'he').set('card',card);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tonLose:function(){\r\n\t\t\t\t\tvar next=game.createEvent('tianjitu_lose');\r\n\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\tvar evt=event.getParent();\r\n\t\t\t\t\tif(evt.getlx===false) evt=evt.getParent();\r\n\t\t\t\t\tevt.after.push(next);\r\n\t\t\t\t\tnext.player=player;\r\n\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\tif(player.countCards('h')<5){\r\n\t\t\t\t\t\t\tplayer.logSkill('tianjitu');\r\n\t\t\t\t\t\t\tplayer.drawTo(5);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tvalue:function(card,player){\r\n\t\t\t\t\t\tif(player.countCards('h')>3||get.position(card)!='e') return 0.5;\r\n\t\t\t\t\t\treturn (player.countCards('h')-5)/3;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.countCards('h')>3||get.position(card)!='e') return 0.5;\r\n\t\t\t\t\t\treturn (player.countCards('h')-5)/3;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:0.5\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttaigongyinfu:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip5',\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:3\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tskills:['taigongyinfu_skill','taigongyinfu_link'],\r\n\t\t\t},\r\n\t\t},\r\n\t\tskill:{\r\n\t\t\tsuijiyingbian_skill:{\r\n\t\t\t\tmod:{\r\n\t\t\t\t\tcardname:function(card,player){\r\n\t\t\t\t\t\tif(card.name=='suijiyingbian'&&player.storage.suijiyingbian) return player.storage.suijiyingbian;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcardnature:function(card,player){\r\n\t\t\t\t\t\tif(card.name=='suijiyingbian'&&player.storage.suijiyingbian_nature) return player.storage.suijiyingbian_nature;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\tplayer:['useCard1','respond'],\r\n\t\t\t\t\tglobal:'phaseBeginStart',\r\n\t\t\t\t},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tfirstDo:true,\r\n\t\t\t\tfilter:function(event,player,name){\r\n\t\t\t\t\tif(name=='phaseBeginStart') return true;\r\n\t\t\t\t\tvar type=get.type(event.card);\r\n\t\t\t\t\treturn type=='basic'||type=='trick';\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(event.triggername=='phaseBeginStart'){\r\n\t\t\t\t\t\tdelete player.storage.suijiyingbian;\r\n\t\t\t\t\t\tdelete player.storage.suijiyingbian_nature;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tplayer.storage.suijiyingbian=trigger.card.name;\r\n\t\t\t\t\t\tplayer.storage.suijiyingbian_nature=trigger.card.nature;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\twuxinghelingshan_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{player:'useCard1'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn (event.card.name=='sha'&&event.card.nature&&event.card.nature!='kami');\r\n\t\t\t\t},\r\n\t\t\t\taudio:true,\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tvar list=lib.linked.slice(0);\r\n\t\t\t\t\tlist.remove('kami');\r\n\t\t\t\t\tlist.remove(trigger.card.nature);\r\n\t\t\t\t\tlist.push('cancel2');\r\n\t\t\t\t\tplayer.chooseControl(list).set('prompt',get.prompt('wuxinghelingshan_skill')).set('prompt2','将'+get.translation(trigger.card)+'转换为以下属性之一');\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.control!='cancel2'){\r\n\t\t\t\t\t\tplayer.logSkill('wuxinghelingshan_skill');\r\n\t\t\t\t\t\ttrigger.card.nature=result.control;\r\n\t\t\t\t\t\tplayer.popup(get.translation(result.control)+'杀',result.control);\r\n\t\t\t\t\t\tgame.log(trigger.card,'被转为了','#y'+get.translation(result.control),'属性')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twutiesuolian_skill:{\r\n\t\t\t\ttrigger:{player:'useCardToPlayered'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn event.card.name=='sha'&&(!event.target.isLinked()||event.target.countCards('h'));\r\n\t\t\t\t},\r\n\t\t\t\tlogTarget:'target',\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar target=trigger.target;\r\n\t\t\t\t\tif(!target.isLinked()) target.link();\r\n\t\t\t\t\telse player.viewHandcards(target);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\theiguangkai_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\ttrigger:{target:'useCardToTargeted'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.targets.length<2||(event.card.name!='sha'&&(get.type(event.card)!='trick'||get.color(event.card)!='black'))) return false;\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.excluded.add(player);\r\n\t\t\t\t},\r\n\t\t\t\tglobal:'heiguangkai_ai',\r\n\t\t\t},\r\n\t\t\ttongque_skill:{\r\n\t\t\t\ttrigger:{player:'useCard1'},\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn !event.card.yingbian&&get.is.yingbian(event.card)&&player.getHistory('useCard',function(evt){\r\n\t\t\t\t\t\treturn get.is.yingbian(evt.card)\r\n\t\t\t\t\t}).indexOf(event)==0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.card.yingbian=true;\r\n\t\t\t\t\tvar info=get.info(trigger.card);\r\n\t\t\t\t\tif(info&&info.yingbian) info.yingbian(trigger);\r\n\t\t\t\t\tplayer.addTempSkill('yingbian_changeTarget');\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttianjitu_skill:{\r\n\t\t\t\taudio:true,\r\n\t\t\t},\r\n\t\t\ttaigongyinfu_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\taudio:true,\r\n\t\t\t\ttrigger:{player:'phaseUseEnd'},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn player.countCards('h')>0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tplayer.chooseCard('h','是否发动【贝琳】重铸一张手牌？').set('ai',function(card){\r\n\t\t\t\t\t\treturn 5-get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tplayer.logSkill('taigongyinfu_skill');\r\n\t\t\t\t\t\tplayer.lose(result.cards,ui.discardPile,'visible');\r\n\t\t\t\t\t\tplayer.$throw(result.cards,1000);\r\n\t\t\t\t\t\tgame.log(player,'将',result.cards,'置入了弃牌堆');\r\n\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttaigongyinfu_link:{\r\n\t\t\t\taudio:'taigongyinfu_skill',\r\n\t\t\t\ttrigger:{player:'phaseUseBegin'},\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\t// filter:function(event,player){\r\n\t\t\t\t// \treturn game.hasPlayer(function(current){\r\n\t\t\t\t// \t\treturn !current.isLinked();\r\n\t\t\t\t// \t});\r\n\t\t\t\t// },\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tplayer.chooseTarget(\r\n\t\t\t\t\t\t// function(card,player,target){\r\n\t\t\t\t\t\t// \treturn !target.isLinked();\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t'是否发动【贝琳】横置一名角色？').set('ai',function(target){\r\n\t\t\t\t\t\treturn get.effect(target,{name:'tiesuo'},_status.event.player,_status.event.player);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tvar target=result.targets[0];\r\n\t\t\t\t\t\tplayer.logSkill('taigongyinfu_link',target);\r\n\t\t\t\t\t\ttarget.link();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\texpose:0.2,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\theiguangkai_ai:{\r\n\t\t\t\tai:{\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\tplayer:function(card,player,target){\r\n\t\t\t\t\t\t\tif(typeof card!='object'||!target||get.name(card)!='sha'&&(get.type(card)!='trick'||get.color(card)!='black')) return;\r\n\t\t\t\t\t\t\tvar info=get.info(card);\r\n\t\t\t\t\t\t\tvar targets=[];\r\n\t\t\t\t\t\t\ttargets.addArray(ui.selected.targets);\r\n\t\t\t\t\t\t\tvar evt=_status.event.getParent('useCard');\r\n\t\t\t\t\t\t\tif(evt&&evt.card==card) targets.addArray(evt.targets);\r\n\t\t\t\t\t\t\tif(targets.length){\r\n\t\t\t\t\t\t\t\tif(!targets.contains(target)){\r\n\t\t\t\t\t\t\t\t\tif(target.hasSkill('heiguangkai_skill')&&!target.hasSkillTag('unequip2')&&!player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t\t\t})&&!player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t\t\t})) return 'zerotarget';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tif(targets.length>1) return;\r\n\t\t\t\t\t\t\t\t\tif(info.selectTarget!=-1&&targets[0].hasSkill('heiguangkai_skill')&&!targets[0].hasSkillTag('unequip2')&&!player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\t\t\ttarget:targets[0],\r\n\t\t\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t\t\t})&&!player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\t\t\ttarget:targets[0],\r\n\t\t\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t\t\t})) return 'zerotarget';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(target.hasSkill('heiguangkai_skill')&&!target.hasSkillTag('unequip2')&&!player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t})&&!player.hasSkillTag('unequip_ai',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:target,\r\n\t\t\t\t\t\t\t\tcard:card,\r\n\t\t\t\t\t\t\t})) return [1,0,0.7,0];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttranslate:{\r\n\t\t\tsuijiyingbian:'随机应变',\r\n\t\t\tsuijiyingbian_info:'此牌的牌名视为你本回合内使用或打出的上一张基本牌或普通锦囊牌的牌名。',\r\n\t\t\tzhujinqiyuan:'逐近弃远',\r\n\t\t\tzhujinqiyuan_info:'出牌阶段，对一名有牌的其他角色使用。若你与其距离的大于1，你弃置其区域内的一张牌；若你与其的距离等于1，你获得其区域内的一张牌。',\r\n\t\t\tdongzhuxianji:'洞烛先机',\r\n\t\t\tdongzhuxianji_info:'出牌阶段，对包含你在内的一名角色使用。你观看牌堆顶的两张牌并将其以任意顺序置于牌堆顶或牌堆底，然后摸两张牌。',\r\n\t\t\tchuqibuyi:'出其不意',\r\n\t\t\tchuqibuyi_info:'出牌阶段，对一名有手牌的其他角色使用。你展示其一张手牌，若此牌与【出其不意】的花色不同，则你对其造成1点伤害。',\r\n\t\t\twuxinghelingshan:'龙头二胡',\r\n\t\t\twuxinghelingshan_skill:'龙头二胡',\r\n\t\t\twuxinghelingshan_info:'当你声明使用不为神属性的属性【杀】时，你可将此【杀】的属性改为不为神属性的其他属性。',\r\n\t\t\twutiesuolian:'强盗衣装',\r\n\t\t\twutiesuolian_skill:'强盗衣装',\r\n\t\t\twutiesuolian_info:'锁定技，当你使用【杀】指定目标后，若其：已横置，你观看其手牌。未横置，其横置。',\r\n\t\t\theiguangkai:'阻燃服',\r\n\t\t\theiguangkai_skill:'阻燃服',\r\n\t\t\theiguangkai_info:'锁定技，当你成为【杀】或黑色普通锦囊牌的目标后，若此牌的目标数大于1，则你令此牌对你无效。',\r\n\t\t\ttongque:'缪缪教授',\r\n\t\t\ttongque_skill:'缪缪',\r\n\t\t\ttongque_info:'锁定技，你于一回合内使用的第一张带有【应变】效果的牌无视条件直接生效。',\r\n\t\t\ttianjitu:'大头菜',\r\n\t\t\ttianjitu_skill:'大头菜',\r\n\t\t\ttianjitu_info:'锁定技，当此牌进入你的装备区时，你弃置一张不为此【大头菜】的牌。当此牌离开你的装备区后，你将手牌摸至五张。',\r\n\t\t\ttaigongyinfu:'贝琳',\r\n\t\t\ttaigongyinfu_info:'出牌阶段开始时，你可以横置或重置一名角色。出牌阶段结束时，你可以重铸一张手牌。',\r\n\t\t\ttaigongyinfu_skill:'贝琳',\r\n\t\t\ttaigongyinfu_link:'贝琳',\r\n\t\t\tyingbian_zhuzhan_tag:'助战',\r\n\t\t\tyingbian_kongchao_tag:'空巢',\r\n\t\t\tyingbian_fujia_tag:'富甲',\r\n\t\t\tyingbian_canqu_tag:'残躯',\r\n\t\t\t_yingbian:'应变',\r\n\t\t\tyingbian_changeTarget:'应变',\r\n\t\t\tyingbian_add_tag:'(目标+)',\r\n\t\t\tyingbian_remove_tag:'(目标-)',\r\n\t\t\tyingbian_draw_tag:'(摸牌)',\r\n\t\t\tyingbian_all_tag:'(双项)',\r\n\t\t\tyingbian_hit_tag:'(强命)',\r\n\t\t\tyingbian_gain_tag:'(反甲)',\r\n\t\t\tyingbian_damage_tag:'(伤害+)',\r\n\t\t},\r\n\t\tlist:[\r\n\t\t\t['spade',1,'juedou'],\r\n\t\t\t['spade',1,'taigongyinfu'],\r\n\t\t\t['spade',1,'guding'],\r\n\t\t\t['spade',2,'cixiong'],\r\n\t\t\t['spade',2,'bagua'],\r\n\t\t\t['spade',2,'tengjia'],\r\n\t\t\t['spade',2,'suijiyingbian'],\r\n\t\t\t['spade',3,'jiu'],\r\n\t\t\t['spade',3,'zhujinqiyuan'],\r\n\t\t\t['spade',3,'shuiyanqijunx',null,['yingbian_zhuzhan','yingbian_add']],\r\n\t\t\t['spade',4,'sha','thunder'],\r\n\t\t\t['spade',4,'guohe'],\r\n\t\t\t['spade',4,'shuiyanqijunx',null,['yingbian_zhuzhan','yingbian_add']],\r\n\t\t\t['spade',5,'sha','thunder'],\r\n\t\t\t['spade',5,'qinglong'],\r\n\t\t\t['spade',5,'jueying'],\r\n\t\t\t['spade',6,'sha','thunder'],\r\n\t\t\t['spade',6,'lebu'],\r\n\t\t\t['spade',6,'qinggang'],\r\n\t\t\t['spade',7,'sha','ice'],\r\n\t\t\t['spade',7,'sha','ice'],\r\n\t\t\t['spade',7,'nanman',null,['yingbian_fujia','yingbian_remove']],\r\n\t\t\t['spade',8,'sha','ice'],\r\n\t\t\t['spade',8,'sha','ice'],\r\n\t\t\t['spade',8,'sha','ice'],\r\n\t\t\t['spade',9,'sha',null,['yingbian_canqu','yingbian_add']],\r\n\t\t\t['spade',9,'sha',null,['yingbian_canqu','yingbian_add']],\r\n\t\t\t['spade',9,'jiu'],\r\n\t\t\t['spade',10,'sha'],\r\n\t\t\t['spade',10,'sha',null,['yingbian_zhuzhan','yingbian_add']],\r\n\t\t\t['spade',10,'bingliang'],\r\n\t\t\t['spade',11,'wuxie'],\r\n\t\t\t['spade',11,'shunshou'],\r\n\t\t\t['spade',11,'tiesuo'],\r\n\t\t\t['spade',12,'zhujinqiyuan',null,['yingbian_zhuzhan','yingbian_hit']],\r\n\t\t\t['spade',12,'tiesuo'],\r\n\t\t\t['spade',12,'zhangba'],\r\n\t\t\t['spade',13,'wuxie',null,['yingbian_kongchao','yingbian_draw']],\r\n\t\t\t['spade',13,'nanman',null,['yingbian_fujia','yingbian_remove']],\r\n\t\t\t['spade',13,'dawan'],\r\n\t\t\t\r\n\t\t\t['heart',1,'taoyuan',null,['yingbian_fujia','yingbian_remove']],\r\n\t\t\t['heart',1,'wanjian',null,['yingbian_fujia','yingbian_remove']],\r\n\t\t\t['heart',1,'wuxie'],\r\n\t\t\t['heart',2,'shan',null,['yingbian_kongchao','yingbian_draw']],\r\n\t\t\t['heart',2,'shan',null,['yingbian_kongchao','yingbian_draw']],\r\n\t\t\t['heart',2,'guohe',null,['yingbian_zhuzhan','yingbian_add']],\r\n\t\t\t['heart',3,'wugu'],\r\n\t\t\t['heart',3,'tao'],\r\n\t\t\t['heart',3,'chuqibuyi'],\r\n\t\t\t['heart',4,'sha','fire'],\r\n\t\t\t['heart',4,'tao'],\r\n\t\t\t['heart',4,'wugu'],\r\n\t\t\t['heart',5,'chitu'],\r\n\t\t\t['heart',5,'tao'],\r\n\t\t\t['heart',5,'qilin'],\r\n\t\t\t['heart',6,'tao'],\r\n\t\t\t['heart',6,'tao'],\r\n\t\t\t['heart',6,'lebu'],\r\n\t\t\t['heart',7,'sha','fire'],\r\n\t\t\t['heart',7,'tao'],\r\n\t\t\t['heart',7,'dongzhuxianji'],\r\n\t\t\t['heart',8,'tao'],\r\n\t\t\t['heart',8,'shan'],\r\n\t\t\t['heart',8,'dongzhuxianji'],\r\n\t\t\t['heart',9,'tao'],\r\n\t\t\t['heart',9,'shan'],\r\n\t\t\t['heart',9,'dongzhuxianji'],\r\n\t\t\t['heart',10,'sha','fire',['yingbian_kongchao','yingbian_damage']],\r\n\t\t\t['heart',10,'sha'],\r\n\t\t\t['heart',10,'sha'],\r\n\t\t\t['heart',11,'sha'],\r\n\t\t\t['heart',11,'shan'],\r\n\t\t\t['heart',11,'dongzhuxianji'],\r\n\t\t\t['heart',12,'tao'],\r\n\t\t\t['heart',12,'shan'],\r\n\t\t\t['heart',12,'guohe'],\r\n\t\t\t['heart',12,'shandian'],\r\n\t\t\t['heart',13,'wuxie',null,['yingbian_kongchao','yingbian_gain']],\r\n\t\t\t['heart',13,'shan'],\r\n\t\t\t['heart',13,'zhuahuang'],\r\n\t\t\t\r\n\t\t\t['club',1,'juedou'],\r\n\t\t\t['club',1,'zhuge'],\r\n\t\t\t['club',1,'huxinjing'],\r\n\t\t\t['club',2,'sha',null,['yingbian_kongchao','yingbian_add']],\r\n\t\t\t['club',2,'heiguangkai'],\r\n\t\t\t['club',2,'tengjia'],\r\n\t\t\t['club',2,'renwang'],\r\n\t\t\t['club',3,'sha',null,['yingbian_kongchao','yingbian_add']],\r\n\t\t\t['club',3,'jiu'],\r\n\t\t\t['club',3,'zhujinqiyuan',null,['yingbian_zhuzhan','yingbian_add']],\r\n\t\t\t['club',4,'sha',null,['yingbian_kongchao','yingbian_add']],\r\n\t\t\t['club',4,'bingliang'],\r\n\t\t\t['club',4,'zhujinqiyuan',null,['yingbian_zhuzhan','yingbian_add']],\r\n\t\t\t['club',5,'sha'],\r\n\t\t\t['club',5,'sha','thunder'],\r\n\t\t\t['club',5,'dilu'],\r\n\t\t\t['club',6,'sha'],\r\n\t\t\t['club',6,'sha','thunder'],\r\n\t\t\t['club',6,'lebu'],\r\n\t\t\t['club',7,'sha'],\r\n\t\t\t['club',7,'sha','thunder'],\r\n\t\t\t['club',7,'nanman',null,['yingbian_fujia','yingbian_remove']],\r\n\t\t\t['club',8,'sha'],\r\n\t\t\t['club',8,'sha','thunder'],\r\n\t\t\t['club',8,'sha'],\r\n\t\t\t['club',9,'sha','thunder'],\r\n\t\t\t['club',9,'sha','thunder'],\r\n\t\t\t['club',9,'jiu'],\r\n\t\t\t['club',10,'sha','thunder'],\r\n\t\t\t['club',10,'sha','thunder'],\r\n\t\t\t['club',10,'tiesuo'],\r\n\t\t\t['club',11,'sha'],\r\n\t\t\t['club',11,'sha',null,['yingbian_canqu','yingbian_add']],\r\n\t\t\t['club',11,'tiesuo'],\r\n\t\t\t['club',12,'wuxie'],\r\n\t\t\t['club',12,'tianjitu'],\r\n\t\t\t['club',12,'tiesuo'],\r\n\t\t\t['club',13,'wuxie',null,['yingbian_canqu','yingbian_draw']],\r\n\t\t\t['club',13,'tongque'],\r\n\t\t\t['club',13,'tiesuo'],\r\n\t\t\t\r\n\t\t\t['diamond',1,'juedou'],\r\n\t\t\t['diamond',1,'zhuge'],\r\n\t\t\t['diamond',1,'wuxinghelingshan'],\r\n\t\t\t['diamond',2,'tao'],\r\n\t\t\t['diamond',2,'shan',null,['yingbian_kongchao','yingbian_draw']],\r\n\t\t\t['diamond',2,'shan',null,['yingbian_kongchao','yingbian_draw']],\r\n\t\t\t['diamond',3,'tao'],\r\n\t\t\t['diamond',3,'shan'],\r\n\t\t\t['diamond',3,'shunshou'],\r\n\t\t\t['diamond',4,'sha','fire',['yingbian_kongchao','yingbian_damage']],\r\n\t\t\t['diamond',4,'shan',null,['yingbian_canqu','yingbian_gain']],\r\n\t\t\t['diamond',4,'shunshou'],\r\n\t\t\t['diamond',5,'sha','fire'],\r\n\t\t\t['diamond',5,'shan'],\r\n\t\t\t['diamond',5,'guanshi'],\r\n\t\t\t['diamond',6,'sha'],\r\n\t\t\t['diamond',6,'shan'],\r\n\t\t\t['diamond',6,'shan'],\r\n\t\t\t['diamond',7,'sha'],\r\n\t\t\t['diamond',7,'shan'],\r\n\t\t\t['diamond',7,'shan'],\r\n\t\t\t['diamond',8,'sha',null,['yingbian_canqu','yingbian_hit']],\r\n\t\t\t['diamond',8,'shan'],\r\n\t\t\t['diamond',8,'shan'],\r\n\t\t\t['diamond',9,'sha'],\r\n\t\t\t['diamond',9,'shan'],\r\n\t\t\t['diamond',9,'jiu'],\r\n\t\t\t['diamond',10,'sha','fire'],\r\n\t\t\t['diamond',10,'shan'],\r\n\t\t\t['diamond',10,'shan'],\r\n\t\t\t['diamond',11,'shan'],\r\n\t\t\t['diamond',11,'shan'],\r\n\t\t\t['diamond',11,'shan'],\r\n\t\t\t['diamond',12,'tao'],\r\n\t\t\t['diamond',12,'chuqibuyi'],\r\n\t\t\t['diamond',12,'wutiesuolian'],\r\n\t\t\t['diamond',12,'wuxie'],\r\n\t\t\t['diamond',13,'sha'],\r\n\t\t\t['diamond',13,'zixin'],\r\n\t\t\t['diamond',13,'hualiu'],\r\n\t\t\t\r\n\t\t\t['diamond',5,'muniu'],\r\n\t\t],\r\n\t\thelp:{\r\n\t\t\t'应变篇':('<div style=\"margin:10px\">应变机制</div><ul style=\"margin-top:0\">'+\r\n\t\t\t'<li>当一名角色声明使用右下角标注了应变条件的卡牌后，若其满足应变条件，则其触发此牌的“应变”效果。<br><li>长按或鼠标右键点击卡牌，即可查看此牌所拥有的应变效果。'+\r\n\t\t\t'<br><li>应变条件<br><ul style=\"padding-left:20px;padding-top:5px\"><li>空巢：该角色声明使用此牌后，其手牌数为0。<br><li>富甲：该角色声明使用此牌后，其手牌数为全场最多或之一。<br><li>残躯：该角色声明使用此牌后，其体力值为1。<br><li>助战：该角色声明使用此牌后，其发起“助战”。其他角色可弃置一张与此牌类型相同的卡牌，响应此“助战”。若有角色响应，则视为其应变成功。</ul></ul>'),\r\n\t\t},\r\n\t}\r\n});\r\n\n\n//# sourceURL=webpack:///./card/yingbian.js?")},"./card/yunchou.js":()=>{eval("\r\ngame.import('card',function(lib,game,ui,get,ai,_status){\r\n\treturn {\r\n\t\tname:'yunchou',\r\n\t\tcard:{\r\n\t\t\tdiaobingqianjiang:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn player==target||target.countCards('h');\r\n\t\t\t\t},\r\n\t\t\t\tcontentBefore:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tgame.delay();\r\n\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(get.is.versus()){\r\n\t\t\t\t\t\tplayer.chooseControl('顺时针','逆时针',function(event,player){\r\n\t\t\t\t\t\t\tif(player.next.side==player.side) return '逆时针';\r\n\t\t\t\t\t\t\treturn '顺时针';\r\n\t\t\t\t\t\t}).set('prompt','选择'+get.translation(card)+'的结算方向');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.goto(3);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tif(result&&result.control=='顺时针'){\r\n\t\t\t\t\t\tvar evt=event.getParent();\r\n\t\t\t\t\t\tevt.fixedSeat=true;\r\n\t\t\t\t\t\tevt.targets.sortBySeat();\r\n\t\t\t\t\t\tevt.targets.reverse();\r\n\t\t\t\t\t\tif(evt.targets[evt.targets.length-1]==player){\r\n\t\t\t\t\t\t\tevt.targets.unshift(evt.targets.pop());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 3\"\r\n\t\t\t\t\tui.clear();\r\n\t\t\t\t\tvar cards=get.cards(Math.ceil(game.countPlayer()/2));\r\n\t\t\t\t\tvar dialog=ui.create.dialog('调兵遣将',cards,true);\r\n\t\t\t\t\t_status.dieClose.push(dialog);\r\n\t\t\t\t\tdialog.videoId=lib.status.videoId++;\r\n\t\t\t\t\tgame.addVideo('cardDialog',null,['调兵遣将',get.cardsInfo(cards),dialog.videoId]);\r\n\t\t\t\t\tevent.getParent().preResult=dialog.videoId;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tfor(var i=0;i<ui.dialogs.length;i++){\r\n\t\t\t\t\t\tif(ui.dialogs[i].videoId==event.preResult){\r\n\t\t\t\t\t\t\tevent.dialog=ui.dialogs[i];break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!event.dialog||!target.countCards('h')){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar minValue=20;\r\n\t\t\t\t\tvar hs=target.getCards('h');\r\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\r\n\t\t\t\t\t\tminValue=Math.min(minValue,get.value(hs[i],target));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(target.isUnderControl(true)){\r\n\t\t\t\t\t\tevent.dialog.setCaption('选择一张牌并用一张手牌替换之');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar next=target.chooseButton(function(button){\r\n\t\t\t\t\t\treturn get.value(button.link,_status.event.player)-minValue;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.set('dialog',event.preResult);\r\n\t\t\t\t\tnext.set('closeDialog',false);\r\n\t\t\t\t\tnext.set('dialogdisplay',true);\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tevent.dialog.setCaption('调兵遣将');\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tevent.button=result.buttons[0];\r\n\t\t\t\t\t\ttarget.chooseCard('用一张牌牌替换'+get.translation(result.links),true).ai=function(card){\r\n\t\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\ttarget.popup('不换');\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\ttarget.lose(result.cards,ui.special);\r\n\t\t\t\t\t\ttarget.$throw(result.cards);\r\n\r\n\t\t\t\t\t\tgame.log(target,'用',result.cards,'替换了',event.button.link);\r\n\t\t\t\t\t\ttarget.gain(event.button.link);\r\n\t\t\t\t\t\ttarget.$gain2(event.button.link);\r\n\t\t\t\t\t\tevent.dialog.buttons.remove(event.button);\r\n\t\t\t\t\t\tevent.dialog.buttons.push(ui.create.button(result.cards[0],'card',event.button.parentNode));\r\n\t\t\t\t\t\tevent.button.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 3\"\r\n\t\t\t\t\tgame.delay(2);\r\n\t\t\t\t},\r\n\t\t\t\tcontentAfter:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tevent.dialog=get.idDialog(event.preResult);\r\n\t\t\t\t\tif(!event.dialog){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar nextSeat=_status.currentPhase.next;\r\n\t\t\t\t\tvar att=get.attitude(player,nextSeat);\r\n\t\t\t\t\tif(player.isUnderControl(true)&&!_status.auto){\r\n\t\t\t\t\t\tevent.dialog.setCaption('将任意张牌以任意顺序置于牌堆顶（先选择的在上）');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar next=player.chooseButton([1,event.dialog.buttons.length],event.dialog);\r\n\t\t\t\t\tnext.ai=function(button){\r\n\t\t\t\t\t\tif(att>0){\r\n\t\t\t\t\t\t\treturn get.value(button.link,nextSeat)-5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\treturn 5-get.value(button.link,nextSeat);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnext.set('closeDialog',false);\r\n\t\t\t\t\tnext.set('dialogdisplay',true);\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result&&result.bool&&result.links&&result.links.length){\r\n\t\t\t\t\t\tfor(var i=0;i<result.buttons.length;i++){\r\n\t\t\t\t\t\t\tevent.dialog.buttons.remove(result.buttons[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cards=result.links.slice(0);\r\n\t\t\t\t\t\twhile(cards.length){\r\n\t\t\t\t\t\t\tui.cardPile.insertBefore(cards.pop(),ui.cardPile.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(result.links.length)+'张牌置于牌堆顶');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\r\n\t\t\t\t\t\tevent.dialog.buttons[i].link.discard();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tvar dialog=event.dialog;\r\n\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t_status.dieClose.remove(dialog);\r\n\t\t\t\t\tgame.addVideo('cardDialog',null,event.preResult);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(){\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:2,\r\n\t\t\t\t\t\tuseful:[3,1],\r\n\t\t\t\t\t\tvalue:[5,1]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:1,\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(target.countCards('h')==0) return 0;\r\n\t\t\t\t\t\t\treturn (Math.sqrt(target.countCards('h'))-get.distance(player,target,'absolute')/game.countPlayer()/3)/2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tmultitarget:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcaochuanjiejian:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.countCards('h')>0&&target!=player;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(target.countCards('h','sha')){\r\n\t\t\t\t\t\tvar name=get.translation(player.name);\r\n\t\t\t\t\t\ttarget.chooseControl().set('prompt',get.translation('caochuanjiejian')).set('choiceList',[\r\n\t\t\t\t\t\t\t'将手牌中的所有杀交给'+name+'，并视为对'+name+'使用一张杀','展示手牌并令'+name+'弃置任意一张'\r\n\t\t\t\t\t\t],function(){\r\n\t\t\t\t\t\t\tif(get.effect(player,{name:'sha'},target,target)<0) return 1;\r\n\t\t\t\t\t\t\tif(target.countCards('h','sha')>=3) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.directfalse=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(event.directfalse||result.control=='选项二'){\r\n\t\t\t\t\t\tif(target.countCards('h')){\r\n\t\t\t\t\t\t\tif(!player.isUnderControl(true)){\r\n\t\t\t\t\t\t\t\ttarget.showHandcards();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tgame.log(target,'展示了',target.getCards('h'));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.discardPlayerCard(target,'h',true,'visible');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar hs=target.getCards('h','sha');\r\n\t\t\t\t\t\tplayer.gain(hs,target);\r\n\t\t\t\t\t\ttarget.$give(hs,player);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\ttarget.useCard({name:'sha'},player);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:4,\r\n\t\t\t\t\tvalue:[5,1],\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(player.hasShan()) return -1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// xiaolicangdao:{\r\n\t\t\t// \tfullskin:true,\r\n\t\t\t// \ttype:'trick',\r\n\t\t\t// \tenable:true,\r\n\t\t\t// \tfilterTarget:function(card,player,target){\r\n\t\t\t// \t\treturn target!=player;\r\n\t\t\t// \t},\r\n\t\t\t// \tmultitarget:true,\r\n\t\t\t// \tcontent:function(){\r\n\t\t\t// \t\t'step 0'\r\n\t\t\t// \t\tif(cards&&cards.length){\r\n\t\t\t// \t\t\ttarget.gain(cards,player);\r\n\t\t\t// \t\t\ttarget.$gain2(cards);\r\n\t\t\t// \t\t\tif(cards.length==1){\r\n\t\t\t// \t\t\t\tevent.card1=cards[0];\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\t'step 1'\r\n\t\t\t// \t\tevent.card2=target.getCards('h').randomGet();\r\n\t\t\t// \t\tif(event.card2){\r\n\t\t\t// \t\t\ttarget.discard(event.card2);\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\telse{\r\n\t\t\t// \t\t\tevent.finish();\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\t'step 2'\r\n\t\t\t// \t\tif(event.card1&&event.card1.name==event.card2.name){\r\n\t\t\t// \t\t\ttarget.damage();\r\n\t\t\t// \t\t}\r\n\t\t\t// \t},\r\n\t\t\t// \tai:{\r\n\t\t\t// \t\torder:6,\r\n\t\t\t// \t\tvalue:[3,1],\r\n\t\t\t// \t\tresult:{\r\n\t\t\t// \t\t\ttarget:function(player,target){\r\n\t\t\t// \t\t\t\treturn -2/Math.sqrt(1+target.countCards('h'));\r\n\t\t\t// \t\t\t},\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\ttag:{\r\n\t\t\t// \t\t\tdamage:1,\r\n\t\t\t// \t\t\tdiscard:1,\r\n\t\t\t// \t\t\tloseCard:1,\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// },\r\n\t\t\tgeanguanhuo:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\tif(target==player) return false;\r\n\t\t\t\t\tif(!ui.selected.targets.length) return target.countCards('h')>0&&game.hasPlayer(function(current){\r\n\t\t\t\t\t\treturn target.canCompare(current);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn ui.selected.targets[0].canCompare(target);\r\n\t\t\t\t},\r\n\t\t\t\tenable:function(){\r\n\t\t\t\t\treturn game.countPlayer()>2;\r\n\t\t\t\t},\r\n\t\t\t\tchongzhu:function(){\r\n\t\t\t\t\treturn game.countPlayer()<=2;\r\n\t\t\t\t},\r\n\t\t\t\tmulticheck:function(card,player){\r\n\t\t\t\t\treturn game.countPlayer(function(current){\r\n\t\t\t\t\t\treturn current!=player&&current.countCards('h');\r\n\t\t\t\t\t})>1;\r\n\t\t\t\t},\r\n\t\t\t\tmultitarget:true,\r\n\t\t\t\tmultiline:true,\r\n\t\t\t\tsingleCard:true,\r\n\t\t\t\tcomplexSelect:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\ttarget.chooseToCompare(event.addedTarget);\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(!result.tie){\r\n\t\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\t\tif(event.addedTarget.countCards('he')){\r\n\t\t\t\t\t\t\t\ttarget.line(event.addedTarget);\r\n\t\t\t\t\t\t\t\ttarget.gainPlayerCard(event.addedTarget,true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tif(target.countCards('he')){\r\n\t\t\t\t\t\t\t\tevent.addedTarget.line(target);\r\n\t\t\t\t\t\t\t\tevent.addedTarget.gainPlayerCard(target,true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\ttarget.discardPlayerCard(player);\r\n\t\t\t\t\ttarget.line(player);\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:2,\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:5,\r\n\t\t\t\t\tvalue:[7,1],\r\n\t\t\t\t\tuseful:[4,1],\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshezhanqunru:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\ttoself:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target==player;\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tmodTarget:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\r\n\t\t\t\t\t\treturn current!=target&&target.canCompare(current);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(!list.length){\r\n\t\t\t\t\t\ttarget.draw(3);\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tlist.sortBySeat(target);\r\n\t\t\t\t\t\tevent.list=list;\r\n\t\t\t\t\t\tevent.torespond=[];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(event.list.length){\r\n\t\t\t\t\t\tevent.current=event.list.shift();\r\n\t\t\t\t\t\tevent.current.chooseBool('是否响应'+get.translation(target)+'的舌战群儒？',function(event,player){\r\n\t\t\t\t\t\t\tif(get.attitude(player,_status.event.source)>=0) return false;\r\n\t\t\t\t\t\t\tvar hs=player.getCards('h');\r\n\t\t\t\t\t\t\tvar dutag=player.hasSkillTag('nodu');\r\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\r\n\t\t\t\t\t\t\t\tvar value=get.value(hs[i],player);\r\n\t\t\t\t\t\t\t\tif(hs[i].name=='du'&&dutag) continue;\r\n\t\t\t\t\t\t\t\tif(value<0) return true;\r\n\t\t\t\t\t\t\t\tif(!_status.event.hasTarget){\r\n\t\t\t\t\t\t\t\t\tif(hs[i].number>=8&&value<=7) return true;\r\n\t\t\t\t\t\t\t\t\tif(value<=3) return true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if(_status.event.hasTarget%2==1){\r\n\t\t\t\t\t\t\t\t\tif(hs[i].number>=11&&value<=6) return true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}).set('source',target).set('hasTarget',event.torespond.length);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.goto(3);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tevent.torespond.push(event.current);\r\n\t\t\t\t\t\tevent.current.line(target,'green');\r\n\t\t\t\t\t\tevent.current.popup('响应');\r\n\t\t\t\t\t\tgame.log(event.current,'响应了舌战群儒');\r\n\t\t\t\t\t\tgame.delayx(0.5);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t\t'step 3'\r\n\t\t\t\t\tif(event.torespond.length==0){\r\n\t\t\t\t\t\tevent.num=1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.num=0;\r\n\t\t\t\t\t\ttarget.chooseToCompare(event.torespond).callback=lib.card.shezhanqunru.callback;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 4'\r\n\t\t\t\t\tif(event.num>0){\r\n\t\t\t\t\t\ttarget.draw(3);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcallback:function(){\r\n\t\t\t\t\tif(event.card1.number>event.card2.number){\r\n\t\t\t\t\t\tevent.parent.parent.num++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.parent.parent.num--;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:8.5,\r\n\t\t\t\t\tvalue:[6,1],\r\n\t\t\t\t\tuseful:[3,1],\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdraw:1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar hs=target.getCards('h');\r\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\r\n\t\t\t\t\t\t\t\tvar value=get.value(hs[i]);\r\n\t\t\t\t\t\t\t\tif(hs[i].number>=7&&value<=6) return 1;\r\n\t\t\t\t\t\t\t\tif(value<=3) return 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tyoudishenru:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tnotarget:true,\r\n\t\t\t\twuxieable:true,\r\n\t\t\t\tglobal:'g_youdishenru',\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tvar info=event.getParent(2).youdiinfo||event.getParent(3).youdiinfo;\r\n\t\t\t\t\tif(!info){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinfo.evt.cancel();\r\n\t\t\t\t\tevent.source=info.source;\r\n\t\t\t\t\tevent.source.storage.youdishenru=player;\r\n\t\t\t\t\tevent.source.addSkill('youdishenru');\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tvar next=event.source.chooseToUse({name:'sha'},player,-1,'对'+get.translation(player)+'使用一张杀，或受到一点伤害').set('addCount',false);\r\n\t\t\t\t\tnext.ai2=function(){\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tif(event.source.storage.youdishenru){\r\n\t\t\t\t\t\t\tevent.goto(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tevent.source.removeSkill('youdishenru');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.source.damage(player);\r\n\t\t\t\t\t\tevent.source.removeSkill('youdishenru');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tvalue:[5,1],\r\n\t\t\t\t\tuseful:[5,1],\r\n\t\t\t\t\torder:1,\r\n\t\t\t\t\twuxie:function(target,card,player,current,state){\r\n\t\t\t\t\t\treturn -state*get.attitude(player,current);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:function(player){\r\n\t\t\t\t\t\t\tif(_status.event.parent.youdiinfo&&\r\n\t\t\t\t\t\t\t\tget.attitude(player,_status.event.parent.youdiinfo.source)<=0){\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twangmeizhike:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn (target.isMinHp()&&target.isDamaged())||target.isMinHandcard();\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(target.isMinHp()&&target.isDamaged()){\r\n\t\t\t\t\t\ttarget.recover();\r\n\t\t\t\t\t\tevent.rec=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(target.isMinHandcard()){\r\n\t\t\t\t\t\ttarget.draw(event.rec?1:2);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:2.5,\r\n\t\t\t\t\tvalue:7,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar num=0;\r\n\t\t\t\t\t\t\tif(target.isMinHp()&&get.recoverEffect(target)>0){\r\n\t\t\t\t\t\t\t\tif(target.hp==1){\r\n\t\t\t\t\t\t\t\t\tnum+=3;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tnum+=2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(target.isMinHandcard()){\r\n\t\t\t\t\t\t\t\tnum+=2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn num;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsuolianjia:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:\"equip\",\r\n\t\t\t\tsubtype:\"equip2\",\r\n\t\t\t\tskills:['suolianjia'],\r\n\t\t\t\tonEquip:function(){\r\n\t\t\t\t\tif(player.isLinked()==false) player.link();\r\n\t\t\t\t},\r\n\t\t\t\tonLose:function(){\r\n\t\t\t\t\tif(player.isLinked()) player.link();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tchenhuodajie:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tfilterTarget:true,\r\n\t\t\t\tglobal:'g_chenhuodajie',\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(target.countCards('he')){\r\n\t\t\t\t\t\tplayer.gainPlayerCard('he',target,true);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:1,\r\n\t\t\t\t\tuseful:6,\r\n\t\t\t\t\tvalue:6,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:-1\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfudichouxin:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn player.canCompare(target);\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tplayer.chooseToCompare(target).set('preserve','win').clear=false;\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tplayer.gain([result.player,result.target]);\r\n\t\t\t\t\t\tresult.player.clone.moveDelete(player);\r\n\t\t\t\t\t\tresult.target.clone.moveDelete(player);\r\n\t\t\t\t\t\tgame.addVideo('gain2',player,get.cardsInfo([result.player,result.target]));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(!result.cancelled){\r\n\t\t\t\t\t\tresult.player.clone.delete();\r\n\t\t\t\t\t\tresult.target.clone.delete();\r\n\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([result.player,result.target]));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:4,\r\n\t\t\t\t\tvalue:[4,1],\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player){\r\n\t\t\t\t\t\t\tif(player.countCards('h')<=1) return 0;\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tplayer:function(player){\r\n\t\t\t\t\t\t\tif(player.countCards('h')<=1) return 0;\r\n\t\t\t\t\t\t\treturn 0.5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshuiyanqijun:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.countCards('e');\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(target.countCards('e')) target.chooseToDiscard('e',true);\r\n\t\t\t\t},\r\n\t\t\t\treverseOrder:true,\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(target.countCards('e')) return -1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tmultitarget:1,\r\n\t\t\t\t\t\tmultineg:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttoulianghuanzhu:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.countCards('h')>0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(!target.countCards('h')){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar hs=player.getCards('h');\r\n\t\t\t\t\tif(hs.length){\r\n\t\t\t\t\t\tvar minval=get.value(hs[0]);\r\n\t\t\t\t\t\tvar colors=[get.color(hs[0])];\r\n\t\t\t\t\t\tfor(var i=1;i<hs.length;i++){\r\n\t\t\t\t\t\t\tvar val=get.value(hs[i],player,'raw');\r\n\t\t\t\t\t\t\tif(val<minval){\r\n\t\t\t\t\t\t\t\tminval=val;\r\n\t\t\t\t\t\t\t\tcolors=[get.color(hs[i])];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(val==minval){\r\n\t\t\t\t\t\t\t\tcolors.add(get.color(hs[i]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplayer.chooseCardButton('偷梁换柱',target.getCards('h')).ai=function(button){\r\n\t\t\t\t\t\t\tvar val=get.value(button.link,player,'raw')-minval;\r\n\t\t\t\t\t\t\tif(val>=0){\r\n\t\t\t\t\t\t\t\tif(colors.contains(get.color(button.link))){\r\n\t\t\t\t\t\t\t\t\tval+=3;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tplayer.viewHandcards(target);\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tevent.card=result.links[[0]];\r\n\t\t\t\t\t\tplayer.chooseCard('h',true,'用一张手牌替换'+get.translation(event.card)).ai=function(card){\r\n\t\t\t\t\t\t\treturn -get.value(card);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t'step 2'\r\n\t\t\t\t\tif(result.bool){\r\n\t\t\t\t\t\tplayer.gain(event.card,target);\r\n\t\t\t\t\t\ttarget.gain(result.cards,player);\r\n\t\t\t\t\t\tplayer.$giveAuto(result.cards,target);\r\n\t\t\t\t\t\ttarget.$giveAuto(event.card,player);\r\n\t\t\t\t\t\tgame.log(player,'与',target,'交换了一张手牌');\r\n\t\t\t\t\t\tif(get.color(event.card)==get.color(result.cards[0])){\r\n\t\t\t\t\t\t\tplayer.draw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.addTempSkill('toulianghuanzhu_ai1');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\ttarget.addTempSkill('toulianghuanzhu_ai2');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:8,\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tnorepeat:1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(player.countCards('h')<=1) return 0;\r\n\t\t\t\t\t\t\tif(target.hasSkill('toulianghuanzhu_ai2')) return 0;\r\n\t\t\t\t\t\t\tif(target.hasSkill('toulianghuanzhu_ai1')) return 0.5;\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tuseful:[4,1],\r\n\t\t\t\t\tvalue:[6,1]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thuoshan:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'delay',\r\n\t\t\t\tcardcolor:'red',\r\n\t\t\t\tcardnature:'fire',\r\n\t\t\t\tmodTarget:function(card,player,target){\r\n\t\t\t\t\treturn lib.filter.judge(card,player,target);\r\n\t\t\t\t},\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\treturn player.canAddJudge(card);\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn (lib.filter.judge(card,player,target)&&player==target);\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:[-1,-1],\r\n\t\t\t\tjudge:function(card){\r\n\t\t\t\t\tif(get.suit(card)=='heart'&&get.number(card)>1&&get.number(card)<10) return -6;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\teffect:function(){\r\n\t\t\t\t\tif(result.bool==false){\r\n\t\t\t\t\t\tplayer.damage(2,'fire','nosource');\r\n\t\t\t\t\t\tvar players=game.filterPlayer(function(current){\r\n\t\t\t\t\t\t\treturn get.distance(player,current)<=1&&player!=current;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tplayers.sort(lib.sort.seat);\r\n\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\r\n\t\t\t\t\t\t\tplayers[i].damage(1,'fire','nosource');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tplayer.addJudgeNext(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcancel:function(){\r\n\t\t\t\t\tplayer.addJudgeNext(card);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:0,\r\n\t\t\t\t\t\tvalue:0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\torder:1,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\treturn lib.card.shandian.ai.result.target(player,target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\t// damage:1,\r\n\t\t\t\t\t\t// natureDamage:1,\r\n\t\t\t\t\t\t// fireDamage:1,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thongshui:{\r\n\t\t\t\ttype:'delay',\r\n\t\t\t\tenable:function(card,player){\r\n\t\t\t\t\treturn player.canAddJudge(card);\r\n\t\t\t\t},\r\n\t\t\t\tmodTarget:function(card,player,target){\r\n\t\t\t\t\treturn lib.filter.judge(card,player,target);\r\n\t\t\t\t},\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn (lib.filter.judge(card,player,target)&&player==target);\r\n\t\t\t\t},\r\n\t\t\t\tselectTarget:[-1,-1],\r\n\t\t\t\tjudge:function(card){\r\n\t\t\t\t\tif(get.suit(card)=='club'&&get.number(card)>1&&get.number(card)<10) return -3;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\teffect:function(){\r\n\t\t\t\t\tif(result.bool==false){\r\n\t\t\t\t\t\tif(player.countCards('he')==0) player.loseHp();\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tplayer.discard(player.getCards('he').randomGets(3));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar players=get.players();\r\n\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\r\n\t\t\t\t\t\t\tvar dist=get.distance(player,players[i]);\r\n\t\t\t\t\t\t\tif(dist<=2&&player!=players[i]){\r\n\t\t\t\t\t\t\t\tvar cs=players[i].getCards('he');\r\n\t\t\t\t\t\t\t\tif(cs.length==0) players[i].loseHp();\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tplayers[i].discard(cs.randomGets(3-Math.max(1,dist)));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tplayer.addJudgeNext(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcancel:function(){\r\n\t\t\t\t\tplayer.addJudgeNext(card);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:0,\r\n\t\t\t\t\t\tvalue:0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\torder:1,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\treturn lib.card.shandian.ai.result.target(player,target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tskill:{\r\n\t\t\ttoulianghuanzhu_ai1:{},\r\n\t\t\ttoulianghuanzhu_ai2:{},\r\n\t\t\tsuolianjia:{\r\n\t\t\t\ttrigger:{player:'damageBefore'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.source&&event.source.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return;\r\n\t\t\t\t\tif(event.nature) return true;\r\n\t\t\t\t},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\ttrigger.cancel();\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tnofire:true,\r\n\t\t\t\t\tnothunder:true,\r\n\t\t\t\t\teffect:{\r\n\t\t\t\t\t\ttarget:function(card,player,target,current){\r\n\t\t\t\t\t\t\tif(player.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\t\t\tname:card?card.name:null,\r\n\t\t\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\t\t\tcard:card\r\n\t\t\t\t\t\t\t})) return;\r\n\t\t\t\t\t\t\tif(get.tag(card,'natureDamage')) return 'zerotarget';\r\n\t\t\t\t\t\t\tif(card.name=='tiesuo'){\r\n\t\t\t\t\t\t\t\treturn [0,0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttoulianghuanzhu2:{},\r\n\t\t\tyoudishenru:{\r\n\t\t\t\ttrigger:{source:'damageEnd'},\r\n\t\t\t\tsilent:true,\r\n\t\t\t\tonremove:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player==player.storage.youdishenru;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tdelete player.storage.youdishenru;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tg_youdishenru:{\r\n\t\t\t\ttrigger:{target:'shaBefore'},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\treturn !event.getParent().directHit.contains(player)&&player.hasUsableCard('youdishenru');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tevent.youdiinfo={\r\n\t\t\t\t\t\tsource:trigger.player,\r\n\t\t\t\t\t\tevt:trigger\r\n\t\t\t\t\t};\r\n\t\t\t\t\tplayer.chooseToUse(function(card,player){\r\n\t\t\t\t\t\tif(get.name(card)!='youdishenru') return false;\r\n\t\t\t\t\t\treturn lib.filter.cardEnabled(card,player,'forceEnable');\r\n\t\t\t\t\t},'是否使用诱敌深入？').set('source',trigger.player);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tg_chenhuodajie:{\r\n\t\t\t\ttrigger:{global:'damageEnd'},\r\n\t\t\t\tdirect:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.player==player) return false;\r\n\t\t\t\t\tif(!event.player.countCards('he')) return false;\r\n\t\t\t\t\tif(!lib.filter.targetEnabled({name:'chenhuodajie'},player,event.player)) return false;\r\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\r\n\t\t\t\t\treturn player.hasUsableCard('chenhuodajie');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tplayer.chooseToUse(get.prompt('chenhuodajie',trigger.player).replace(/发动/,'使用'),function(card,player){\r\n\t\t\t\t\t\tif(card.name!='chenhuodajie') return false;\r\n\t\t\t\t\t\treturn lib.filter.cardEnabled(card,player,'forceEnable');\r\n\t\t\t\t\t},trigger.player,-1).targetRequired=true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\ttranslate:{\r\n\t\t\tdiaobingqianjiang:'调兵遣将',\r\n\t\t\tdiaobingqianjiang_info:'出牌阶段，对你及其他有手牌的角色使用。你摸一张牌，然后亮出牌堆顶的X张牌（X为存活角色数的一半，向上取整），目标可以用一张手牌替换其中的一张牌。结算后，你可以将剩余的牌中的任意张以任意顺序置于牌堆顶',\r\n\t\t\tcaochuanjiejian:'草船借箭',\r\n\t\t\tcaochuanjiejian_info:'出牌阶段对一名有手牌的其他角色使用，目标选择一项：将手牌中的所有杀（至少1张）交给你，并视为对你使用一张杀；或展示手牌并令你弃置任意张',\r\n\t\t\t// xiaolicangdao:'笑里藏刀',\r\n\t\t\t// xiaolicangdao_info:'出牌阶段，对一名其他角色使用。你将此【笑里藏刀】交给目标，然后弃置其一张手牌，若这两张牌牌名相同，你对其造成1点伤害',\r\n\t\t\tshezhanqunru:'舌战群儒',\r\n\t\t\tshezhanqunru_info:'出牌阶段，对你使用。你请求所有有手牌的其他角色响应，然后同时与响应的角色拼点。若有角色响应且结果中你赢的次数更多，或若没有角色响应，你摸三张牌',\r\n\t\t\tyoudishenru:'诱敌深入',\r\n\t\t\tyoudishenru_info:'当以你为目标的【杀】生效前，对此【杀】使用。抵消此【杀】，然后此【杀】的使用者需对你使用【杀】（在此【杀】结算结束之后，若此【杀】未对你造成伤害，其重复此流程），否则受到你造成的1点伤害',\r\n\t\t\tsuolianjia:'锁链甲',\r\n\t\t\tsuolianjia_info:'锁定技，你防止即将受到的属性伤害，当装备时进入连环状态，当卸下时解除连环状态',\r\n\t\t\tsuolianjia_bg:'链',\r\n\t\t\tgeanguanhuo:'隔岸观火',\r\n\t\t\tgeanguanhuo_info:'出牌阶段对一名其他角色使用，令目标与一名你指定的另一名角色拼点，赢的角色获得对方的一张牌；若点数相同，目标可弃置你一张牌（存活角色不超过2时可重铸）',\r\n\t\t\ttoulianghuanzhu:'偷梁换柱',\r\n\t\t\ttoulianghuanzhu_info:'出牌阶段对一名其他角色使用，你观看其手牌，然后可以用一张手牌替牌其中的一张；若两张牌颜色相同，你摸一张牌',\r\n\t\t\ttoulianghuanzhu_bg:'柱',\r\n\t\t\tfudichouxin:'釜底抽薪',\r\n\t\t\tfudichouxin_info:'与一名角色进行拼点，若成功则获得双方拼点牌',\r\n\t\t\tshuiyanqijun:'水攻',\r\n\t\t\tshuiyanqijun_info:'令所有有装备的角色各弃置一张装备牌',\r\n\t\t\twangmeizhike:'望梅止渴',\r\n\t\t\twangmeizhike_info:'出牌阶段对一名角色使用，若没有角色体力比目标少，目标回复一点体力；若没有角色手牌比目标少，目标摸两张牌（若因此牌回复了体力则改为摸一张）',\r\n\t\t\tchenhuodajie:'趁火打劫',\r\n\t\t\tchenhuodajie_info:'任意一名其他角色受到伤害时对其使用，获得其一张牌',\r\n\t\t\thuoshan:'火山',\r\n\t\t\thuoshan_info:'出牌阶段，对自己使用。若判定结果为红桃2~9，则目标角色受到2点火焰伤害，距离目标1以内的其他角色受到1点火焰伤害。若判定不为红桃2~9，将之移动到下家的判定区里。',\r\n\t\t\thongshui:'洪水',\r\n\t\t\thongshui_info:'出牌阶段，对自己使用。若判定结果为梅花2~9，该角色随机弃置3张牌，距离该角色为X的角色随机弃置3-X张牌，若没有牌则失去一点体力',\r\n\t\t},\r\n\t\tlist:[\r\n\t\t\t['heart',6,'huoshan','fire'],\r\n\t\t\t['club',7,'hongshui'],\r\n\t\t\t[\"diamond\",3,'guohe'],\r\n\r\n\t\t\t['diamond',4,'fudichouxin'],\r\n\t\t\t['club',6,'fudichouxin'],\r\n\t\t\t['spade',1,'fudichouxin'],\r\n\t\t\t['club',7,'shuiyanqijun'],\r\n\t\t\t['club',8,'shuiyanqijun'],\r\n\t\t\t['club',8,'guohe'],\r\n\t\t\t['spade',9,'shuiyanqijun'],\r\n\t\t\t['heart',9,'toulianghuanzhu'],\r\n\t\t\t['club',10,'toulianghuanzhu'],\r\n\t\t\t['spade',13,'guohe'],\r\n\t\t\t['heart',6,'wangmeizhike'],\r\n\t\t\t['club',1,'wangmeizhike'],\r\n\t\t\t['diamond',6,'chenhuodajie'],\r\n\t\t\t['diamond',9,'chenhuodajie'],\r\n\t\t\t['club',3,'chenhuodajie'],\r\n\r\n\t\t\t['club',13,'suolianjia'],\r\n\r\n\t\t\t['club',3,'caochuanjiejian'],\r\n\t\t\t['spade',7,'caochuanjiejian'],\r\n\t\t\t// ['spade',5,'xiaolicangdao'],\r\n\t\t\t// ['diamond',11,'xiaolicangdao'],\r\n\t\t\t['heart',1,'geanguanhuo'],\r\n\t\t\t['spade',6,'geanguanhuo'],\r\n\t\t\t['heart',4,'shezhanqunru'],\r\n\t\t\t['club',8,'shezhanqunru'],\r\n\t\t\t['diamond',1,'diaobingqianjiang'],\r\n\t\t\t['spade',2,'diaobingqianjiang'],\r\n\t\t\t['heart',12,'youdishenru'],\r\n\t\t\t['club',2,'youdishenru'],\r\n\t\t\t['spade',9,'youdishenru'],\r\n\t\t],\r\n\t};\r\n});\r\n\n\n//# sourceURL=webpack:///./card/yunchou.js?")},"./card/zhulu.js":()=>{eval("\r\ngame.import('card',function(lib,game,ui,get,ai,_status){\r\n\treturn {\r\n\t\tname:'zhulu',\r\n\t\t// connect:true,\r\n\t\tcard:{\r\n\t\t\tzhulu_card:{\r\n\t\t\t\taudio:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tcardcolor:'red',\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\tfilterTarget:true,\r\n\t\t\t\tcontentBefore:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tif(get.is.versus()){\r\n\t\t\t\t\t\tplayer.chooseControl('顺时针','逆时针',function(event,player){\r\n\t\t\t\t\t\t\tif(player.next.side==player.side) return '逆时针';\r\n\t\t\t\t\t\t\treturn '顺时针';\r\n\t\t\t\t\t\t}).set('prompt','选择'+get.translation(card)+'的结算方向');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.goto(2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tif(result&&result.control=='顺时针'){\r\n\t\t\t\t\t\tvar evt=event.getParent();\r\n\t\t\t\t\t\tevt.fixedSeat=true;\r\n\t\t\t\t\t\tevt.targets.sortBySeat();\r\n\t\t\t\t\t\tevt.targets.reverse();\r\n\t\t\t\t\t\tif(evt.targets[evt.targets.length-1]==player){\r\n\t\t\t\t\t\t\tevt.targets.unshift(evt.targets.pop());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tui.clear();\r\n\t\t\t\t\tvar num;\r\n\t\t\t\t\tif(event.targets){\r\n\t\t\t\t\t\tnum=event.targets.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tnum=game.countPlayer();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar cards=[];\r\n\t\t\t\t\tfor(var i=0;i<num;i++){\r\n\t\t\t\t\t\tvar cardx=get.cardPile(function(card){\r\n\t\t\t\t\t\t\treturn get.type(card)=='equip'&&!cards.contains(card);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(cardx) cards.push(cardx);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif(!cards.length){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\tevent.getParent().excluded.addArray(game.players);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.cardsGotoOrdering(cards).relatedEvent=event.getParent();\r\n\t\t\t\t\tvar dialog=ui.create.dialog('逐鹿天下',cards,true);\r\n\t\t\t\t\t_status.dieClose.push(dialog);\r\n\t\t\t\t\tdialog.videoId=lib.status.videoId++;\r\n\t\t\t\t\tgame.addVideo('cardDialog',null,['逐鹿天下',get.cardsInfo(cards),dialog.videoId]);\r\n\t\t\t\t\tevent.getParent().preResult=dialog.videoId;\r\n\t\t\t\t\tgame.broadcast(function(cards,id){\r\n\t\t\t\t\t\tvar dialog=ui.create.dialog('逐鹿天下',cards,true);\r\n\t\t\t\t\t\t_status.dieClose.push(dialog);\r\n\t\t\t\t\t\tdialog.videoId=id;\r\n\t\t\t\t\t},cards,dialog.videoId);\r\n\t\t\t\t\tgame.log(event.card,'亮出了',cards);\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tfor(var i=0;i<ui.dialogs.length;i++){\r\n\t\t\t\t\t\tif(ui.dialogs[i].videoId==event.preResult){\r\n\t\t\t\t\t\t\tevent.dialog=ui.dialogs[i];break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!event.dialog){\r\n\t\t\t\t\t\tevent.finish();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar equips=[];\r\n\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\r\n\t\t\t\t\t\tvar card=event.dialog.buttons[i].link;\r\n\t\t\t\t\t\tif(!target.isDisabled(get.subtype(card))) equips.push(card);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(equips.length>1){\r\n\t\t\t\t\t\tvar next=target.chooseButton(true,function(button){\r\n\t\t\t\t\t\t\tvar player=_status.event.player;\r\n\t\t\t\t\t\t\treturn get.effect(player,button.link,player,player);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnext.set('equips',equips);\r\n\t\t\t\t\t\tnext.set('filterButton',function(button){\r\n\t\t\t\t\t\t\treturn _status.event.equips.contains(button.link);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnext.set('dialog',event.preResult);\r\n\t\t\t\t\t\tnext.set('closeDialog',false);\r\n\t\t\t\t\t\tnext.set('dialogdisplay',true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(equips.length){\r\n\t\t\t\t\t\tevent.directButton=equips[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tvar dialog=event.dialog;\r\n\t\t\t\t\tvar card;\r\n\t\t\t\t\tif(event.directButton){\r\n\t\t\t\t\t\tcard=event.directButton;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tcard=result.links[0];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar button;\r\n\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\r\n\t\t\t\t\t\tif(dialog.buttons[i].link==card){\r\n\t\t\t\t\t\t\tbutton=dialog.buttons[i];\r\n\t\t\t\t\t\t\tbutton.querySelector('.info').innerHTML=function(target){\r\n \t\t\t\t\t\t\tif(target._tempTranslate) return target._tempTranslate;\r\n \t\t\t\t\t\t\tvar name=target.name;\r\n \t\t\t\t\t\t\tif(lib.translate[name+'_ab']) return lib.translate[name+'_ab'];\r\n \t\t\t\t\t\t\treturn get.translation(name);\r\n \t\t\t\t\t\t}(target);\r\n\t\t\t\t\t\t\tdialog.buttons.remove(button);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar capt=get.translation(target)+'选择了'+get.translation(button.link);\r\n\t\t\t\t\tif(card){\r\n\t\t\t\t\t\ttarget.equip(card);\r\n\t\t\t\t\t\ttarget.$gain2(card);\r\n\t\t\t\t\t\tgame.broadcast(function(card,id,name,capt){\r\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\r\n\t\t\t\t\t\t\tif(dialog){\r\n\t\t\t\t\t\t\t\tdialog.content.firstChild.innerHTML=capt;\r\n\t\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\r\n\t\t\t\t\t\t\t\t\tif(dialog.buttons[i].link==card){\r\n\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].querySelector('.info').innerHTML=name;\r\n\t\t\t\t\t\t\t\t\t\tdialog.buttons.splice(i--,1);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},card,dialog.videoId,function(target){\r\n\t\t\t\t\t\t\tif(target._tempTranslate) return target._tempTranslate;\r\n\t\t\t\t\t\t\tvar name=target.name;\r\n\t\t\t\t\t\t\tif(lib.translate[name+'_ab']) return lib.translate[name+'_ab'];\r\n\t\t\t\t\t\t\treturn get.translation(name);\r\n\t\t\t\t\t\t}(target),capt);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdialog.content.firstChild.innerHTML=capt;\r\n\t\t\t\t\tgame.addVideo('dialogCapt',null,[dialog.videoId,dialog.content.firstChild.innerHTML]);\r\n\t\t\t\t\tgame.log(target,'选择了',button.link);\r\n\t\t\t\t\tgame.delay();\r\n\t\t\t\t},\r\n\t\t\t\tcontentAfter:function(){\r\n\t\t\t\t\tfor(var i=0;i<ui.dialogs.length;i++){\r\n\t\t\t\t\t\tif(ui.dialogs[i].videoId==event.preResult){\r\n\t\t\t\t\t\t\tvar dialog=ui.dialogs[i];\r\n\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t\t_status.dieClose.remove(dialog);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.broadcast(function(id){\r\n\t\t\t\t\t\tvar dialog=get.idDialog(id);\r\n\t\t\t\t\t\tif(dialog){\r\n\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t\t_status.dieClose.remove(dialog);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},event.preResult);\r\n\t\t\t\t\tgame.addVideo('cardDialog',null,event.preResult);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(){\r\n\t\t\t\t\t\tif(Math.random()<0.5) return 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\torder:3,\r\n\t\t\t\t\t\tuseful:1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tif(get.is.versus()){\r\n\t\t\t\t\t\t\t\tif(target==player) return 1.5;\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(player.hasUnknown(2)){\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 2-2*get.distance(player,target,'absolute')/game.countPlayer();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tdraw:1,\r\n\t\t\t\t\t\tmultitarget:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tkaihua:{\r\n\t\t\t\tenable:true,\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tselectTarget:-1,\r\n\t\t\t\ttoself:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target==player;\r\n\t\t\t\t},\r\n\t\t\t\tmodTarget:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t'step 0'\r\n\t\t\t\t\tif(!target.countCards('he')){\r\n\t\t\t\t\t\tevent.finish();return;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.chooseToDiscard(true,'he',[1,2]).set('ai',function(card){\r\n\t\t\t\t\t\tif(!ui.selected.cards.length&&get.type(card)=='equip') return 8-get.value(card);\r\n\t\t\t\t\t\treturn 6-get.value(card);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t'step 1'\r\n\t\t\t\t\tif(result.bool&&result.cards){\r\n\t\t\t\t\t\tvar bool=0;\r\n\t\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\r\n\t\t\t\t\t\t\tif(get.type(result.cards[i])=='equip'){bool=1;break}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttarget.draw(result.cards.length+bool);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\twuxie:function(){\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:3,\r\n\t\t\t\t\t\tvalue:3,\r\n\t\t\t\t\t\torder:5\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target,card){\r\n\t\t\t\t\t\t\tvar cards=ui.selected.cards.concat(card.cards||[]);\r\n\t\t\t\t\t\t\tvar num=player.countCards('he',function(card){\r\n\t\t\t\t\t\t\t\tif(cards.contains(card)) return false;\r\n\t\t\t\t\t\t\t\tif(get.type(card)=='equip') return 8>get.value(card);\r\n\t\t\t\t\t\t\t\treturn 6>get.value(card);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif(!num) return 0;\r\n\t\t\t\t\t\t\tif(player.countCards('he',function(card){\r\n\t\t\t\t\t\t\t\tif(cards.contains(card)) return false;\r\n\t\t\t\t\t\t\t\tif(get.type(card)=='equip') return 4>get.value(card);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t})) return 1.6;\r\n\t\t\t\t\t\t\tif(num<2) return 0.5;\r\n\t\t\t\t\t\t\treturn 1.2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t\tdiscard:1,\r\n\t\t\t\t\t\tnorepeat:1\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tjiejia:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\tenable:true,\r\n\t\t\t\tfilterTarget:function(card,player,target){\r\n\t\t\t\t\treturn target.countCards('e')>0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar es=target.getCards('e');\r\n\t\t\t\t\tif(es.length) target.gain(es,'gain2','log');\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:10,\r\n\t\t\t\t\ttag:{\r\n\t\t\t\t\t\tgain:1,\r\n\t\t\t\t\t\tloseCard:1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:0.5,\r\n\t\t\t\t\t\tvalue:0.5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar e5=target.getEquip(5);\r\n\t\t\t\t\t\t\tif(e5&&e5.name=='muniu'&&e5.cards&&e5.cards.length>1) return -1;\r\n\t\t\t\t\t\t\tif(target.countCards('e',function(card){\r\n\t\t\t\t\t\t\t\treturn get.value(card,target)<=0;\r\n\t\t\t\t\t\t\t})||target.hasSkillTag('noe')) return 1;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcaochuan:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'trick',\r\n\t\t\t\twuxieable:true,\r\n\t\t\t\tglobal:['caochuan_skill'],\r\n\t\t\t\tnotarget:true,\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar evt2=event.getParent(3)._trigger;\r\n\t\t\t\t\tevt2.cancel();\r\n\t\t\t\t\tvar evt=evt2.getParent();\r\n\t\t\t\t\tvar next=game.createEvent('caochuan_gain');\r\n\t\t\t\t\t_status.event.next.remove(next);\r\n\t\t\t\t\tevt.after.unshift(next);\r\n\t\t\t\t\tnext.player=player;\r\n\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\tvar cards=event.getParent().cards.filterInD();\r\n\t\t\t\t\t\tif(cards.length) player.gain(cards,'gain2','log');\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tuseful:[6,4],\r\n\t\t\t\t\t\tvalue:[6,4],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{player:1},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tnuma:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip4',\r\n\t\t\t\tfilterTarget:lib.filter.notMe,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\ttoself:false,\r\n\t\t\t\tloseThrow:true,\r\n\t\t\t\tcustomSwap:function(){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9,\r\n\t\t\t\t\tvalue:function(card,player){\r\n\t\t\t\t\t\tif(player.getEquip(4)==card) return 0;\r\n\t\t\t\t\t\treturn 4;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(player.getCards('e').contains(card)) return 0;\r\n\t\t\t\t\t\treturn -get.value(player.getCards('e'));\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tkeepAI:true,\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar cards=target.getCards('e');\r\n\t\t\t\t\t\t\tvar val=get.value(cards,target);\r\n\t\t\t\t\t\t\tif(val>0) return -val;\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyajiaoqiang:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tdistance:{attackFrom:-2},\r\n\t\t\t\tskills:['yajiaoqiang_skill'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tvar skills=['longdan','kanpo','rekanpo','qingguo','reqingguo','ollongdan','refanghun'];\r\n\t\t\t\t\t\tfor(var i=0;i<skills.length;i++){\r\n\t\t\t\t\t\t\tif(player.hasSkill(skills[i])) return 5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(player.countCards('h',function(card){\r\n\t\t\t\t\t\t\treturn get.color(card)=='black'&&['wuxie','caochuan'].contains(card);\r\n\t\t\t\t\t\t})) return 5;\r\n\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\twufengjian:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tfilterTarget:lib.filter.notMe,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\ttoself:false,\r\n\t\t\t\tskills:['wufengjian_skill'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9,\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(get.position(card)=='e') return -2;\r\n\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalue:function(card,player){\r\n\t\t\t\t\t\tif(player.getEquip(1)==card) return -1.5;\r\n\t\t\t\t\t\treturn 1.5;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tkeepAI:true,\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar val=2;\r\n\t\t\t\t\t\t\tvar val2=0;\r\n\t\t\t\t\t\t\tvar card=target.getEquip(1);\r\n\t\t\t\t\t\t\tif(card){\r\n\t\t\t\t\t\t\t\tval2=get.value(card,target);\r\n\t\t\t\t\t\t\t\tif(val2<0) return 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn -val-val2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tzheji:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip1',\r\n\t\t\t\tfilterTarget:lib.filter.notMe,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\ttoself:false,\r\n\t\t\t\tdistance:{attackFrom:1},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9,\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(get.position(card)=='e') return -2;\r\n\t\t\t\t\t\treturn 2;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalue:function(card,player){\r\n\t\t\t\t\t\tif(player.getEquip(1)==card) return -3;\r\n\t\t\t\t\t\treturn 3;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tkeepAI:true,\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar val=2.5;\r\n\t\t\t\t\t\t\tvar val2=0;\r\n\t\t\t\t\t\t\tvar card=target.getEquip(1);\r\n\t\t\t\t\t\t\tif(card){\r\n\t\t\t\t\t\t\t\tval2=get.value(card,target);\r\n\t\t\t\t\t\t\t\tif(val2<0) return 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn -val-val2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyinfengjia:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tfilterTarget:lib.filter.notMe,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\ttoself:false,\r\n\t\t\t\tskills:['yinfengjia_skill'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9,\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(get.position(card)=='e') return -1;\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalue:function(card,player){\r\n\t\t\t\t\t\tif(player.getEquip(2)==card) return -2.5;\r\n\t\t\t\t\t\treturn 2.5;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tkeepAI:true,\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar val=2;\r\n\t\t\t\t\t\t\tvar val2=0;\r\n\t\t\t\t\t\t\tvar card=target.getEquip(2);\r\n\t\t\t\t\t\t\tif(card){\r\n\t\t\t\t\t\t\t\tval2=get.value(card,target);\r\n\t\t\t\t\t\t\t\tif(val2<0) return 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn -val-val2;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tnvzhuang:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tfilterTarget:lib.filter.notMe,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\ttoself:false,\r\n\t\t\t\tloseDelay:false,\r\n\t\t\t\tonEquip:function(){\r\n\t\t\t\t\tif(player.sex=='male'&&player.countCards('he',function(cardx){\r\n\t\t\t\t\t\treturn cardx!=card;\r\n\t\t\t\t\t})) player.chooseToDiscard(true,function(card){\r\n\t\t\t\t\t\treturn card!=_status.event.card;\r\n\t\t\t\t\t},'he').set('card',card);\r\n\t\t\t\t},\r\n\t\t\t\tonLose:function(){\r\n\t\t\t\t\tif(player.sex!='male') return;\r\n\t\t\t\t\tvar next=game.createEvent('nvzhuang_lose');\r\n\t\t\t\t\tevent.next.remove(next);\r\n\t\t\t\t\tvar evt=event.getParent();\r\n\t\t\t\t\tif(evt.getlx===false) evt=evt.getParent();\r\n\t\t\t\t\tevt.after.push(next);\r\n\t\t\t\t\tnext.player=player;\r\n\t\t\t\t\tnext.setContent(function(){\r\n\t\t\t\t\t\tif(player.countCards('he')){\r\n\t\t\t\t\t\t\tplayer.popup('nvzhuang');\r\n\t\t\t\t\t\t\tplayer.chooseToDiscard(true,'he');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9.5,\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(card==player.getEquip(2)){\r\n\t\t\t\t\t\t\tif(player.sex!='male') return 0;\r\n\t\t\t\t\t\t\tvar num=player.countCards('he',function(cardx){\r\n\t\t\t\t\t\t\t\treturn cardx!=card;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif(num==0) return 0;\r\n\t\t\t\t\t\t\treturn 4/num;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalue:function(){\r\n\t\t\t\t\t\treturn lib.card.nvzhuang.ai.equipValue.apply(this,arguments);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tkeepAI:true,\r\n\t\t\t\t\t\ttarget:function(player,target){\r\n\t\t\t\t\t\t\tvar card=target.getEquip(2);\r\n\t\t\t\t\t\t\tif(target.sex=='male'){\r\n\t\t\t\t\t\t\t\tvar val=0;\r\n\t\t\t\t\t\t\t\tvar val2=0;\r\n\t\t\t\t\t\t\t\tif(card){\r\n\t\t\t\t\t\t\t\t\tval2=get.value(card,target);\r\n\t\t\t\t\t\t\t\t\tif(val2<0) return 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar num=target.countCards('he',function(cardx){\r\n\t\t\t\t\t\t\t\t\treturn cardx!=card\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif(num>0) val+=4/num;\r\n\t\t\t\t\t\t\t\treturn -val;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(card){\r\n\t\t\t\t\t\t\t\tvar val2=get.value(card,target);\r\n\t\t\t\t\t\t\t\tif(val2>0) return -val2/4;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tyexingyi:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip2',\r\n\t\t\t\tskills:['yexingyi_skill'],\r\n\t\t\t\tai:{\r\n\t\t\t\t\tequipValue:4,\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:4,\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tjinhe:{\r\n\t\t\t\tfullskin:true,\r\n\t\t\t\ttype:'equip',\r\n\t\t\t\tsubtype:'equip5',\r\n\t\t\t\tfilterTarget:lib.filter.notMe,\r\n\t\t\t\tselectTarget:1,\r\n\t\t\t\ttoself:false,\r\n\t\t\t\tskills:['jinhe_skill'],\r\n\t\t\t\tglobal:['jinhe_lose'],\r\n\t\t\t\tloseDelay:false,\r\n\t\t\t\tonEquip:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tplayer.markSkill('jinhe_skill');\r\n\t\t\t\t\tif(event.getParent(2).name!='jinhe') event.finish();\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tevent.target=player;\r\n\t\t\t\t\t\tevent.player=event.getParent(2).player;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tvar id=card.cardid;\r\n\t\t\t\t\tevent.cardid=id;\r\n\t\t\t\t\tif(!_status.jinhe) _status.jinhe={};\r\n\t\t\t\t\tif(_status.jinhe[id]){\r\n\t\t\t\t\t\tgame.cardsDiscard(_status.jinhe[id].card);\r\n\t\t\t\t\t\tdelete _status.jinhe[id];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar cards2=get.cards(2);\r\n\t\t\t\t\tevent.cards2=cards2;\r\n\t\t\t\t\tplayer.chooseButton(['选择一张牌作为「礼」',cards2],true);\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tvar id=event.cardid;\r\n\t\t\t\t\t_status.jinhe[id]={\r\n\t\t\t\t\t\tplayer:player,\r\n\t\t\t\t\t\tcard:result.links[0],\r\n\t\t\t\t\t};\r\n\t\t\t\t\tgame.broadcast(function(jinhe){\r\n\t\t\t\t\t\t_status.jinhe=jinhe;\r\n\t\t\t\t\t},_status.jinhe);\r\n\t\t\t\t\tgame.cardsGotoSpecial(result.links[0]);\r\n\t\t\t\t\tevent.cards2.remove(result.links[0]);\r\n\t\t\t\t\tevent.cards2[0].fix();\r\n\t\t\t\t\tui.cardPile.insertBefore(event.cards2[0],ui.cardPile.firstChild);\r\n\t\t\t\t\tgame.updateRoundNumber();\r\n\t\t\t\t\ttarget.markSkill('jinhe_skill');\r\n\t\t\t\t},\r\n\t\t\t\tonLose:function(){\r\n\t\t\t\t\tplayer.unmarkSkill('jinhe_skill');\r\n\t\t\t\t\tvar id=card.cardid;\r\n\t\t\t\t\tif((event.getParent(2)&&event.getParent(2).name!='swapEquip')&&get.position(card)!='d'&&event.parent.type!='equip'&&_status.jinhe&&_status.jinhe[id]){\r\n\t\t\t\t\t\tvar card2=_status.jinhe[id].card;\r\n\t\t\t\t\t\tplayer.$throw(card2,1000);\r\n\t\t\t\t\t\tgame.log(card,'掉落了',card2);\r\n\t\t\t\t\t\tgame.cardsDiscard(card2);\r\n\t\t\t\t\t\tdelete _status.jinhe[id];\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:9.5,\r\n\t\t\t\t\tequipValue:function(card,player){\r\n\t\t\t\t\t\tif(card!=player.getEquip(5)) return 5;\r\n\t\t\t\t\t\tif(_status.jinhe&&_status.jinhe[card.cardid]&&_status.event.name!='gainPlayerCard') return 3*player.countCards('h');\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalue:function(){\r\n\t\t\t\t\t\treturn lib.card.jinhe.ai.equipValue.apply(this,arguments);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbasic:{\r\n\t\t\t\t\t\tequipValue:5,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tkeepAI:true,\r\n\t\t\t\t\t\ttarget:function(player,target,cardx){\r\n\t\t\t\t\t\t\tif(_status.jinhe&&_status.jinhe[cardx.cardid]) return -0.5-2*target.countCards('h');\r\n\t\t\t\t\t\t\tvar card=target.getEquip(5);\r\n\t\t\t\t\t\t\tif(!card) return 0;\r\n\t\t\t\t\t\t\treturn -get.value(card,target);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttarget_use:function(player,target){\r\n\t\t\t\t\t\t\treturn -0.5-2*target.countCards('h');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tskill:{\r\n\t\t\tjinhe_lose:{\r\n\t\t\t\ttrigger:{\r\n\t\t\t\t\tplayer:['loseAfter','equipAfter'],\r\n\t\t\t\t},\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.getl===false) return false;\r\n\t\t\t\t\tif(event.name=='lose'&&event.position!=ui.discardPile||!_status.jinhe||event.getParent(2).name=='jinhe_skill'&&event.getParent(2).player==player) return false;\r\n\t\t\t\t\tvar evt=event.getl(player);\r\n\t\t\t\t\tif(!evt) return false;\r\n\t\t\t\t\tfor(var i=0;i<evt.es.length;i++){\r\n\t\t\t\t\t\tif(evt.es[i].name=='jinhe'&&_status.jinhe[evt.es[i].cardid]) return true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tvar es=trigger.getl(player).es;\r\n\t\t\t\t\tfor(var i=0;i<es.length;i++){\r\n\t\t\t\t\t\tif(es[i].name=='jinhe'&&_status.jinhe[es[i].cardid]){\r\n\t\t\t\t\t\t\tvar card=_status.jinhe[es[i].cardid].card;\r\n\t\t\t\t\t\t\tgame.cardsDiscard(card);\r\n\t\t\t\t\t\t\tplayer.$throw(card);\r\n\t\t\t\t\t\t\tgame.log(card,'进入了弃牌堆');\r\n\t\t\t\t\t\t\tdelete _status.jinhe[es[i].cardid];\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgame.broadcastAll(function(jinhe){\r\n\t\t\t\t\t\t_status.jinhe=jinhe;\r\n\t\t\t\t\t},_status.jinhe);\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tvar hs=player.getCards('h');\r\n\t\t\t\t\tif(hs.length) player.discard(hs);\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tgame.broadcastAll(ui.clear);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tjinhe_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tintro:{\r\n\t\t\t\t\tmark:function(dialog,storage,player){\r\n\t\t\t\t\t\tvar card=player.getEquip('jinhe');\r\n\t\t\t\t\t\tif(card&&_status.jinhe&&_status.jinhe[card.cardid]){\r\n\t\t\t\t\t\t\tif(_status.jinhe[card.cardid].player==game.me||_status.jinhe[card.cardid].player.isUnderControl()) dialog.addAuto([_status.jinhe[card.cardid].card]);\r\n\t\t\t\t\t\t\telse return '共有一张「礼」';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse return '没有牌';\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tmark:true,\r\n\t\t\t\tmarktext:'礼',\r\n\t\t\t\tenable:'phaseUse',\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(!_status.jinhe) return false;\r\n\t\t\t\t\tvar card=player.getEquip(5);\r\n\t\t\t\t\treturn card&&card.name=='jinhe'&&_status.jinhe[card.cardid]!=undefined;\r\n\t\t\t\t},\r\n\t\t\t\tprepare:function(cards,player){\r\n\t\t\t\t\tvar card=player.getEquip(5);\r\n\t\t\t\t\tif(card&&card.name=='jinhe'&&_status.jinhe[card.cardid]){\r\n\t\t\t\t\t\tvar tothrow=_status.jinhe[card.cardid].card;\r\n\t\t\t\t\t\tplayer.$throw(tothrow);\r\n\t\t\t\t\t\tgame.log(player,'将',tothrow,'置入了弃牌堆');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\t\"step 0\"\r\n\t\t\t\t\tvar card=player.getEquip(5);\r\n\t\t\t\t\tif(card&&card.name=='jinhe'&&_status.jinhe[card.cardid]){\r\n\t\t\t\t\t\tgame.cardsDiscard(_status.jinhe[card.cardid].card);\r\n\t\t\t\t\t\tevent.suit=get.suit(_status.jinhe[card.cardid].card);\r\n\t\t\t\t\t\tdelete _status.jinhe[card.cardid];\r\n\t\t\t\t\t\tgame.broadcastAll(function(jinhe){\r\n\t\t\t\t\t\t\t_status.jinhe=jinhe;\r\n\t\t\t\t\t\t},_status.jinhe);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse event.finish();\r\n\t\t\t\t\t\"step 1\"\r\n\t\t\t\t\tvar cards=player.getCards('he',function(card){\r\n\t\t\t\t\t\tif(get.position(card)=='h') return get.suit(card)==event.suit;\r\n\t\t\t\t\t\treturn get.position(card)=='e'&&card.name=='jinhe';\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(cards.length) player.discard(cards);\r\n\t\t\t\t\t\"step 2\"\r\n\t\t\t\t\tgame.broadcastAll(ui.clear);\r\n\t\t\t\t},\r\n\t\t\t\tai:{\r\n\t\t\t\t\torder:1,\r\n\t\t\t\t\tresult:{\r\n\t\t\t\t\t\tplayer:function(player){\r\n\t\t\t\t\t\t\tvar suit=get.suit(_status.jinhe[player.getEquip(5).cardid].card);\r\n\t\t\t\t\t\t\tvar hs=player.getCards('h',function(card){\r\n\t\t\t\t\t\t\t\treturn get.suit(card)==suit;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif(!hs.length||get.value(hs)<5) return 1;\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyexingyi_skill:{\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tmod:{\r\n\t\t\t\t\ttargetEnabled:function(card,player,target){\r\n\t\t\t\t\t\tif(get.color(card)=='black'&&get.type(card,'trick')=='trick'&&!target.hasSkillTag('unequip2')&&!player.hasSkillTag('unequip',false,{\r\n \t\t\t\t\t\tname:card?card.name:null,\r\n \t\t\t\t\t\ttarget:target,\r\n \t\t\t\t\t\tcard:card\r\n \t\t\t\t\t})) return false;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyinfengjia_skill:{\r\n\t\t\t\ttrigger:{player:'damageBegin3'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tequipSkill:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(get.type(event.card,'trick')!='trick') return false;\r\n\t\t\t\t\tif(player.hasSkillTag('unequip2')) return false;\r\n\t\t\t\t\tif(event.source&&event.source.hasSkillTag('unequip',false,{\r\n\t\t\t\t\t\tname:event.card?event.card.name:null,\r\n\t\t\t\t\t\ttarget:player,\r\n\t\t\t\t\t\tcard:event.card\r\n\t\t\t\t\t})) return false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){trigger.num++},\r\n\t\t\t},\r\n\t\t\twufengjian_skill:{\r\n\t\t\t\ttrigger:{player:'useCard'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.card.name!='sha') return false;\r\n\t\t\t\t\tvar card=player.getEquip('wufengjian');\r\n\t\t\t\t\treturn player.countCards('he',function(cardx){\r\n\t\t\t\t\t\treturn cardx!=card;\r\n\t\t\t\t\t})>0;\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tif(player!=game.me&&!player.isUnderControl()&&!player.isOnline()) game.delayx();\r\n\t\t\t\t\tplayer.chooseToDiscard(true,'he',function(card){\r\n\t\t\t\t\t\treturn card!=_status.event.card;\r\n\t\t\t\t\t}).set('card',player.getEquip('wufengjian'));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tyajiaoqiang_skill:{\r\n\t\t\t\ttrigger:{player:'useCardAfter'},\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(_status.currentPhase==player||get.color(event.card)!='black'||event.cards.filterInD().length==0) return false;\r\n\t\t\t\t\treturn player.getHistory('useCard',function(evt){\r\n\t\t\t\t\t\treturn get.color(evt.card)=='black';\r\n\t\t\t\t\t}).indexOf(event)==0;\r\n\t\t\t\t},\r\n\t\t\t\tprompt2:function(event,player){\r\n\t\t\t\t\treturn '获得'+get.translation(event.cards.filterInD());\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tplayer.gain(trigger.cards.filterInD(),'gain2','log');\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcaochuan_skill:{\r\n\t\t\t\ttrigger:{target:'useCardToBegin'},\r\n\t\t\t\tforced:true,\r\n\t\t\t\tpriority:6,\r\n\t\t\t\tfilter:function(event,player){\r\n\t\t\t\t\tif(event.directHit||!get.tag(event.card,'damage')||!['basic','trick'].contains(get.type(event.card))) return false;\r\n\t\t\t\t\treturn player.hasUsableCard('caochuan');\r\n\t\t\t\t},\r\n\t\t\t\tcontent:function(){\r\n\t\t\t\t\tvar next=player.chooseToUse();\r\n\t\t\t\t\tnext.set('prompt','是否使用【草船借箭】响应'+get.translation(trigger.player)+'使用的'+get.translation(trigger.card)+'？');\r\n\t\t\t\t\tnext.set('filterCard',function(card,player){\r\n\t\t\t\t\t\tif(get.name(card)!='caochuan') return false;\r\n\t\t\t\t\t\treturn lib.filter.cardEnabled(card,player,'forceEnable');\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.set('respondTo',[trigger.player,trigger.card]);\r\n\t\t\t\t\tnext.set('goon',-get.effect(player,trigger.card,trigger.player,player));\r\n\t\t\t\t\tnext.set('ai1',function(card){\r\n\t\t\t\t\t\treturn _status.event.goon;\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\ttranslate:{\r\n\t\t\tjinhe:'锦盒',\r\n\t\t\tjinhe_info:'当你使用【锦盒】时，你将原有的与此牌对应的「礼」置入弃牌堆（若有），然后观看牌堆顶的两张牌并将其中一张置于游戏外与此牌对应，称之为「礼」。<br>出牌阶段，你可以将与此牌对应的「礼」置入弃牌堆，然后弃置【锦盒】以及所有与「礼」花色相同的手牌。当此牌因其他原因进入弃牌堆后，你将与此牌对应的「礼」置入弃牌堆并弃置所有手牌。',\r\n\t\t\tjinhe_skill:'锦盒',\r\n\t\t\tjinhe_lose:'锦盒',\r\n\t\t\tyexingyi:'夜行衣',\r\n\t\t\tyexingyi_info:'锁定技，你不是黑色锦囊牌的合法目标。',\r\n\t\t\tnvzhuang:'女装',\r\n\t\t\tnvzhuang_info:'锁定技，当此牌进入或离开你的装备区时，若你的性别为男性，你弃置一张不为此牌的牌。',\r\n\t\t\tyinfengjia:'引蜂甲',\r\n\t\t\tyinfengjia_info:'锁定技，当你受到锦囊牌造成的伤害时，此伤害+1。',\r\n\t\t\tyinfengjia_skill:'引蜂甲',\r\n\t\t\tzheji:'折戟',\r\n\t\t\tzheji_info:'这是一把坏掉的武器...',\r\n\t\t\twufengjian:'无锋剑',\r\n\t\t\twufengjian_info:'锁定技，当你使用【杀】时，你弃置一张不为装备区内【无锋剑】的牌。',\r\n\t\t\twufengjian_skill:'无锋剑',\r\n\t\t\tyajiaoqiang_skill:'涯角枪',\r\n\t\t\tyajiaoqiang:'涯角枪',\r\n\t\t\tyajiaoqiang_info:'当你于一名其他角色的回合内第一次使用的黑色牌结算完成后，你可以获得此牌对应的所有实体牌。',\r\n\t\t\tnuma:'轮椅',\r\n\t\t\tnuma_info:'锁定技，当此牌进入你的装备区时，你弃置装备区内的所有其他牌。',\r\n\t\t\tcaochuan:'草船借箭',\r\n\t\t\tcaochuan_info:'当带有「伤害」标签的基本牌或普通锦囊牌对你生效前，对此牌使用。抵消此牌对你产生的效果。当此牌结算完成后，你获得此牌对应的所有实体牌。',\r\n\t\t\tjiejia:'解甲归田',\r\n\t\t\tjiejia_info:'出牌阶段，对一名装备区内有牌的角色使用。该角色获得其装备区内的所有牌。',\r\n\t\t\tkaihua:'树上开花',\r\n\t\t\tkaihua_info:'出牌阶段，对包含你自己在内的一名角色使用。目标角色弃置一至两张牌，然后摸等量的牌。若其以此法弃置了装备牌，则多摸一张牌。',\r\n\t\t\tzhulu_card:'逐鹿天下',\r\n\t\t\tzhulu_card_info:'出牌阶段，对所有角色使用。你从牌堆和弃牌堆亮出等同于目标角色数的装备牌，每名目标角色将其中一张牌置于自己的装备区。',\r\n\t\t\tgifts_tag:'赠',\r\n\t\t},\r\n\t\tlist:[\r\n\t\t\t['diamond',3,'jiejia'],\r\n\t\t\t['diamond',4,'shan'],\r\n\t\t\t['diamond',5,'yajiaoqiang'],\r\n\t\t\t['diamond',6,'sha'],\r\n\t\t\t['diamond',8,'shan'],\r\n\t\t\t['diamond',9,'kaihua'],\r\n\t\t\t['diamond',10,'yinfengjia',null,['gifts']],\r\n\t\t\t['diamond',11,'sha'],\r\n\t\t\t\r\n\t\t\t['club',3,'jiejia'],\r\n\t\t\t['club',4,'sha','thunder'],\r\n\t\t\t['club',5,'zheji',null,['gifts']],\r\n\t\t\t['club',6,'jiu'],\r\n\t\t\t['club',8,'jiu'],\r\n\t\t\t['club',9,'zhulu_card'],\r\n\t\t\t['club',10,'jinhe',null,['gifts']],\r\n\t\t\t['club',11,'sha'],\r\n\t\t\t\r\n\t\t\t['heart',3,'sha','fire'],\r\n\t\t\t['heart',4,'shan'],\r\n\t\t\t['heart',5,'numa',null,['gifts']],\r\n\t\t\t['heart',6,'tao'],\r\n\t\t\t['heart',8,'shan'],\r\n\t\t\t['heart',9,'kaihua'],\r\n\t\t\t['heart',10,'nvzhuang',null,['gifts']],\r\n\t\t\t['heart',11,'kaihua'],\r\n\t\t\t\r\n\t\t\t['spade',3,'caochuan'],\r\n\t\t\t['spade',4,'sha','thunder'],\r\n\t\t\t['spade',5,'wufengjian',null,['gifts']],\r\n\t\t\t['spade',6,'caochuan'],\r\n\t\t\t['spade',8,'sha'],\r\n\t\t\t['spade',9,'sha'],\r\n\t\t\t['spade',10,'yexingyi'],\r\n\t\t\t['spade',11,'sha'],\r\n\t\t],\r\n\t}\r\n});\r\n\n\n//# sourceURL=webpack:///./card/zhulu.js?")}},__webpack_module_cache__={};function __webpack_require__(t){var r=__webpack_module_cache__[t];if(void 0!==r)return r.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=(t,r)=>{for(var n in r)__webpack_require__.o(r,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},__webpack_require__.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./card/entry.js")})();