(()=>{var e={388:()=>{window.data_card={list:[],pss_paper:{type:"pss",fullskin:!0},pss_scissor:{type:"pss",fullskin:!0},pss_stone:{type:"pss",fullskin:!0},feichu_equip1:{type:"equip",subtype:"equip1"},feichu_equip2:{type:"equip",subtype:"equip2"},feichu_equip3:{type:"equip",subtype:"equip3"},feichu_equip4:{type:"equip",subtype:"equip4"},feichu_equip5:{type:"equip",subtype:"equip5"},disable_judge:{},group_wei:{fullskin:!0},group_shu:{fullskin:!0},group_wu:{fullskin:!0},group_qun:{fullskin:!0},group_key:{fullskin:!0},group_jin:{fullskin:!0},group_holo:{fullskin:!0},group_nijisanji:{fullskin:!0},group_VirtuaReal:{fullskin:!0},group_upd8:{fullskin:!0},group_paryi:{fullskin:!0},group_kagura:{fullskin:!0},group_nanashi:{fullskin:!0},group_psp:{fullskin:!0},group_asoul:{fullskin:!0},group_nori:{fullskin:!0},group_vwp:{fullskin:!0},group_chaos:{fullskin:!0},group_xuyan:{fullskin:!0},group_xuefeng:{fullskin:!0}}},651:()=>{{let{lib:e}=window.vkCore;e.emotionList={xiaowu_emotion:14,shibing_emotion:15,guojia_emotion:20,zhenji_emotion:20,xiaosha_emotion:20,xiaotao_emotion:20,xiaojiu_emotion:20,Diana_emotion:6}}},352:()=>{window.data_group=["wei","shu","wu","qun","jin","western","key","shen","holo","nijisanji","dotlive","upd8","eilene","paryi","kagura","nori","vwp","nanashi","VirtuaReal","HappyElements","psp","asoul","xuyan","chaos","xuefeng","Providence","NetEase","hunmiao","ego","chidori","lucca","RedC","vshojo","vtuber","clubs"],window.data_groupnature={shen:"thunder",wei:"water",shu:"soil",wu:"wood",qun:"metal",western:"thunder",key:"key",jin:"thunder",ye:"thunder",holo:"soil",upd8:"metal",dotlive:"wood",nijisanji:"water",VirtuaReal:"ocean",HappyElements:"ocean",eilene:"thunder",paryi:"ice",kagura:"ocean",nanashi:"wood",psp:"fire",asoul:"fire",nori:"key",vwp:"key",vshojo:"metal",xuyan:"ice",chaos:"ocean",xuefeng:"ocean",Providence:"ocean",NetEase:"fire",hunmiao:"ocean",ego:"ocean",chidori:"wood",lucca:"wood",RedCircle:"fire",vtuber:"metal",clubs:"ice"}},333:()=>{{let{game:e,ui:n,get:t,lib:i,_status:a}=window.vkCore;i.configMenu={general:{name:"通用",config:{low_performance:{name:"流畅模式",init:!1,intro:"减少部分游戏特效，提高游戏速度",onclick:function(t){e.saveConfig("low_performance",t),t?n.window.classList.add("low_performance"):n.window.classList.remove("low_performance")}},compatiblemode:{name:"兼容模式",init:!1,intro:"开启兼容模式可防止扩展使游戏卡死并提高对旧扩展的兼容性，但对游戏速度有一定影响，若无不稳定或不兼容的扩展建议关闭",onclick:function(t){e.saveConfig("compatiblemode",t),t?n.window.classList.add("compatiblemode"):n.window.classList.remove("compatiblemode")}},confirm_exit:{name:"确认退出",init:!1,unfrequent:!0,intro:"离开游戏前弹出确认对话框"},keep_awake:{name:"屏幕常亮",init:!1,unfrequent:!0,intro:"防止屏幕自动关闭<br>注：旧版本通过NoSleep.js实现的屏幕常亮可能会影响外置音频的音量",onclick:function(n){e.saveConfig("keep_awake",n),n?window.plugins&&window.plugins.insomnia?window.plugins.insomnia.keepAwake():window.noSleep&&document.addEventListener(i.config.touchscreen?"touchend":"click",(function e(){document.removeEventListener(i.config.touchscreen?"touchend":"click",e,!1),window.noSleep.enable()}),!1):window.plugins&&window.plugins.insomnia?window.plugins.insomnia.allowSleepAgain():window.noSleep&&window.noSleep.disable()}},auto_confirm:{name:"自动确认",init:!0,unfrequent:!0,intro:"当候选目标只有1个时，点击目标后无需再点击确认"},skip_shan:{name:"无闪自动取消",init:!1,unfrequent:!0,intro:"当自己需要使用或打出【闪】时，若自己没有【闪】，则跳过该步骤"},unauto_choose:{name:"拆顺手牌选择",init:!1,unfrequent:!0,intro:"拆牌或者顺牌时，就算只能选择对方的手牌依然手动选择"},wuxie_self:{name:"不无懈自己",init:!0,unfrequent:!0,intro:"自己使用的单目标普通锦囊即将生效时，不询问无懈"},tao_enemy:{name:"不对敌方出桃",init:!1,intro:"双方阵营明确的模式中（如对决），敌方角色濒死时不询问出桃",unfrequent:!0},enable_drag:{name:"启用拖拽",init:!0,intro:"按住卡牌后可将卡牌拖至目标",unfrequent:!0},enable_dragline:{name:"拖拽指示线",init:!0,unfrequent:!0,intro:"拖拽时显示虚线，可能降低游戏速度"},enable_touchdragline:{name:"拖拽指示线",init:!1,unfrequent:!0,intro:"拖拽时显示虚线，可能降低游戏速度"},touchscreen:{name:"触屏模式",init:!1,restart:!0,unfrequent:!0,intro:"开启后可使触屏设备反应更快，但无法使用鼠标操作",onclick:function(n){if(t.is.nomenu("touchscreen",n))return!1;e.saveConfig("touchscreen",n)}},swipe:{name:"滑动手势",init:!0,unfrequent:!0,intro:"在非滚动区域向四个方向滑动可执行对应操作"},swipe_down:{name:"下划操作",init:"menu",unfrequent:!0,intro:"向下滑动时执行的操作",item:{system:"显示按钮",menu:"打开菜单",pause:"切换暂停",auto:"切换托管",chat:"显示聊天",off:"关闭"},onclick:function(n){if(t.is.nomenu("swipe_down",n))return!1;e.saveConfig("swipe_down",n)}},swipe_up:{name:"上划操作",intro:"向上滑动时执行的操作",init:"auto",unfrequent:!0,item:{system:"显示按钮",menu:"打开菜单",pause:"切换暂停",auto:"切换托管",chat:"显示聊天",off:"关闭"},onclick:function(n){if(t.is.nomenu("swipe_up",n))return!1;e.saveConfig("swipe_up",n)}},swipe_left:{name:"左划操作",intro:"向左滑动时执行的操作",init:"system",unfrequent:!0,item:{system:"显示按钮",menu:"打开菜单",pause:"切换暂停",auto:"切换托管",chat:"显示聊天",off:"关闭"},onclick:function(n){if(t.is.nomenu("swipe_left",n))return!1;e.saveConfig("swipe_left",n)}},swipe_right:{name:"右划操作",intro:"向右滑动时执行的操作",init:"system",unfrequent:!0,item:{system:"显示按钮",menu:"打开菜单",pause:"切换暂停",auto:"切换托管",chat:"显示聊天",off:"关闭"},onclick:function(n){if(t.is.nomenu("swipe_right",n))return!1;e.saveConfig("swipe_right",n)}},round_menu_func:{name:"触屏按钮操作",intro:"点击屏幕中圆形按钮时执行的操作",init:"system",unfrequent:!0,item:{system:"显示按钮",menu:"打开菜单",pause:"切换暂停",auto:"切换托管"},onclick:function(n){if(t.is.nomenu("round_menu_func",n))return!1;e.saveConfig("round_menu_func",n)}},show_splash:{name:"显示开始界面",intro:"游戏开始前进入模式选择画面",init:"init",item:{off:"关闭",init:"首次启动",always:"保持开启"}},game_speed:{name:"游戏速度",init:"mid",item:{vslow:"慢",slow:"较慢",mid:"中",fast:"较快",vfast:"快",vvfast:"很快"},intro:"设置不同游戏操作间的时间间隔"},sync_speed:{name:"限制结算速度",intro:"在动画结算完成前不执行下一步操作，开启后游戏操作的间隔更长但画面更浏畅，在游戏较卡时建议开启",init:!0},enable_vibrate:{name:"开启震动",intro:"回合开始时使手机震动",init:!1},right_click:{name:"右键操作",init:"pause",intro:"在空白区域点击右键时的操作",unfrequent:!0,item:{pause:"暂停",shortcut:"工具",config:"选项",auto:"托管"},onclick:function(n){if(t.is.nomenu("right_click",n))return!1;e.saveConfig("right_click",n)}},longpress_info:{name:"长按显示信息",init:!0,unfrequent:!0,restart:!0,intro:"长按后弹出菜单"},right_info:{name:"右键显示信息",init:!0,unfrequent:!0,restart:!0,intro:"右键点击后弹出菜单"},hover_all:{name:"悬停显示信息",init:!0,unfrequent:!0,restart:!0,intro:"悬停后弹出菜单"},hover_handcard:{name:"悬停手牌显示信息",init:!0,unfrequent:!0,intro:"悬停手牌后弹出菜单"},hoveration:{name:"悬停菜单弹出时间",unfrequent:!0,intro:"鼠标移至目标到弹出菜单的时间间隔",init:"1000",item:{500:"0.5秒",700:"0.7秒",1e3:"1秒",1500:"1.5秒",2500:"2.5秒"}},doubleclick_intro:{name:"双击显示武将资料",init:!0,unfrequent:!0,intro:"双击武将头像后显示其资料卡"},video:{name:"保存录像",init:"20",intro:"游戏结束后保存录像在最大条数，超过后将从最早的录像开始删除（已收藏的录像不计入条数）",item:{0:"关闭",5:"五局",10:"十局",20:"二十局",50:"五十局",1e4:"无限"},unfrequent:!0},max_loadtime:{name:"最长载入时间",intro:"设置游戏从启动到完成载入所需的最长时间，超过此时间未完成载入会报错，若设备较慢或安装了较多扩展可适当延长此时间",init:"10000",unfrequent:!0,item:{5e3:"5秒",1e4:"10秒",2e4:"20秒",6e4:"60秒"},onclick:function(n){e.saveConfig("max_loadtime",n),"5000"==n?localStorage.removeItem(i.configprefix+"loadtime"):localStorage.setItem(i.configprefix+"loadtime",n)}},mousewheel:{name:"滚轮控制手牌",init:!0,unfrequent:!0,intro:"开启后滚轮可使手牌横向滚动，在mac等可横向滚动的设备上建议关闭",onclick:function(t){e.saveConfig("mousewheel",t),i.config.touchscreen||(i.config.mousewheel?(n.handcards1Container.onmousewheel=n.click.mousewheel,n.handcards2Container.onmousewheel=n.click.mousewheel):(n.handcards1Container.onmousewheel=null,n.handcards2Container.onmousewheel=null))}},auto_check_update:{name:"自动检查游戏更新",intro:"进入游戏时检查更新",init:!0,unfrequent:!0},lucky_star:{name:"幸运星模式",intro:"在涉及随机数等的技能中，必定得到效果最好的结果。（联机模式无效）",init:!1,unfrequent:!0},dev:{name:"开发者模式",intro:"开启后可使用浏览器控制台控制游戏，同时可更新到开发版",init:!1,onclick:function(n){e.saveConfig("dev",n),a.connectMode||(n?i.cheat.i():(delete window.cheat,delete window.game,delete window.ui,delete window.get,delete window.ai,delete window.lib,delete window._status))},unfrequent:!0},errstop:{name:"出错时停止游戏",init:!1,unfrequent:!0},update_link:{name:"更新地址",init:"coding",unfrequent:!0,item:{coding:"Coding",github:"GitHub"},onclick:function(n){e.saveConfig("update_link",n),i.updateURL=i.updateURLS[n]||i.updateURLS.coding}},extension_source:{name:"获取扩展地址",init:"Coding",unfrequent:!0,item:{},intro:function(){return"获取在线扩展时的地址。当前地址：<br>"+i.config.extension_sources[i.config.extension_source]},onclick:function(n){e.saveConfig("extension_source",n)}},extension_create:{name:"添加获取扩展地址",clear:!0,unfrequent:!0,onclick:function(){e.prompt("请输入地址名称",(function(t){if(t){var a=i.config.extension_sources;e.prompt("请输入"+t+"的地址",(function(i){if(i){delete a[t],a[t]=i,e.saveConfig("extension_sources",a),e.saveConfig("extension_source",t);var o=n.extension_source;o.updateInner();for(var s=o._link.menu,r=o._link.config,c=0;c<s.childElementCount;c++)if(s.childNodes[c]._link==t){s.childNodes[c].remove();break}n.create.div("",t,s,(function(){var e=this.parentNode._link,n=e._link.config;e._link.current=this.link;var t=e.lastChild.innerHTML;e.lastChild.innerHTML=n.item[this._link],n.onclick&&!1===n.onclick.call(e,this._link,this)&&(e.lastChild.innerHTML=t),n.update&&n.update()}))._link=t,r.item[name]=t,alert("已添加扩展地址："+t)}}))}}))}},extension_delete:{name:"删除当前扩展地址",clear:!0,unfrequent:!0,onclick:function(){var t=!1,a=i.config.extension_sources;for(var o in a)if(o!=i.config.extension_source){t=!0;break}if(t){var s=i.config.extension_source;e.saveConfig("extension_source",o),delete a[s],e.saveConfig("extension_sources",a);var r=n.extension_source;r.updateInner();var c=r._link.menu,l=r._link.config;for(o=0;o<c.childElementCount;o++)if(c.childNodes[o]._link==s){c.childNodes[o].remove();break}delete l.item[s],alert("已删除扩展地址："+s)}else alert("不能删除最后一个扩展地址！")}},update:function(e,n){"ontouchstart"in document?n.touchscreen.show():n.touchscreen.hide(),i.device||i.node?n.auto_check_update.show():n.auto_check_update.hide(),i.device?(n.enable_vibrate.show(),n.keep_awake.show()):(n.enable_vibrate.hide(),n.keep_awake.hide()),i.config.touchscreen?(n.mousewheel.hide(),n.hover_all.hide(),n.hover_handcard.hide(),n.hoveration.hide(),n.right_info.hide(),n.right_click.hide(),n.longpress_info.show(),n.swipe.show(),i.config.swipe?(n.swipe_up.show(),n.swipe_down.show(),n.swipe_left.show(),n.swipe_right.show()):(n.swipe_up.hide(),n.swipe_down.hide(),n.swipe_left.hide(),n.swipe_right.hide())):(n.mousewheel.show(),n.hover_all.show(),n.right_info.show(),n.right_click.show(),n.longpress_info.hide(),e.hover_all?(n.hover_handcard.show(),n.hoveration.show()):(n.hover_handcard.hide(),n.hoveration.hide()),n.swipe.hide(),n.swipe_up.hide(),n.swipe_down.hide(),n.swipe_left.hide(),n.swipe_right.hide()),i.config.enable_drag?i.config.touchscreen?(n.enable_dragline.hide(),n.enable_touchdragline.show()):(n.enable_dragline.show(),n.enable_touchdragline.hide()):(n.enable_dragline.hide(),n.enable_touchdragline.hide()),t.is.phoneLayout()?n.round_menu_func.show():n.round_menu_func.hide(),i.node||"ios"==i.device?n.confirm_exit.hide():n.confirm_exit.show(),e.dev?n.errstop.show():n.errstop.hide()}}},appearence:{name:"外观",config:{theme:{name:"主题",init:"woodden",item:{},visualMenu:function(e,t){e.menu||(e.className="button character themebutton "+t,e.menu=n.create.div(e,"","<div></div><div></div><div></div><div></div>"))},onclick:function(t){e.saveConfig("theme",t),n.arena.hide(),i.init.background(),i.config.autostyle&&("simple"==t?i.configMenu.appearence.config.player_border.onclick("slim"):i.configMenu.appearence.config.player_border.onclick("normal")),setTimeout((function(){var e=n.css.theme;n.css.theme=i.init.css(i.assetURL+"theme/"+i.config.theme,"style"),e.remove(),setTimeout((function(){n.arena.show()}),100)}),500)}},layout:{name:"布局",init:"mobile",item:{default:"旧版",newlayout:"对称",mobile:"默认",long:"宽屏",long2:"手杀",nova:"新版"},visualMenu:function(e,t){if(e.className="button character themebutton "+i.config.theme,!e.created){e.created=!0,e.style.overflow="hidden",e.firstChild.style.display="none";var a=n.create.div(e);a.style.top="auto","default"==t||"newlayout"==t?(a.style.width="calc(100% - 6px)",a.style.left="3px",a.style.bottom="3px",a.style.height="25px","newlayout"==t&&(a.style.height="23px",a.style.bottom="4px")):"long2"==t||"nova"==t?a.style.display="none":(a.style.width="120%",a.style.left="-10%",a.style.bottom="0",a.style.height="22px"),a.style.borderRadius="2px";for(var o=["KizunaAI","MiraiAkari","Siro","Nekomasu"],s=0;s<4;s++){var r=n.create.div(".fakeplayer",e);n.create.div(".avatar",r).setBackground(o.randomRemove(),"character"),r.style.borderRadius="2px",3!=s&&(r.style.top="auto"),"default"==t?(r.style.height="19px",r.style.width="38px",r.classList.add("oldlayout")):"mobile"==t||"newlayout"==t?(r.style.width="24px",r.style.height="29px"):"nova"==t?(r.style.width="20px",r.style.height="24px"):(r.style.width="20px",r.style.height="34px"),1==s&&(r.style.left="3px"),2==s&&(r.style.left="auto",r.style.right="3px"),3==s&&(r.style.top="3px"),"default"==t?(0==s&&(r.style.bottom="6px"),0!=s&&3!=s||(r.style.left="calc(50% - 18px)"),1!=s&&2!=s||(r.style.bottom="36px")):"newlayout"==t?(0==s&&(r.style.bottom="1px"),0!=s&&3!=s||(r.style.left="calc(50% - 12px)"),1!=s&&2!=s||(r.style.bottom="32px")):"mobile"==t?(0!=s&&3!=s||(r.style.left="calc(50% - 12px)"),1!=s&&2!=s||(r.style.bottom="30px")):"long"==t?(0!=s&&3!=s||(r.style.left="calc(50% - 10px)"),1!=s&&2!=s||(r.style.bottom="45px")):"long2"==t?(0==s&&(r.style.bottom="2px",r.style.left="3px"),3==s&&(r.style.left="calc(50% - 10px)"),1!=s&&2!=s||(r.style.bottom="45px")):"nova"==t&&(0==s&&(r.style.bottom="2px",r.style.left="3px"),3==s&&(r.style.left="calc(50% - 10px)"),1!=s&&2!=s||(r.style.left="3px",r.style.bottom=30*s+"px")),0!=s||"mobile"!=t&&"long"!=t||(r.classList.add("me"),r.style.borderRadius="0px",r.style.width="25px",r.style.height="25px",r.style.bottom="-3px",r.style.left="-3px")}}},onclick:function(n){i.layoutfixed.contains(i.config.mode)?e.saveConfig("layout",n):i.init.layout(n)}},player_height:{name:"角色高度",init:"long",item:{short:"矮",default:"中",long:"高"},onclick:function(t){e.saveConfig("player_height",t),n.arena.dataset.player_height=t}},player_height_nova:{name:"角色高度",init:"short",item:{short:"矮",default:"中",long:"高"},onclick:function(t){e.saveConfig("player_height_nova",t),n.arena.dataset.player_height_nova=t}},ui_zoom:{name:"界面缩放",unfrequent:!0,init:"normal",item:{esmall:"80%",vsmall:"90%",small:"95%",normal:"100%",big:"105%",vbig:"110%",ebig:"120%"},onclick:function(t){switch(e.saveConfig("ui_zoom",t),t){case"esmall":t=.8;break;case"vsmall":t=.9;break;case"small":t=.93;break;case"big":t=1.05;break;case"vbig":t=1.1;break;case"ebig":t=1.2;break;default:t=1}e.documentZoom=e.deviceZoom*t,n.updatez()}},image_background:{name:"游戏背景",init:"default",item:{},visualBar:function(a,o,s){if(a.created)a.lastChild.classList.remove("active");else{a.created=!0,n.create.filediv(".menubutton","添加背景",a,(function(n){if(n){var t=n.name;-1!=t.indexOf(".")&&(t=t.slice(0,t.indexOf(".")));var c=(e.writeFile?"cdv_":"custom_")+t;if(o[c])for(var l=1;l<1e3;l++)if(!o[c+"_"+l]){c=c+"_"+l;break}o[c]=t;var u=function(){s(c,a.parentNode.defaultNode),a.parentNode.updateBr(),i.config.customBackgroundPack.add(c),e.saveConfig("customBackgroundPack",i.config.customBackgroundPack)};e.writeFile?e.writeFile(n,"image/background",c+".jpg",u):e.putDB("image",c,n,u),a.lastChild.classList.contains("active")&&r.call(a.lastChild)}})).inputNode.accept="image/*";var r=function(){this.classList.toggle("active");for(var e=this.parentNode.parentNode,n=0;n<e.childElementCount;n++)if(e.childNodes[n].classList.contains("button")){var i,a=e.childNodes[n]._link;a&&"default"!=a&&(i=this.classList.contains("active")?0==a.indexOf("custom_")||0==a.indexOf("cdv_")?"删除":"隐藏":o[a],e.childNodes[n].firstChild.innerHTML=t.verticalStr(i))}};n.create.div(".menubutton","编辑背景",a,r)}},visualMenu:function(n,i,a,o){n.className="button character",n.style.backgroundImage="",n.style.backgroundSize="",n.firstChild&&(n.firstChild.innerHTML=t.verticalStr(a)),"default"==i||0==i.indexOf("custom_")?(n.style.backgroundImage="none",n.classList.add("dashedmenubutton"),0==i.indexOf("custom_")?e.getDB("image",i,(function(e){if(e){var t=new FileReader;t.onload=function(e){var t=e.target.result;n.style.backgroundImage="url("+t+")",n.style.backgroundSize="cover",n.classList.remove("dashedmenubutton")},t.readAsDataURL(e,"UTF-8")}})):n.parentNode.defaultNode=n):(0==i.indexOf("svg_")?n.setBackgroundImage("image/background/"+i.slice(4)+".svg"):n.setBackgroundImage("image/background/"+i+".jpg"),n.style.backgroundSize="cover")},onclick:function(a,o){if(o&&o.firstChild){var s=o.parentNode;if(o.firstChild.innerHTML==t.verticalStr("隐藏")){if(s.parentNode.noclose=!0,o.remove(),s.updateBr(),i.config.prompt_hidebg||(alert("隐藏的背景可通过选项-其它-重置隐藏内容恢复"),e.saveConfig("prompt_hidebg",!0)),i.config.hiddenBackgroundPack.add(a),e.saveConfig("hiddenBackgroundPack",i.config.hiddenBackgroundPack),delete i.configMenu.appearence.config.image_background.item[a],i.config.image_background!=a)return void(this.lastChild.innerHTML=i.configMenu.appearence.config.image_background.item[i.config.image_background]);a="default",this.lastChild.innerHTML="默认"}else if(o.firstChild.innerHTML==t.verticalStr("删除")&&(s.parentNode.noclose=!0,confirm("是否删除此背景？（此操作不可撤销）"))){if(o.remove(),s.updateBr(),i.config.customBackgroundPack.remove(a),e.saveConfig("customBackgroundPack",i.config.customBackgroundPack),0==a.indexOf("cdv_")?e.removeFile("image/background/"+a+".jpg"):e.deleteDB("image",a),delete i.configMenu.appearence.config.image_background.item[a],i.config.image_background!=a)return void(this.lastChild.innerHTML=i.configMenu.appearence.config.image_background.item[i.config.image_background]);a="default",this.lastChild.innerHTML="默认"}}var r="default"==i.config.image_background;e.saveConfig("image_background",a),i.init.background(),n.background.delete(),n.background=n.create.div(".background"),i.config.image_background_blur?(n.background.style.filter="blur(8px)",n.background.style.webkitFilter="blur(8px)",n.background.style.transform="scale(1.05)"):(n.background.style.filter="",n.background.style.webkitFilter="",n.background.style.transform=""),document.body.insertBefore(n.background,document.body.firstChild),r&&n.background.animate("start"),"default"==i.config.image_background?n.background.style.backgroundImage="none":0==i.config.image_background.indexOf("custom_")?(n.background.style.backgroundImage="none",e.getDB("image",i.config.image_background,(function(e){if(e){var t=new FileReader;t.onload=function(e){var t=e.target.result;n.background.style.backgroundImage="url("+t+")"},t.readAsDataURL(e,"UTF-8")}}))):0==i.config.image_background.indexOf("svg_")?n.background.setBackgroundImage("image/background/"+i.config.image_background.slice(4)+".svg"):(n.background.setBackgroundImage("image/background/"+i.config.image_background+".jpg"),n.backgroundSVG=n.create.div(".background",n.background),n.backgroundSVG.setBackgroundImage("image/background/simple1_bg.svg"),n.backgroundSVG.style.opacity=".3"),n.background.style.backgroundSize="cover",n.background.style.backgroundPosition="50% 50%"}},image_background_random:{name:"随机背景",init:!1,onclick:function(n){e.saveConfig("image_background_random",n),i.init.background()}},image_background_blur:{name:"背景模糊",init:!1,onclick:function(t){e.saveConfig("image_background_blur",t),i.config.image_background_blur?(n.background.style.filter="blur(8px)",n.background.style.webkitFilter="blur(8px)",n.background.style.transform="scale(1.05)"):(n.background.style.filter="",n.background.style.webkitFilter="",n.background.style.transform="")}},phonelayout:{name:"触屏布局",init:!1,onclick:function(a){if(t.is.nomenu("phonelayout",a))return!1;e.saveConfig("phonelayout",a),t.is.phoneLayout()?(n.css.phone.href=i.assetURL+"layout/default/phone.css",n.arena.classList.add("phone")):(n.css.phone.href="",n.arena.classList.remove("phone"))}},change_skin:{name:"开启换肤",init:!0,intro:"在武将的右键菜单中换肤，皮肤可在选项-文件-图片文件-皮肤图片中添加"},change_skin_auto:{name:"自动换肤",init:"off",item:{off:"关闭",3e4:"半分钟",6e4:"一分钟",12e4:"两分钟",3e5:"五分钟"},intro:"游戏每进行一段时间自动为一个随机角色更换皮肤",onclick:function(t){e.saveConfig("change_skin_auto",t),clearTimeout(a.skintimeout),"off"!=t&&(a.skintimeout=setTimeout(n.click.autoskin,parseInt(t)))}},card_style:{name:"卡牌样式",init:"default",intro:"设置正面朝上的卡牌的样式",item:{wood:"木纹",music:"音乐",simple:"原版",ol:"手杀",custom:"自定",default:"默认"},visualBar:function(t,a,o,s){if(!t.created){for(var r,c=0;c<t.parentNode.childElementCount;c++)"custom"==t.parentNode.childNodes[c]._link&&(r=t.parentNode.childNodes[c]);r&&(t.created=!0,n.create.filediv(".menubutton","添加图片",t,(function(n){n&&e.putDB("image","card_style",n,(function(){e.getDB("image","card_style",(function(e){if(e){var n=new FileReader;n.onload=function(e){var n=e.target.result;r.style.backgroundImage="url("+n+")",r.className="button card fullskin",t.classList.add("showdelete")},n.readAsDataURL(e,"UTF-8")}}))}))})).inputNode.accept="image*",n.create.div(".menubutton.deletebutton","删除图片",t,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(e.deleteDB("image","card_style"),r.style.backgroundImage="none",r.className="button character dashedmenubutton",t.classList.remove("showdelete"),"custom"==i.config.card_style&&(i.configMenu.appearence.config.card_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(n,t,a,o){switch(n.className="button card fullskin",n.style.backgroundSize="100% 100%",t){case"default":case"custom":"simple"==i.config.theme?(n.style.backgroundImage="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4))",n.className="button character"):(n.style.backgroundImage="none",n.className="button character dashedmenubutton");break;case"new":n.setBackgroundImage("theme/style/card/image/new.png");break;case"ol":n.setBackgroundImage("theme/style/card/image/ol.png");break;case"wood":n.setBackgroundImage("theme/woodden/wood.jpg"),n.style.backgroundSize="initial";break;case"music":n.setBackgroundImage("theme/music/wood3.png");break;case"simple":n.setBackgroundImage("theme/simple/card.png")}"custom"==t&&(n.classList.add("transparent"),e.getDB("image","card_style",(function(e){if(e){var t=new FileReader;t.onload=function(e){var t=e.target.result;n.style.backgroundImage="url("+t+")",n.className="button card fullskin",n.parentNode.lastChild.classList.add("showdelete")},t.readAsDataURL(e,"UTF-8")}})))},onclick:function(t){e.saveConfig("card_style",t);var a=n.css.card_style;n.css.card_style=i.init.css(i.assetURL+"theme/style/card",i.config.card_style),a.remove(),n.css.card_stylesheet&&(n.css.card_stylesheet.remove(),delete n.css.card_stylesheet),"custom"==t&&e.getDB("image","card_style",(function(e){if(e){var t=new FileReader;t.onload=function(e){n.css.card_stylesheet&&n.css.card_stylesheet.remove(),n.css.card_stylesheet=i.init.sheet(".card:not(*:empty){background-image:url("+e.target.result+")}")},t.readAsDataURL(e,"UTF-8")}}))},unfrequent:!0},cardback_style:{name:"卡背样式",intro:"设置背面朝上的卡牌的样式",init:"default",item:{vk:"V杀",official:"原版",feicheng:"废城",liusha:"流沙",ol:"手杀",custom:"自定",default:"默认"},visualBar:function(t,a,o,s){if(!t.created){for(var r,c=0;c<t.parentNode.childElementCount;c++)"custom"==t.parentNode.childNodes[c]._link&&(r=t.parentNode.childNodes[c]);r&&(t.created=!0,n.create.filediv(".menubutton","添加图片",t,(function(n){n&&e.putDB("image","cardback_style",n,(function(){e.getDB("image","cardback_style",(function(e){if(e){var n=new FileReader;n.onload=function(e){var n=e.target.result;r.style.backgroundImage="url("+n+")",r.className="button character",t.classList.add("showdelete")},n.readAsDataURL(e,"UTF-8")}}))}))})).inputNode.accept="image/*",n.create.filediv(".menubutton.deletebutton.addbutton","添加翻转图片",t,(function(n){n&&e.putDB("image","cardback_style2",n,(function(){t.classList.add("hideadd")}))})).inputNode.accept="image/*",n.create.div(".menubutton.deletebutton","删除图片",t,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(e.deleteDB("image","cardback_style"),e.deleteDB("image","cardback_style2"),r.style.backgroundImage="none",r.className="button character dashedmenubutton",t.classList.remove("showdelete"),t.classList.remove("hideadd"),"custom"==i.config.cardback_style&&(i.configMenu.appearence.config.cardback_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(n,t,i,a){switch(n.style.backgroundSize="100% 100%",t){case"default":case"custom":n.style.backgroundImage="none",n.className="button character dashedmenubutton";break;case"vk":n.className="button character",n.setBackgroundImage("theme/style/cardback/image/vk.png");break;case"new":n.className="button character",n.setBackgroundImage("theme/style/cardback/image/new.png");break;case"feicheng":n.className="button character",n.setBackgroundImage("theme/style/cardback/image/feicheng.png");break;case"official":n.className="button character",n.setBackgroundImage("theme/style/cardback/image/official.png");break;case"liusha":n.className="button character",n.setBackgroundImage("theme/style/cardback/image/liusha.png");break;case"ol":n.className="button character",n.setBackgroundImage("theme/style/cardback/image/ol.png");break;case"wood":n.className="button card fullskin",n.setBackgroundImage("theme/woodden/wood.jpg"),n.style.backgroundSize="initial";break;case"music":n.className="button card fullskin",n.setBackgroundImage("theme/music/wood3.png")}"custom"==t&&(n.classList.add("transparent"),e.getDB("image","cardback_style",(function(t){if(t){var i=new FileReader;i.onload=function(t){var i=t.target.result;n.style.backgroundImage="url("+i+")",n.className="button character",n.parentNode.lastChild.classList.add("showdelete"),e.getDB("image","cardback_style2",(function(e){e&&n.parentNode.lastChild.classList.add("hideadd")}))},i.readAsDataURL(t,"UTF-8")}})))},onclick:function(t){e.saveConfig("cardback_style",t);var a=n.css.cardback_style;n.css.cardback_style=i.init.css(i.assetURL+"theme/style/cardback",i.config.cardback_style),a.remove(),n.css.cardback_stylesheet&&(n.css.cardback_stylesheet.remove(),delete n.css.cardback_stylesheet),n.css.cardback_stylesheet2&&(n.css.cardback_stylesheet2.remove(),delete n.css.cardback_stylesheet2),"custom"==t&&e.getDB("image","cardback_style",(function(t){if(t){var a=new FileReader;a.onload=function(t){n.css.cardback_stylesheet&&n.css.cardback_stylesheet.remove(),n.css.cardback_stylesheet=i.init.sheet(".card:empty,.card.infohidden{background-image:url("+t.target.result+")}"),e.getDB("image","cardback_style2",(function(e){if(e){var t=new FileReader;t.onload=function(e){n.css.cardback_stylesheet2&&n.css.cardback_stylesheet2.remove(),n.css.cardback_stylesheet2=i.init.sheet(".card.infohidden:not(.infoflip){background-image:url("+e.target.result+")}")},t.readAsDataURL(e,"UTF-8")}}))},a.readAsDataURL(t,"UTF-8")}}))},unfrequent:!0},hp_style:{name:"体力条样式",init:"ol",item:{default:"默认",emotion:"表情",glass:"勾玉",round:"国战",ol:"手杀",xinglass:"双鱼",xinround:"OL",custom:"自定"},visualBar:function(t,a,o,s){if(!t.created){for(var r,c=0;c<t.parentNode.childElementCount;c++)"custom"==t.parentNode.childNodes[c]._link&&(r=t.parentNode.childNodes[c]);r&&(t.created=!0,n.create.filediv(".menubutton.addbutton","添加图片",t,(function(n){n&&t.currentDB&&e.putDB("image","hp_style"+t.currentDB,n,(function(){e.getDB("image","hp_style"+t.currentDB,(function(e){if(e){var n=new FileReader;n.onload=function(e){var n=e.target.result;r.childNodes[t.currentDB-1].style.backgroundImage="url("+n+")",r.classList.add("shown"),t.classList.add("showdelete"),t.currentDB++,t.currentDB>4&&(t.classList.add("hideadd"),r.classList.remove("transparent"),delete t.currentDB)},n.readAsDataURL(e,"UTF-8")}}))}))})).inputNode.accept="image/*",n.create.div(".menubutton.deletebutton","删除图片",t,(function(){if(confirm("确定删除自定义图片？（此操作不可撤销）")){e.deleteDB("image","hp_style1"),e.deleteDB("image","hp_style2"),e.deleteDB("image","hp_style3"),e.deleteDB("image","hp_style4");for(var n=0;n<r.childElementCount;n++)r.childNodes[n].style.backgroundImage="none";t.classList.remove("showdelete"),t.classList.remove("hideadd"),"custom"==i.config.hp_style&&(i.configMenu.appearence.config.hp_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"),r.classList.remove("shown"),t.currentDB=1}})))}},visualMenu:function(t,i,a,o){t.className="button hpbutton dashedmenubutton",t.innerHTML="";for(var s=1;s<=4;s++){var r=n.create.div(t);"default"==i?n.create.div(r):"custom"!=i&&r.setBackgroundImage("theme/style/hp/image/"+i+s+".png"),4==s&&(r.style.webkitFilter="grayscale(1)")}if("custom"==i){t.classList.add("transparent");var c=function(n){t.parentNode.lastChild.currentDB=n,e.getDB("image","hp_style"+n,(function(e){if(e){var i=new FileReader;i.onload=function(e){var i=e.target.result;t.childNodes[n-1].style.backgroundImage="url("+i+")",t.classList.add("shown"),t.parentNode.lastChild.classList.add("showdelete"),n<4?c(n+1):(t.parentNode.lastChild.classList.add("hideadd"),t.classList.remove("transparent"),delete t.parentNode.firstChild.currentDB)},i.readAsDataURL(e,"UTF-8")}}))};c(1)}},onclick:function(t){e.saveConfig("hp_style",t);var a=n.css.hp_style;n.css.hp_style=i.init.css(i.assetURL+"theme/style/hp",i.config.hp_style),a.remove(),n.css.hp_stylesheet1&&(n.css.hp_stylesheet1.remove(),delete n.css.hp_stylesheet1),n.css.hp_stylesheet2&&(n.css.hp_stylesheet2.remove(),delete n.css.hp_stylesheet2),n.css.hp_stylesheet3&&(n.css.hp_stylesheet3.remove(),delete n.css.hp_stylesheet3),n.css.hp_stylesheet4&&(n.css.hp_stylesheet4.remove(),delete n.css.hp_stylesheet4),"custom"==t&&(e.getDB("image","hp_style1",(function(e){if(e){var t=new FileReader;t.onload=function(e){n.css.hp_stylesheet1&&n.css.hp_stylesheet1.remove(),n.css.hp_stylesheet1=i.init.sheet('.hp:not(.text):not(.actcount)[data-condition="high"]>div:not(.lost){background-image:url('+e.target.result+")}")},t.readAsDataURL(e,"UTF-8")}})),e.getDB("image","hp_style2",(function(e){if(e){var t=new FileReader;t.onload=function(e){n.css.hp_stylesheet2&&n.css.hp_stylesheet2.remove(),n.css.hp_stylesheet2=i.init.sheet('.hp:not(.text):not(.actcount)[data-condition="mid"]>div:not(.lost){background-image:url('+e.target.result+")}")},t.readAsDataURL(e,"UTF-8")}})),e.getDB("image","hp_style3",(function(e){if(e){var t=new FileReader;t.onload=function(e){n.css.hp_stylesheet3&&n.css.hp_stylesheet3.remove(),n.css.hp_stylesheet3=i.init.sheet('.hp:not(.text):not(.actcount)[data-condition="low"]>div:not(.lost){background-image:url('+e.target.result+")}")},t.readAsDataURL(e,"UTF-8")}})),e.getDB("image","hp_style4",(function(e){if(e){var t=new FileReader;t.onload=function(e){n.css.hp_stylesheet4&&n.css.hp_stylesheet4.remove(),n.css.hp_stylesheet4=i.init.sheet(".hp:not(.text):not(.actcount)>.lost{background-image:url("+e.target.result+")}")},t.readAsDataURL(e,"UTF-8")}})))},unfrequent:!0},player_style:{name:"角色背景",init:"simple",intro:"设置角色的背景图片",item:{wood:"木纹",music:"音乐",simple:"简约",custom:"自定",default:"默认"},visualBar:function(t,a,o,s){if(!t.created){for(var r,c=0;c<t.parentNode.childElementCount;c++)"custom"==t.parentNode.childNodes[c]._link&&(r=t.parentNode.childNodes[c]);r&&(t.created=!0,n.create.filediv(".menubutton","添加图片",t,(function(n){n&&e.putDB("image","player_style",n,(function(){e.getDB("image","player_style",(function(e){if(e){var n=new FileReader;n.onload=function(e){var n=e.target.result;r.style.backgroundImage="url("+n+")",r.className="button character",r.style.backgroundSize="100% 100%",t.classList.add("showdelete")},n.readAsDataURL(e,"UTF-8")}}))}))})).inputNode.accept="image/*",n.create.div(".menubutton.deletebutton","删除图片",t,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(e.deleteDB("image","player_style"),r.style.backgroundImage="none",r.className="button character dashedmenubutton",t.classList.remove("showdelete"),"custom"==i.config.player_style&&(i.configMenu.appearence.config.player_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(n,t,i,a){switch(n.className="button character",n.style.backgroundSize="",n.style.height="108px",t){case"default":case"custom":n.style.backgroundImage="none",n.className="button character dashedmenubutton";break;case"wood":n.setBackgroundImage("theme/woodden/wood.jpg");break;case"music":n.style.backgroundImage="linear-gradient(#4b4b4b, #464646)";break;case"simple":n.style.backgroundImage="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4))"}"custom"==t&&(n.classList.add("transparent"),e.getDB("image","player_style",(function(e){if(e){var t=new FileReader;t.onload=function(e){var t=e.target.result;n.style.backgroundImage="url("+t+")",n.className="button character",n.parentNode.lastChild.classList.add("showdelete"),n.style.backgroundSize="100% 100%"},t.readAsDataURL(e,"UTF-8")}})))},onclick:function(t){if(e.saveConfig("player_style",t),n.css.player_stylesheet&&(n.css.player_stylesheet.remove(),delete n.css.player_stylesheet),"custom"==t)e.getDB("image","player_style",(function(e){if(e){var t=new FileReader;t.onload=function(e){n.css.player_stylesheet&&n.css.player_stylesheet.remove(),n.css.player_stylesheet=i.init.sheet('#window .player{background-image:url("'+e.target.result+'");background-size:100% 100%;}')},t.readAsDataURL(e,"UTF-8")}}));else if("default"!=t){var a="";switch(t){case"wood":a='url("'+i.assetURL+'theme/woodden/wood.jpg")';break;case"music":a="linear-gradient(#4b4b4b, #464646)";break;case"simple":a="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4))"}n.css.player_stylesheet=i.init.sheet("#window .player{background-image:"+a+"}")}},unfrequent:!0},border_style:{name:"角色边框",init:"default",intro:"设置角色边框的样式，当设为自动时，样式将随着一局游戏中伤害或击杀的数量自动改变",item:{gold:"金框",silver:"银框",bronze:"铜框",dragon_gold:"金龙",dragon_silver:"银龙",dragon_bronze:"玉龙",custom:"自定",auto:"自动",default:"默认"},visualBar:function(t,a,o,s){if(!t.created){for(var r,c=0;c<t.parentNode.childElementCount;c++)"custom"==t.parentNode.childNodes[c]._link&&(r=t.parentNode.childNodes[c]);r&&(t.created=!0,n.create.filediv(".menubutton","添加图片",t,(function(n){n&&e.putDB("image","border_style",n,(function(){e.getDB("image","border_style",(function(e){if(e){var n=new FileReader;n.onload=function(e){var n=e.target.result;r.style.backgroundImage="url("+n+")",r.className="button character",r.style.backgroundSize="100% 100%",t.classList.add("showdelete")},n.readAsDataURL(e,"UTF-8")}}))}))})).inputNode.accept="image/*",n.create.div(".menubutton.deletebutton","删除图片",t,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(e.deleteDB("image","border_style"),r.style.backgroundImage="none",r.className="button character dashedmenubutton",t.classList.remove("showdelete"),"custom"==i.config.border_style&&(i.configMenu.appearence.config.border_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(n,t,i,a){n.className="button character",n.style.backgroundSize="",n.style.height="108px",n.dataset.decoration="","default"==t||"custom"==t||"auto"==t?(n.style.backgroundImage="none",n.className="button character dashedmenubutton"):(0==t.indexOf("dragon_")&&(t=t.slice(7),n.dataset.decoration=t),n.setBackgroundImage("theme/style/player/"+t+"1.png"),n.style.backgroundSize="100% 100%"),"custom"==t&&(n.classList.add("transparent"),e.getDB("image","border_style",(function(e){if(e){var t=new FileReader;t.onload=function(e){var t=e.target.result;n.style.backgroundImage="url("+t+")",n.className="button character",n.parentNode.lastChild.classList.add("showdelete"),n.style.backgroundSize="100% 100%"},t.readAsDataURL(e,"UTF-8")}})))},onclick:function(t){e.saveConfig("border_style",t),n.css.border_stylesheet&&(n.css.border_stylesheet.remove(),delete n.css.border_stylesheet),"custom"==t?e.getDB("image","border_style",(function(e){if(e){var t=new FileReader;t.onload=function(e){n.css.border_stylesheet&&n.css.border_stylesheet.remove(),n.css.border_stylesheet=i.init.sheet(),n.css.border_stylesheet.sheet.insertRule('#window .player>.framebg{display:block;background-image:url("'+e.target.result+'")}',0),n.css.border_stylesheet.sheet.insertRule(".player>.count{z-index: 3 !important;border-radius: 2px !important;text-align: center !important;}",0)},t.readAsDataURL(e,"UTF-8")}})):"default"!=t&&"auto"!=t&&(n.css.border_stylesheet=i.init.sheet(),0==t.indexOf("dragon_")?(t=t.slice(7),n.arena.dataset.framedecoration=t):n.arena.dataset.framedecoration="",n.css.border_stylesheet.sheet.insertRule('#window .player>.framebg,#window #arena.long.mobile:not(.fewplayer) .player[data-position="0"]>.framebg{display:block;background-image:url("'+i.assetURL+"theme/style/player/"+t+'1.png")}',0),n.css.border_stylesheet.sheet.insertRule('#window #arena.long:not(.fewplayer) .player>.framebg, #arena.oldlayout .player>.framebg{background-image:url("'+i.assetURL+"theme/style/player/"+t+'3.png")}',0),n.css.border_stylesheet.sheet.insertRule(".player>.count{z-index: 3 !important;border-radius: 2px !important;text-align: center !important;}",0))},unfrequent:!0},autoborder_count:{name:"边框升级方式",intro:"<strong>击杀</strong> 每击杀一人，边框提升两级<br><strong>伤害</strong> 每造成两点伤害，边框提升一级<br><strong>混合</strong> 击杀量决定边框颜色，伤害量决定边框装饰",init:"kill",item:{kill:"击杀",damage:"伤害",mix:"混合"},unfrequent:!0},autoborder_start:{name:"基础边框颜色",init:"bronze",item:{bronze:"铜",silver:"银",gold:"金"},unfrequent:!0},player_border:{name:"边框宽度",init:"normal",intro:"设置角色的边框宽度",unfrequent:!0,item:{slim:"细",narrow:"窄",normal:"中",wide:"宽"},onclick:function(t){e.saveConfig("player_border",t),"wide"!=t||"long"==e.layout||"long2"==e.layout?n.arena.classList.add("slim_player"):n.arena.classList.remove("slim_player"),"slim"==t?n.arena.classList.add("uslim_player"):n.arena.classList.remove("uslim_player"),"narrow"==t?n.arena.classList.add("mslim_player"):n.arena.classList.remove("mslim_player"),"normal"!=t||"brawl"==i.config.mode||"long"!=e.layout&&"long2"!=e.layout?n.arena.classList.remove("lslim_player"):n.arena.classList.add("lslim_player"),n.window.dataset.player_border=t}},menu_style:{name:"菜单背景",init:"default",item:{wood:"木纹",music:"音乐",simple:"简约",custom:"自定",default:"默认"},visualBar:function(t,a,o,s){if(!t.created){for(var r,c=0;c<t.parentNode.childElementCount;c++)"custom"==t.parentNode.childNodes[c]._link&&(r=t.parentNode.childNodes[c]);r&&(t.created=!0,n.create.filediv(".menubutton","添加图片",t,(function(n){n&&e.putDB("image","menu_style",n,(function(){e.getDB("image","menu_style",(function(e){if(e){var n=new FileReader;n.onload=function(e){var n=e.target.result;r.style.backgroundImage="url("+n+")",r.style.backgroundSize="cover",r.className="button character",t.classList.add("showdelete")},n.readAsDataURL(e,"UTF-8")}}))}))})).inputNode.accept="image/*",n.create.div(".menubutton.deletebutton","删除图片",t,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(e.deleteDB("image","menu_style"),r.style.backgroundImage="none",r.style.backgroundSize="auto",r.className="button character dashedmenubutton",t.classList.remove("showdelete"),"custom"==i.config.menu_style&&(i.configMenu.appearence.config.menu_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(n,t,i,a){switch(n.className="button character",n.style.backgroundSize="auto",t){case"default":case"custom":n.style.backgroundImage="none",n.classList.add("dashedmenubutton");break;case"wood":n.setBackgroundImage("theme/woodden/wood2.png");break;case"music":n.style.backgroundImage="linear-gradient(#4b4b4b, #464646)";break;case"simple":n.style.backgroundImage="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4))"}"custom"==t&&(n.classList.add("transparent"),e.getDB("image","menu_style",(function(e){if(e){var t=new FileReader;t.onload=function(e){var t=e.target.result;n.style.backgroundImage="url("+t+")",n.style.backgroundSize="cover",n.className="button character",n.parentNode.lastChild.classList.add("showdelete")},t.readAsDataURL(e,"UTF-8")}})))},onclick:function(t){if(e.saveConfig("menu_style",t),n.css.menu_stylesheet&&(n.css.menu_stylesheet.remove(),delete n.css.menu_stylesheet),"custom"==t)e.getDB("image","menu_style",(function(e){if(e){var t=new FileReader;t.onload=function(e){n.css.menu_stylesheet&&n.css.menu_stylesheet.remove(),n.css.menu_stylesheet=i.init.sheet('html #window>.dialog.popped,html .menu,html .menubg{background-image:url("'+e.target.result+'");background-size:cover}')},t.readAsDataURL(e,"UTF-8")}}));else if("default"!=t){var a="";switch(t){case"wood":a='url("'+i.assetURL+'theme/woodden/wood2.png")';break;case"music":a="linear-gradient(#4b4b4b, #464646);color:white;text-shadow:black 0 0 2px";break;case"simple":a="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4));color:white;text-shadow:black 0 0 2px"}n.css.menu_stylesheet=i.init.sheet("html #window>.dialog.popped,html .menu,html .menubg{background-image:"+a+"}")}},unfrequent:!0},control_style:{name:"按钮背景",init:"default",item:{wood:"木纹",music:"音乐",simple:"简约",custom:"自定",default:"默认"},visualBar:function(t,a,o,s){if(!t.created){for(var r,c=0;c<t.parentNode.childElementCount;c++)"custom"==t.parentNode.childNodes[c]._link&&(r=t.parentNode.childNodes[c]);r&&(t.created=!0,n.create.filediv(".menubutton","添加图片",t,(function(n){n&&e.putDB("image","control_style",n,(function(){e.getDB("image","control_style",(function(e){if(e){var n=new FileReader;n.onload=function(e){var n=e.target.result;r.style.backgroundImage="url("+n+")",r.className="button character controlbutton",t.classList.add("showdelete")},n.readAsDataURL(e,"UTF-8")}}))}))})).inputNode.accept="image/*",n.create.div(".menubutton.deletebutton","删除图片",t,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(e.deleteDB("image","control_style"),r.style.backgroundImage="none",r.className="button character controlbutton dashedmenubutton",t.classList.remove("showdelete"),"custom"==i.config.control_style&&(i.configMenu.appearence.config.control_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(n,t,i,a){switch(n.className="button character controlbutton",n.style.backgroundSize="",t){case"default":case"custom":n.style.backgroundImage="none",n.classList.add("dashedmenubutton");break;case"wood":n.setBackgroundImage("theme/woodden/wood.jpg");break;case"music":n.style.backgroundImage="linear-gradient(#4b4b4b, #464646)";break;case"simple":n.style.backgroundImage="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4))"}"custom"==t&&(n.classList.add("transparent"),e.getDB("image","control_style",(function(e){if(e){var t=new FileReader;t.onload=function(e){var t=e.target.result;n.style.backgroundImage="url("+t+")",n.className="button character controlbutton",n.parentNode.lastChild.classList.add("showdelete")},t.readAsDataURL(e,"UTF-8")}})))},onclick:function(t){if(e.saveConfig("control_style",t),n.css.control_stylesheet&&(n.css.control_stylesheet.remove(),delete n.css.control_stylesheet),"custom"==t)e.getDB("image","control_style",(function(e){if(e){var t=new FileReader;t.onload=function(e){n.css.control_stylesheet&&n.css.control_stylesheet.remove(),n.css.control_stylesheet=i.init.sheet('#window .control,.menubutton:not(.active):not(.highlight):not(.red):not(.blue),#window #system>div>div{background-image:url("'+e.target.result+'")}')},t.readAsDataURL(e,"UTF-8")}}));else if("default"!=t){var a="";switch(t){case"wood":a='url("'+i.assetURL+'theme/woodden/wood.jpg")';break;case"music":a="linear-gradient(#4b4b4b, #464646);color:white;text-shadow:black 0 0 2px";break;case"simple":a="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4));color:white;text-shadow:black 0 0 2px"}n.css.control_stylesheet="wood"==t?i.init.sheet("#window .control,#window .menubutton,#window #system>div>div,#window #system>div>.pressdown2{background-image:"+a+"}"):i.init.sheet("#window .control,.menubutton:not(.active):not(.highlight):not(.red):not(.blue),#window #system>div>div{background-image:"+a+"}")}},unfrequent:!0},custom_button:{name:"自定义按钮高度",init:!1,unfrequent:!0,onclick:function(t){if("skip"!==t&&e.saveConfig("custom_button",t),n.css.buttonsheet&&n.css.buttonsheet.remove(),i.config.custom_button){var a=6+(parseInt(i.config.custom_button_system_top)||0),o=6+(parseInt(i.config.custom_button_system_bottom)||0),s=3+(parseInt(i.config.custom_button_control_top)||0),r=3+(parseInt(i.config.custom_button_control_bottom)||0),c=2,l=2;s<0&&(c+=s,s=0),r<0&&(l+=r,r=0),n.css.buttonsheet=i.init.sheet("#system>div>div, .caption>div>.tdnode{padding-top:"+a+"px !important;padding-bottom:"+o+"px !important}","#control>.control>div{padding-top:"+s+"px;padding-bottom:"+r+"px}","#control>.control{padding-top:"+c+"px;padding-bottom:"+l+"px}")}}},custom_button_system_top:{name:"菜单上部高度",init:"0x",item:{"-5x":"-5px","-4x":"-4px","-3x":"-3px","-2x":"-2px","-1x":"-1px","0x":"默认","1x":"1px","2x":"2px","3x":"3px","4x":"4px","5x":"5px"},unfrequent:!0,onclick:function(n){e.saveConfig("custom_button_system_top",n),i.configMenu.appearence.config.custom_button.onclick("skip")}},custom_button_system_bottom:{name:"菜单下部高度",init:"0x",item:{"-5x":"-5px","-4x":"-4px","-3x":"-3px","-2x":"-2px","-1x":"-1px","0x":"默认","1x":"1px","2x":"2px","3x":"3px","4x":"4px","5x":"5px"},unfrequent:!0,onclick:function(n){e.saveConfig("custom_button_system_bottom",n),i.configMenu.appearence.config.custom_button.onclick("skip")}},custom_button_control_top:{name:"技能上部高度",init:"0x",item:{"-5x":"-5px","-4x":"-4px","-3x":"-3px","-2x":"-2px","-1x":"-1px","0x":"默认","1x":"1px","2x":"2px","3x":"3px","4x":"4px","5x":"5px"},unfrequent:!0,onclick:function(n){e.saveConfig("custom_button_control_top",n),i.configMenu.appearence.config.custom_button.onclick("skip")}},custom_button_control_bottom:{name:"技能下部高度",init:"0x",item:{"-5x":"-5px","-4x":"-4px","-3x":"-3px","-2x":"-2px","-1x":"-1px","0x":"默认","1x":"1px","2x":"2px","3x":"3px","4x":"4px","5x":"5px"},unfrequent:!0,onclick:function(n){e.saveConfig("custom_button_control_bottom",n),i.configMenu.appearence.config.custom_button.onclick("skip")}},radius_size:{name:"圆角大小",init:"default",item:{off:"关闭",reduce:"减小",default:"默认",increase:"增大"},unfrequent:!0,onclick:function(t){e.saveConfig("radius_size",t),n.window.dataset.radius_size=t}},glow_phase:{name:"当前回合角色高亮",unfrequent:!0,init:"yellow",intro:"设置当前回合角色的边框颜色",item:{none:"无",yellow:"黄色",green:"绿色",purple:"紫色"},onclick:function(n){e.saveConfig("glow_phase",n),i.init.cssstyles()}},fold_card:{name:"折叠手牌",init:!0,unfrequent:!0},fold_mode:{name:"折叠模式菜单",intro:"关闭后模式菜单中“更多”内的项目将直接展开",init:!0,unfrequent:!0},seperate_control:{name:"分离选项条",init:!0,unfrequent:!0,intro:"开启后玩家在进行选择时不同的选项将分开，而不是连在一起"},blur_ui:{name:"模糊效果",intro:"在暂停或打开菜单时开启模糊效果",init:!1,unfrequent:!0,onclick:function(t){e.saveConfig("blur_ui",t),t?n.window.classList.add("blur_ui"):n.window.classList.remove("blur_ui")}},glass_ui:{name:"玻璃主题",intro:"为游戏主题打开玻璃效果（手机暂不支持）",init:!1,unfrequent:!0,onclick:function(t){e.saveConfig("glass_ui",t),t?n.window.classList.add("glass_ui"):n.window.classList.remove("glass_ui")}},damage_shake:{name:"伤害抖动",intro:"角色受到伤害时的抖动效果",init:!0,unfrequent:!0},button_press:{name:"按钮效果",intro:"选项条被按下时将有按下效果",init:!0,unfrequent:!0},jiu_effect:{name:"喝酒效果",init:!0,unfrequent:!0},animation:{name:"游戏特效",intro:"开启后出现属性伤害、回复体力等情况时会显示动画",init:!1,unfrequent:!0},skill_animation_type:{name:"技能特效",intro:"开启后觉醒技、限定技将显示全屏文字",init:"default",unfrequent:!0,item:{default:"默认",old:"旧版",off:"关闭"}},die_move:{name:"阵亡效果",intro:"阵亡后武将的显示效果",init:"flip",unfrequent:!0,item:{off:"关闭",move:"移动",flip:"翻面"}},target_shake:{name:"目标效果",intro:"一名玩家成为卡牌或技能的目标时的显示效果",init:"off",item:{off:"关闭",zoom:"缩放",shake:"抖动"},unfrequent:!0,onclick:function(t){e.saveConfig("target_shake",t),n.arena.dataset.target_shake=t}},turned_style:{name:"翻面文字",intro:"角色被翻面时显示“翻面”",init:!0,unfrequent:!0,onclick:function(t){e.saveConfig("turned_style",t),t?n.arena.classList.remove("hide_turned"):n.arena.classList.add("hide_turned")}},link_style2:{name:"横置样式",intro:"设置角色被横置时的样式",init:"chain",unfrequent:!0,item:{chain:"铁索",rotate:"横置",mark:"标记"},onclick:function(i){for(var a=[],o=0;o<e.players.length;o++)e.players[o].isLinked()&&a.push(e.players[o]);for(e.saveConfig("link_style2",i),o=0;o<a.length;o++)t.is.linked2(a[o])?(a[o].classList.add("linked2"),a[o].classList.remove("linked")):(a[o].classList.add("linked"),a[o].classList.remove("linked2"));"chain"==i?n.arena.classList.remove("nolink"):n.arena.classList.add("nolink"),n.updatem()}},cardshape:{name:"手牌显示",intro:"将手牌设置为正方形或长方形",init:"default",unfrequent:!0,item:{default:"默认",oblong:"长方"},onclick:function(i){var a=!1;e.me&&e.me.isLinked()&&(a=!0),e.saveConfig("cardshape",i),"oblong"!=i||"long"!=e.layout&&"mobile"!=e.layout&&"long2"!=e.layout&&"nova"!=e.layout?(n.arena.classList.remove("oblongcard"),n.window.classList.remove("oblongcard")):(n.arena.classList.add("oblongcard"),n.window.classList.add("oblongcard")),a&&(t.is.linked2(e.me)?(e.me.classList.remove("linked"),e.me.classList.add("linked2")):(e.me.classList.add("linked"),e.me.classList.remove("linked2")))}},cardtempname:{name:"视为卡牌名称显示",intro:"显示强制视为类卡牌（如武魂）等名称的显示方式",init:"default",unfrequent:!0,item:{default:"纵向",horizon:"横向",off:"禁用"},onclick:function(n){if(e.saveConfig("cardtempname",n),e.me&&e.me.getCards)for(var i=e.me.getCards("h"),a=0;a<i.length;a++)if(i[a]._tempName)switch(n){case"default":(o=i[a]._tempName).innerHTML=t.verticalStr(o.tempname);break;case"horizon":var o;(o=i[a]._tempName).innerHTML=o.tempname;break;default:i[a]._tempName.delete(),delete i[a]._tempName}}},textequip:{name:"装备显示",init:"image",unfrequent:!0,item:{image:"图片",text:"文字"},onclick:function(t){e.saveConfig("textequip",t),"text"!=t||"long"!=e.layout&&"mobile"!=e.layout?n.arena.classList.remove("textequip"):n.arena.classList.add("textequip")}},buttoncharacter_style:{name:"选将样式",init:"default",item:{default:"默认",simple:"精简",old:"旧版"},unfrequent:!0},cursor_style:{name:"鼠标指针",init:"auto",intro:"设置为固定后鼠标指针将不随移动到的区域而变化",unfrequent:!0,item:{auto:"自动",pointer:"固定"},onclick:function(t){e.saveConfig("cursor_style",t),"pointer"==t?n.window.classList.add("nopointer"):n.window.classList.remove("nopointer")}},name_font:{name:"人名字体",init:"LuoLiTi2",unfrequent:!0,item:{},textMenu:function(e,n){"default"!=n&&(e.style.fontFamily=n),e.style.fontSize="20px"},onclick:function(n){e.saveConfig("name_font",n),i.init.cssstyles()}},identity_font:{name:"身份字体",init:"xingkai",unfrequent:!0,item:{},textMenu:function(e,n){"default"!=n&&(e.style.fontFamily=n),e.style.fontSize="20px"},onclick:function(n){e.saveConfig("identity_font",n),i.init.cssstyles()}},cardtext_font:{name:"卡牌字体",init:"LuoLiTi2",unfrequent:!0,item:{},textMenu:function(e,n){"default"!=n&&(e.style.fontFamily=n),e.style.fontSize="20px"},onclick:function(n){e.saveConfig("cardtext_font",n),i.init.cssstyles()}},global_font:{name:"界面字体",init:"default",unfrequent:!0,item:{},textMenu:function(e,n){e.style.fontFamily="default"!=n?n:"'STHeiti','SimHei','Microsoft JhengHei','Microsoft YaHei','WenQuanYi Micro Hei',Helvetica,Arial,sans-serif",e.style.fontSize="20px"},onclick:function(n){e.saveConfig("global_font",n),i.init.cssstyles()}},update:function(e,n){i.config.custom_button?(n.custom_button_system_top.show(),n.custom_button_system_bottom.show(),n.custom_button_control_top.show(),n.custom_button_control_bottom.show()):(n.custom_button_system_top.hide(),n.custom_button_system_bottom.hide(),n.custom_button_control_top.hide(),n.custom_button_control_bottom.hide()),i.config.change_skin?n.change_skin_auto.show():n.change_skin_auto.hide(),i.config.image_background_random?(n.image_background_blur.show(),n.image_background.hide()):(n.image_background.show(),"default"==i.config.image_background?n.image_background_blur.hide():n.image_background_blur.show()),"long"==i.config.layout||"mobile"==i.config.layout?(n.textequip.show(),n.cardshape.show(),n.phonelayout.show()):(n.textequip.hide(),"long2"==i.config.layout||"nova"==i.config.layout?(n.phonelayout.show(),n.cardshape.show()):(n.phonelayout.hide(),n.cardshape.hide())),"long"==i.config.layout||"long2"==i.config.layout?n.player_height.show():n.player_height.hide(),"nova"==i.config.layout?n.player_height_nova.show():n.player_height_nova.hide(),i.config.touchscreen?n.cursor_style.hide():n.cursor_style.show(),"auto"==i.config.border_style?(n.autoborder_count.show(),n.autoborder_start.show()):(n.autoborder_count.hide(),n.autoborder_start.hide())}}},view:{name:"显示",config:{update:function(n,a){["versus","chess","tafang","boss","richer"].contains(i.config.mode)?a.show_handcardbutton.show():a.show_handcardbutton.hide(),i.config.touchscreen?a.pop_logv.hide():a.pop_logv.show(),i.device?("android"==i.device?(a.show_statusbar_android.show(),a.show_statusbar_ios.hide()):"ios"==i.device&&(a.show_statusbar_ios.show(),a.show_statusbar_android.hide()),e.download||setTimeout((function(){window.StatusBar||a.show_statusbar.hide()}),5e3)):(a.show_statusbar_ios.hide(),a.show_statusbar_android.hide()),t.is.phoneLayout()?(a.remember_round_button.show(),a.popequip.show(),a.filternode_button.show(),a.show_pause.hide(),a.show_auto.hide(),a.show_replay.hide(),a.show_round_menu.show()):(a.show_pause.show(),a.show_auto.show(),a.show_replay.show(),a.show_round_menu.hide(),a.remember_round_button.hide(),a.popequip.hide(),a.filternode_button.hide()),i.config.show_card_prompt?(a.hide_card_prompt_basic.show(),a.hide_card_prompt_equip.show()):(a.hide_card_prompt_basic.hide(),a.hide_card_prompt_equip.hide()),"off"!=i.config.show_log?a.clear_log.show():a.clear_log.hide(),t.is.phoneLayout()?(a.show_time2.show(),a.show_time.hide(),i.config.show_time2?a.watchface.show():a.watchface.hide()):(a.show_time2.hide(),a.show_time.show(),a.watchface.hide()),i.config.show_extensionmaker?a.show_extensionshare.show():a.show_extensionshare.hide()},show_history:{name:"出牌记录栏",init:"off",intro:"在屏幕左侧或右侧显示出牌记录",unfrequent:!0,item:{off:"关闭",left:"靠左",right:"靠右"},onclick:function(t){"right"==i.config.show_history&&n.window.animate("rightbar2"),e.saveConfig("show_history",t),!a.video&&a.prepareArena&&("left"==t?(n.window.classList.add("leftbar"),n.window.classList.remove("rightbar")):"right"==t?(n.window.classList.remove("leftbar"),n.window.classList.add("rightbar")):(n.window.classList.remove("leftbar"),n.window.classList.remove("rightbar")))}},pop_logv:{name:"自动弹出记录",init:!1,unfrequent:!0},show_log:{name:"历史记录栏",init:"off",intro:"在屏幕中部显示出牌文字记录",unfrequent:!0,item:{off:"关闭",left:"靠左",center:"居中",right:"靠右"},onclick:function(t){e.saveConfig("show_log",t),"off"!=i.config.show_log?(n.arenalog.style.display="",n.arenalog.dataset.position=t):(n.arenalog.style.display="none",n.arenalog.innerHTML="")}},clear_log:{name:"自动清除历史记录",init:!1,unfrequent:!0,intro:"开启后将定时清除历史记录栏的条目（而不是等记录栏满后再清除）"},log_highlight:{name:"历史记录高亮",init:!0,unfrequent:!0,intro:"开启后历史记录不同类别的信息将以不同颜色显示"},show_time:{name:"显示时间",intro:"在屏幕顶部显示当前时间",init:!1,unfrequent:!0,onclick:function(t){e.saveConfig("show_time",t),n.time.style.display=t?"":"none"}},show_time2:{name:"显示时间",intro:"在触屏按钮处显示当前时间",init:!1,unfrequent:!0,onclick:function(t){e.saveConfig("show_time2",t),t?n.roundmenu.classList.add("clock"):n.roundmenu.classList.remove("clock")}},watchface:{name:"表盘样式",init:"none",unfrequent:!0,item:{none:"默认",simple:"简约"},onclick:function(t){e.saveConfig("watchface",t),n.roundmenu.dataset.watchface=t}},show_time3:{name:"显示游戏时间",init:!1,unfrequent:!0},show_statusbar_android:{name:"显示状态栏",init:!1,unfrequent:!0,content:function(n){e.saveConfig("show_statusbar",n),window.StatusBar&&"android"==i.device&&(n?(window.StatusBar.overlaysWebView(!1),window.StatusBar.backgroundColorByName("black"),window.StatusBar.show()):window.StatusBar.hide())}},show_statusbar_ios:{name:"显示状态栏",init:"off",unfrequent:!0,item:{default:"默认",overlay:"嵌入",auto:"自动",off:"关闭"},onclick:function(n){e.saveConfig("show_statusbar_ios",n),window.StatusBar&&"ios"==i.device&&("off"!=n&&"auto"!=n?("default"==i.config.show_statusbar_ios?(window.StatusBar.overlaysWebView(!1),document.body.classList.remove("statusbar")):(window.StatusBar.overlaysWebView(!0),document.body.classList.add("statusbar")),window.StatusBar.backgroundColorByName("black"),window.StatusBar.show()):(document.body.classList.remove("statusbar"),window.StatusBar.hide()))}},show_card_prompt:{name:"显示出牌信息",intro:"出牌时在使用者上显示卡牌名称",init:!0,unfrequent:!0},hide_card_prompt_basic:{name:"隐藏基本牌信息",intro:"不显示基本牌名称",init:!1,unfrequent:!0},hide_card_prompt_equip:{name:"隐藏装备牌信息",intro:"不显示装备牌名称",init:!1,unfrequent:!0},show_phase_prompt:{name:"显示阶段信息",intro:"在当前回合不同阶段开始时显示阶段名称",init:!0,unfrequent:!0},show_phaseuse_prompt:{name:"出牌阶段提示",intro:"在你出牌时显示提示文字",init:!0,unfrequent:!0},auto_popped_config:{name:"自动弹出选项",intro:"鼠标移至选项按钮时弹出模式选择菜单",init:!0,unfrequent:!0},auto_popped_history:{name:"自动弹出历史",intro:"鼠标移至暂停按钮时弹出历史记录菜单",init:!1,unfrequent:!0},show_round_menu:{name:"显示触屏按钮",init:!0,unfrequent:!0,onclick:function(i){if(t.is.nomenu("show_round_menu",i))return!1;e.saveConfig("show_round_menu",i),i&&n.roundmenu?n.roundmenu.style.display="":(n.roundmenu.style.display="none",alert("关闭触屏按钮后可通过手势打开菜单（默认为下划）"))}},remember_round_button:{name:"记住按钮位置",intro:"重新开始后触屏按钮将保存的上一局的位置",init:!1,unfrequent:!0,onclick:function(t){e.saveConfig("remember_round_button",t),t||n.click.resetround()}},remember_dialog:{name:"记住对话框位置",intro:"移动对话框后新的对话框也将在移动后的位置显示",init:!1,unfrequent:!0,onclick:function(t){if(e.saveConfig("remember_dialog",t),!t){if(n.dialog){var i=n.dialog;i.style.transform="",i._dragtransform=[0,0],i.style.transition="all 0.3s",i._dragtouches,i._dragorigin,i._dragorigintransform,setTimeout((function(){i.style.transition=""}),500)}e.saveConfig("dialog_transform",[0,0])}}},transparent_dialog:{name:"堆叠对话框虚化",init:!1,intro:"当具有static属性的对话框堆叠（如五谷丰登对话框中提示无懈可击）时，将后方的对话框变为半透明",onclick:function(t){if(e.saveConfig("transparent_dialog",t),t)for(var i=0;i<n.dialogs.length;i++)n.dialogs[i]!=n.dialog&&n.dialogs[i].static&&n.dialogs[i].unfocus();else for(i=0;i<n.dialogs.length;i++)n.dialogs[i]!=n.dialog&&n.dialogs[i].static&&n.dialogs[i].refocus()}},show_rarity:{name:"显示武将稀有度",init:!1,intro:"仅供娱乐，重启后生效",unfrequent:!0,onclick:function(n){e.saveConfig("show_rarity",n)}},mark_identity_style:{name:"标记身份操作",intro:"设置单击身份按钮时的操作",unfrequent:!0,init:"menu",item:{menu:"菜单",click:"单击"}},character_dialog_tool:{name:"自由选将显示",intro:"点击自由选将时默认显示的条目",init:"最近",item:{收藏:"收藏",最近:"最近",all:"全部"},unfrequent:!0},recent_character_number:{name:"最近使用武将",intro:"自由选将对话框中最近使用武将的数量",init:"12",item:{6:"6",12:"12",20:"24",30:"36"},unfrequent:!0},popequip:{name:"触屏装备选择",intro:"设置触屏布局中选择装备的方式",init:!0,unfrequent:!0},filternode_button:{name:"触屏筛选按钮",intro:"设置自由选将对话框中筛选按钮的样式",init:!0,unfrequent:!0},show_charactercard:{name:"显示武将资料",intro:"在武将界面单击时弹出武将资料卡",init:!0,unfrequent:!0},show_favourite:{name:"显示添加收藏",intro:"在角色的右键菜单中显示添加收藏",init:!1,unfrequent:!0},show_favmode:{name:"显示模式收藏",intro:"快捷菜单中显示收藏模式",init:!0,unfrequent:!0},show_favourite_menu:{name:"显示收藏菜单",intro:"在选项-武将中显示收藏一栏",init:!0,unfrequent:!0},show_ban_menu:{name:"显示禁将菜单",intro:"在选项-武将中显示禁将一栏",init:!0,unfrequent:!0},right_range:{name:"显示距离信息",intro:"在角色的右键菜单中显示距离等信息",init:!0,unfrequent:!0},replace_image:{name:"替换为原始卡图",intro:"所有V版卡图替换为三国杀原版卡图",init:!1,unfrequent:!0,onclick:function(t){e.saveConfig("replace_image",t),t?n.arena.classList.remove("replace_image"):n.arena.classList.add("replace_image")}},hide_card_image:{name:"隐藏卡牌背景",intro:"所有卡牌将使用文字作为背景",init:!1,unfrequent:!0,restart:!0},show_name:{name:"显示角色名称",init:!1,unfrequent:!0,onclick:function(t){e.saveConfig("show_name",t),t?n.arena.classList.remove("hide_name"):n.arena.classList.add("hide_name")}},show_replay:{name:"显示重来按钮",init:!1,unfrequent:!0,onclick:function(t){e.saveConfig("show_replay",t),i.config.show_replay?n.replay.style.display="":n.replay.style.display="none"}},show_playerids:{name:"显示身份按钮",init:!0,unfrequent:!0,onclick:function(t){e.saveConfig("show_playerids",t),i.config.show_playerids?n.playerids.style.display="":n.playerids.style.display="none"}},show_sortcard:{name:"显示整理手牌按钮",init:!0,unfrequent:!0,onclick:function(t){e.saveConfig("show_sortcard",t),i.config.show_sortcard?n.sortCard.style.display="":n.sortCard.style.display="none"}},show_pause:{name:"显示暂停按钮",init:!0,unfrequent:!0,onclick:function(t){e.saveConfig("show_pause",t),i.config.show_pause?n.pause.style.display="":n.pause.style.display="none"}},show_auto:{name:"显示托管按钮",init:!0,unfrequent:!0,onclick:function(t){e.saveConfig("show_auto",t),i.config.show_auto?n.auto.style.display="":n.auto.style.display="none"}},show_volumn:{name:"显示音量按钮",init:!0,unfrequent:!0,onclick:function(t){e.saveConfig("show_volumn",t),i.config.show_volumn?n.volumn.style.display="":n.volumn.style.display="none"}},show_cardpile:{name:"显示牌堆按钮",init:!0,unfrequent:!0,onclick:function(t){e.saveConfig("show_cardpile",t),n.cardPileButton.style.display=t?"":"none"}},show_cardpile_number:{name:"显示剩余牌数",init:!1,unfrequent:!0,onclick:function(t){e.saveConfig("show_cardpile_number",t),n.cardPileNumber.style.display=t?"":"none"}},show_handcardbutton:{name:"显示手牌按钮",init:!0,unfrequent:!0,onclick:function(n){e.saveConfig("show_handcardbutton",n)}},show_giveup:{name:"显示投降按钮",init:!0,unfrequent:!0,onclick:function(n){e.saveConfig("show_giveup",n)}},show_wuxie:{name:"显示无懈按钮",intro:"在右上角显示不询问无懈",init:!1,unfrequent:!0,onclick:function(t){e.saveConfig("show_wuxie",t),i.config.show_wuxie?n.wuxie.style.display="":n.wuxie.style.display="none"}},wuxie_right:{name:"无懈按钮靠左",init:!0,unfrequent:!0},show_discardpile:{name:"暂停时显示弃牌堆",init:!1,unfrequent:!0},show_extensionmaker:{name:"显示制作扩展",init:!0,unfrequent:!0},show_extensionshare:{name:"显示分享扩展",init:!0,unfrequent:!0}}},audio:{name:"音效",config:{update:function(e,a){"music_custom"==i.config.background_music&&(i.device||i.node)?a.import_music.show():a.import_music.hide(),a.clear_background_music[t.is.object(i.config.customBackgroundMusic)?"show":"hide"](),n.background_music_setting=a.background_music,a.background_music._link.config.updatex.call(a.background_music,[])},background_music:{updatex:function(){this.lastChild.innerHTML=this._link.config.item[i.config.background_music];for(var e=this._link.menu,n=0;n<e.childElementCount;n++)["music_off","music_custom","music_random"].concat(i.config.all.background_music).contains(e.childNodes[n]._link)||e.childNodes[n].delete()},name:"背景音乐",init:!0,item:{music_default:"默认"},onclick:function(n){e.saveConfig("background_music",n),e.playBackgroundMusic()}},import_music:{name:'<div style="white-space:nowrap;width:calc(100% - 5px)"><input type="file" style="width:calc(100% - 40px)" accept="audio/*"><button style="width:40px">确定</button></div>',clear:!0},background_audio:{name:"游戏音效",init:!0},background_speak:{name:"人物配音",init:!0},equip_audio:{name:"装备配音",init:!1},repeat_audio:{name:"播放重复语音",init:!1},volumn_audio:{name:"音效音量",init:8,item:{0:"〇",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八"},onclick:function(n){e.saveConfig("volumn_audio",parseInt(n))}},volumn_background:{name:"音乐音量",init:8,item:{0:"〇",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八"},onclick:function(t){e.saveConfig("volumn_background",parseInt(t)),n.backgroundMusic.volume=t/8}},clear_background_music:{name:"清除自定义背景音乐",clear:!0,onclick:function(){if(confirm("是否清除已导入的所有自定义背景音乐？（该操作不可撤销！）")){for(var n in i.config.customBackgroundMusic)i.config.all.background_music.remove(n),0==n.indexOf("cdv_")?e.removeFile("audio/background/"+n+".mp3"):e.deleteDB("audio",n);i.config.customBackgroundMusic=null,e.saveConfig("customBackgroundMusic",null),e.saveConfig("background_music","music_off"),a._aozhan||e.playBackgroundMusic()}}}}},skill:{name:"技能",config:{update:function(e,n){for(var t in n)"autoskill"==n[t]._link.config.type?i.config.autoskilllist.contains(t)?n[t].classList.remove("on"):n[t].classList.add("on"):"banskill"==n[t]._link.config.type&&(i.config.forbidlist.contains(t)?n[t].classList.remove("on"):n[t].classList.add("on"))}}},others:{name:"其它",config:{reset_game:{name:"重置游戏设置",onclick:function(){var n=this;if(n._clearing){var t=localStorage.getItem("noname_inited"),a=localStorage.getItem(i.configprefix+"key");return localStorage.clear(),t&&localStorage.setItem("noname_inited",t),a&&localStorage.setItem(i.configprefix+"key",a),e.deleteDB("config"),e.deleteDB("data"),void e.reload()}n._clearing=!0,n.firstChild.innerHTML="单击以确认 (3)",setTimeout((function(){n.firstChild.innerHTML="单击以确认 (2)",setTimeout((function(){n.firstChild.innerHTML="单击以确认 (1)",setTimeout((function(){n.firstChild.innerHTML="重置游戏设置",delete n._clearing}),1e3)}),1e3)}),1e3)},clear:!0},reset_hiddenpack:{name:"重置隐藏内容",onclick:function(){if("已重置"!=this.firstChild.innerHTML){this.firstChild.innerHTML="已重置",e.saveConfig("hiddenModePack",[]),e.saveConfig("hiddenCharacterPack",[]),e.saveConfig("hiddenCardPack",[]),e.saveConfig("hiddenPlayPack",[]),e.saveConfig("hiddenBackgroundPack",[]);var n=this;setTimeout((function(){n.firstChild.innerHTML="重置隐藏内容",setTimeout((function(){confirm("是否重新启动使改变生效？")&&e.reload()}))}),500)}},clear:!0},reset_tutorial:{name:"重置新手向导",onclick:function(){if("已重置"!=this.firstChild.innerHTML){this.firstChild.innerHTML="已重置",e.saveConfig("new_tutorial",!1),e.saveConfig("prompt_hidebg"),e.saveConfig("prompt_hidepack");var n=this;setTimeout((function(){n.firstChild.innerHTML="重置新手向导"}),500)}},clear:!0},import_data:{name:"导入游戏设置",onclick:function(){n.import_data_button.classList.toggle("hidden")},clear:!0},import_data_button:{name:'<div style="white-space:nowrap;width:calc(100% - 10px)"><input type="file" style="width:calc(100% - 40px)"><button style="width:40px">确定</button></div>',clear:!0},export_data:{name:"导出游戏设置",onclick:function(){var n,t=function(n){e.export(i.init.encode(JSON.stringify(n)),"无名杀 - 数据 - "+(new Date).toLocaleString())};if(i.db)e.getDB("config",null,(function(n){e.getDB("data",null,(function(e){t({config:n,data:e})}))}));else{for(var a in n={},localStorage)0==a.indexOf(i.configprefix)&&(n[a]=localStorage[a]);t(n)}},clear:!0},redownload_game:{name:"重新下载游戏",onclick:function(){var n=this;if(n._clearing)return localStorage.removeItem("noname_inited"),void e.reload();n._clearing=!0,n.firstChild.innerHTML="单击以确认 (3)",setTimeout((function(){n.firstChild.innerHTML="单击以确认 (2)",setTimeout((function(){n.firstChild.innerHTML="单击以确认 (1)",setTimeout((function(){n.firstChild.innerHTML="重新下载游戏",delete n._clearing}),1e3)}),1e3)}),1e3)},clear:!0},update:function(e,n){i.device||i.node?n.redownload_game.show():n.redownload_game.hide()}}}},i.extensionMenu={cardpile:{enable:{name:"开启",init:!1,restart:!0},intro:{name:"将杀闪等牌在牌堆中的比例维持在与军争牌堆相同，防止开启扩展包后被过多地稀释",clear:!0,nopointer:!0},sha:{name:"杀",init:"1",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},huosha:{name:"火杀",init:"1",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},leisha:{name:"雷杀",init:"1",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},shan:{name:"闪",init:"1",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},tao:{name:"桃",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},jiu:{name:"酒",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},wuxie:{name:"无懈可击",init:"0.5",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},nanman:{name:"南蛮入侵",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},wanjian:{name:"万箭齐发",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},guohe:{name:"过河拆桥",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},shunshou:{name:"顺手牵羊",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},tiesuo:{name:"铁索连环",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},hide:{name:"隐藏此扩展",clear:!0,onclick:function(){"隐藏此扩展"==this.firstChild.innerHTML?(this.firstChild.innerHTML="此扩展将在重启后隐藏",i.config.hiddenPlayPack.add("cardpile"),i.config.prompt_hidepack||(alert("隐藏的扩展包可通过选项-其它-重置隐藏内容恢复"),e.saveConfig("prompt_hidepack",!0))):(this.firstChild.innerHTML="隐藏此扩展",i.config.hiddenPlayPack.remove("cardpile")),e.saveConfig("hiddenPlayPack",i.config.hiddenPlayPack)}}},wuxing:{enable:{name:"开启",init:!1,restart:!0},intro:{name:"每名角色和部分卡牌在游戏开始时随机获得一个属性",clear:!0,nopointer:!0},num:{name:"带属性卡牌",init:"0.3",item:{.1:"10%",.2:"20%",.3:"30%",.5:"50%"}},hide:{name:"隐藏此扩展",clear:!0,onclick:function(){"隐藏此扩展"==this.firstChild.innerHTML?(this.firstChild.innerHTML="此扩展将在重启后隐藏",i.config.hiddenPlayPack.add("wuxing"),i.config.prompt_hidepack||(alert("隐藏的扩展包可通过选项-其它-重置隐藏内容恢复"),e.saveConfig("prompt_hidepack",!0))):(this.firstChild.innerHTML="隐藏此扩展",i.config.hiddenPlayPack.remove("wuxing")),e.saveConfig("hiddenPlayPack",i.config.hiddenPlayPack)}}},coin:{enable:{name:"开启",init:!1,restart:!0,onclick:function(n){n?i.config.plays.add("coin"):i.config.plays.remove("coin"),e.saveConfig("plays",i.config.plays)}},intro:{name:"每完成一次对局，可获得一定数量的金币；金币可用于购买游戏特效",clear:!0,nopointer:!0},display:{name:"金币显示",init:"text",item:{symbol:"符号",text:"文字"},onclick:function(n){e.saveConfig("coin_display_playpackconfig",n),e.changeCoin&&e.changeCoin(0)}},canvas:{name:"特效置顶",init:!1,onclick:function(t){e.saveConfig("coin_canvas_playpackconfig",t),t?n.window.classList.add("canvas_top"):n.window.classList.remove("canvas_top")}},hide:{name:"隐藏此扩展",clear:!0,onclick:function(){"隐藏此扩展"==this.firstChild.innerHTML?(this.firstChild.innerHTML="此扩展将在重启后隐藏",i.config.hiddenPlayPack.add("coin"),i.config.prompt_hidepack||(alert("隐藏的扩展包可通过选项-其它-重置隐藏内容恢复"),e.saveConfig("prompt_hidepack",!0))):(this.firstChild.innerHTML="隐藏此扩展",i.config.hiddenPlayPack.remove("coin")),e.saveConfig("hiddenPlayPack",i.config.hiddenPlayPack)}}}}}},365:()=>{window.data_translate={sc:"打钱",ship:"上舰",flower:"鲜花",egg:"鸡蛋",wine:"酒杯",shoe:"拖鞋",yuxisx:"玉玺",shoukao:"枷锁",junk:"平凡",common:"普通",rare:"精品",epic:"史诗",legend:"传说",beginner:"简单",default:"默认",special:"特殊",zhenfa:"阵法",aozhan:"鏖战",mode_derivation_card_config:"衍生",mode_banned_card_config:"禁卡",mode_favourite_character_config:"收藏",mode_banned_character_config:"禁将",suit:"花色",heart:"♥︎",diamond:"♦︎",spade:"♠︎",club:"♣︎",ghujia:"护甲",ghujia_bg:"甲",heart2:"红桃",diamond2:"方片",spade2:"黑桃",club2:"梅花",color:"颜色",red:"红色",black:"黑色",none:"无色",number:"点数",cardname:"牌名",ok:"确定",ok2:"确定",cancel:"取消",cancel2:"取消",restart:"重新开始",setting:"设置",start:"开始",random:"随机",_out:"无效",agree:"同意",refuse:"拒绝",fire:"火",thunder:"雷",poison:"毒",kami:"神",ocean:"海",ice:"冰",yami:"暗",fire_ab:"火焰",thunder_ab:"雷电",ocean_ab:"海洋",ice_ab:"冰冻",yami_ab:"暗影",vtuber:"企",clubs:"社",vtuber2:"企业联合",clubs2:"社团联合",wei:"魏",shu:"蜀",wu:"吴",qun:"群",shen:"皇",western:"西",key:"N",holo:"杏",dotlive:"点",nijisanji:"虹",VirtuaReal:"维阿",HappyElements:"乐",NetEase:"网",upd8:"U",eilene:"艾琳",paryi:"帕",kagura:"神楽",nanashi:"774",psp:"P",asoul:"A",nori:"苔",vwp:"神椿",vshojo:"V",xuyan:"虚",chaos:"C",xuefeng:"雪",Providence:"普",hunmiao:"魂",ego:"复",chidori:"鸟",lucca:"L",RedC:"红",double:"多",wei2:"魏国",shu2:"蜀国",wu2:"吴国",qun2:"群雄",shen2:"特典",western2:"西方",key2:"KEY",holo2:"Hololive",upd82:"Upd8",dotlive2:".live",nijisanji2:"Nijisanji",VirtuaReal2:"VirtuaReal",HappyElements2:"乐元素",NetEase2:"网易",eilene2:"艾琳一家",paryi2:"帕里坡",kagura2:"神楽组",nanashi2:"774inc",psp2:"psplive",asoul2:"A_SOUL",nori2:"Noripro",vwp2:"神椿市",vshojo2:"Vshojo",xuyan2:"虚研社",chaos2:"ChaosLive",xuefeng2:"雪风军团",Providence2:"普罗维登",hunmiao2:"魂喵科技",ego2:"Egolive",chidori2:"千鸟战队",lucca2:"Lucca事务所",RedC2:"RedCircle",double2:"多势力",male:"男",female:"女",mad:"混乱",mad_bg:"疯",hp:"体力",draw_card:"摸牌",discard_card:"弃牌",take_damage:"受伤害",reset_character:"复原武将牌",recover_hp:"回复体力",lose_hp:"流失体力",get_damage:"受伤害",weiColor:"#b0d0e2",shuColor:"#ffddb9",wuColor:"#b2d9a9",qunColor:"#f6f6f6",shenColor:"#ffe14c",westernColor:"#ffe14c",jinColor:"#ffe14c",keyColor:"#c9b1fd",holoColor:"#38ABE0",nijisanjiColor:"#b0d0e2",dotliveColor:"#b2d9a9",upd8Color:"#ffe14c",eileneColor:"#DB7093",paryiColor:"#DDAAAF",VirtuaRealColor:"#77aaee",HappyElementsColor:"#60ACC8",kaguraColor:"#55deef",nanashiColor:"#e27b6b",pspColor:"#4d3d11",asoulColor:"#ffddcc",noriColor:"#a8ddaa",basic:"基本",equip:"装备",trick:"锦囊",delay:"延时锦囊",character:"角色",revive:"复活",equip1:"武器",equip2:"防具",equip3:"防御载具",equip4:"攻击载具",equip5:"宝物",equip6:"坐骑",zero:"零",one:"一",two:"二",three:"三",four:"四",five:"五",six:"六",seven:"七",eight:"八",nine:"九",ten:"十",_chongzhu:"重铸",_lianhuan:"连环",_lianhuan2:"连环",_kamisha:"神杀",_oceansha:"海杀",_icesha:"冰杀",_yamisha:"暗杀",_yamisha2:"暗影",_shengjie:"升阶",qianxing:"潜行",mianyi:"免疫",fengyin:"封印",baiban:"白板",_disableJudge:"判定区",pileTop:"牌堆顶",pileBottom:"牌堆底",xiaowu_emotion:"小无表情",guojia_emotion:"郭嘉表情",zhenji_emotion:"甄姬表情",shibing_emotion:"士兵表情",xiaosha_emotion:"小杀表情",xiaotao_emotion:"小桃表情",xiaojiu_emotion:"小酒表情",Diana_emotion:"嘉然表情",pause:"暂停",config:"选项",auto:"托管",unknown:"未知",unknown0:"一号位",unknown1:"二号位",unknown2:"三号位",unknown3:"四号位",unknown4:"五号位",unknown5:"六号位",unknown6:"七号位",unknown7:"八号位",feichu_equip1:"已废除",feichu_equip1_info:"武器栏已废除",feichu_equip2:"已废除",feichu_equip2_info:"防具栏已废除",feichu_equip3:"已废除",feichu_equip3_info:"防御坐骑栏已废除",feichu_equip4:"已废除",feichu_equip4_info:"攻击坐骑栏已废除",feichu_equip5:"已废除",feichu_equip5_info:"宝物栏已废除",feichu_equip1_bg:"废",feichu_equip2_bg:"废",feichu_equip3_bg:"废",feichu_equip4_bg:"废",feichu_equip5_bg:"废",disable_judge:"已废除",disable_judge_info:"判定区已废除",disable_judge_bg:"废",pss:"手势",pss_paper:"布",pss_scissor:"剪刀",pss_stone:"石头",pss_paper_info:"石头剪刀布时的一种手势。克制石头，但被剪刀克制。",pss_scissor_info:"石头剪刀布时的一种手势。克制布，但被石头克制。",pss_stone_info:"石头剪刀布时的一种手势。克制剪刀，但被布克制。",group_wei:"魏势力",group_shu:"蜀势力",group_wu:"吴势力",group_jin:"晋势力",group_qun:"群势力",group_key:"键势力",group_holo:"杏势力",group_nijisanji:"虹势力",group_VirtuaReal:"维势力",group_upd8:"U势力",group_paryi:"帕势力",group_kagura:"神楽势力",group_nanashi:"7势力",group_psp:"P势力",group_asoul:"魂势力",group_nori:"苔势力",group_vwp:"神椿势力",group_chaos:"混沌势力",group_xuyan:"虚势力",group_xuefeng:"雪风势力",group_wei_bg:"魏",group_shu_bg:"蜀",group_wu_bg:"吴",group_qun_bg:"群",group_jin_bg:"晋",group_key_bg:"键",group_holo_bg:"杏",group_nijisanji_bg:"虹",group_VirtuaReal_bg:"维",group_upd8_bg:"U",group_paryi_bg:"帕",group_kagura_bg:"咩",group_nanashi_bg:"な",group_psp_bg:"な",group_asoul_bg:"魂",group_nori_bg:"苔",group_vwp_bg:"椿",group_chaos_bg:"潮",group_xuyan_bg:"虚",group_xuefeng_bg:"雪"}}},n={};function t(i){var a=n[i];if(void 0!==a)return a.exports;var o=n[i]={exports:{}};return e[i](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{"use strict";t(388),t(651),t(352),t(333),t(365)})()})();