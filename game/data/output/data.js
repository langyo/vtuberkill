(()=>{var e={388:()=>{window.data_card={list:[],pss_paper:{type:"pss",fullskin:!0},pss_scissor:{type:"pss",fullskin:!0},pss_stone:{type:"pss",fullskin:!0},feichu_equip1:{type:"equip",subtype:"equip1"},feichu_equip2:{type:"equip",subtype:"equip2"},feichu_equip3:{type:"equip",subtype:"equip3"},feichu_equip4:{type:"equip",subtype:"equip4"},feichu_equip5:{type:"equip",subtype:"equip5"},disable_judge:{},group_wei:{fullskin:!0},group_shu:{fullskin:!0},group_wu:{fullskin:!0},group_qun:{fullskin:!0},group_key:{fullskin:!0},group_jin:{fullskin:!0},group_holo:{fullskin:!0},group_nijisanji:{fullskin:!0},group_VirtuaReal:{fullskin:!0},group_upd8:{fullskin:!0},group_paryi:{fullskin:!0},group_kagura:{fullskin:!0},group_nanashi:{fullskin:!0},group_psp:{fullskin:!0},group_asoul:{fullskin:!0},group_nori:{fullskin:!0},group_vwp:{fullskin:!0},group_chaos:{fullskin:!0},group_xuyan:{fullskin:!0},group_xuefeng:{fullskin:!0},group_Providence:{fullskin:!0}}},651:()=>{window.vkCore.lib.emotionList={xiaowu_emotion:14,shibing_emotion:15,guojia_emotion:20,zhenji_emotion:20,xiaosha_emotion:20,xiaotao_emotion:20,xiaojiu_emotion:20,Diana_emotion:6}},352:()=>{window.data_group=["wei","shu","wu","qun","jin","western","key","shen","holo","nijisanji","dotlive","upd8","eilene","paryi","kagura","nori","vwp","nanashi","VirtuaReal","HappyElements","psp","asoul","xuyan","chaos","xuefeng","Providence","NetEase","hunmiao","ego","Tencent","lucca","RedC","vshojo","vtuber","clubs"],window.data_groupnature={shen:"thunder",wei:"water",shu:"soil",wu:"wood",qun:"metal",western:"thunder",key:"key",jin:"thunder",ye:"thunder",holo:"soil",upd8:"metal",dotlive:"wood",nijisanji:"water",VirtuaReal:"ocean",HappyElements:"ocean",eilene:"thunder",paryi:"ice",kagura:"ocean",nanashi:"wood",psp:"fire",asoul:"fire",nori:"key",vwp:"key",vshojo:"metal",xuyan:"ice",chaos:"ocean",xuefeng:"ocean",Providence:"ocean",NetEase:"fire",hunmiao:"ocean",ego:"ocean",Tencent:"wood",lucca:"wood",RedCircle:"fire",vtuber:"metal",clubs:"ice"}},333:()=>{var e=window.vkCore,n=e.game,t=e.ui,i=e.get,a=e.lib,o=e._status;a.configMenu={general:{name:"通用",config:{low_performance:{name:"流畅模式",init:!1,intro:"减少部分游戏特效，提高游戏速度",onclick:function(e){n.saveConfig("low_performance",e),e?t.window.classList.add("low_performance"):t.window.classList.remove("low_performance")}},compatiblemode:{name:"兼容模式",init:!1,intro:"开启兼容模式可防止扩展使游戏卡死并提高对旧扩展的兼容性，但对游戏速度有一定影响，若无不稳定或不兼容的扩展建议关闭",onclick:function(e){n.saveConfig("compatiblemode",e),e?t.window.classList.add("compatiblemode"):t.window.classList.remove("compatiblemode")}},confirm_exit:{name:"确认退出",init:!1,unfrequent:!0,intro:"离开游戏前弹出确认对话框"},keep_awake:{name:"屏幕常亮",init:!1,unfrequent:!0,intro:"防止屏幕自动关闭<br>注：旧版本通过NoSleep.js实现的屏幕常亮可能会影响外置音频的音量",onclick:function(e){n.saveConfig("keep_awake",e),e?window.plugins&&window.plugins.insomnia?window.plugins.insomnia.keepAwake():window.noSleep&&document.addEventListener(a.config.touchscreen?"touchend":"click",(function e(){document.removeEventListener(a.config.touchscreen?"touchend":"click",e,!1),window.noSleep.enable()}),!1):window.plugins&&window.plugins.insomnia?window.plugins.insomnia.allowSleepAgain():window.noSleep&&window.noSleep.disable()}},auto_confirm:{name:"自动确认",init:!0,unfrequent:!0,intro:"当候选目标只有1个时，点击目标后无需再点击确认"},skip_shan:{name:"无闪自动取消",init:!1,unfrequent:!0,intro:"当自己需要使用或打出【闪】时，若自己没有【闪】，则跳过该步骤"},unauto_choose:{name:"拆顺手牌选择",init:!1,unfrequent:!0,intro:"拆牌或者顺牌时，就算只能选择对方的手牌依然手动选择"},wuxie_self:{name:"不无懈自己",init:!0,unfrequent:!0,intro:"自己使用的单目标普通锦囊即将生效时，不询问无懈"},tao_enemy:{name:"不对敌方出桃",init:!1,intro:"双方阵营明确的模式中（如对决），敌方角色濒死时不询问出桃",unfrequent:!0},enable_drag:{name:"启用拖拽",init:!0,intro:"按住卡牌后可将卡牌拖至目标",unfrequent:!0},enable_dragline:{name:"拖拽指示线",init:!0,unfrequent:!0,intro:"拖拽时显示虚线，可能降低游戏速度"},enable_touchdragline:{name:"拖拽指示线",init:!1,unfrequent:!0,intro:"拖拽时显示虚线，可能降低游戏速度"},touchscreen:{name:"触屏模式",init:!1,restart:!0,unfrequent:!0,intro:"开启后可使触屏设备反应更快，但无法使用鼠标操作",onclick:function(e){if(i.is.nomenu("touchscreen",e))return!1;n.saveConfig("touchscreen",e)}},swipe:{name:"滑动手势",init:!0,unfrequent:!0,intro:"在非滚动区域向四个方向滑动可执行对应操作"},swipe_down:{name:"下划操作",init:"menu",unfrequent:!0,intro:"向下滑动时执行的操作",item:{system:"显示按钮",menu:"打开菜单",pause:"切换暂停",auto:"切换托管",chat:"显示聊天",off:"关闭"},onclick:function(e){if(i.is.nomenu("swipe_down",e))return!1;n.saveConfig("swipe_down",e)}},swipe_up:{name:"上划操作",intro:"向上滑动时执行的操作",init:"auto",unfrequent:!0,item:{system:"显示按钮",menu:"打开菜单",pause:"切换暂停",auto:"切换托管",chat:"显示聊天",off:"关闭"},onclick:function(e){if(i.is.nomenu("swipe_up",e))return!1;n.saveConfig("swipe_up",e)}},swipe_left:{name:"左划操作",intro:"向左滑动时执行的操作",init:"system",unfrequent:!0,item:{system:"显示按钮",menu:"打开菜单",pause:"切换暂停",auto:"切换托管",chat:"显示聊天",off:"关闭"},onclick:function(e){if(i.is.nomenu("swipe_left",e))return!1;n.saveConfig("swipe_left",e)}},swipe_right:{name:"右划操作",intro:"向右滑动时执行的操作",init:"system",unfrequent:!0,item:{system:"显示按钮",menu:"打开菜单",pause:"切换暂停",auto:"切换托管",chat:"显示聊天",off:"关闭"},onclick:function(e){if(i.is.nomenu("swipe_right",e))return!1;n.saveConfig("swipe_right",e)}},round_menu_func:{name:"触屏按钮操作",intro:"点击屏幕中圆形按钮时执行的操作",init:"system",unfrequent:!0,item:{system:"显示按钮",menu:"打开菜单",pause:"切换暂停",auto:"切换托管"},onclick:function(e){if(i.is.nomenu("round_menu_func",e))return!1;n.saveConfig("round_menu_func",e)}},show_splash:{name:"显示开始界面",intro:"游戏开始前进入模式选择画面",init:"init",item:{off:"关闭",init:"首次启动",always:"保持开启"}},game_speed:{name:"游戏速度",init:"mid",item:{vslow:"慢",slow:"较慢",mid:"中",fast:"较快",vfast:"快",vvfast:"很快"},intro:"设置不同游戏操作间的时间间隔"},sync_speed:{name:"限制结算速度",intro:"在动画结算完成前不执行下一步操作，开启后游戏操作的间隔更长但画面更浏畅，在游戏较卡时建议开启",init:!0},enable_vibrate:{name:"开启震动",intro:"回合开始时使手机震动",init:!1},right_click:{name:"右键操作",init:"pause",intro:"在空白区域点击右键时的操作",unfrequent:!0,item:{pause:"暂停",shortcut:"工具",config:"选项",auto:"托管"},onclick:function(e){if(i.is.nomenu("right_click",e))return!1;n.saveConfig("right_click",e)}},longpress_info:{name:"长按显示信息",init:!0,unfrequent:!0,restart:!0,intro:"长按后弹出菜单"},right_info:{name:"右键显示信息",init:!0,unfrequent:!0,restart:!0,intro:"右键点击后弹出菜单"},hover_all:{name:"悬停显示信息",init:!0,unfrequent:!0,restart:!0,intro:"悬停后弹出菜单"},hover_handcard:{name:"悬停手牌显示信息",init:!0,unfrequent:!0,intro:"悬停手牌后弹出菜单"},hoveration:{name:"悬停菜单弹出时间",unfrequent:!0,intro:"鼠标移至目标到弹出菜单的时间间隔",init:"1000",item:{500:"0.5秒",700:"0.7秒",1e3:"1秒",1500:"1.5秒",2500:"2.5秒"}},doubleclick_intro:{name:"双击显示武将资料",init:!0,unfrequent:!0,intro:"双击武将头像后显示其资料卡"},video:{name:"保存录像",init:"20",intro:"游戏结束后保存录像在最大条数，超过后将从最早的录像开始删除（已收藏的录像不计入条数）",item:{0:"关闭",5:"五局",10:"十局",20:"二十局",50:"五十局",1e4:"无限"},unfrequent:!0},max_loadtime:{name:"最长载入时间",intro:"设置游戏从启动到完成载入所需的最长时间，超过此时间未完成载入会报错，若设备较慢或安装了较多扩展可适当延长此时间",init:"10000",unfrequent:!0,item:{5e3:"5秒",1e4:"10秒",2e4:"20秒",6e4:"60秒"},onclick:function(e){n.saveConfig("max_loadtime",e),"5000"==e?localStorage.removeItem(a.configprefix+"loadtime"):localStorage.setItem(a.configprefix+"loadtime",e)}},mousewheel:{name:"滚轮控制手牌",init:!0,unfrequent:!0,intro:"开启后滚轮可使手牌横向滚动，在mac等可横向滚动的设备上建议关闭",onclick:function(e){n.saveConfig("mousewheel",e),a.config.touchscreen||(a.config.mousewheel?(t.handcards1Container.onmousewheel=t.click.mousewheel,t.handcards2Container.onmousewheel=t.click.mousewheel):(t.handcards1Container.onmousewheel=null,t.handcards2Container.onmousewheel=null))}},auto_check_update:{name:"自动检查游戏更新",intro:"进入游戏时检查更新",init:!0,unfrequent:!0},lucky_star:{name:"幸运星模式",intro:"在涉及随机数等的技能中，必定得到效果最好的结果。（联机模式无效）",init:!1,unfrequent:!0},dev:{name:"开发者模式",intro:"开启后可使用浏览器控制台控制游戏，同时可更新到开发版",init:!1,onclick:function(e){n.saveConfig("dev",e),o.connectMode||(e?a.cheat.i():(delete window.cheat,delete window.game,delete window.ui,delete window.get,delete window.ai,delete window.lib,delete window._status))},unfrequent:!0},errstop:{name:"出错时停止游戏",init:!1,unfrequent:!0},update_link:{name:"更新地址",init:"coding",unfrequent:!0,item:{coding:"Coding",github:"GitHub"},onclick:function(e){n.saveConfig("update_link",e),a.updateURL=a.updateURLS[e]||a.updateURLS.coding}},extension_source:{name:"获取扩展地址",init:"Coding",unfrequent:!0,item:{},intro:function(){return"获取在线扩展时的地址。当前地址：<br>"+a.config.extension_sources[a.config.extension_source]},onclick:function(e){n.saveConfig("extension_source",e)}},extension_create:{name:"添加获取扩展地址",clear:!0,unfrequent:!0,onclick:function(){n.prompt("请输入地址名称",(function(e){if(e){var i=a.config.extension_sources;n.prompt("请输入"+e+"的地址",(function(a){if(a){delete i[e],i[e]=a,n.saveConfig("extension_sources",i),n.saveConfig("extension_source",e);var o=t.extension_source;o.updateInner();for(var s=o._link.menu,r=o._link.config,c=0;c<s.childElementCount;c++)if(s.childNodes[c]._link==e){s.childNodes[c].remove();break}t.create.div("",e,s,(function(){var e=this.parentNode._link,n=e._link.config;e._link.current=this.link;var t=e.lastChild.innerHTML;e.lastChild.innerHTML=n.item[this._link],n.onclick&&!1===n.onclick.call(e,this._link,this)&&(e.lastChild.innerHTML=t),n.update&&n.update()}))._link=e,r.item[name]=e,alert("已添加扩展地址："+e)}}))}}))}},extension_delete:{name:"删除当前扩展地址",clear:!0,unfrequent:!0,onclick:function(){var e=!1,i=a.config.extension_sources;for(var o in i)if(o!=a.config.extension_source){e=!0;break}if(e){var s=a.config.extension_source;n.saveConfig("extension_source",o),delete i[s],n.saveConfig("extension_sources",i);var r=t.extension_source;r.updateInner();var c=r._link.menu,l=r._link.config;for(o=0;o<c.childElementCount;o++)if(c.childNodes[o]._link==s){c.childNodes[o].remove();break}delete l.item[s],alert("已删除扩展地址："+s)}else alert("不能删除最后一个扩展地址！")}},update:function(e,n){"ontouchstart"in document?n.touchscreen.show():n.touchscreen.hide(),a.device||a.node?n.auto_check_update.show():n.auto_check_update.hide(),a.device?(n.enable_vibrate.show(),n.keep_awake.show()):(n.enable_vibrate.hide(),n.keep_awake.hide()),a.config.touchscreen?(n.mousewheel.hide(),n.hover_all.hide(),n.hover_handcard.hide(),n.hoveration.hide(),n.right_info.hide(),n.right_click.hide(),n.longpress_info.show(),n.swipe.show(),a.config.swipe?(n.swipe_up.show(),n.swipe_down.show(),n.swipe_left.show(),n.swipe_right.show()):(n.swipe_up.hide(),n.swipe_down.hide(),n.swipe_left.hide(),n.swipe_right.hide())):(n.mousewheel.show(),n.hover_all.show(),n.right_info.show(),n.right_click.show(),n.longpress_info.hide(),e.hover_all?(n.hover_handcard.show(),n.hoveration.show()):(n.hover_handcard.hide(),n.hoveration.hide()),n.swipe.hide(),n.swipe_up.hide(),n.swipe_down.hide(),n.swipe_left.hide(),n.swipe_right.hide()),a.config.enable_drag?a.config.touchscreen?(n.enable_dragline.hide(),n.enable_touchdragline.show()):(n.enable_dragline.show(),n.enable_touchdragline.hide()):(n.enable_dragline.hide(),n.enable_touchdragline.hide()),i.is.phoneLayout()?n.round_menu_func.show():n.round_menu_func.hide(),a.node||"ios"==a.device?n.confirm_exit.hide():n.confirm_exit.show(),e.dev?n.errstop.show():n.errstop.hide()}}},appearence:{name:"外观",config:{theme:{name:"主题",init:"woodden",item:{},visualMenu:function(e,n){e.menu||(e.className="button character themebutton "+n,e.menu=t.create.div(e,"","<div></div><div></div><div></div><div></div>"))},onclick:function(e){n.saveConfig("theme",e),t.arena.hide(),a.init.background(),a.config.autostyle&&("simple"==e?a.configMenu.appearence.config.player_border.onclick("slim"):a.configMenu.appearence.config.player_border.onclick("normal")),setTimeout((function(){var e=t.css.theme;t.css.theme=a.init.css(a.assetURL+"theme/"+a.config.theme,"style"),e.remove(),setTimeout((function(){t.arena.show()}),100)}),500)}},layout:{name:"布局",init:"mobile",item:{default:"旧版",newlayout:"对称",mobile:"默认",long:"宽屏",long2:"手杀",nova:"新版"},visualMenu:function(e,n){if(e.className="button character themebutton "+a.config.theme,!e.created){e.created=!0,e.style.overflow="hidden",e.firstChild.style.display="none";var i=t.create.div(e);i.style.top="auto","default"==n||"newlayout"==n?(i.style.width="calc(100% - 6px)",i.style.left="3px",i.style.bottom="3px",i.style.height="25px","newlayout"==n&&(i.style.height="23px",i.style.bottom="4px")):"long2"==n||"nova"==n?i.style.display="none":(i.style.width="120%",i.style.left="-10%",i.style.bottom="0",i.style.height="22px"),i.style.borderRadius="2px";for(var o=["KizunaAI","MiraiAkari","Siro","Nekomasu"],s=0;s<4;s++){var r=t.create.div(".fakeplayer",e);t.create.div(".avatar",r).setBackground(o.randomRemove(),"character"),r.style.borderRadius="2px",3!=s&&(r.style.top="auto"),"default"==n?(r.style.height="19px",r.style.width="38px",r.classList.add("oldlayout")):"mobile"==n||"newlayout"==n?(r.style.width="24px",r.style.height="29px"):"nova"==n?(r.style.width="20px",r.style.height="24px"):(r.style.width="20px",r.style.height="34px"),1==s&&(r.style.left="3px"),2==s&&(r.style.left="auto",r.style.right="3px"),3==s&&(r.style.top="3px"),"default"==n?(0==s&&(r.style.bottom="6px"),0!=s&&3!=s||(r.style.left="calc(50% - 18px)"),1!=s&&2!=s||(r.style.bottom="36px")):"newlayout"==n?(0==s&&(r.style.bottom="1px"),0!=s&&3!=s||(r.style.left="calc(50% - 12px)"),1!=s&&2!=s||(r.style.bottom="32px")):"mobile"==n?(0!=s&&3!=s||(r.style.left="calc(50% - 12px)"),1!=s&&2!=s||(r.style.bottom="30px")):"long"==n?(0!=s&&3!=s||(r.style.left="calc(50% - 10px)"),1!=s&&2!=s||(r.style.bottom="45px")):"long2"==n?(0==s&&(r.style.bottom="2px",r.style.left="3px"),3==s&&(r.style.left="calc(50% - 10px)"),1!=s&&2!=s||(r.style.bottom="45px")):"nova"==n&&(0==s&&(r.style.bottom="2px",r.style.left="3px"),3==s&&(r.style.left="calc(50% - 10px)"),1!=s&&2!=s||(r.style.left="3px",r.style.bottom=30*s+"px")),0!=s||"mobile"!=n&&"long"!=n||(r.classList.add("me"),r.style.borderRadius="0px",r.style.width="25px",r.style.height="25px",r.style.bottom="-3px",r.style.left="-3px")}}},onclick:function(e){a.layoutfixed.contains(a.config.mode)?n.saveConfig("layout",e):a.init.layout(e)}},player_height:{name:"角色高度",init:"long",item:{short:"矮",default:"中",long:"高"},onclick:function(e){n.saveConfig("player_height",e),t.arena.dataset.player_height=e}},player_height_nova:{name:"角色高度",init:"short",item:{short:"矮",default:"中",long:"高"},onclick:function(e){n.saveConfig("player_height_nova",e),t.arena.dataset.player_height_nova=e}},ui_zoom:{name:"界面缩放",unfrequent:!0,init:"normal",item:{esmall:"80%",vsmall:"90%",small:"95%",normal:"100%",big:"105%",vbig:"110%",ebig:"120%"},onclick:function(e){switch(n.saveConfig("ui_zoom",e),e){case"esmall":e=.8;break;case"vsmall":e=.9;break;case"small":e=.93;break;case"big":e=1.05;break;case"vbig":e=1.1;break;case"ebig":e=1.2;break;default:e=1}n.documentZoom=n.deviceZoom*e,t.updatez()}},image_background:{name:"游戏背景",init:"default",item:{},visualBar:function(e,o,s){if(e.created)e.lastChild.classList.remove("active");else{e.created=!0,t.create.filediv(".menubutton","添加背景",e,(function(t){if(t){var i=t.name;-1!=i.indexOf(".")&&(i=i.slice(0,i.indexOf(".")));var c=(n.writeFile?"cdv_":"custom_")+i;if(o[c])for(var l=1;l<1e3;l++)if(!o[c+"_"+l]){c=c+"_"+l;break}o[c]=i;var u=function(){s(c,e.parentNode.defaultNode),e.parentNode.updateBr(),a.config.customBackgroundPack.add(c),n.saveConfig("customBackgroundPack",a.config.customBackgroundPack)};n.writeFile?n.writeFile(t,"image/background",c+".jpg",u):n.putDB("image",c,t,u),e.lastChild.classList.contains("active")&&r.call(e.lastChild)}})).inputNode.accept="image/*";var r=function(){this.classList.toggle("active");for(var e=this.parentNode.parentNode,n=0;n<e.childElementCount;n++)if(e.childNodes[n].classList.contains("button")){var t,a=e.childNodes[n]._link;a&&"default"!=a&&(t=this.classList.contains("active")?0==a.indexOf("custom_")||0==a.indexOf("cdv_")?"删除":"隐藏":o[a],e.childNodes[n].firstChild.innerHTML=i.verticalStr(t))}};t.create.div(".menubutton","编辑背景",e,r)}},visualMenu:function(e,t,a,o){e.className="button character",e.style.backgroundImage="",e.style.backgroundSize="",e.firstChild&&(e.firstChild.innerHTML=i.verticalStr(a)),"default"==t||0==t.indexOf("custom_")?(e.style.backgroundImage="none",e.classList.add("dashedmenubutton"),0==t.indexOf("custom_")?n.getDB("image",t,(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;e.style.backgroundImage="url("+t+")",e.style.backgroundSize="cover",e.classList.remove("dashedmenubutton")},t.readAsDataURL(n,"UTF-8")}})):e.parentNode.defaultNode=e):(0==t.indexOf("svg_")?e.setBackgroundImage("image/background/"+t.slice(4)+".svg"):e.setBackgroundImage("image/background/"+t+".jpg"),e.style.backgroundSize="cover")},onclick:function(e,o){if(o&&o.firstChild){var s=o.parentNode;if(o.firstChild.innerHTML==i.verticalStr("隐藏")){if(s.parentNode.noclose=!0,o.remove(),s.updateBr(),a.config.prompt_hidebg||(alert("隐藏的背景可通过选项-其它-重置隐藏内容恢复"),n.saveConfig("prompt_hidebg",!0)),a.config.hiddenBackgroundPack.add(e),n.saveConfig("hiddenBackgroundPack",a.config.hiddenBackgroundPack),delete a.configMenu.appearence.config.image_background.item[e],a.config.image_background!=e)return void(this.lastChild.innerHTML=a.configMenu.appearence.config.image_background.item[a.config.image_background]);e="default",this.lastChild.innerHTML="默认"}else if(o.firstChild.innerHTML==i.verticalStr("删除")&&(s.parentNode.noclose=!0,confirm("是否删除此背景？（此操作不可撤销）"))){if(o.remove(),s.updateBr(),a.config.customBackgroundPack.remove(e),n.saveConfig("customBackgroundPack",a.config.customBackgroundPack),0==e.indexOf("cdv_")?n.removeFile("image/background/"+e+".jpg"):n.deleteDB("image",e),delete a.configMenu.appearence.config.image_background.item[e],a.config.image_background!=e)return void(this.lastChild.innerHTML=a.configMenu.appearence.config.image_background.item[a.config.image_background]);e="default",this.lastChild.innerHTML="默认"}}var r="default"==a.config.image_background;n.saveConfig("image_background",e),a.init.background(),t.background.delete(),t.background=t.create.div(".background"),a.config.image_background_blur?(t.background.style.filter="blur(8px)",t.background.style.webkitFilter="blur(8px)",t.background.style.transform="scale(1.05)"):(t.background.style.filter="",t.background.style.webkitFilter="",t.background.style.transform=""),document.body.insertBefore(t.background,document.body.firstChild),r&&t.background.animate("start"),"default"==a.config.image_background?t.background.style.backgroundImage="none":0==a.config.image_background.indexOf("custom_")?(t.background.style.backgroundImage="none",n.getDB("image",a.config.image_background,(function(e){if(e){var n=new FileReader;n.onload=function(e){var n=e.target.result;t.background.style.backgroundImage="url("+n+")"},n.readAsDataURL(e,"UTF-8")}}))):0==a.config.image_background.indexOf("svg_")?t.background.setBackgroundImage("image/background/"+a.config.image_background.slice(4)+".svg"):(t.background.setBackgroundImage("image/background/"+a.config.image_background+".jpg"),t.backgroundSVG=t.create.div(".background",t.background),t.backgroundSVG.setBackgroundImage("image/background/simple1_bg.svg"),t.backgroundSVG.style.opacity=".3"),t.background.style.backgroundSize="cover",t.background.style.backgroundPosition="50% 50%"}},image_background_random:{name:"随机背景",init:!1,onclick:function(e){n.saveConfig("image_background_random",e),a.init.background()}},image_background_blur:{name:"背景模糊",init:!1,onclick:function(e){n.saveConfig("image_background_blur",e),a.config.image_background_blur?(t.background.style.filter="blur(8px)",t.background.style.webkitFilter="blur(8px)",t.background.style.transform="scale(1.05)"):(t.background.style.filter="",t.background.style.webkitFilter="",t.background.style.transform="")}},phonelayout:{name:"触屏布局",init:!1,onclick:function(e){if(i.is.nomenu("phonelayout",e))return!1;n.saveConfig("phonelayout",e),i.is.phoneLayout()?(t.css.phone.href=a.assetURL+"layout/default/phone.css",t.arena.classList.add("phone")):(t.css.phone.href="",t.arena.classList.remove("phone"))}},change_skin:{name:"开启换肤",init:!0,intro:"在武将的右键菜单中换肤，皮肤可在选项-文件-图片文件-皮肤图片中添加"},change_skin_auto:{name:"自动换肤",init:"off",item:{off:"关闭",3e4:"半分钟",6e4:"一分钟",12e4:"两分钟",3e5:"五分钟"},intro:"游戏每进行一段时间自动为一个随机角色更换皮肤",onclick:function(e){n.saveConfig("change_skin_auto",e),clearTimeout(o.skintimeout),"off"!=e&&(o.skintimeout=setTimeout(t.click.autoskin,parseInt(e)))}},card_style:{name:"卡牌样式",init:"default",intro:"设置正面朝上的卡牌的样式",item:{wood:"木纹",music:"音乐",simple:"原版",ol:"手杀",custom:"自定",default:"默认"},visualBar:function(e,i,o,s){if(!e.created){for(var r,c=0;c<e.parentNode.childElementCount;c++)"custom"==e.parentNode.childNodes[c]._link&&(r=e.parentNode.childNodes[c]);r&&(e.created=!0,t.create.filediv(".menubutton","添加图片",e,(function(t){t&&n.putDB("image","card_style",t,(function(){n.getDB("image","card_style",(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;r.style.backgroundImage="url("+t+")",r.className="button card fullskin",e.classList.add("showdelete")},t.readAsDataURL(n,"UTF-8")}}))}))})).inputNode.accept="image*",t.create.div(".menubutton.deletebutton","删除图片",e,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(n.deleteDB("image","card_style"),r.style.backgroundImage="none",r.className="button character dashedmenubutton",e.classList.remove("showdelete"),"custom"==a.config.card_style&&(a.configMenu.appearence.config.card_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(e,t,i,o){switch(e.className="button card fullskin",e.style.backgroundSize="100% 100%",t){case"default":case"custom":"simple"==a.config.theme?(e.style.backgroundImage="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4))",e.className="button character"):(e.style.backgroundImage="none",e.className="button character dashedmenubutton");break;case"new":e.setBackgroundImage("theme/style/card/image/new.png");break;case"ol":e.setBackgroundImage("theme/style/card/image/ol.png");break;case"wood":e.setBackgroundImage("theme/woodden/wood.jpg"),e.style.backgroundSize="initial";break;case"music":e.setBackgroundImage("theme/music/wood3.png");break;case"simple":e.setBackgroundImage("theme/simple/card.png")}"custom"==t&&(e.classList.add("transparent"),n.getDB("image","card_style",(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;e.style.backgroundImage="url("+t+")",e.className="button card fullskin",e.parentNode.lastChild.classList.add("showdelete")},t.readAsDataURL(n,"UTF-8")}})))},onclick:function(e){n.saveConfig("card_style",e);var i=t.css.card_style;t.css.card_style=a.init.css(a.assetURL+"theme/style/card",a.config.card_style),i.remove(),t.css.card_stylesheet&&(t.css.card_stylesheet.remove(),delete t.css.card_stylesheet),"custom"==e&&n.getDB("image","card_style",(function(e){if(e){var n=new FileReader;n.onload=function(e){t.css.card_stylesheet&&t.css.card_stylesheet.remove(),t.css.card_stylesheet=a.init.sheet(".card:not(*:empty){background-image:url("+e.target.result+")}")},n.readAsDataURL(e,"UTF-8")}}))},unfrequent:!0},cardback_style:{name:"卡背样式",intro:"设置背面朝上的卡牌的样式",init:"default",item:{vk:"V杀",official:"原版",feicheng:"废城",liusha:"流沙",ol:"手杀",custom:"自定",default:"默认"},visualBar:function(e,i,o,s){if(!e.created){for(var r,c=0;c<e.parentNode.childElementCount;c++)"custom"==e.parentNode.childNodes[c]._link&&(r=e.parentNode.childNodes[c]);r&&(e.created=!0,t.create.filediv(".menubutton","添加图片",e,(function(t){t&&n.putDB("image","cardback_style",t,(function(){n.getDB("image","cardback_style",(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;r.style.backgroundImage="url("+t+")",r.className="button character",e.classList.add("showdelete")},t.readAsDataURL(n,"UTF-8")}}))}))})).inputNode.accept="image/*",t.create.filediv(".menubutton.deletebutton.addbutton","添加翻转图片",e,(function(t){t&&n.putDB("image","cardback_style2",t,(function(){e.classList.add("hideadd")}))})).inputNode.accept="image/*",t.create.div(".menubutton.deletebutton","删除图片",e,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(n.deleteDB("image","cardback_style"),n.deleteDB("image","cardback_style2"),r.style.backgroundImage="none",r.className="button character dashedmenubutton",e.classList.remove("showdelete"),e.classList.remove("hideadd"),"custom"==a.config.cardback_style&&(a.configMenu.appearence.config.cardback_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(e,t,i,a){switch(e.style.backgroundSize="100% 100%",t){case"default":case"custom":e.style.backgroundImage="none",e.className="button character dashedmenubutton";break;case"vk":e.className="button character",e.setBackgroundImage("theme/style/cardback/image/vk.png");break;case"new":e.className="button character",e.setBackgroundImage("theme/style/cardback/image/new.png");break;case"feicheng":e.className="button character",e.setBackgroundImage("theme/style/cardback/image/feicheng.png");break;case"official":e.className="button character",e.setBackgroundImage("theme/style/cardback/image/official.png");break;case"liusha":e.className="button character",e.setBackgroundImage("theme/style/cardback/image/liusha.png");break;case"ol":e.className="button character",e.setBackgroundImage("theme/style/cardback/image/ol.png");break;case"wood":e.className="button card fullskin",e.setBackgroundImage("theme/woodden/wood.jpg"),e.style.backgroundSize="initial";break;case"music":e.className="button card fullskin",e.setBackgroundImage("theme/music/wood3.png")}"custom"==t&&(e.classList.add("transparent"),n.getDB("image","cardback_style",(function(t){if(t){var i=new FileReader;i.onload=function(t){var i=t.target.result;e.style.backgroundImage="url("+i+")",e.className="button character",e.parentNode.lastChild.classList.add("showdelete"),n.getDB("image","cardback_style2",(function(n){n&&e.parentNode.lastChild.classList.add("hideadd")}))},i.readAsDataURL(t,"UTF-8")}})))},onclick:function(e){n.saveConfig("cardback_style",e);var i=t.css.cardback_style;t.css.cardback_style=a.init.css(a.assetURL+"theme/style/cardback",a.config.cardback_style),i.remove(),t.css.cardback_stylesheet&&(t.css.cardback_stylesheet.remove(),delete t.css.cardback_stylesheet),t.css.cardback_stylesheet2&&(t.css.cardback_stylesheet2.remove(),delete t.css.cardback_stylesheet2),"custom"==e&&n.getDB("image","cardback_style",(function(e){if(e){var i=new FileReader;i.onload=function(e){t.css.cardback_stylesheet&&t.css.cardback_stylesheet.remove(),t.css.cardback_stylesheet=a.init.sheet(".card:empty,.card.infohidden{background-image:url("+e.target.result+")}"),n.getDB("image","cardback_style2",(function(e){if(e){var n=new FileReader;n.onload=function(e){t.css.cardback_stylesheet2&&t.css.cardback_stylesheet2.remove(),t.css.cardback_stylesheet2=a.init.sheet(".card.infohidden:not(.infoflip){background-image:url("+e.target.result+")}")},n.readAsDataURL(e,"UTF-8")}}))},i.readAsDataURL(e,"UTF-8")}}))},unfrequent:!0},hp_style:{name:"体力条样式",init:"ol",item:{default:"默认",emotion:"表情",glass:"勾玉",round:"国战",ol:"手杀",xinglass:"双鱼",xinround:"OL",custom:"自定"},visualBar:function(e,i,o,s){if(!e.created){for(var r,c=0;c<e.parentNode.childElementCount;c++)"custom"==e.parentNode.childNodes[c]._link&&(r=e.parentNode.childNodes[c]);r&&(e.created=!0,t.create.filediv(".menubutton.addbutton","添加图片",e,(function(t){t&&e.currentDB&&n.putDB("image","hp_style"+e.currentDB,t,(function(){n.getDB("image","hp_style"+e.currentDB,(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;r.childNodes[e.currentDB-1].style.backgroundImage="url("+t+")",r.classList.add("shown"),e.classList.add("showdelete"),e.currentDB++,e.currentDB>4&&(e.classList.add("hideadd"),r.classList.remove("transparent"),delete e.currentDB)},t.readAsDataURL(n,"UTF-8")}}))}))})).inputNode.accept="image/*",t.create.div(".menubutton.deletebutton","删除图片",e,(function(){if(confirm("确定删除自定义图片？（此操作不可撤销）")){n.deleteDB("image","hp_style1"),n.deleteDB("image","hp_style2"),n.deleteDB("image","hp_style3"),n.deleteDB("image","hp_style4");for(var t=0;t<r.childElementCount;t++)r.childNodes[t].style.backgroundImage="none";e.classList.remove("showdelete"),e.classList.remove("hideadd"),"custom"==a.config.hp_style&&(a.configMenu.appearence.config.hp_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"),r.classList.remove("shown"),e.currentDB=1}})))}},visualMenu:function(e,i,a,o){e.className="button hpbutton dashedmenubutton",e.innerHTML="";for(var s=1;s<=4;s++){var r=t.create.div(e);"default"==i?t.create.div(r):"custom"!=i&&r.setBackgroundImage("theme/style/hp/image/"+i+s+".png"),4==s&&(r.style.webkitFilter="grayscale(1)")}"custom"==i&&(e.classList.add("transparent"),function t(i){e.parentNode.lastChild.currentDB=i,n.getDB("image","hp_style"+i,(function(n){if(n){var a=new FileReader;a.onload=function(n){var a=n.target.result;e.childNodes[i-1].style.backgroundImage="url("+a+")",e.classList.add("shown"),e.parentNode.lastChild.classList.add("showdelete"),i<4?t(i+1):(e.parentNode.lastChild.classList.add("hideadd"),e.classList.remove("transparent"),delete e.parentNode.firstChild.currentDB)},a.readAsDataURL(n,"UTF-8")}}))}(1))},onclick:function(e){n.saveConfig("hp_style",e);var i=t.css.hp_style;t.css.hp_style=a.init.css(a.assetURL+"theme/style/hp",a.config.hp_style),i.remove(),t.css.hp_stylesheet1&&(t.css.hp_stylesheet1.remove(),delete t.css.hp_stylesheet1),t.css.hp_stylesheet2&&(t.css.hp_stylesheet2.remove(),delete t.css.hp_stylesheet2),t.css.hp_stylesheet3&&(t.css.hp_stylesheet3.remove(),delete t.css.hp_stylesheet3),t.css.hp_stylesheet4&&(t.css.hp_stylesheet4.remove(),delete t.css.hp_stylesheet4),"custom"==e&&(n.getDB("image","hp_style1",(function(e){if(e){var n=new FileReader;n.onload=function(e){t.css.hp_stylesheet1&&t.css.hp_stylesheet1.remove(),t.css.hp_stylesheet1=a.init.sheet('.hp:not(.text):not(.actcount)[data-condition="high"]>div:not(.lost){background-image:url('+e.target.result+")}")},n.readAsDataURL(e,"UTF-8")}})),n.getDB("image","hp_style2",(function(e){if(e){var n=new FileReader;n.onload=function(e){t.css.hp_stylesheet2&&t.css.hp_stylesheet2.remove(),t.css.hp_stylesheet2=a.init.sheet('.hp:not(.text):not(.actcount)[data-condition="mid"]>div:not(.lost){background-image:url('+e.target.result+")}")},n.readAsDataURL(e,"UTF-8")}})),n.getDB("image","hp_style3",(function(e){if(e){var n=new FileReader;n.onload=function(e){t.css.hp_stylesheet3&&t.css.hp_stylesheet3.remove(),t.css.hp_stylesheet3=a.init.sheet('.hp:not(.text):not(.actcount)[data-condition="low"]>div:not(.lost){background-image:url('+e.target.result+")}")},n.readAsDataURL(e,"UTF-8")}})),n.getDB("image","hp_style4",(function(e){if(e){var n=new FileReader;n.onload=function(e){t.css.hp_stylesheet4&&t.css.hp_stylesheet4.remove(),t.css.hp_stylesheet4=a.init.sheet(".hp:not(.text):not(.actcount)>.lost{background-image:url("+e.target.result+")}")},n.readAsDataURL(e,"UTF-8")}})))},unfrequent:!0},player_style:{name:"角色背景",init:"simple",intro:"设置角色的背景图片",item:{wood:"木纹",music:"音乐",simple:"简约",custom:"自定",default:"默认"},visualBar:function(e,i,o,s){if(!e.created){for(var r,c=0;c<e.parentNode.childElementCount;c++)"custom"==e.parentNode.childNodes[c]._link&&(r=e.parentNode.childNodes[c]);r&&(e.created=!0,t.create.filediv(".menubutton","添加图片",e,(function(t){t&&n.putDB("image","player_style",t,(function(){n.getDB("image","player_style",(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;r.style.backgroundImage="url("+t+")",r.className="button character",r.style.backgroundSize="100% 100%",e.classList.add("showdelete")},t.readAsDataURL(n,"UTF-8")}}))}))})).inputNode.accept="image/*",t.create.div(".menubutton.deletebutton","删除图片",e,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(n.deleteDB("image","player_style"),r.style.backgroundImage="none",r.className="button character dashedmenubutton",e.classList.remove("showdelete"),"custom"==a.config.player_style&&(a.configMenu.appearence.config.player_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(e,t,i,a){switch(e.className="button character",e.style.backgroundSize="",e.style.height="108px",t){case"default":case"custom":e.style.backgroundImage="none",e.className="button character dashedmenubutton";break;case"wood":e.setBackgroundImage("theme/woodden/wood.jpg");break;case"music":e.style.backgroundImage="linear-gradient(#4b4b4b, #464646)";break;case"simple":e.style.backgroundImage="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4))"}"custom"==t&&(e.classList.add("transparent"),n.getDB("image","player_style",(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;e.style.backgroundImage="url("+t+")",e.className="button character",e.parentNode.lastChild.classList.add("showdelete"),e.style.backgroundSize="100% 100%"},t.readAsDataURL(n,"UTF-8")}})))},onclick:function(e){if(n.saveConfig("player_style",e),t.css.player_stylesheet&&(t.css.player_stylesheet.remove(),delete t.css.player_stylesheet),"custom"==e)n.getDB("image","player_style",(function(e){if(e){var n=new FileReader;n.onload=function(e){t.css.player_stylesheet&&t.css.player_stylesheet.remove(),t.css.player_stylesheet=a.init.sheet('#window .player{background-image:url("'+e.target.result+'");background-size:100% 100%;}')},n.readAsDataURL(e,"UTF-8")}}));else if("default"!=e){var i="";switch(e){case"wood":i='url("'+a.assetURL+'theme/woodden/wood.jpg")';break;case"music":i="linear-gradient(#4b4b4b, #464646)";break;case"simple":i="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4))"}t.css.player_stylesheet=a.init.sheet("#window .player{background-image:"+i+"}")}},unfrequent:!0},border_style:{name:"角色边框",init:"default",intro:"设置角色边框的样式，当设为自动时，样式将随着一局游戏中伤害或击杀的数量自动改变",item:{gold:"金框",silver:"银框",bronze:"铜框",dragon_gold:"金龙",dragon_silver:"银龙",dragon_bronze:"玉龙",custom:"自定",auto:"自动",default:"默认"},visualBar:function(e,i,o,s){if(!e.created){for(var r,c=0;c<e.parentNode.childElementCount;c++)"custom"==e.parentNode.childNodes[c]._link&&(r=e.parentNode.childNodes[c]);r&&(e.created=!0,t.create.filediv(".menubutton","添加图片",e,(function(t){t&&n.putDB("image","border_style",t,(function(){n.getDB("image","border_style",(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;r.style.backgroundImage="url("+t+")",r.className="button character",r.style.backgroundSize="100% 100%",e.classList.add("showdelete")},t.readAsDataURL(n,"UTF-8")}}))}))})).inputNode.accept="image/*",t.create.div(".menubutton.deletebutton","删除图片",e,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(n.deleteDB("image","border_style"),r.style.backgroundImage="none",r.className="button character dashedmenubutton",e.classList.remove("showdelete"),"custom"==a.config.border_style&&(a.configMenu.appearence.config.border_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(e,t,i,a){e.className="button character",e.style.backgroundSize="",e.style.height="108px",e.dataset.decoration="","default"==t||"custom"==t||"auto"==t?(e.style.backgroundImage="none",e.className="button character dashedmenubutton"):(0==t.indexOf("dragon_")&&(t=t.slice(7),e.dataset.decoration=t),e.setBackgroundImage("theme/style/player/"+t+"1.png"),e.style.backgroundSize="100% 100%"),"custom"==t&&(e.classList.add("transparent"),n.getDB("image","border_style",(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;e.style.backgroundImage="url("+t+")",e.className="button character",e.parentNode.lastChild.classList.add("showdelete"),e.style.backgroundSize="100% 100%"},t.readAsDataURL(n,"UTF-8")}})))},onclick:function(e){n.saveConfig("border_style",e),t.css.border_stylesheet&&(t.css.border_stylesheet.remove(),delete t.css.border_stylesheet),"custom"==e?n.getDB("image","border_style",(function(e){if(e){var n=new FileReader;n.onload=function(e){t.css.border_stylesheet&&t.css.border_stylesheet.remove(),t.css.border_stylesheet=a.init.sheet(),t.css.border_stylesheet.sheet.insertRule('#window .player>.framebg{display:block;background-image:url("'+e.target.result+'")}',0),t.css.border_stylesheet.sheet.insertRule(".player>.count{z-index: 3 !important;border-radius: 2px !important;text-align: center !important;}",0)},n.readAsDataURL(e,"UTF-8")}})):"default"!=e&&"auto"!=e&&(t.css.border_stylesheet=a.init.sheet(),0==e.indexOf("dragon_")?(e=e.slice(7),t.arena.dataset.framedecoration=e):t.arena.dataset.framedecoration="",t.css.border_stylesheet.sheet.insertRule('#window .player>.framebg,#window #arena.long.mobile:not(.fewplayer) .player[data-position="0"]>.framebg{display:block;background-image:url("'+a.assetURL+"theme/style/player/"+e+'1.png")}',0),t.css.border_stylesheet.sheet.insertRule('#window #arena.long:not(.fewplayer) .player>.framebg, #arena.oldlayout .player>.framebg{background-image:url("'+a.assetURL+"theme/style/player/"+e+'3.png")}',0),t.css.border_stylesheet.sheet.insertRule(".player>.count{z-index: 3 !important;border-radius: 2px !important;text-align: center !important;}",0))},unfrequent:!0},autoborder_count:{name:"边框升级方式",intro:"<strong>击杀</strong> 每击杀一人，边框提升两级<br><strong>伤害</strong> 每造成两点伤害，边框提升一级<br><strong>混合</strong> 击杀量决定边框颜色，伤害量决定边框装饰",init:"kill",item:{kill:"击杀",damage:"伤害",mix:"混合"},unfrequent:!0},autoborder_start:{name:"基础边框颜色",init:"bronze",item:{bronze:"铜",silver:"银",gold:"金"},unfrequent:!0},player_border:{name:"边框宽度",init:"normal",intro:"设置角色的边框宽度",unfrequent:!0,item:{slim:"细",narrow:"窄",normal:"中",wide:"宽"},onclick:function(e){n.saveConfig("player_border",e),"wide"!=e||"long"==n.layout||"long2"==n.layout?t.arena.classList.add("slim_player"):t.arena.classList.remove("slim_player"),"slim"==e?t.arena.classList.add("uslim_player"):t.arena.classList.remove("uslim_player"),"narrow"==e?t.arena.classList.add("mslim_player"):t.arena.classList.remove("mslim_player"),"normal"!=e||"brawl"==a.config.mode||"long"!=n.layout&&"long2"!=n.layout?t.arena.classList.remove("lslim_player"):t.arena.classList.add("lslim_player"),t.window.dataset.player_border=e}},menu_style:{name:"菜单背景",init:"default",item:{wood:"木纹",music:"音乐",simple:"简约",custom:"自定",default:"默认"},visualBar:function(e,i,o,s){if(!e.created){for(var r,c=0;c<e.parentNode.childElementCount;c++)"custom"==e.parentNode.childNodes[c]._link&&(r=e.parentNode.childNodes[c]);r&&(e.created=!0,t.create.filediv(".menubutton","添加图片",e,(function(t){t&&n.putDB("image","menu_style",t,(function(){n.getDB("image","menu_style",(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;r.style.backgroundImage="url("+t+")",r.style.backgroundSize="cover",r.className="button character",e.classList.add("showdelete")},t.readAsDataURL(n,"UTF-8")}}))}))})).inputNode.accept="image/*",t.create.div(".menubutton.deletebutton","删除图片",e,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(n.deleteDB("image","menu_style"),r.style.backgroundImage="none",r.style.backgroundSize="auto",r.className="button character dashedmenubutton",e.classList.remove("showdelete"),"custom"==a.config.menu_style&&(a.configMenu.appearence.config.menu_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(e,t,i,a){switch(e.className="button character",e.style.backgroundSize="auto",t){case"default":case"custom":e.style.backgroundImage="none",e.classList.add("dashedmenubutton");break;case"wood":e.setBackgroundImage("theme/woodden/wood2.png");break;case"music":e.style.backgroundImage="linear-gradient(#4b4b4b, #464646)";break;case"simple":e.style.backgroundImage="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4))"}"custom"==t&&(e.classList.add("transparent"),n.getDB("image","menu_style",(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;e.style.backgroundImage="url("+t+")",e.style.backgroundSize="cover",e.className="button character",e.parentNode.lastChild.classList.add("showdelete")},t.readAsDataURL(n,"UTF-8")}})))},onclick:function(e){if(n.saveConfig("menu_style",e),t.css.menu_stylesheet&&(t.css.menu_stylesheet.remove(),delete t.css.menu_stylesheet),"custom"==e)n.getDB("image","menu_style",(function(e){if(e){var n=new FileReader;n.onload=function(e){t.css.menu_stylesheet&&t.css.menu_stylesheet.remove(),t.css.menu_stylesheet=a.init.sheet('html #window>.dialog.popped,html .menu,html .menubg{background-image:url("'+e.target.result+'");background-size:cover}')},n.readAsDataURL(e,"UTF-8")}}));else if("default"!=e){var i="";switch(e){case"wood":i='url("'+a.assetURL+'theme/woodden/wood2.png")';break;case"music":i="linear-gradient(#4b4b4b, #464646);color:white;text-shadow:black 0 0 2px";break;case"simple":i="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4));color:white;text-shadow:black 0 0 2px"}t.css.menu_stylesheet=a.init.sheet("html #window>.dialog.popped,html .menu,html .menubg{background-image:"+i+"}")}},unfrequent:!0},control_style:{name:"按钮背景",init:"default",item:{wood:"木纹",music:"音乐",simple:"简约",custom:"自定",default:"默认"},visualBar:function(e,i,o,s){if(!e.created){for(var r,c=0;c<e.parentNode.childElementCount;c++)"custom"==e.parentNode.childNodes[c]._link&&(r=e.parentNode.childNodes[c]);r&&(e.created=!0,t.create.filediv(".menubutton","添加图片",e,(function(t){t&&n.putDB("image","control_style",t,(function(){n.getDB("image","control_style",(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;r.style.backgroundImage="url("+t+")",r.className="button character controlbutton",e.classList.add("showdelete")},t.readAsDataURL(n,"UTF-8")}}))}))})).inputNode.accept="image/*",t.create.div(".menubutton.deletebutton","删除图片",e,(function(){confirm("确定删除自定义图片？（此操作不可撤销）")&&(n.deleteDB("image","control_style"),r.style.backgroundImage="none",r.className="button character controlbutton dashedmenubutton",e.classList.remove("showdelete"),"custom"==a.config.control_style&&(a.configMenu.appearence.config.control_style.onclick("default"),s.lastChild.innerHTML="默认"),r.classList.add("transparent"))})))}},visualMenu:function(e,t,i,a){switch(e.className="button character controlbutton",e.style.backgroundSize="",t){case"default":case"custom":e.style.backgroundImage="none",e.classList.add("dashedmenubutton");break;case"wood":e.setBackgroundImage("theme/woodden/wood.jpg");break;case"music":e.style.backgroundImage="linear-gradient(#4b4b4b, #464646)";break;case"simple":e.style.backgroundImage="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4))"}"custom"==t&&(e.classList.add("transparent"),n.getDB("image","control_style",(function(n){if(n){var t=new FileReader;t.onload=function(n){var t=n.target.result;e.style.backgroundImage="url("+t+")",e.className="button character controlbutton",e.parentNode.lastChild.classList.add("showdelete")},t.readAsDataURL(n,"UTF-8")}})))},onclick:function(e){if(n.saveConfig("control_style",e),t.css.control_stylesheet&&(t.css.control_stylesheet.remove(),delete t.css.control_stylesheet),"custom"==e)n.getDB("image","control_style",(function(e){if(e){var n=new FileReader;n.onload=function(e){t.css.control_stylesheet&&t.css.control_stylesheet.remove(),t.css.control_stylesheet=a.init.sheet('#window .control,.menubutton:not(.active):not(.highlight):not(.red):not(.blue),#window #system>div>div{background-image:url("'+e.target.result+'")}')},n.readAsDataURL(e,"UTF-8")}}));else if("default"!=e){var i="";switch(e){case"wood":i='url("'+a.assetURL+'theme/woodden/wood.jpg")';break;case"music":i="linear-gradient(#4b4b4b, #464646);color:white;text-shadow:black 0 0 2px";break;case"simple":i="linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4));color:white;text-shadow:black 0 0 2px"}t.css.control_stylesheet="wood"==e?a.init.sheet("#window .control,#window .menubutton,#window #system>div>div,#window #system>div>.pressdown2{background-image:"+i+"}"):a.init.sheet("#window .control,.menubutton:not(.active):not(.highlight):not(.red):not(.blue),#window #system>div>div{background-image:"+i+"}")}},unfrequent:!0},custom_button:{name:"自定义按钮高度",init:!1,unfrequent:!0,onclick:function(e){if("skip"!==e&&n.saveConfig("custom_button",e),t.css.buttonsheet&&t.css.buttonsheet.remove(),a.config.custom_button){var i=6+(parseInt(a.config.custom_button_system_top)||0),o=6+(parseInt(a.config.custom_button_system_bottom)||0),s=3+(parseInt(a.config.custom_button_control_top)||0),r=3+(parseInt(a.config.custom_button_control_bottom)||0),c=2,l=2;s<0&&(c+=s,s=0),r<0&&(l+=r,r=0),t.css.buttonsheet=a.init.sheet("#system>div>div, .caption>div>.tdnode{padding-top:"+i+"px !important;padding-bottom:"+o+"px !important}","#control>.control>div{padding-top:"+s+"px;padding-bottom:"+r+"px}","#control>.control{padding-top:"+c+"px;padding-bottom:"+l+"px}")}}},custom_button_system_top:{name:"菜单上部高度",init:"0x",item:{"-5x":"-5px","-4x":"-4px","-3x":"-3px","-2x":"-2px","-1x":"-1px","0x":"默认","1x":"1px","2x":"2px","3x":"3px","4x":"4px","5x":"5px"},unfrequent:!0,onclick:function(e){n.saveConfig("custom_button_system_top",e),a.configMenu.appearence.config.custom_button.onclick("skip")}},custom_button_system_bottom:{name:"菜单下部高度",init:"0x",item:{"-5x":"-5px","-4x":"-4px","-3x":"-3px","-2x":"-2px","-1x":"-1px","0x":"默认","1x":"1px","2x":"2px","3x":"3px","4x":"4px","5x":"5px"},unfrequent:!0,onclick:function(e){n.saveConfig("custom_button_system_bottom",e),a.configMenu.appearence.config.custom_button.onclick("skip")}},custom_button_control_top:{name:"技能上部高度",init:"0x",item:{"-5x":"-5px","-4x":"-4px","-3x":"-3px","-2x":"-2px","-1x":"-1px","0x":"默认","1x":"1px","2x":"2px","3x":"3px","4x":"4px","5x":"5px"},unfrequent:!0,onclick:function(e){n.saveConfig("custom_button_control_top",e),a.configMenu.appearence.config.custom_button.onclick("skip")}},custom_button_control_bottom:{name:"技能下部高度",init:"0x",item:{"-5x":"-5px","-4x":"-4px","-3x":"-3px","-2x":"-2px","-1x":"-1px","0x":"默认","1x":"1px","2x":"2px","3x":"3px","4x":"4px","5x":"5px"},unfrequent:!0,onclick:function(e){n.saveConfig("custom_button_control_bottom",e),a.configMenu.appearence.config.custom_button.onclick("skip")}},radius_size:{name:"圆角大小",init:"default",item:{off:"关闭",reduce:"减小",default:"默认",increase:"增大"},unfrequent:!0,onclick:function(e){n.saveConfig("radius_size",e),t.window.dataset.radius_size=e}},glow_phase:{name:"当前回合角色高亮",unfrequent:!0,init:"yellow",intro:"设置当前回合角色的边框颜色",item:{none:"无",yellow:"黄色",green:"绿色",purple:"紫色"},onclick:function(e){n.saveConfig("glow_phase",e),a.init.cssstyles()}},fold_card:{name:"折叠手牌",init:!0,unfrequent:!0},fold_mode:{name:"折叠模式菜单",intro:"关闭后模式菜单中“更多”内的项目将直接展开",init:!0,unfrequent:!0},seperate_control:{name:"分离选项条",init:!0,unfrequent:!0,intro:"开启后玩家在进行选择时不同的选项将分开，而不是连在一起"},blur_ui:{name:"模糊效果",intro:"在暂停或打开菜单时开启模糊效果",init:!1,unfrequent:!0,onclick:function(e){n.saveConfig("blur_ui",e),e?t.window.classList.add("blur_ui"):t.window.classList.remove("blur_ui")}},glass_ui:{name:"玻璃主题",intro:"为游戏主题打开玻璃效果（手机暂不支持）",init:!1,unfrequent:!0,onclick:function(e){n.saveConfig("glass_ui",e),e?t.window.classList.add("glass_ui"):t.window.classList.remove("glass_ui")}},damage_shake:{name:"伤害抖动",intro:"角色受到伤害时的抖动效果",init:!0,unfrequent:!0},button_press:{name:"按钮效果",intro:"选项条被按下时将有按下效果",init:!0,unfrequent:!0},jiu_effect:{name:"喝酒效果",init:!0,unfrequent:!0},animation:{name:"游戏特效",intro:"开启后出现属性伤害、回复体力等情况时会显示动画",init:!1,unfrequent:!0},skill_animation_type:{name:"技能特效",intro:"开启后觉醒技、限定技将显示全屏文字",init:"default",unfrequent:!0,item:{default:"默认",old:"旧版",off:"关闭"}},die_move:{name:"阵亡效果",intro:"阵亡后武将的显示效果",init:"flip",unfrequent:!0,item:{off:"关闭",move:"移动",flip:"翻面"}},target_shake:{name:"目标效果",intro:"一名玩家成为卡牌或技能的目标时的显示效果",init:"off",item:{off:"关闭",zoom:"缩放",shake:"抖动"},unfrequent:!0,onclick:function(e){n.saveConfig("target_shake",e),t.arena.dataset.target_shake=e}},turned_style:{name:"翻面文字",intro:"角色被翻面时显示“翻面”",init:!0,unfrequent:!0,onclick:function(e){n.saveConfig("turned_style",e),e?t.arena.classList.remove("hide_turned"):t.arena.classList.add("hide_turned")}},link_style2:{name:"横置样式",intro:"设置角色被横置时的样式",init:"chain",unfrequent:!0,item:{chain:"铁索",rotate:"横置",mark:"标记"},onclick:function(e){for(var a=[],o=0;o<n.players.length;o++)n.players[o].isLinked()&&a.push(n.players[o]);for(n.saveConfig("link_style2",e),o=0;o<a.length;o++)i.is.linked2(a[o])?(a[o].classList.add("linked2"),a[o].classList.remove("linked")):(a[o].classList.add("linked"),a[o].classList.remove("linked2"));"chain"==e?t.arena.classList.remove("nolink"):t.arena.classList.add("nolink"),t.updatem()}},cardshape:{name:"手牌显示",intro:"将手牌设置为正方形或长方形",init:"default",unfrequent:!0,item:{default:"默认",oblong:"长方"},onclick:function(e){var a=!1;n.me&&n.me.isLinked()&&(a=!0),n.saveConfig("cardshape",e),"oblong"!=e||"long"!=n.layout&&"mobile"!=n.layout&&"long2"!=n.layout&&"nova"!=n.layout?(t.arena.classList.remove("oblongcard"),t.window.classList.remove("oblongcard")):(t.arena.classList.add("oblongcard"),t.window.classList.add("oblongcard")),a&&(i.is.linked2(n.me)?(n.me.classList.remove("linked"),n.me.classList.add("linked2")):(n.me.classList.add("linked"),n.me.classList.remove("linked2")))}},cardtempname:{name:"视为卡牌名称显示",intro:"显示强制视为类卡牌（如武魂）等名称的显示方式",init:"default",unfrequent:!0,item:{default:"纵向",horizon:"横向",off:"禁用"},onclick:function(e){if(n.saveConfig("cardtempname",e),n.me&&n.me.getCards)for(var t=n.me.getCards("h"),a=0;a<t.length;a++)if(t[a]._tempName)switch(e){case"default":(o=t[a]._tempName).innerHTML=i.verticalStr(o.tempname);break;case"horizon":var o;(o=t[a]._tempName).innerHTML=o.tempname;break;default:t[a]._tempName.delete(),delete t[a]._tempName}}},textequip:{name:"装备显示",init:"image",unfrequent:!0,item:{image:"图片",text:"文字"},onclick:function(e){n.saveConfig("textequip",e),"text"!=e||"long"!=n.layout&&"mobile"!=n.layout?t.arena.classList.remove("textequip"):t.arena.classList.add("textequip")}},buttoncharacter_style:{name:"选将样式",init:"default",item:{default:"默认",simple:"精简",old:"旧版"},unfrequent:!0},cursor_style:{name:"鼠标指针",init:"auto",intro:"设置为固定后鼠标指针将不随移动到的区域而变化",unfrequent:!0,item:{auto:"自动",pointer:"固定"},onclick:function(e){n.saveConfig("cursor_style",e),"pointer"==e?t.window.classList.add("nopointer"):t.window.classList.remove("nopointer")}},name_font:{name:"人名字体",init:"LuoLiTi2",unfrequent:!0,item:{},textMenu:function(e,n){"default"!=n&&(e.style.fontFamily=n),e.style.fontSize="20px"},onclick:function(e){n.saveConfig("name_font",e),a.init.cssstyles()}},identity_font:{name:"身份字体",init:"xingkai",unfrequent:!0,item:{},textMenu:function(e,n){"default"!=n&&(e.style.fontFamily=n),e.style.fontSize="20px"},onclick:function(e){n.saveConfig("identity_font",e),a.init.cssstyles()}},cardtext_font:{name:"卡牌字体",init:"LuoLiTi2",unfrequent:!0,item:{},textMenu:function(e,n){"default"!=n&&(e.style.fontFamily=n),e.style.fontSize="20px"},onclick:function(e){n.saveConfig("cardtext_font",e),a.init.cssstyles()}},global_font:{name:"界面字体",init:"default",unfrequent:!0,item:{},textMenu:function(e,n){e.style.fontFamily="default"!=n?n:"'STHeiti','SimHei','Microsoft JhengHei','Microsoft YaHei','WenQuanYi Micro Hei',Helvetica,Arial,sans-serif",e.style.fontSize="20px"},onclick:function(e){n.saveConfig("global_font",e),a.init.cssstyles()}},update:function(e,n){a.config.custom_button?(n.custom_button_system_top.show(),n.custom_button_system_bottom.show(),n.custom_button_control_top.show(),n.custom_button_control_bottom.show()):(n.custom_button_system_top.hide(),n.custom_button_system_bottom.hide(),n.custom_button_control_top.hide(),n.custom_button_control_bottom.hide()),a.config.change_skin?n.change_skin_auto.show():n.change_skin_auto.hide(),a.config.image_background_random?(n.image_background_blur.show(),n.image_background.hide()):(n.image_background.show(),"default"==a.config.image_background?n.image_background_blur.hide():n.image_background_blur.show()),"long"==a.config.layout||"mobile"==a.config.layout?(n.textequip.show(),n.cardshape.show(),n.phonelayout.show()):(n.textequip.hide(),"long2"==a.config.layout||"nova"==a.config.layout?(n.phonelayout.show(),n.cardshape.show()):(n.phonelayout.hide(),n.cardshape.hide())),"long"==a.config.layout||"long2"==a.config.layout?n.player_height.show():n.player_height.hide(),"nova"==a.config.layout?n.player_height_nova.show():n.player_height_nova.hide(),a.config.touchscreen?n.cursor_style.hide():n.cursor_style.show(),"auto"==a.config.border_style?(n.autoborder_count.show(),n.autoborder_start.show()):(n.autoborder_count.hide(),n.autoborder_start.hide())}}},view:{name:"显示",config:{update:function(e,t){["versus","chess","tafang","boss","richer"].contains(a.config.mode)?t.show_handcardbutton.show():t.show_handcardbutton.hide(),a.config.touchscreen?t.pop_logv.hide():t.pop_logv.show(),a.device?("android"==a.device?(t.show_statusbar_android.show(),t.show_statusbar_ios.hide()):"ios"==a.device&&(t.show_statusbar_ios.show(),t.show_statusbar_android.hide()),n.download||setTimeout((function(){window.StatusBar||t.show_statusbar.hide()}),5e3)):(t.show_statusbar_ios.hide(),t.show_statusbar_android.hide()),i.is.phoneLayout()?(t.remember_round_button.show(),t.popequip.show(),t.filternode_button.show(),t.show_pause.hide(),t.show_auto.hide(),t.show_replay.hide(),t.show_round_menu.show()):(t.show_pause.show(),t.show_auto.show(),t.show_replay.show(),t.show_round_menu.hide(),t.remember_round_button.hide(),t.popequip.hide(),t.filternode_button.hide()),a.config.show_card_prompt?(t.hide_card_prompt_basic.show(),t.hide_card_prompt_equip.show()):(t.hide_card_prompt_basic.hide(),t.hide_card_prompt_equip.hide()),"off"!=a.config.show_log?t.clear_log.show():t.clear_log.hide(),i.is.phoneLayout()?(t.show_time2.show(),t.show_time.hide(),a.config.show_time2?t.watchface.show():t.watchface.hide()):(t.show_time2.hide(),t.show_time.show(),t.watchface.hide()),a.config.show_extensionmaker?t.show_extensionshare.show():t.show_extensionshare.hide()},show_history:{name:"出牌记录栏",init:"off",intro:"在屏幕左侧或右侧显示出牌记录",unfrequent:!0,item:{off:"关闭",left:"靠左",right:"靠右"},onclick:function(e){"right"==a.config.show_history&&t.window.animate("rightbar2"),n.saveConfig("show_history",e),!o.video&&o.prepareArena&&("left"==e?(t.window.classList.add("leftbar"),t.window.classList.remove("rightbar")):"right"==e?(t.window.classList.remove("leftbar"),t.window.classList.add("rightbar")):(t.window.classList.remove("leftbar"),t.window.classList.remove("rightbar")))}},pop_logv:{name:"自动弹出记录",init:!1,unfrequent:!0},show_log:{name:"历史记录栏",init:"off",intro:"在屏幕中部显示出牌文字记录",unfrequent:!0,item:{off:"关闭",left:"靠左",center:"居中",right:"靠右"},onclick:function(e){n.saveConfig("show_log",e),"off"!=a.config.show_log?(t.arenalog.style.display="",t.arenalog.dataset.position=e):(t.arenalog.style.display="none",t.arenalog.innerHTML="")}},clear_log:{name:"自动清除历史记录",init:!1,unfrequent:!0,intro:"开启后将定时清除历史记录栏的条目（而不是等记录栏满后再清除）"},log_highlight:{name:"历史记录高亮",init:!0,unfrequent:!0,intro:"开启后历史记录不同类别的信息将以不同颜色显示"},show_time:{name:"显示时间",intro:"在屏幕顶部显示当前时间",init:!1,unfrequent:!0,onclick:function(e){n.saveConfig("show_time",e),t.time.style.display=e?"":"none"}},show_time2:{name:"显示时间",intro:"在触屏按钮处显示当前时间",init:!1,unfrequent:!0,onclick:function(e){n.saveConfig("show_time2",e),e?t.roundmenu.classList.add("clock"):t.roundmenu.classList.remove("clock")}},watchface:{name:"表盘样式",init:"none",unfrequent:!0,item:{none:"默认",simple:"简约"},onclick:function(e){n.saveConfig("watchface",e),t.roundmenu.dataset.watchface=e}},show_time3:{name:"显示游戏时间",init:!1,unfrequent:!0},show_statusbar_android:{name:"显示状态栏",init:!1,unfrequent:!0,content:function(e){n.saveConfig("show_statusbar",e),window.StatusBar&&"android"==a.device&&(e?(window.StatusBar.overlaysWebView(!1),window.StatusBar.backgroundColorByName("black"),window.StatusBar.show()):window.StatusBar.hide())}},show_statusbar_ios:{name:"显示状态栏",init:"off",unfrequent:!0,item:{default:"默认",overlay:"嵌入",auto:"自动",off:"关闭"},onclick:function(e){n.saveConfig("show_statusbar_ios",e),window.StatusBar&&"ios"==a.device&&("off"!=e&&"auto"!=e?("default"==a.config.show_statusbar_ios?(window.StatusBar.overlaysWebView(!1),document.body.classList.remove("statusbar")):(window.StatusBar.overlaysWebView(!0),document.body.classList.add("statusbar")),window.StatusBar.backgroundColorByName("black"),window.StatusBar.show()):(document.body.classList.remove("statusbar"),window.StatusBar.hide()))}},show_card_prompt:{name:"显示出牌信息",intro:"出牌时在使用者上显示卡牌名称",init:!0,unfrequent:!0},hide_card_prompt_basic:{name:"隐藏基本牌信息",intro:"不显示基本牌名称",init:!1,unfrequent:!0},hide_card_prompt_equip:{name:"隐藏装备牌信息",intro:"不显示装备牌名称",init:!1,unfrequent:!0},show_phase_prompt:{name:"显示阶段信息",intro:"在当前回合不同阶段开始时显示阶段名称",init:!0,unfrequent:!0},show_phaseuse_prompt:{name:"出牌阶段提示",intro:"在你出牌时显示提示文字",init:!0,unfrequent:!0},auto_popped_config:{name:"自动弹出选项",intro:"鼠标移至选项按钮时弹出模式选择菜单",init:!0,unfrequent:!0},auto_popped_history:{name:"自动弹出历史",intro:"鼠标移至暂停按钮时弹出历史记录菜单",init:!1,unfrequent:!0},show_round_menu:{name:"显示触屏按钮",init:!0,unfrequent:!0,onclick:function(e){if(i.is.nomenu("show_round_menu",e))return!1;n.saveConfig("show_round_menu",e),e&&t.roundmenu?t.roundmenu.style.display="":(t.roundmenu.style.display="none",alert("关闭触屏按钮后可通过手势打开菜单（默认为下划）"))}},remember_round_button:{name:"记住按钮位置",intro:"重新开始后触屏按钮将保存的上一局的位置",init:!1,unfrequent:!0,onclick:function(e){n.saveConfig("remember_round_button",e),e||t.click.resetround()}},remember_dialog:{name:"记住对话框位置",intro:"移动对话框后新的对话框也将在移动后的位置显示",init:!1,unfrequent:!0,onclick:function(e){if(n.saveConfig("remember_dialog",e),!e){if(t.dialog){var i=t.dialog;i.style.transform="",i._dragtransform=[0,0],i.style.transition="all 0.3s",i._dragtouches,i._dragorigin,i._dragorigintransform,setTimeout((function(){i.style.transition=""}),500)}n.saveConfig("dialog_transform",[0,0])}}},transparent_dialog:{name:"堆叠对话框虚化",init:!1,intro:"当具有static属性的对话框堆叠（如五谷丰登对话框中提示无懈可击）时，将后方的对话框变为半透明",onclick:function(e){if(n.saveConfig("transparent_dialog",e),e)for(var i=0;i<t.dialogs.length;i++)t.dialogs[i]!=t.dialog&&t.dialogs[i].static&&t.dialogs[i].unfocus();else for(i=0;i<t.dialogs.length;i++)t.dialogs[i]!=t.dialog&&t.dialogs[i].static&&t.dialogs[i].refocus()}},show_rarity:{name:"显示武将稀有度",init:!1,intro:"仅供娱乐，重启后生效",unfrequent:!0,onclick:function(e){n.saveConfig("show_rarity",e)}},mark_identity_style:{name:"标记身份操作",intro:"设置单击身份按钮时的操作",unfrequent:!0,init:"menu",item:{menu:"菜单",click:"单击"}},character_dialog_tool:{name:"自由选将显示",intro:"点击自由选将时默认显示的条目",init:"最近",item:{收藏:"收藏",最近:"最近",all:"全部"},unfrequent:!0},recent_character_number:{name:"最近使用武将",intro:"自由选将对话框中最近使用武将的数量",init:"12",item:{6:"6",12:"12",20:"24",30:"36"},unfrequent:!0},popequip:{name:"触屏装备选择",intro:"设置触屏布局中选择装备的方式",init:!0,unfrequent:!0},filternode_button:{name:"触屏筛选按钮",intro:"设置自由选将对话框中筛选按钮的样式",init:!0,unfrequent:!0},show_charactercard:{name:"显示武将资料",intro:"在武将界面单击时弹出武将资料卡",init:!0,unfrequent:!0},show_favourite:{name:"显示添加收藏",intro:"在角色的右键菜单中显示添加收藏",init:!1,unfrequent:!0},show_favmode:{name:"显示模式收藏",intro:"快捷菜单中显示收藏模式",init:!0,unfrequent:!0},show_favourite_menu:{name:"显示收藏菜单",intro:"在选项-武将中显示收藏一栏",init:!0,unfrequent:!0},show_ban_menu:{name:"显示禁将菜单",intro:"在选项-武将中显示禁将一栏",init:!0,unfrequent:!0},right_range:{name:"显示距离信息",intro:"在角色的右键菜单中显示距离等信息",init:!0,unfrequent:!0},replace_image:{name:"替换为原始卡图",intro:"所有V版卡图替换为三国杀原版卡图",init:!1,unfrequent:!0,onclick:function(e){n.saveConfig("replace_image",e),e?t.arena.classList.remove("replace_image"):t.arena.classList.add("replace_image")}},hide_card_image:{name:"隐藏卡牌背景",intro:"所有卡牌将使用文字作为背景",init:!1,unfrequent:!0,restart:!0},show_name:{name:"显示角色名称",init:!1,unfrequent:!0,onclick:function(e){n.saveConfig("show_name",e),e?t.arena.classList.remove("hide_name"):t.arena.classList.add("hide_name")}},show_replay:{name:"显示重来按钮",init:!1,unfrequent:!0,onclick:function(e){n.saveConfig("show_replay",e),a.config.show_replay?t.replay.style.display="":t.replay.style.display="none"}},show_playerids:{name:"显示身份按钮",init:!0,unfrequent:!0,onclick:function(e){n.saveConfig("show_playerids",e),a.config.show_playerids?t.playerids.style.display="":t.playerids.style.display="none"}},show_sortcard:{name:"显示整理手牌按钮",init:!0,unfrequent:!0,onclick:function(e){n.saveConfig("show_sortcard",e),a.config.show_sortcard?t.sortCard.style.display="":t.sortCard.style.display="none"}},show_pause:{name:"显示暂停按钮",init:!0,unfrequent:!0,onclick:function(e){n.saveConfig("show_pause",e),a.config.show_pause?t.pause.style.display="":t.pause.style.display="none"}},show_auto:{name:"显示托管按钮",init:!0,unfrequent:!0,onclick:function(e){n.saveConfig("show_auto",e),a.config.show_auto?t.auto.style.display="":t.auto.style.display="none"}},show_volumn:{name:"显示音量按钮",init:!0,unfrequent:!0,onclick:function(e){n.saveConfig("show_volumn",e),a.config.show_volumn?t.volumn.style.display="":t.volumn.style.display="none"}},show_cardpile:{name:"显示牌堆按钮",init:!0,unfrequent:!0,onclick:function(e){n.saveConfig("show_cardpile",e),t.cardPileButton.style.display=e?"":"none"}},show_cardpile_number:{name:"显示剩余牌数",init:!1,unfrequent:!0,onclick:function(e){n.saveConfig("show_cardpile_number",e),t.cardPileNumber.style.display=e?"":"none"}},show_handcardbutton:{name:"显示手牌按钮",init:!0,unfrequent:!0,onclick:function(e){n.saveConfig("show_handcardbutton",e)}},show_giveup:{name:"显示投降按钮",init:!0,unfrequent:!0,onclick:function(e){n.saveConfig("show_giveup",e)}},show_wuxie:{name:"显示无懈按钮",intro:"在右上角显示不询问无懈",init:!1,unfrequent:!0,onclick:function(e){n.saveConfig("show_wuxie",e),a.config.show_wuxie?t.wuxie.style.display="":t.wuxie.style.display="none"}},wuxie_right:{name:"无懈按钮靠左",init:!0,unfrequent:!0},show_discardpile:{name:"暂停时显示弃牌堆",init:!1,unfrequent:!0},show_extensionmaker:{name:"显示制作扩展",init:!0,unfrequent:!0},show_extensionshare:{name:"显示分享扩展",init:!0,unfrequent:!0}}},audio:{name:"音效",config:{update:function(e,n){"music_custom"==a.config.background_music&&(a.device||a.node)?n.import_music.show():n.import_music.hide(),n.clear_background_music[i.is.object(a.config.customBackgroundMusic)?"show":"hide"](),t.background_music_setting=n.background_music,n.background_music._link.config.updatex.call(n.background_music,[])},background_music:{updatex:function(){this.lastChild.innerHTML=this._link.config.item[a.config.background_music];for(var e=this._link.menu,n=0;n<e.childElementCount;n++)["music_off","music_custom","music_random"].concat(a.config.all.background_music).contains(e.childNodes[n]._link)||e.childNodes[n].delete()},name:"背景音乐",init:!0,item:{music_default:"默认"},onclick:function(e){n.saveConfig("background_music",e),n.playBackgroundMusic()}},import_music:{name:'<div style="white-space:nowrap;width:calc(100% - 5px)"><input type="file" style="width:calc(100% - 40px)" accept="audio/*"><button style="width:40px">确定</button></div>',clear:!0},background_audio:{name:"游戏音效",init:!0},background_speak:{name:"人物配音",init:!0},equip_audio:{name:"装备配音",init:!1},repeat_audio:{name:"播放重复语音",init:!1},volumn_audio:{name:"音效音量",init:8,item:{0:"〇",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八"},onclick:function(e){n.saveConfig("volumn_audio",parseInt(e))}},volumn_background:{name:"音乐音量",init:8,item:{0:"〇",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八"},onclick:function(e){n.saveConfig("volumn_background",parseInt(e)),t.backgroundMusic.volume=e/8}},clear_background_music:{name:"清除自定义背景音乐",clear:!0,onclick:function(){if(confirm("是否清除已导入的所有自定义背景音乐？（该操作不可撤销！）")){for(var e in a.config.customBackgroundMusic)a.config.all.background_music.remove(e),0==e.indexOf("cdv_")?n.removeFile("audio/background/"+e+".mp3"):n.deleteDB("audio",e);a.config.customBackgroundMusic=null,n.saveConfig("customBackgroundMusic",null),n.saveConfig("background_music","music_off"),o._aozhan||n.playBackgroundMusic()}}}}},skill:{name:"技能",config:{update:function(e,n){for(var t in n)"autoskill"==n[t]._link.config.type?a.config.autoskilllist.contains(t)?n[t].classList.remove("on"):n[t].classList.add("on"):"banskill"==n[t]._link.config.type&&(a.config.forbidlist.contains(t)?n[t].classList.remove("on"):n[t].classList.add("on"))}}},others:{name:"其它",config:{reset_game:{name:"重置游戏设置",onclick:function(){var e=this;if(e._clearing){var t=localStorage.getItem("noname_inited"),i=localStorage.getItem(a.configprefix+"key");return localStorage.clear(),t&&localStorage.setItem("noname_inited",t),i&&localStorage.setItem(a.configprefix+"key",i),n.deleteDB("config"),n.deleteDB("data"),void n.reload()}e._clearing=!0,e.firstChild.innerHTML="单击以确认 (3)",setTimeout((function(){e.firstChild.innerHTML="单击以确认 (2)",setTimeout((function(){e.firstChild.innerHTML="单击以确认 (1)",setTimeout((function(){e.firstChild.innerHTML="重置游戏设置",delete e._clearing}),1e3)}),1e3)}),1e3)},clear:!0},reset_hiddenpack:{name:"重置隐藏内容",onclick:function(){if("已重置"!=this.firstChild.innerHTML){this.firstChild.innerHTML="已重置",n.saveConfig("hiddenModePack",[]),n.saveConfig("hiddenCharacterPack",[]),n.saveConfig("hiddenCardPack",[]),n.saveConfig("hiddenPlayPack",[]),n.saveConfig("hiddenBackgroundPack",[]);var e=this;setTimeout((function(){e.firstChild.innerHTML="重置隐藏内容",setTimeout((function(){confirm("是否重新启动使改变生效？")&&n.reload()}))}),500)}},clear:!0},reset_tutorial:{name:"重置新手向导",onclick:function(){if("已重置"!=this.firstChild.innerHTML){this.firstChild.innerHTML="已重置",n.saveConfig("new_tutorial",!1),n.saveConfig("prompt_hidebg"),n.saveConfig("prompt_hidepack");var e=this;setTimeout((function(){e.firstChild.innerHTML="重置新手向导"}),500)}},clear:!0},import_data:{name:"导入游戏设置",onclick:function(){t.import_data_button.classList.toggle("hidden")},clear:!0},import_data_button:{name:'<div style="white-space:nowrap;width:calc(100% - 10px)"><input type="file" style="width:calc(100% - 40px)"><button style="width:40px">确定</button></div>',clear:!0},export_data:{name:"导出游戏设置",onclick:function(){var e,t=function(e){n.export(a.init.encode(JSON.stringify(e)),"无名杀 - 数据 - "+(new Date).toLocaleString())};if(a.db)n.getDB("config",null,(function(e){n.getDB("data",null,(function(n){t({config:e,data:n})}))}));else{for(var i in e={},localStorage)0==i.indexOf(a.configprefix)&&(e[i]=localStorage[i]);t(e)}},clear:!0},redownload_game:{name:"重新下载游戏",onclick:function(){var e=this;if(e._clearing)return localStorage.removeItem("noname_inited"),void n.reload();e._clearing=!0,e.firstChild.innerHTML="单击以确认 (3)",setTimeout((function(){e.firstChild.innerHTML="单击以确认 (2)",setTimeout((function(){e.firstChild.innerHTML="单击以确认 (1)",setTimeout((function(){e.firstChild.innerHTML="重新下载游戏",delete e._clearing}),1e3)}),1e3)}),1e3)},clear:!0},update:function(e,n){a.device||a.node?n.redownload_game.show():n.redownload_game.hide()}}}},a.extensionMenu={cardpile:{enable:{name:"开启",init:!1,restart:!0},intro:{name:"将杀闪等牌在牌堆中的比例维持在与军争牌堆相同，防止开启扩展包后被过多地稀释",clear:!0,nopointer:!0},sha:{name:"杀",init:"1",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},huosha:{name:"火杀",init:"1",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},leisha:{name:"雷杀",init:"1",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},shan:{name:"闪",init:"1",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},tao:{name:"桃",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},jiu:{name:"酒",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},wuxie:{name:"无懈可击",init:"0.5",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},nanman:{name:"南蛮入侵",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},wanjian:{name:"万箭齐发",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},guohe:{name:"过河拆桥",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},shunshou:{name:"顺手牵羊",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},tiesuo:{name:"铁索连环",init:"0",item:{1:"补充全部",.5:"补充一半",0:"不补充"}},hide:{name:"隐藏此扩展",clear:!0,onclick:function(){"隐藏此扩展"==this.firstChild.innerHTML?(this.firstChild.innerHTML="此扩展将在重启后隐藏",a.config.hiddenPlayPack.add("cardpile"),a.config.prompt_hidepack||(alert("隐藏的扩展包可通过选项-其它-重置隐藏内容恢复"),n.saveConfig("prompt_hidepack",!0))):(this.firstChild.innerHTML="隐藏此扩展",a.config.hiddenPlayPack.remove("cardpile")),n.saveConfig("hiddenPlayPack",a.config.hiddenPlayPack)}}},wuxing:{enable:{name:"开启",init:!1,restart:!0},intro:{name:"每名角色和部分卡牌在游戏开始时随机获得一个属性",clear:!0,nopointer:!0},num:{name:"带属性卡牌",init:"0.3",item:{.1:"10%",.2:"20%",.3:"30%",.5:"50%"}},hide:{name:"隐藏此扩展",clear:!0,onclick:function(){"隐藏此扩展"==this.firstChild.innerHTML?(this.firstChild.innerHTML="此扩展将在重启后隐藏",a.config.hiddenPlayPack.add("wuxing"),a.config.prompt_hidepack||(alert("隐藏的扩展包可通过选项-其它-重置隐藏内容恢复"),n.saveConfig("prompt_hidepack",!0))):(this.firstChild.innerHTML="隐藏此扩展",a.config.hiddenPlayPack.remove("wuxing")),n.saveConfig("hiddenPlayPack",a.config.hiddenPlayPack)}}},coin:{enable:{name:"开启",init:!1,restart:!0,onclick:function(e){e?a.config.plays.add("coin"):a.config.plays.remove("coin"),n.saveConfig("plays",a.config.plays)}},intro:{name:"每完成一次对局，可获得一定数量的金币；金币可用于购买游戏特效",clear:!0,nopointer:!0},display:{name:"金币显示",init:"text",item:{symbol:"符号",text:"文字"},onclick:function(e){n.saveConfig("coin_display_playpackconfig",e),n.changeCoin&&n.changeCoin(0)}},canvas:{name:"特效置顶",init:!1,onclick:function(e){n.saveConfig("coin_canvas_playpackconfig",e),e?t.window.classList.add("canvas_top"):t.window.classList.remove("canvas_top")}},hide:{name:"隐藏此扩展",clear:!0,onclick:function(){"隐藏此扩展"==this.firstChild.innerHTML?(this.firstChild.innerHTML="此扩展将在重启后隐藏",a.config.hiddenPlayPack.add("coin"),a.config.prompt_hidepack||(alert("隐藏的扩展包可通过选项-其它-重置隐藏内容恢复"),n.saveConfig("prompt_hidepack",!0))):(this.firstChild.innerHTML="隐藏此扩展",a.config.hiddenPlayPack.remove("coin")),n.saveConfig("hiddenPlayPack",a.config.hiddenPlayPack)}}}}},365:()=>{window.data_translate={sc:"打钱",ship:"上舰",flower:"鲜花",egg:"鸡蛋",wine:"酒杯",shoe:"拖鞋",yuxisx:"玉玺",shoukao:"枷锁",junk:"平凡",common:"普通",rare:"精品",epic:"史诗",legend:"传说",beginner:"简单",default:"默认",special:"特殊",zhenfa:"阵法",aozhan:"鏖战",mode_derivation_card_config:"衍生",mode_banned_card_config:"禁卡",mode_favourite_character_config:"收藏",mode_banned_character_config:"禁将",suit:"花色",heart:"♥︎",diamond:"♦︎",spade:"♠︎",club:"♣︎",ghujia:"护甲",ghujia_bg:"甲",heart2:"红桃",diamond2:"方片",spade2:"黑桃",club2:"梅花",color:"颜色",red:"红色",black:"黑色",none:"无色",number:"点数",cardname:"牌名",ok:"确定",ok2:"确定",cancel:"取消",cancel2:"取消",restart:"重新开始",setting:"设置",start:"开始",random:"随机",_out:"无效",agree:"同意",refuse:"拒绝",fire:"火",thunder:"雷",poison:"毒",kami:"神",ocean:"海",ice:"冰",yami:"暗",fire_ab:"火焰",thunder_ab:"雷电",ocean_ab:"海洋",ice_ab:"冰冻",yami_ab:"暗影",vtuber:"企",clubs:"社",vtuber2:"企业联合",clubs2:"社团联合",wei:"魏",shu:"蜀",wu:"吴",qun:"群",shen:"皇",western:"西",key:"N",holo:"杏",dotlive:"点",nijisanji:"虹",VirtuaReal:"维阿",HappyElements:"乐",NetEase:"网",upd8:"U",eilene:"艾琳",paryi:"帕",kagura:"神楽",nanashi:"774",psp:"P",asoul:"A",nori:"苔",vwp:"神椿",vshojo:"V",xuyan:"虚",chaos:"C",xuefeng:"雪",Providence:"普",hunmiao:"魂",ego:"复",Tencent:"腾",lucca:"L",RedC:"红",double:"多",wei2:"魏国",shu2:"蜀国",wu2:"吴国",qun2:"群雄",shen2:"特典",western2:"西方",key2:"KEY",holo2:"Hololive",upd82:"Upd8",dotlive2:".live",nijisanji2:"Nijisanji",VirtuaReal2:"VirtuaReal",HappyElements2:"乐元素",NetEase2:"网易",eilene2:"艾琳一家",paryi2:"帕里坡",kagura2:"神楽组",nanashi2:"774inc",psp2:"psplive",asoul2:"A_SOUL",nori2:"Noripro",vwp2:"神椿市",vshojo2:"Vshojo",xuyan2:"虚研社",chaos2:"ChaosLive",xuefeng2:"雪风军团",Providence2:"普罗维登",hunmiao2:"魂喵科技",ego2:"Egolive",Tencent2:"腾讯",lucca2:"Lucca事务所",RedC2:"RedCircle",double2:"多势力",male:"男",female:"女",mad:"混乱",mad_bg:"疯",hp:"体力",draw_card:"摸牌",discard_card:"弃牌",take_damage:"受伤害",reset_character:"复原武将牌",recover_hp:"回复体力",lose_hp:"流失体力",get_damage:"受伤害",weiColor:"#b0d0e2",shuColor:"#ffddb9",wuColor:"#b2d9a9",qunColor:"#f6f6f6",shenColor:"#ffe14c",westernColor:"#ffe14c",jinColor:"#ffe14c",keyColor:"#c9b1fd",holoColor:"#38ABE0",nijisanjiColor:"#b0d0e2",dotliveColor:"#b2d9a9",upd8Color:"#ffe14c",eileneColor:"#DB7093",paryiColor:"#DDAAAF",VirtuaRealColor:"#77aaee",HappyElementsColor:"#60ACC8",kaguraColor:"#55deef",nanashiColor:"#e27b6b",pspColor:"#4d3d11",asoulColor:"#ffddcc",noriColor:"#a8ddaa",basic:"基本",equip:"装备",trick:"锦囊",delay:"延时锦囊",character:"角色",revive:"复活",equip1:"武器",equip2:"防具",equip3:"防御载具",equip4:"攻击载具",equip5:"宝物",equip6:"坐骑",zero:"零",one:"一",two:"二",three:"三",four:"四",five:"五",six:"六",seven:"七",eight:"八",nine:"九",ten:"十",_chongzhu:"重铸",_lianhuan:"连环",_lianhuan2:"连环",_kamisha:"神杀",_oceansha:"海杀",_icesha:"冰杀",_yamisha:"暗杀",_yamisha2:"暗影",_shengjie:"升阶",qianxing:"潜行",mianyi:"免疫",fengyin:"封印",baiban:"白板",_disableJudge:"判定区",pileTop:"牌堆顶",pileBottom:"牌堆底",xiaowu_emotion:"小无表情",guojia_emotion:"郭嘉表情",zhenji_emotion:"甄姬表情",shibing_emotion:"士兵表情",xiaosha_emotion:"小杀表情",xiaotao_emotion:"小桃表情",xiaojiu_emotion:"小酒表情",Diana_emotion:"嘉然表情",pause:"暂停",config:"选项",auto:"托管",unknown:"未知",unknown0:"一号位",unknown1:"二号位",unknown2:"三号位",unknown3:"四号位",unknown4:"五号位",unknown5:"六号位",unknown6:"七号位",unknown7:"八号位",feichu_equip1:"已废除",feichu_equip1_info:"武器栏已废除",feichu_equip2:"已废除",feichu_equip2_info:"防具栏已废除",feichu_equip3:"已废除",feichu_equip3_info:"防御坐骑栏已废除",feichu_equip4:"已废除",feichu_equip4_info:"攻击坐骑栏已废除",feichu_equip5:"已废除",feichu_equip5_info:"宝物栏已废除",feichu_equip1_bg:"废",feichu_equip2_bg:"废",feichu_equip3_bg:"废",feichu_equip4_bg:"废",feichu_equip5_bg:"废",disable_judge:"已废除",disable_judge_info:"判定区已废除",disable_judge_bg:"废",pss:"手势",pss_paper:"布",pss_scissor:"剪刀",pss_stone:"石头",pss_paper_info:"石头剪刀布时的一种手势。克制石头，但被剪刀克制。",pss_scissor_info:"石头剪刀布时的一种手势。克制布，但被石头克制。",pss_stone_info:"石头剪刀布时的一种手势。克制剪刀，但被布克制。",group_wei:"魏势力",group_shu:"蜀势力",group_wu:"吴势力",group_jin:"晋势力",group_qun:"群势力",group_key:"键势力",group_holo:"杏势力",group_nijisanji:"虹势力",group_VirtuaReal:"维势力",group_upd8:"U势力",group_paryi:"帕势力",group_kagura:"神楽势力",group_nanashi:"7势力",group_psp:"P势力",group_asoul:"魂势力",group_nori:"苔势力",group_vwp:"神椿势力",group_chaos:"混沌势力",group_xuyan:"虚势力",group_xuefeng:"雪风势力",group_Providence:"普罗维登",group_wei_bg:"魏",group_shu_bg:"蜀",group_wu_bg:"吴",group_qun_bg:"群",group_jin_bg:"晋",group_key_bg:"键",group_holo_bg:"杏",group_nijisanji_bg:"虹",group_VirtuaReal_bg:"维",group_upd8_bg:"U",group_paryi_bg:"帕",group_kagura_bg:"咩",group_nanashi_bg:"な",group_psp_bg:"な",group_asoul_bg:"魂",group_nori_bg:"苔",group_vwp_bg:"椿",group_chaos_bg:"潮",group_xuyan_bg:"虚",group_xuefeng_bg:"雪",group_Providence_bg:"罗"}}},n={};function t(i){var a=n[i];if(void 0!==a)return a.exports;var o=n[i]={exports:{}};return e[i](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{"use strict";t(388),t(651),t(352),t(333),t(365)})()})();