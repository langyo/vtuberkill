(()=>{var e={160:()=>{var e=window.vkCore,n=e.game,r=e.ui,t=e.get,a=(e.ai,e.lib),i=e._status;window.methods_filter={all:function(){return!0},buttonIncluded:function(e){return!(i.event.excludeButton&&i.event.excludeButton.contains(e))},filterButton:function(e){return!0},cardSavable:function(e,r,a){var i=n.checkMod(e,r,"unchanged","cardEnabled2",r);if("unchanged"!=i)return i;var o=n.checkMod(e,r,a,"unchanged","cardSavable",r);if("unchanged"!=o)return o;var u=t.info(e).savable;return"function"==typeof u&&(u=u(e,r,a)),u},filterTrigger:function(e,r,i,o){if(r._hookTrigger)for(var u=0;u<r._hookTrigger.length;u++){var c=a.skill[r._hookTrigger[u]].hookTrigger;if(c&&c.block&&c.block(e,r,i,o))return!1}var f=n.expandSkills(r.getSkills().concat(a.skill.global)),d=t.info(o);if((d.noHidden||"guozhan"!=t.mode())&&!f.contains(o))return!1;if(!d.trigger)return!1;var l,s=!1;for(var g in d.trigger)if(("global"==g||r==e[g])&&("string"==typeof(l=d.trigger[g])?l==i:l.contains(i))){s=!0;break}return!(!s||d.filter&&!d.filter(e,r,i)||e._notrigger.contains(r)&&!a.skill.global.contains(o)||"number"==typeof d.usable&&r.hasSkill("counttrigger")&&r.storage.counttrigger&&r.storage.counttrigger[o]>=d.usable||d.round&&r.storage[o+"_roundcount"]>0)},characterDisabled:function(e,n){if(!a.character[e]||a.character[e][4]&&a.character[e][4].contains("forbidai"))return!0;if(a.character[e][4]&&a.character[e][4].contains("unseen"))return!0;if(a.config.forbidai.contains(e))return!0;if(a.characterFilter[e]&&!a.characterFilter[e](t.mode()))return!0;if(i.connectMode){if(a.configOL.banned.contains(e)||a.connectBanned.contains(e))return!0;if(a.configOL.protect_beginner&&t.is.banForBeginner(e))return!0;var r=!1;if("guozhan"==a.configOL.mode?r=!0:!a.configOL.double_character||"identity"!=a.configOL.mode&&"stone"!=a.configOL.mode?a.configOL.double_character_jiange&&"versus"==a.configOL.mode&&"jiange"==i.mode&&(r=!0):r=!0,r&&a.config.forbiddouble.contains(e))return!0}else{if(a.config.banned.contains(e))return!0;if(r=!1,"guozhan"==t.mode()?r=!0:!t.config("double_character")||"identity"!=a.config.mode&&"stone"!=a.config.mode?t.config("double_character_jiange")&&"versus"==a.config.mode&&"jiange"==i.mode&&(r=!0):r=!0,r&&a.config.forbiddouble.contains(e))return!0}},characterDisabled2:function(e){var n=a.character[e];if(!n)return!0;if(n[4]){if(n[4].contains("boss"))return!0;if(n[4].contains("hiddenboss"))return!0;if(n[4].contains("minskin"))return!0;if(n[4].contains("unseen"))return!0;if(n[4].contains("forbidai")&&(!i.event.isMine||!i.event.isMine()))return!0;if(a.characterFilter[e]&&!a.characterFilter[e](t.mode()))return!0}return!1},skillDisabled:function(e){if(!a.translate[e]||!a.translate[e+"_info"])return!0;var n=a.skill[e];return!!(!n||n.unique||n.temp||n.sub||n.fixed||n.vanish)},cardEnabled:function(e,r,a){if(null==r&&(r=i.event.player),!r)return!1;var o=n.checkMod(e,r,"unchanged","cardEnabled2",r);if("unchanged"!=o)return o;if(e=t.autoViewAs(e,null,r),"forceEnable"===a)return"unchanged"==(u=n.checkMod(e,r,"unchanged","cardEnabled",r))||u;var u,c=t.info(e).enable;return c?"unchanged"!=(u=n.checkMod(e,r,"unchanged","cardEnabled",r))?u:"boolean"==typeof c?c:"function"==typeof c?c(e,r,a):void 0:void 0},cardRespondable:function(e,r,t){if("chooseToRespond"!=(t=t||i.event).name)return!0;var a=t.getParent().player;if(a&&a!=r&&a.hasSkillTag("norespond",!1,[e,r,t],!0))return!1;null==r&&(r=i.event.player);var o=n.checkMod(e,r,"unchanged","cardEnabled2",r);if("unchanged"!=o)return o;var u=n.checkMod(e,r,"unchanged","cardRespondable",r);return"unchanged"==u||u},cardUsable2:function(e,r,a){e=t.autoViewAs(e,null,r);var o=t.info(e);if("phaseUse"==o.updateUsable){if(a=a||i.event,r!=i.event.player)return!0;if("phaseUse"!=a.getParent().name)return!0;if(a.getParent().player!=r)return!0}var u=o.usable;return"function"==typeof u&&(u=u(e,r)),"number"!=typeof(u=n.checkMod(e,r,u,"cardUsable",r))||r.countUsed(e)<u},cardUsable:function(e,r,a){e=t.autoViewAs(e,null,r);var o=t.info(e);if(a=a||i.event,r!=i.event.player)return!0;if("phaseUse"==o.updateUsable){if("phaseUse"!=a.getParent().name)return!0;if(a.getParent().player!=r)return!0}a.addCount_extra=!0;var u=o.usable;return"function"==typeof u&&(u=u(e,r)),"number"!=typeof(u=n.checkMod(e,r,u,"cardUsable",r))||r.countUsed(e)<u||!!n.hasPlayer((function(t){return n.checkMod(e,r,t,!1,"cardUsableTarget",r)}))},cardDiscardable:function(e,r,t){"string"!=typeof(t=t||i.event)&&(t=t.getParent().name);var a=n.checkMod(e,r,t,"unchanged","cardDiscardable",r);return"unchanged"==a||a},canBeDiscarded:function(e,r,t,a){"string"!=typeof(a=a||i.event)&&(a=a.getParent().name);var o=n.checkMod(e,r,t,a,"unchanged","canBeDiscarded",t);return"unchanged"==o||o},canBeGained:function(e,r,t,a){"string"!=typeof(a=a||i.event)&&(a=a.getParent().name);var o=n.checkMod(e,r,t,a,"unchanged","canBeGained",t);return"unchanged"==o||o},cardAiIncluded:function(e){return!!i.event.isMine()||0==i.event._aiexclude.contains(e)},filterCard:function(e,r,o){var u,c=t.info(e);if(null==r&&(r=i.event.player),!a.filter.cardEnabled(e,r,o)||!a.filter.cardUsable(e,r,o))return!1;if(c.notarget)return!0;var f=t.copy(c.selectTarget);if(null==f){if(null==c.filterTarget)return!0;u=[1,1]}else"number"==typeof f?u=[f,f]:"select"==t.itemtype(f)?u=f:"function"==typeof f&&(u=f(e,r));if(u[1]||console.log(e,f,u),n.checkMod(e,r,u,"selectTarget",r),!u||-1!=u[1])return!0;var d=o&&o.filterTarget?o.filterTarget:a.filter.filterTarget;return n.hasPlayer((function(n){return d(e,r,n)}))},targetEnabledx:function(e,r,t){return!!e&&!(i.event.addCount_extra&&!a.filter.cardUsable2(e,r)&&!n.checkMod(e,r,t,!1,"cardUsableTarget",r))&&a.filter.targetEnabled.apply(this,arguments)},targetEnabled:function(e,a,i){if(!e)return!1;var o,u=t.info(e),c=u.filterTarget;return 0!=(o=n.checkMod(e,a,i,"unchanged","playerEnabled",a))&&(u.singleCard&&0!=r.selected.targets.length||"unchanged"==(o=n.checkMod(e,a,i,"unchanged","targetEnabled",i))?"boolean"==typeof c?c:"function"==typeof c?c(e,a,i):void 0:o)},targetEnabled2:function(e,r,i){if(a.filter.targetEnabled(e,r,i))return!0;if(!e)return!1;if(0==n.checkMod(e,r,i,"unchanged","playerEnabled",r))return!1;if(0==n.checkMod(e,r,i,"unchanged","targetEnabled",i))return!1;var o=t.info(e).modTarget;return"boolean"==typeof o?o:"function"==typeof o&&o(e,r,i)},targetEnabled3:function(e,n,r){if(!e)return!1;var a=t.info(e);return 1==a.filterTarget||!("function"!=typeof a.filterTarget||!a.filterTarget(e,n,r))||1==a.modTarget||!("function"!=typeof a.modTarget||!a.modTarget(e,n,r))},targetInRange:function(e,r,a){var i=n.checkMod(e,r,a,"unchanged","targetInRange",r),o=0;if("unchanged"!=i){if("boolean"==typeof i)return i;"number"==typeof i&&(o=i)}var u=t.info(e),c=u.range,f=u.outrange;if(null==c&&null==f)return!0;if(r.hasSkill("undist")||a.hasSkill("undist"))return!1;for(var d in c)if("attack"==d){if(r.inRange(a))return!0;if((s=r.getAttackRange())<=0)return!1;var l=t.distance(r,a)+o;if(c[d]<=l-s)return!1}else if(l=t.distance(r,a,d)+o,c[d]<l)return!1;for(var d in f)if("attack"==d){var s;if((s=r.getAttackRange())<=0)return!1;if(l=t.distance(r,a)+o,f[d]>l-s+1)return!1}else if(l=t.distance(r,a,d)+o,f[d]>l)return!1;return!0},filterTarget:function(e,n,r){return a.filter.targetEnabledx(e,n,r)&&a.filter.targetInRange(e,n,r)},filterTarget2:function(e,n,r){return a.filter.targetEnabled2(e,n,r)&&a.filter.targetInRange(e,n,r)},notMe:function(e,n,r){return n!=r},isMe:function(e,n,r){return n==r},attackFrom:function(e,n,r){return t.distance(n,r,"attack")<=1},globalFrom:function(e,n,r){return t.distance(n,r)<=1},selectCard:function(){return[1,1]},selectTarget:function(){var e=t.card(),r=t.player();if(null!=e){var a,i=t.copy(t.info(e).selectTarget);if(null==i){if(null==t.info(e).filterTarget)return[0,0];a=[1,1]}else"number"==typeof i?a=[i,i]:"select"==t.itemtype(i)?a=i:"function"==typeof i&&(a=i(e,r));return n.checkMod(e,r,a,"selectTarget",r),a}},judge:function(e,n,r){for(var t=r.getCards("j"),a=0;a<t.length;a++)if((t[a].viewAs||t[a].name)==e.name)return!1;return!0},autoRespondSha:function(){return!this.player.hasSha(!0)},autoRespondShan:function(){return!this.player.hasShan()},wuxieSwap:function(e){if("wuxie"==e.type){if(r.wuxie&&r.wuxie.classList.contains("glow"))return!0;if(r.tempnowuxie&&r.tempnowuxie.classList.contains("glow")&&e.state>0){var n=e.getTrigger();if(n){if(r.tempnowuxie._origin==n.parent.id)return!0}else if(r.tempnowuxie._origin==i.event.id2)return!0}if(!i.connectMode&&a.config.wuxie_self&&e.getParent().state){var t=e.getTrigger().parent;if(t.player.isUnderControl(!0)&&!t.player.hasSkillTag("noautowuxie")&&t.targets&&1==t.targets.length&&!t.noai)return!0}}}}},633:()=>{var e=window.vkCore,n=e.game,r=(e.ui,e.get),t=(e.ai,e.lib),a=e._status;window.methods_sort={character:function(e,n){var a=function(e){if(!t.character[e])return 50;var n=function(e){var n=r.is.double(e,!0);return n?n[0]:t.character[e][1]}(e);if("shen"==n)return-1;var a=r.groups();return a.contains(n)?a.indexOf(n):49},i=a(e)-a(n);if(0!=i)return i;var o=e,u=n;return-1!=e.indexOf("_")&&(e=e.slice(e.indexOf("_")+1)),-1!=n.indexOf("_")&&(n=n.slice(n.indexOf("_")+1)),e!=n?e>n?1:-1:o>u?1:-1},card:function(e,n){var t=function(e){var n=r.type(e);if(!n)return 10;if("basic"==n)return-1;if("trick"==n)return 0;if("delay"==n)return 1;if("equip"==n){var t=r.subtype(e);return t&&t.slice?1+parseInt(t.slice(5)||7):8.5}return 9},a=t(e)-t(n);if(0!=a)return a;var i=e,o=n;return-1!=e.indexOf("_")&&(e=e.slice(e.indexOf("_")+1)),-1!=n.indexOf("_")&&(n=n.slice(n.indexOf("_")+1)),e!=n?e>n?1:-1:i>o?1:-1},random:function(){return Math.random()-.5},seat:function(e,i){var o=t.tempSortSeat||a.event.player,u=r.distance(o,e,"absolute")-r.distance(o,i,"absolute");return u||(u=parseInt(e.dataset.position)-parseInt(i.dataset.position),o.side==n.me.side?u:-u)},position:function(e,n){return parseInt(e.dataset.position)-parseInt(n.dataset.position)},priority:function(e,n){var t=r.info(e[0]),a=r.info(n[0]);if(null==t.priority&&(t.priority=0),null==a.priority&&(a.priority=0),t.priority==a.priority){if(null==t.forced&&null==a.forced)return 0;if(t.forced&&a.forced)return 0;if(t.forced)return 1;if(a.forced)return-1}return a.priority-t.priority},number:function(e,n){return r.number(e)-r.number(n)},number2:function(e,n){return r.number(n)-r.number(e)},capt:function(e,n){var r=e,t=n;return-1!=r.indexOf("_")&&(r=r.slice(r.indexOf("_")+1)),-1!=t.indexOf("_")&&(t=t.slice(t.indexOf("_")+1)),r!=t?r>t?1:-1:e>n?1:-1},name:function(e,n){return e>n?1:e<n?-1:0}}}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return r.d(n,{a:n}),n},r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{"use strict";r(160),r(633)})()})();