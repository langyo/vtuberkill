(()=>{var e={160:()=>{{let{game:e,ui:n,get:r,ai:t,lib:a,_status:i}=window.vkCore;window.methods_filter={all:function(){return!0},buttonIncluded:function(e){return!(i.event.excludeButton&&i.event.excludeButton.contains(e))},filterButton:function(e){return!0},cardSavable:function(n,t,a){var i=e.checkMod(n,t,"unchanged","cardEnabled2",t);if("unchanged"!=i)return i;var o=e.checkMod(n,t,a,"unchanged","cardSavable",t);if("unchanged"!=o)return o;var u=r.info(n).savable;return"function"==typeof u&&(u=u(n,t,a)),u},filterTrigger:function(n,t,i,o){if(t._hookTrigger)for(let e=0;e<t._hookTrigger.length;e++){let r=a.skill[t._hookTrigger[e]].hookTrigger;if(r&&r.block&&r.block(n,t,i,o))return!1}var u=e.expandSkills(t.getSkills().concat(a.skill.global)),c=r.info(o);if((c.noHidden||"guozhan"!=r.mode())&&!u.contains(o))return!1;if(!c.trigger)return!1;var f,l=!1;for(let e in c.trigger)if(("global"==e||t==n[e])&&("string"==typeof(f=c.trigger[e])?f==i:f.contains(i))){l=!0;break}return!(!l||c.filter&&!c.filter(n,t,i)||n._notrigger.contains(t)&&!a.skill.global.contains(o)||"number"==typeof c.usable&&t.hasSkill("counttrigger")&&t.storage.counttrigger&&t.storage.counttrigger[o]>=c.usable||c.round&&t.storage[o+"_roundcount"]>0)},characterDisabled:function(e,n){if(!a.character[e]||a.character[e][4]&&a.character[e][4].contains("forbidai"))return!0;if(a.character[e][4]&&a.character[e][4].contains("unseen"))return!0;if(a.config.forbidai.contains(e))return!0;if(a.characterFilter[e]&&!a.characterFilter[e](r.mode()))return!0;if(i.connectMode){if(a.configOL.banned.contains(e)||a.connectBanned.contains(e))return!0;if(a.configOL.protect_beginner&&r.is.banForBeginner(e))return!0;var t=!1;if("guozhan"==a.configOL.mode?t=!0:!a.configOL.double_character||"identity"!=a.configOL.mode&&"stone"!=a.configOL.mode?a.configOL.double_character_jiange&&"versus"==a.configOL.mode&&"jiange"==i.mode&&(t=!0):t=!0,t&&a.config.forbiddouble.contains(e))return!0}else{if(a.config.banned.contains(e))return!0;if(t=!1,"guozhan"==r.mode()?t=!0:!r.config("double_character")||"identity"!=a.config.mode&&"stone"!=a.config.mode?r.config("double_character_jiange")&&"versus"==a.config.mode&&"jiange"==i.mode&&(t=!0):t=!0,t&&a.config.forbiddouble.contains(e))return!0}},characterDisabled2:function(e){var n=a.character[e];if(!n)return!0;if(n[4]){if(n[4].contains("boss"))return!0;if(n[4].contains("hiddenboss"))return!0;if(n[4].contains("minskin"))return!0;if(n[4].contains("unseen"))return!0;if(n[4].contains("forbidai")&&(!i.event.isMine||!i.event.isMine()))return!0;if(a.characterFilter[e]&&!a.characterFilter[e](r.mode()))return!0}return!1},skillDisabled:function(e){if(!a.translate[e]||!a.translate[e+"_info"])return!0;var n=a.skill[e];return!!(!n||n.unique||n.temp||n.sub||n.fixed||n.vanish)},cardEnabled:function(n,t,a){if(null==t&&(t=i.event.player),!t)return!1;var o=e.checkMod(n,t,"unchanged","cardEnabled2",t);if("unchanged"!=o)return o;if(n=r.autoViewAs(n,null,t),"forceEnable"===a)return"unchanged"==(u=e.checkMod(n,t,"unchanged","cardEnabled",t))||u;var u,c=r.info(n).enable;return c?"unchanged"!=(u=e.checkMod(n,t,"unchanged","cardEnabled",t))?u:"boolean"==typeof c?c:"function"==typeof c?c(n,t,a):void 0:void 0},cardRespondable:function(n,r,t){if("chooseToRespond"!=(t=t||i.event).name)return!0;var a=t.getParent().player;if(a&&a!=r&&a.hasSkillTag("norespond",!1,[n,r,t],!0))return!1;null==r&&(r=i.event.player);var o=e.checkMod(n,r,"unchanged","cardEnabled2",r);if("unchanged"!=o)return o;var u=e.checkMod(n,r,"unchanged","cardRespondable",r);return"unchanged"==u||u},cardUsable2:function(n,t,a){n=r.autoViewAs(n,null,t);var o=r.info(n);if("phaseUse"==o.updateUsable){if(a=a||i.event,t!=i.event.player)return!0;if("phaseUse"!=a.getParent().name)return!0;if(a.getParent().player!=t)return!0}var u=o.usable;return"function"==typeof u&&(u=u(n,t)),"number"!=typeof(u=e.checkMod(n,t,u,"cardUsable",t))||t.countUsed(n)<u},cardUsable:function(n,t,a){n=r.autoViewAs(n,null,t);var o=r.info(n);if(a=a||i.event,t!=i.event.player)return!0;if("phaseUse"==o.updateUsable){if("phaseUse"!=a.getParent().name)return!0;if(a.getParent().player!=t)return!0}a.addCount_extra=!0;var u=o.usable;return"function"==typeof u&&(u=u(n,t)),"number"!=typeof(u=e.checkMod(n,t,u,"cardUsable",t))||t.countUsed(n)<u||!!e.hasPlayer((function(r){return e.checkMod(n,t,r,!1,"cardUsableTarget",t)}))},cardDiscardable:function(n,r,t){"string"!=typeof(t=t||i.event)&&(t=t.getParent().name);var a=e.checkMod(n,r,t,"unchanged","cardDiscardable",r);return"unchanged"==a||a},canBeDiscarded:function(n,r,t,a){"string"!=typeof(a=a||i.event)&&(a=a.getParent().name);var o=e.checkMod(n,r,t,a,"unchanged","canBeDiscarded",t);return"unchanged"==o||o},canBeGained:function(n,r,t,a){"string"!=typeof(a=a||i.event)&&(a=a.getParent().name);var o=e.checkMod(n,r,t,a,"unchanged","canBeGained",t);return"unchanged"==o||o},cardAiIncluded:function(e){return!!i.event.isMine()||0==i.event._aiexclude.contains(e)},filterCard:function(n,t,o){var u,c=r.info(n);if(null==t&&(t=i.event.player),!a.filter.cardEnabled(n,t,o)||!a.filter.cardUsable(n,t,o))return!1;if(c.notarget)return!0;var f=r.copy(c.selectTarget);if(null==f){if(null==c.filterTarget)return!0;u=[1,1]}else"number"==typeof f?u=[f,f]:"select"==r.itemtype(f)?u=f:"function"==typeof f&&(u=f(n,t));if(u[1]||console.log(n,f,u),e.checkMod(n,t,u,"selectTarget",t),!u||-1!=u[1])return!0;var l=o&&o.filterTarget?o.filterTarget:a.filter.filterTarget;return e.hasPlayer((function(e){return l(n,t,e)}))},targetEnabledx:function(n,r,t){return!!n&&!(i.event.addCount_extra&&!a.filter.cardUsable2(n,r)&&!e.checkMod(n,r,t,!1,"cardUsableTarget",r))&&a.filter.targetEnabled.apply(this,arguments)},targetEnabled:function(t,a,i){if(!t)return!1;var o,u=r.info(t),c=u.filterTarget;return 0!=(o=e.checkMod(t,a,i,"unchanged","playerEnabled",a))&&(u.singleCard&&0!=n.selected.targets.length||"unchanged"==(o=e.checkMod(t,a,i,"unchanged","targetEnabled",i))?"boolean"==typeof c?c:"function"==typeof c?c(t,a,i):void 0:o)},targetEnabled2:function(n,t,i){if(a.filter.targetEnabled(n,t,i))return!0;if(!n)return!1;if(0==e.checkMod(n,t,i,"unchanged","playerEnabled",t))return!1;if(0==e.checkMod(n,t,i,"unchanged","targetEnabled",i))return!1;var o=r.info(n).modTarget;return"boolean"==typeof o?o:"function"==typeof o&&o(n,t,i)},targetEnabled3:function(e,n,t){if(!e)return!1;var a=r.info(e);return 1==a.filterTarget||!("function"!=typeof a.filterTarget||!a.filterTarget(e,n,t))||1==a.modTarget||!("function"!=typeof a.modTarget||!a.modTarget(e,n,t))},targetInRange:function(n,t,a){var i=e.checkMod(n,t,a,"unchanged","targetInRange",t),o=0;if("unchanged"!=i){if("boolean"==typeof i)return i;"number"==typeof i&&(o=i)}var u=r.info(n),c=u.range,f=u.outrange;if(null==c&&null==f)return!0;if(t.hasSkill("undist")||a.hasSkill("undist"))return!1;for(var l in c)if("attack"==l){if(t.inRange(a))return!0;if((s=t.getAttackRange())<=0)return!1;var d=r.distance(t,a)+o;if(c[l]<=d-s)return!1}else if(d=r.distance(t,a,l)+o,c[l]<d)return!1;for(var l in f)if("attack"==l){var s;if((s=t.getAttackRange())<=0)return!1;if(d=r.distance(t,a)+o,f[l]>d-s+1)return!1}else if(d=r.distance(t,a,l)+o,f[l]>d)return!1;return!0},filterTarget:function(e,n,r){return a.filter.targetEnabledx(e,n,r)&&a.filter.targetInRange(e,n,r)},filterTarget2:function(e,n,r){return a.filter.targetEnabled2(e,n,r)&&a.filter.targetInRange(e,n,r)},notMe:function(e,n,r){return n!=r},isMe:function(e,n,r){return n==r},attackFrom:function(e,n,t){return r.distance(n,t,"attack")<=1},globalFrom:function(e,n,t){return r.distance(n,t)<=1},selectCard:function(){return[1,1]},selectTarget:function(){var n=r.card(),t=r.player();if(null!=n){var a,i=r.copy(r.info(n).selectTarget);if(null==i){if(null==r.info(n).filterTarget)return[0,0];a=[1,1]}else"number"==typeof i?a=[i,i]:"select"==r.itemtype(i)?a=i:"function"==typeof i&&(a=i(n,t));return e.checkMod(n,t,a,"selectTarget",t),a}},judge:function(e,n,r){for(var t=r.getCards("j"),a=0;a<t.length;a++)if((t[a].viewAs||t[a].name)==e.name)return!1;return!0},autoRespondSha:function(){return!this.player.hasSha(!0)},autoRespondShan:function(){return!this.player.hasShan()},wuxieSwap:function(e){if("wuxie"==e.type){if(n.wuxie&&n.wuxie.classList.contains("glow"))return!0;if(n.tempnowuxie&&n.tempnowuxie.classList.contains("glow")&&e.state>0){var r=e.getTrigger();if(r){if(n.tempnowuxie._origin==r.parent.id)return!0}else if(n.tempnowuxie._origin==i.event.id2)return!0}if(!i.connectMode&&a.config.wuxie_self&&e.getParent().state){var t=e.getTrigger().parent;if(t.player.isUnderControl(!0)&&!t.player.hasSkillTag("noautowuxie")&&t.targets&&1==t.targets.length&&!t.noai)return!0}}}}}},633:()=>{{let{game:e,ui:n,get:r,ai:t,lib:a,_status:i}=window.vkCore;window.methods_sort={character:function(e,n){var t=function(e){if(!a.character[e])return 50;var n=function(e){var n=r.is.double(e,!0);return n?n[0]:a.character[e][1]}(e);if("shen"==n)return-1;var t=r.groups();return t.contains(n)?t.indexOf(n):49},i=t(e)-t(n);if(0!=i)return i;var o=e,u=n;return-1!=e.indexOf("_")&&(e=e.slice(e.indexOf("_")+1)),-1!=n.indexOf("_")&&(n=n.slice(n.indexOf("_")+1)),e!=n?e>n?1:-1:o>u?1:-1},card:function(e,n){var t=function(e){var n=r.type(e);if(!n)return 10;if("basic"==n)return-1;if("trick"==n)return 0;if("delay"==n)return 1;if("equip"==n){var t=r.subtype(e);return t&&t.slice?1+parseInt(t.slice(5)||7):8.5}return 9},a=t(e)-t(n);if(0!=a)return a;var i=e,o=n;return-1!=e.indexOf("_")&&(e=e.slice(e.indexOf("_")+1)),-1!=n.indexOf("_")&&(n=n.slice(n.indexOf("_")+1)),e!=n?e>n?1:-1:i>o?1:-1},random:function(){return Math.random()-.5},seat:function(n,t){var o=a.tempSortSeat||i.event.player,u=r.distance(o,n,"absolute")-r.distance(o,t,"absolute");return u||(u=parseInt(n.dataset.position)-parseInt(t.dataset.position),o.side==e.me.side?u:-u)},position:function(e,n){return parseInt(e.dataset.position)-parseInt(n.dataset.position)},priority:function(e,n){var t=r.info(e[0]),a=r.info(n[0]);if(null==t.priority&&(t.priority=0),null==a.priority&&(a.priority=0),t.priority==a.priority){if(null==t.forced&&null==a.forced)return 0;if(t.forced&&a.forced)return 0;if(t.forced)return 1;if(a.forced)return-1}return a.priority-t.priority},number:function(e,n){return r.number(e)-r.number(n)},number2:function(e,n){return r.number(n)-r.number(e)},capt:function(e,n){var r=e,t=n;return-1!=r.indexOf("_")&&(r=r.slice(r.indexOf("_")+1)),-1!=t.indexOf("_")&&(t=t.slice(t.indexOf("_")+1)),r!=t?r>t?1:-1:e>n?1:-1},name:function(e,n){return e>n?1:e<n?-1:0}}}}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return r.d(n,{a:n}),n},r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{"use strict";r(160),r(633)})()})();